<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ä½ çœŸçš„æ‡‚æ²Ÿé€šå—</title>
      <link href="/article/ds272702.html"/>
      <url>/article/ds272702.html</url>
      
        <content type="html"><![CDATA[<p>å‰è¨€ï¼šä½ çœŸçš„æ‡‚æ²Ÿé€šå—ï¼Ÿæˆ–è®¸ä½ è‡ªå·±éƒ½æ²¡æœ‰æ„è¯†åˆ°ä½ å¯èƒ½ä¸€ç›´åœ¨æ— å½¢ä¸­è¿›è¡Œç€â€æš´åŠ›æ²Ÿé€šâ€ã€‚æ¯”å¦‚ï¼Œåœ¨å®¶åº­ä¸­å¯¹å­©å­çš„è´£å¤‡ã€åœ¨èŒåœºä¸­å…¬å¼€æ‰¹è¯„åŒäº‹çš„é”™è¯¯ã€åœ¨ç¤¾äº¤åœºåˆä¸­å˜²ç¬‘ä»–äººçš„è§‚ç‚¹ï¼Œä»¥åŠåœ¨ç”Ÿæ´»ä¸­å¿½è§†çˆ±äººç­‰è¡Œä¸ºéƒ½åœ¨æ— å½¢ä¸­ä¼¤å®³ç€åˆ«äººã€‚ä»Šå¤©åŒ—ç§‹æˆ‘å°†å¸®åŠ©ä½ ä»¬å­¦ä¹ å¦‚ä½•åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­é¿å…â€æš´åŠ›æ²Ÿé€šâ€ï¼Œå»ºç«‹å¥åº·å’Œè°çš„æ²Ÿé€šå…³ç³»ã€‚</p><hr><h2 id="ä»€ä¹ˆæ˜¯æš´åŠ›æ²Ÿé€š"><a href="#ä»€ä¹ˆæ˜¯æš´åŠ›æ²Ÿé€š" class="headerlink" title="ä»€ä¹ˆæ˜¯æš´åŠ›æ²Ÿé€š"></a>ä»€ä¹ˆæ˜¯æš´åŠ›æ²Ÿé€š</h2><p>æš´åŠ›æ²Ÿé€šæŒ‡çš„æ˜¯ä¸€ç§ä»¥æ”»å‡»ã€æŒ‡è´£ã€æ‰¹è¯„ä¸ºä¸»çš„æ²Ÿé€šæ–¹å¼ï¼Œé€šå¸¸ä¼´éšç€å¯¹ä»–äººçš„è¯„åˆ¤å’Œæ ‡ç­¾åŒ–ã€‚è¿™ç§æ–¹å¼å¸¸å¯¼è‡´å†²çªå‡çº§ï¼Œä½¿åŒæ–¹é™·å…¥é˜²å¾¡å’Œæ”»å‡»çš„å¾ªç¯ï¼Œæ¯”å¦‚ï¼šé¢†å¯¼å› ä¸ºä¸‹å±è¿Ÿåˆ°è€Œåœ¨å›¢é˜Ÿä¼šè®®ä¸Šå¤§å£°è´£å¤‡å¯¹æ–¹ï¼Œæ‰¹è¯„ä»–ä¸è´Ÿè´£ä»»ã€‚è¿™ç§æ”»å‡»æ€§çš„è¨€è¾å®¹æ˜“å¯¼è‡´ä¸‹å±æ„Ÿåˆ°å—ä¼¤ï¼Œå¹¶ä¸èƒ½ä¿ƒä½¿ä»–æ”¹æ­£è¡Œä¸ºã€‚</p><h2 id="æš´åŠ›æ²Ÿé€šçš„å±å®³æ˜¯ä»€ä¹ˆ"><a href="#æš´åŠ›æ²Ÿé€šçš„å±å®³æ˜¯ä»€ä¹ˆ" class="headerlink" title="æš´åŠ›æ²Ÿé€šçš„å±å®³æ˜¯ä»€ä¹ˆ"></a>æš´åŠ›æ²Ÿé€šçš„å±å®³æ˜¯ä»€ä¹ˆ</h2><ul><li><strong>ç ´åå…³ç³»ï¼š</strong> æš´åŠ›æ²Ÿé€šå®¹æ˜“å¯¼è‡´äººé™…å…³ç³»ç´§å¼ ï¼Œç ´åä¿¡ä»»å’Œç†è§£ï¼Œæ¯”å¦‚ï¼šåœ¨å®¶åº­ä¸­ï¼Œä¸€å¯¹å¤«å¦»å› ä¸ºç”Ÿæ´»çäº‹å‘ç”Ÿäº†äº‰æ‰§ã€‚å…¶ä¸­ä¸€æ–¹åªçŸ¥é“è´£å¤‡å¯¹æ–¹ä¸è´Ÿè´£ä»»è€Œä¸å»å•†è®¨å¦‚ä½•å»è§£å†³é—®é¢˜ã€‚è¿™æ ·çš„æ”»å‡»æ€§è¨€è¾å¯èƒ½å°±ä¼šå¯¼è‡´å¯¹æ–¹æ„Ÿåˆ°å—ä¼¤å’Œè¢«è¯¯è§£ï¼Œé€æ¸ç§¯ç´¯èµ·æ¥ï¼Œæœ€ç»ˆå°±ä¼šç ´åæ‰ä»–ä»¬ä¹‹é—´çš„äº²å¯†å…³ç³»å’Œä¿¡ä»»ã€‚</li><li><strong>å†²çªå‡çº§ï¼š</strong> è¨€è¯­æ”»å‡»å¾€å¾€å®¹æ˜“æ¿€æ€’å¯¹æ–¹ï¼Œä»è€Œä½¿å†²çªå‡çº§è€Œéè§£å†³é—®é¢˜ï¼Œæ¯”å¦‚ï¼šåœ¨å›¢é˜Ÿä¸­ï¼Œä¸¤ä¸ªåŒäº‹åœ¨é¡¹ç›®ä¸­äº§ç”Ÿäº†åˆ†æ­§ã€‚å…¶ä¸­ä¸€äººå› ä¸ºè§‰å¾—æ–¹æ¡ˆå†™çš„å¾ˆå·®ï¼Œå¤§å£°æŒ‡è´£å¯¹æ–¹æ— èƒ½å¹¶è¯´å¯¹æ–¹æå‡ºçš„æ–¹æ¡ˆå’Œç‹—å±ä¸€æ ·è€Œä¸æ˜¯è€å¿ƒçš„å»è®²è§£ä»¥ä¸‹è‡ªå·±çš„çœ‹æ³•å’Œè§è§£ã€‚è¿™ç§çš„è¨€è®ºå°±å¾ˆå®¹æ˜“å¼•èµ·å¯¹æ–¹çš„æ„¤æ€’å’Œé˜²å¾¡ï¼Œä½¿å¾—åŸæœ¬å¯ä»¥é€šè¿‡è®¨è®ºè§£å†³çš„é—®é¢˜å˜æˆæ›´åŠ æ¿€çƒˆçš„äº‰è®ºï¼Œå†²çªè¿›ä¸€æ­¥å‡çº§ï¼Œè€Œéå¾—åˆ°æœ‰æ•ˆè§£å†³ã€‚</li><li><strong>æƒ…ç»ªå›°æ‰°ï¼š</strong> æ¥å—æš´åŠ›æ²Ÿé€šçš„ä¸€æ–¹å¯èƒ½å—åˆ°ä¼¤å®³ï¼Œäº§ç”Ÿè´Ÿé¢æƒ…ç»ªï¼Œæ¯”å¦‚ï¼šåœ¨å­¦æ ¡ä¸­ï¼Œä¸€ä½å­¦ç”Ÿåœ¨ç­ä¸ŠçŠ¯äº†é”™è¯¯ï¼Œè€å¸ˆç›´æ¥å…¬å¼€æ‰¹è¯„ç„¶ååŒå­¦ä»¬ä¹Ÿç”¨å˜²è®½å’ŒæŒ‡è´£çš„è¨€è¯­è¿›è¡Œæ”»å‡»ã€‚è¿™æ ·çš„è¡Œä¸ºå°±å¾ˆå®¹æ˜“è®©è¿™ä¸ªå­¦ç”Ÿæ„Ÿåˆ°ç¾æ„§ã€æ²®ä¸§ï¼Œç”šè‡³å¯èƒ½å½±å“åˆ°ä»–çš„è‡ªå°Šå¿ƒå’Œæƒ…ç»ªå¥åº·ä»è€Œè®©ä»–é™·å…¥æƒ…ç»ªå›°æ‰°ä¸­ï¼Œä¸€ç”Ÿéƒ½éš¾ä»¥æ‘†è„±è´Ÿé¢æƒ…æ„Ÿçš„å½±å“ã€‚</li></ul><h2 id="å¦‚ä½•æœ‰æ•ˆè¿›è¡Œéæš´åŠ›æ²Ÿé€š"><a href="#å¦‚ä½•æœ‰æ•ˆè¿›è¡Œéæš´åŠ›æ²Ÿé€š" class="headerlink" title="å¦‚ä½•æœ‰æ•ˆè¿›è¡Œéæš´åŠ›æ²Ÿé€š"></a>å¦‚ä½•æœ‰æ•ˆè¿›è¡Œéæš´åŠ›æ²Ÿé€š</h2><p>éæš´åŠ›æ²Ÿé€šçš„æ ¸å¿ƒæ˜¯å€¾å¬ä»–äººå¹¶è¡¨è¾¾è‡ªå·±çš„éœ€æ±‚ã€‚å…·ä½“åŒ…æ‹¬ä»¥ä¸‹å››ç‚¹ï¼š</p><ul><li><strong>å­¦ä¼šè§‚å¯Ÿï¼š</strong> ä»¥å®¢è§‚ã€æ— è¯„ä»·çš„æ–¹å¼æè¿°è§‚å¯Ÿåˆ°çš„è¡Œä¸ºï¼Œé¿å…é™„åŠ è¯„ä»·æˆ–è§£é‡Šï¼Œæ¯”å¦‚ï¼šä½œä¸ºé¢†å¯¼çš„ä½ åœ¨åŠå…¬å®¤é‡Œå¯èƒ½è§‚å¯Ÿåˆ°ä¸‹å±æ€»æ˜¯åœ¨ä¼šè®®ä¸­æ™šåˆ°ã€‚è¿™ä¸ªæ—¶å€™ä½ åº”è¯¥è¯´ï¼šâ€œæˆ‘æ³¨æ„åˆ°åœ¨è¿‡å»çš„å‡ æ¬¡ä¼šè®®ä¸­ï¼Œä½ éƒ½åœ¨å¼€å§‹æ—¶æ™šåˆ°äº†ååˆ†é’Ÿã€‚â€</li><li><strong>è¯´å‡ºæ„Ÿå—ï¼š</strong> è¡¨è¾¾ä¸ªäººçš„æƒ…æ„Ÿï¼Œå¼ºè°ƒå¯¹ç‰¹å®šæƒ…å¢ƒçš„æƒ…æ„Ÿååº”ï¼Œè€Œä¸æ˜¯æŒ‡è´£å¯¹æ–¹ï¼Œæ¯”å¦‚ï¼šç”±äºä¸‹å±çš„è¿Ÿåˆ°ï¼Œä½ å¯èƒ½æ„Ÿåˆ°æ°”æ„¤å’Œä¸è€çƒ¦ã€‚ä½†æ˜¯è¿™ä¸ªæ—¶å€™ä½ å¯ä»¥è¿™æ ·è¯´ï¼šâ€œå½“æˆ‘çœ‹åˆ°ä½ åœ¨ä¼šè®®ä¸Šç»å¸¸è¿Ÿåˆ°æ—¶ï¼Œæˆ‘æ„Ÿåˆ°æœ‰ç‚¹ä¸æ»¡ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ—¶é—´æœ‰è¢«æµªè´¹æ‰ã€‚â€</li><li><strong>æ˜ç¡®éœ€æ±‚ï¼š</strong> å¼•å…¥å¯¹è‡ªå·±å’Œä»–äººçš„åŸºæœ¬éœ€æ±‚çš„è®¨è®ºï¼Œè¯†åˆ«åœ¨ç‰¹å®šæƒ…å¢ƒä¸­æ½œåœ¨çš„éœ€æ±‚ï¼Œæ¯”å¦‚ï¼šä½ çš„éœ€æ±‚æ˜¯å¯¹å›¢é˜Ÿæ•ˆç‡çš„å…³æ³¨ã€‚æ‰€ä»¥åœ¨é¢å¯¹ä¸‹å±è¿Ÿåˆ°æ—¶ä½ å¯ä»¥è¯´ï¼šâ€œæˆ‘å¯¹å›¢é˜Ÿçš„æ•ˆç‡ä¸€ç›´æ˜¯æ¯”è¾ƒå…³æ³¨çš„ï¼Œæˆ‘å¸Œæœ›æˆ‘ä»¬ä»¥åèƒ½å¤Ÿæ›´å¥½åœ°åˆ©ç”¨ä¼šè®®æ—¶é—´ã€‚â€</li><li><strong>è¡¨è¾¾è¯·æ±‚ï¼š</strong> æå‡ºæ˜ç¡®ã€å¯è¡Œçš„è¯·æ±‚ï¼Œè€Œéè¦æ±‚ï¼Œä»¥æ»¡è¶³å¯¹æ–¹å’Œè‡ªå·±çš„éœ€æ±‚ï¼Œæ¯”å¦‚ï¼šä¸ºäº†æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œä½ å¯ä»¥æå‡ºä¸€ä¸ªæ˜ç¡®çš„è¯·æ±‚ï¼šâ€œä½ ä»¥åæ˜¯å¦èƒ½å¤Ÿåœ¨ä¼šè®®å¼€å§‹æ—¶å‡†æ—¶åˆ°è¾¾å‘¢ï¼Œå› ä¸ºè¿™æ ·çš„è¯æˆ‘ä»¬å¯ä»¥æ›´æœ‰æ•ˆåœ°åˆ©ç”¨æ—¶é—´ï¼Œç¡®ä¿å›¢é˜Ÿçš„é¡ºåˆ©è¿ä½œï¼Œâ€è¿™ä¸ªè¯·æ±‚æ˜¯å…·ä½“ã€å¯è¡Œçš„ï¼Œæœ‰åŠ©äºè§£å†³é—®é¢˜è€ŒéæŒ‡è´£ä»–äººã€‚</li></ul><h2 id="éæš´åŠ›æ²Ÿé€šçš„å¥½å¤„æ˜¯ä»€ä¹ˆ"><a href="#éæš´åŠ›æ²Ÿé€šçš„å¥½å¤„æ˜¯ä»€ä¹ˆ" class="headerlink" title="éæš´åŠ›æ²Ÿé€šçš„å¥½å¤„æ˜¯ä»€ä¹ˆ"></a>éæš´åŠ›æ²Ÿé€šçš„å¥½å¤„æ˜¯ä»€ä¹ˆ</h2><ul><li><strong>å»ºç«‹æ·±å…¥çš„è¿æ¥ï¼š</strong> éæš´åŠ›æ²Ÿé€šæœ‰åŠ©äºå»ºç«‹æ›´æ·±å±‚æ¬¡çš„æƒ…æ„Ÿè”ç³»ï¼Œæé«˜ç†è§£å’Œå…±é¸£ï¼Œæ¯”å¦‚ï¼šä¸€å¯¹å¤«å¦»é¢ä¸´ç€å·¥ä½œå‹åŠ›å’Œå®¶åº­è´£ä»»ï¼Œå¯¼è‡´å½¼æ­¤æ²Ÿé€šå¼€å§‹ä¸ç•…ã€‚è¿™ä¸ªæ—¶å€™ä»–ä»¬å¼€å§‹åˆ†äº«å½¼æ­¤çš„è§‚ç‚¹ã€æ„Ÿå—å’Œéœ€æ±‚ï¼Œè€Œä¸æ˜¯ç›¸äº’è´£å¤‡ã€‚é€è¿‡è¿™æ ·çš„æ²Ÿé€šæ–¹å¼ï¼Œä»–ä»¬å¯ä»¥å»ºç«‹æ›´æ·±å±‚æ¬¡çš„æƒ…æ„Ÿè”ç³»ï¼Œæ›´å¥½åœ°ç†è§£å¯¹æ–¹æ‰€é¢ä¸´çš„æŒ‘æˆ˜ä»è€Œå¢è¿›å½¼æ­¤çš„å…±é¸£ã€‚</li><li><strong>è§£å†³å†²çªï¼š</strong> é€šè¿‡å…³æ³¨éœ€æ±‚è€ŒéæŒ‡è´£ï¼Œéæš´åŠ›æ²Ÿé€šæœ‰åŠ©äºè§£å†³çŸ›ç›¾å’Œå†²çªï¼Œæ¯”å¦‚ï¼šåœ¨å›¢é˜Ÿä¸­ï¼Œä¸¤ä½æˆå‘˜å¯¹äºé¡¹ç›®æ–¹å‘äº§ç”Ÿåˆ†æ­§ã€‚ä»–ä»¬å­¦ä¼šè¡¨è¾¾å„è‡ªçš„è§‚ç‚¹ã€æ„Ÿå—å’Œéœ€æ±‚ã€‚è€Œä¸æ˜¯å»äº’ç›¸æŒ‡è´£ï¼Œä»–ä»¬å¼€å§‹é‡è§†å½¼æ­¤çš„æƒ³æ³•ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä»–ä»¬å¾—ä»¥è§£å†³äº†çŸ›ç›¾ï¼Œä»è€Œæ‰¾åˆ°äº†ä¸€ä¸ªæ—¢æ»¡è¶³é¡¹ç›®ç›®æ ‡åˆæ»¡è¶³ä¸ªäººéœ€æ±‚çš„å…±åŒæ–¹æ¡ˆã€‚</li><li><strong>ä¿ƒè¿›åˆä½œï¼š</strong> å¼ºè°ƒæ»¡è¶³å„æ–¹éœ€æ±‚çš„å…±åŒåŠªåŠ›ï¼Œæ¨åŠ¨åˆä½œå’Œåä½œï¼Œæ¯”å¦‚ï¼šåœ¨å…¬å¸ä¸­ï¼Œä¸¤ä¸ªéƒ¨é—¨åˆä½œå¼€å‘æ–°äº§å“ã€‚å„éƒ¨é—¨æ˜ç¡®è¡¨è¾¾äº†å½¼æ­¤çš„æœŸæœ›å’Œéœ€æ±‚ï¼Œè€Œéå°†é—®é¢˜å½’å’äºå¯¹æ–¹ã€‚è¿™ç§åˆä½œæ–¹å¼å¼ºè°ƒæ»¡è¶³å„æ–¹çš„éœ€æ±‚ï¼Œé¼“åŠ±å…±åŒåŠªåŠ›ï¼Œä»è€Œæœ€ç»ˆæ¨åŠ¨äº†é¡¹ç›®çš„æˆåŠŸå®æ–½ï¼Œä¿ƒè¿›äº†è·¨éƒ¨é—¨çš„åˆä½œå’Œåä½œã€‚</li></ul><p>æ€»ç»“ï¼šéæš´åŠ›æ²Ÿé€šæå€¡åœ¨äº¤æµä¸­å…³æ³¨æƒ…æ„Ÿã€éœ€æ±‚å’Œå…±åŒç†è§£ï¼Œä»¥å»ºç«‹æ›´åŠ å¥åº·ã€å¹³ç­‰å’Œç§¯æçš„äººé™…å…³ç³»ã€‚é€šè¿‡é‡‡ç”¨è¿™ç§æ²Ÿé€šæ–¹å¼ï¼Œä¸ªä½“å¯ä»¥æ›´å¥½åœ°ç†è§£å½¼æ­¤ï¼Œç¼“è§£å†²çªï¼Œä¿ƒè¿›å…±åŒæˆé•¿ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è¯»ä¹¦æ€»ç»“ </category>
          
          <category> ååˆ†é’Ÿè¯»å®Œä¸€æœ¬ä¹¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯»ä¹¦æ€»ç»“ </tag>
            
            <tag> ååˆ†é’Ÿè¯»å®Œä¸€æœ¬ä¹¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦é˜¿ç±³å·´ç»è¥çœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†</title>
      <link href="/article/ds272701.html"/>
      <url>/article/ds272701.html</url>
      
        <content type="html"><![CDATA[<p>å‰è¨€ï¼šç¨»ç››å’Œå¤«çš„é˜¿ç±³å·´ç»è¥æ˜¯ä¸€ç§ä»¥å°ç»„ä¸ºåŸºç¡€çš„ç®¡ç†æ–¹æ³•ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯å°†ä¼ä¸šåˆ’åˆ†ä¸ºè®¸å¤šå°çš„è‡ªä¸»è¿è¥çš„å•ä½ï¼Œæ¯ä¸ªå•ä½è¢«ç§°ä¸ºé˜¿ç±³å·´ã€‚è¿™ç¯‡æ–‡ç« å°†å¸¦ä½ å¿«é€Ÿäº†è§£ä»€ä¹ˆäº‹é˜¿ç±³å·´ç»è¥ä»¥åŠå®ƒçš„ç‰¹ç‚¹å’Œå¥½å¤„æ˜¯ä»€ä¹ˆã€‚</p><hr><h2 id="ä»€ä¹ˆæ˜¯é˜¿ç±³å·´ç»è¥"><a href="#ä»€ä¹ˆæ˜¯é˜¿ç±³å·´ç»è¥" class="headerlink" title="ä»€ä¹ˆæ˜¯é˜¿ç±³å·´ç»è¥"></a>ä»€ä¹ˆæ˜¯é˜¿ç±³å·´ç»è¥</h2><p>é˜¿ç±³å·´ç»è¥æ˜¯ç”±æ—¥æœ¬ä¼ä¸šå®¶ç¨»ç››å’Œå¤«åˆ›ç«‹çš„ä¸€ç§ç®¡ç†æ–¹æ³•ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†ä¼ä¸šåˆ’åˆ†ä¸ºè®¸å¤šå°çš„è‡ªä¸»è¿è¥çš„å•ä½ï¼Œæ¯ä¸ªå•ä½è¢«ç§°ä¸ºé˜¿ç±³å·´ã€‚æ¯ä¸ªé˜¿ç±³å·´éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åˆ©æ¶¦ä¸­å¿ƒï¼Œæœ‰è‡ªå·±çš„ç›®æ ‡ã€å†³ç­–æƒå’Œè´£ä»»ã€‚</p><h2 id="é˜¿ç±³å·´ç»è¥çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆ"><a href="#é˜¿ç±³å·´ç»è¥çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆ" class="headerlink" title="é˜¿ç±³å·´ç»è¥çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆ"></a>é˜¿ç±³å·´ç»è¥çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆ</h2><ul><li>åˆ†æƒä¸è‡ªä¸»æ€§ï¼šé˜¿ç±³å·´ç»è¥å¼ºè°ƒåˆ†æƒå’Œè‡ªä¸»æ€§ï¼Œæ¯ä¸ªé˜¿ç±³å·´éƒ½æœ‰è‡ªå·±çš„å†³ç­–æƒå’Œè´£ä»»ï¼Œå¯ä»¥ç‹¬ç«‹åšå‡ºå†³ç­–ã€‚</li><li>ç›®æ ‡å¯¼å‘ï¼šæ¯ä¸ªé˜¿ç±³å·´éƒ½æœ‰æ˜ç¡®çš„ç›ˆåˆ©ç›®æ ‡ï¼Œå¹¶ä¸ºå®ç°è¿™äº›ç›®æ ‡è€ŒåŠªåŠ›å·¥ä½œã€‚</li><li>åˆä½œä¸ç«äº‰ï¼šé˜¿ç±³å·´ä¹‹é—´å¯ä»¥åˆä½œå…±äº«èµ„æºï¼Œå®ç°æ•´ä½“åˆ©ç›Šæœ€å¤§åŒ–ã€‚åŒæ—¶ï¼Œä»–ä»¬ä¹Ÿå­˜åœ¨ç«äº‰å…³ç³»ï¼Œæ¿€å‘åˆ›é€ åŠ›å’Œè¿½æ±‚æ›´å¥½çš„ä¸šç»©ã€‚</li><li>åˆ©æ¶¦ä¸ºä¸­å¿ƒï¼šé˜¿ç±³å·´çš„ä¸šç»©é€šè¿‡åˆ©æ¶¦æ¥è¡¡é‡ï¼Œæ¯ä¸ªé˜¿ç±³å·´éƒ½è¿½æ±‚åˆ©æ¶¦æœ€å¤§åŒ–ã€‚</li></ul><h2 id="ä½¿ç”¨é˜¿ç±³å·´ç»è¥çš„å¥½å¤„æ˜¯ä»€ä¹ˆ"><a href="#ä½¿ç”¨é˜¿ç±³å·´ç»è¥çš„å¥½å¤„æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä½¿ç”¨é˜¿ç±³å·´ç»è¥çš„å¥½å¤„æ˜¯ä»€ä¹ˆ"></a>ä½¿ç”¨é˜¿ç±³å·´ç»è¥çš„å¥½å¤„æ˜¯ä»€ä¹ˆ</h2><ul><li>æé«˜çµæ´»æ€§å’Œåˆ›æ–°æ€§ï¼šé˜¿ç±³å·´ç»è¥å°†ä¼ä¸šåˆ’åˆ†ä¸ºå°çš„è‡ªä¸»è¿è¥å•ä½ï¼Œä½¿å¾—å†³ç­–æ›´åŠ è¿…é€Ÿå’Œçµæ´»ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°åº”å¯¹å¸‚åœºå˜åŒ–å’Œåˆ›æ–°ã€‚</li><li>æ¿€å‘å‘˜å·¥ç§¯ææ€§ï¼šé˜¿ç±³å·´ç»è¥èµ‹äºˆæ¯ä¸ªé˜¿ç±³å·´æˆå‘˜å†³ç­–æƒå’Œè´£ä»»ï¼Œæ¿€åŠ±ä¸ªäººå’Œå›¢é˜Ÿçš„ç§¯ææ€§å’Œåˆ›é€ åŠ›ï¼Œæé«˜å·¥ä½œåŠ¨åŠ›ã€‚</li><li>æ•ˆç‡æå‡å’Œèµ„æºä¼˜åŒ–ï¼šé˜¿ç±³å·´ç»è¥é€šè¿‡åˆä½œå’Œç«äº‰çš„æœºåˆ¶ï¼Œå®ç°èµ„æºçš„ä¼˜åŒ–åˆ†é…å’Œåˆ©ç”¨ï¼Œæé«˜æ•´ä½“æ•ˆç‡å’Œä¸šç»©è¡¨ç°ã€‚</li><li>å¢å¼ºåˆ©æ¶¦æ„è¯†ï¼šé˜¿ç±³å·´ç»è¥å°†åˆ©æ¶¦çœ‹ä½œæ˜¯è¡¡é‡ä¸šç»©çš„å…³é”®æŒ‡æ ‡ï¼Œä½¿æ¯ä¸ªé˜¿ç±³å·´éƒ½å…³æ³¨åˆ©æ¶¦ï¼Œæ¿€åŠ±ä»–ä»¬è¿½æ±‚ç›ˆåˆ©èƒ½åŠ›çš„æå‡ã€‚</li></ul><h2 id="ä¼ä¸šå®è¡Œé˜¿ç±³å·´ç»è¥ç®¡ç†æ¨¡å¼éœ€æå‰çŸ¥æ™“çš„â€œæ½œåœ¨éš¾é¢˜â€"><a href="#ä¼ä¸šå®è¡Œé˜¿ç±³å·´ç»è¥ç®¡ç†æ¨¡å¼éœ€æå‰çŸ¥æ™“çš„â€œæ½œåœ¨éš¾é¢˜â€" class="headerlink" title="ä¼ä¸šå®è¡Œé˜¿ç±³å·´ç»è¥ç®¡ç†æ¨¡å¼éœ€æå‰çŸ¥æ™“çš„â€œæ½œåœ¨éš¾é¢˜â€"></a>ä¼ä¸šå®è¡Œé˜¿ç±³å·´ç»è¥ç®¡ç†æ¨¡å¼éœ€æå‰çŸ¥æ™“çš„â€œæ½œåœ¨éš¾é¢˜â€</h2><ul><li>é˜¿ç±³å·´ç»è¥éœ€è¦ä¸€ç§å¼€æ”¾ã€åˆä½œå’Œè‡ªä¸»çš„æ–‡åŒ–æ°›å›´ã€‚ä½†ä¼ä¸šå¯èƒ½å­˜åœ¨ä¼ ç»Ÿçš„å±‚çº§ç®¡ç†æ–‡åŒ–ï¼Œå‘˜å·¥å¯èƒ½ä¹ æƒ¯äºé›†ä¸­å†³ç­–å’ŒæŒ‡ä»¤å¼ç®¡ç†ã€‚å› æ­¤ï¼Œéœ€è¦è¿›è¡Œæ–‡åŒ–è½¬å˜ï¼Œå»ºç«‹å›¢é˜Ÿåˆä½œã€è‡ªä¸»å†³ç­–å’Œè´£ä»»æ‰¿æ‹…çš„æ°›å›´ã€‚</li><li>é˜¿ç±³å·´ç»è¥ä¸­ï¼Œæ¯ä¸ªé˜¿ç±³å·´éƒ½æœ‰è‡ªå·±çš„ç›ˆåˆ©ç›®æ ‡ã€‚ä½†è¿™äº›ç›®æ ‡å¿…é¡»ä¸æ•´ä½“ç»„ç»‡çš„ç›®æ ‡ç›¸åè°ƒã€‚ä¼ä¸šéœ€è¦ç¡®ä¿å„ä¸ªé˜¿ç±³å·´çš„ç›®æ ‡ä¹‹é—´ç›¸äº’é…åˆï¼Œä¸ä¼šå‡ºç°ç›¸äº’ç«äº‰æˆ–æŸå®³æ•´ä½“åˆ©ç›Šçš„æƒ…å†µã€‚</li><li>é˜¿ç±³å·´ç»è¥çš„ç»©æ•ˆè¯„ä¼°æ˜¯åŸºäºåˆ©æ¶¦æ¥è¡¡é‡ã€‚ä½†è¿™å¯èƒ½ä¼šå¼•èµ·å‘˜å·¥ä¹‹é—´çš„ä¸å…¬å¹³æ„Ÿè§‰ï¼Œå› ä¸ºä¸€äº›é˜¿ç±³å·´å¯èƒ½é¢ä¸´æ›´æœ‰åˆ©å¯å›¾çš„ä¸šåŠ¡é¢†åŸŸã€‚ä¼ä¸šéœ€è¦ç¡®ä¿å…¬æ­£çš„ç»©æ•ˆè¯„ä¼°æœºåˆ¶ï¼ŒåŒæ—¶æ¿€åŠ±å’Œå¥–åŠ±å…¨å‘˜çš„åŠªåŠ›å’Œè´¡çŒ®ã€‚</li><li>é˜¿ç±³å·´ä¹‹é—´çš„åˆä½œå’Œç«äº‰å…³ç³»æ˜¯é˜¿ç±³å·´ç»è¥çš„æ ¸å¿ƒã€‚ä½†å¦‚æœåˆä½œå’Œç«äº‰å…³ç³»ä¸å¾—å½“ï¼Œå¯èƒ½ä¼šå¯¼è‡´èµ„æºåˆ†é…ä¸å‡è¡¡ã€ä¿¡æ¯ä¸å¯¹ç­‰ç­‰é—®é¢˜ã€‚ä¼ä¸šéœ€è¦å»ºç«‹é€æ˜ã€å…¬å¹³å’Œæœ‰æ•ˆçš„åˆä½œå’Œç«äº‰æœºåˆ¶ï¼Œä»¥ç¡®ä¿æ•´ä½“åˆ©ç›Šæœ€å¤§åŒ–ã€‚</li><li>é˜¿ç±³å·´ç»è¥éœ€è¦ä¸åŒé˜¿ç±³å·´ä¹‹é—´çš„è‰¯å¥½æ²Ÿé€šå’Œåè°ƒã€‚å¦‚æœæ²Ÿé€šä¸ç•…æˆ–åè°ƒä¸å½“ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¿¡æ¯ä¸å¯¹ç§°ã€èµ„æºæµªè´¹ç­‰é—®é¢˜ã€‚ä¼ä¸šéœ€è¦å»ºç«‹æœ‰æ•ˆçš„æ²Ÿé€šæ¸ é“å’Œåè°ƒæœºåˆ¶ï¼Œç¡®ä¿ä¿¡æ¯ç•…é€šå’Œèµ„æºçš„åˆç†é…ç½®ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> è¯»ä¹¦æ€»ç»“ </category>
          
          <category> ååˆ†é’Ÿè¯»å®Œä¸€æœ¬ä¹¦ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¯»ä¹¦æ€»ç»“ </tag>
            
            <tag> ååˆ†é’Ÿè¯»å®Œä¸€æœ¬ä¹¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•çœ‹å¾…çŸ¥è¯†ä»˜è´¹</title>
      <link href="/article/rz272701.html"/>
      <url>/article/rz272701.html</url>
      
        <content type="html"><![CDATA[<p>çŸ¥è¯†ä»˜è´¹çš„ç›®çš„æ˜¯ä¸ºäº†æ‰“å¼€ä½ æŸä¸€æ–¹é¢çš„çŸ¥è¯†å’Œè®¤çŸ¥ã€‚å…·ä½“ä½ èƒ½å­¦åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Œåšåˆ°ä»€ä¹ˆç¨‹åº¦ï¼Œåšå®Œè¿˜èƒ½ä¸èƒ½ç»§ç»­åšæŒï¼Œè¿™æ‰æ˜¯å†³å®šä½ èƒ½å¦èµšåˆ°é’±çš„å…³é”®ã€‚åˆ«äººå†å‰å®³ï¼Œä½ æ²¡æœ‰æ‰§è¡ŒåŠ›ï¼Œä¸èƒ½åšæŒä¸‹å»ï¼Œé‚£æ ·ä»€ä¹ˆéƒ½åšä¸å¥½ã€‚è¿™ä¸ªæœ€åŸºç¡€çš„è®¤çŸ¥ä½ ä»¬æ˜¯åº”è¯¥è¦æ˜ç™½çš„ã€‚</p><p>å¦‚æœä½ èŠ±é’±äº†ï¼Œæœ€åæ²¡æœ‰èµšåˆ°é’±ï¼Œå°±å»æ€ªåˆ«äººå‰²ä½ éŸ­èœï¼Œé‚£ä½ ä»¥åå°±åˆ«å»å°è¯•ä»»ä½•çš„çŸ¥è¯†ä»˜è´¹äº†ã€‚å…¨é è‡ªå·±ä¸€ä¸ªäººæ‰“æ‹¼å’Œæ‘¸ç´¢å°±å®Œäº†ã€‚ä½†æ˜¯å®é™…æƒ…å†µæ˜¯å…‰é ä½ è‡ªå·±æ˜¯ä¸è¡Œçš„ã€‚ä½ æ‰ä¼šæƒ³å»ä¹°çŸ¥è¯†ä»˜è´¹å»å­¦ä¹ ï¼Œå¯¹ä¸å¯¹ï¼Ÿä½ ä¹°çŸ¥è¯†ä»˜è´¹å……å®è‡ªå·±æ˜¯ä¸ºäº†æœ‰ä¸€å¤©ï¼Œä½ å¯ä»¥é è‡ªå·±çš„ä»·å€¼å»æŒ£é’±ã€‚ä½ å­¦åˆ°äº†çŸ¥è¯†ï¼Œæå‡äº†è®¤çŸ¥ï¼Œè¿™æ‰æ˜¯ä½ æœ€å¤§çš„æ”¶è·ã€‚æœ‰äº†çŸ¥è¯†ï¼Œä½ è¿˜æ€•èµšä¸åˆ°é’±å—ï¼Ÿé™¤éä½ å¾ˆæ‡’ï¼Œæˆ–è€…ä½ åªæƒ³èµšå¿«é’±ï¼Œèµšé‚£äº›æŠ•æœºå€’æŠŠçš„é’±ã€‚</p><p>å¾ˆå¤šäººéƒ½æƒ³ç€æ‰¾ä¸ªå¤§ä½¬æŠ¥ä¸ªçŸ¥è¯†ä»˜è´¹ï¼Œç„¶åç«‹é©¬å°±èƒ½åƒä»–ä¸€æ ·èµšåˆ°å¤§é’±ã€‚è¦æ˜¯è¿™æ ·çš„è¯ï¼Œä½ è¿˜ä¸å¦‚ç›´æ¥å»åšæ¢¦ï¼Œä¸å¯èƒ½çš„ã€‚è°è¦æ˜¯æœ‰è¿™èƒ½è€ï¼Œä½ èµ¶ç´§å‘Šè¯‰æˆ‘ï¼Œæˆ‘ç«‹é©¬æ‰¾ä»–å­¦å»ï¼Œä¸ç®¡èŠ±å¤šå°‘é’±éƒ½è¡Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> è®¤çŸ¥ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¤çŸ¥ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŒ—ç§‹é—²é±¼å¹²è´§èµ„æ–™ğŸ“’</title>
      <link href="/article/xy272701.html"/>
      <url>/article/xy272701.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, å¯†ç é”™è¯¯, è¯·é“¾æ¥åŒ—ç§‹åæŸ¥çœ‹" data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <script id="hbeData" type="hbeData" data-hmacdigest="9f9ebee76f3263f77f957b4e42b795599b5062f00790afcc6437502437a46cdb">90ff52e793c3a928817a83913e92355d4b64d3a5b3f6c175372583591336813f8806b939e8cb40fc1b53edab86ef20d6464dcc6eb6d44587c70b51f8cb8890440ba9b89443427524324afff1f01d6543ad90136688b21310e860ef10850bfb61f1f4990b47982145d40fa84a63baaa5e1fe005086a9989dee3c3575471537c76d7fb62124625a56b063cdf09fb03f1f200b038080d483a09b0de2d556f6166dc288049204559b6ca4a9a01e78a4c47f82eb1a67873b86d228107f9691bac366a90b1d50226985af0f16ac200b015160b400c832245c0cc9d2c916dc98eb13e33d38a11a1fe41fd47d37cc8e4273ff5907be35c3d13068a723d3e08ed6362aa0f350c0600d9a3b95897971207e90c62b0370827ca9f88596c79c5ee01256785d23b24b8c5d3527568d750865c971925f0db21145950a145626d9b59446a796ffd062734c048f5494645a836ba547e7e7b2cffaf4c865d60cd712b1eb69c3d3f693ed1beb8d88be150567a5a023cc292cbc341771f403757d97144db83490faaef495db95714c6ba5c08b53767d4557ca1af82aba5232b2ace2cc9e68febdb994fcbbf61ecc744346063b2d60a47def04af22dbd6c514dfab6b71eeab05d8fe7a935910968c6656ae48b0506c08ef138082429f7aa8ffe63d2de834e48eb674a8bc090066b744778f159447e8c2de694d585785b3755a6da2c195d37bf835cf4d20a09cce50cf94fda40a9fcc300082f2fe3be1863034f6c6301d2f6c39deba655ea22e1d263006e44fa11c9c38e684ce2c99a819e4de1784c2dc3057bb8d53f3ed83e2500331d27ff706255d4c3112145f54957a4a2c9914cf8f478a20d5443bc7ab0a1498524d8939a8b04d0b120a2531164a1cbbdaa528eb0c7ebae9dc2f9a6d430d1cba5c9c1a74c538cc989429e1c3b279cf194b6c041d32bc6a6523a1a42a0943c0d9920c76673662cdf2bb4f693bd8cae10bf03ea6ca34a22f6dbb2cafde3017e28705760016cfbb06a76778d2e1f128ac60c7fb8ca208f746d5dcc43230f219931ae554e36d902d8a3f96755e27b98ed7ff060753d213bbc1a77200c134c79dc9462713dfd6f6d0377f672ee61305c05bfb9ceadaf0cd2aa4f9d3ca7962e7f10420c14530baf5e150e37f399437f3005fbae2c4cfa404caa6627383a93065185b0fd6fc4fc3dad87e68cfb37e40814cc4e57a05a50c56ed36f1ffe10cf52756a85afa28f794b2a72e3c37c2e77c06d4ce62fc011116723451bce8b45f9f03a48d28390199abe50f91914f68e3252afc22c24c8da5bb589c1bf64c1c6aaa654f64ad7ae35391b0c115661a5a5aa71418c44724ddb0693086eced625bcc16baf1fd3ece9bc8eb7e1cfda24524e913a82675c36e5971079698459374eceaaf05bd97e2bc37419b6283169e2e6189afb402848796fef60414a4a1b2dc3cfe1a9f5933c84102180e4a653d453e5815cdcb73d6e4931ad05dc4b6400a2e4e83b0abddbf7de341fe1fa945a8caef9abc8ded7a40c061845edefc0a8c69f3932e1adde171a3b7023489297dfc839871c860e15acccd945477ce329513447c28acd52fcc13a70ed62a24f27b1e1b081621d56006fd41660e3b0d841826d5690823628de994333720c50c41354db68469a9f0dfd5b5b5b0f490df4480882bac53dfca2611e7a706a16228af829e9c7d204ba2bc076a90810f3e15e5e8e8fd06efb44502e4dffd6fe041fc9a1b7c091f0c67aed675f30cbfe6fed200d4070126f5bde961d05631107aeaead16363a4c65286094d43d44d3fcdfb595fac7ac62c974d342a5d93df57ef88c98d5ba3e096ec560e55aa3f333a9c161105e41cd3b0f1007c1474b22cdb9d6217a31c9606046ee0916db61d7ad180d8d5643efc6d0ac4d2381872bf4c457dfc532d9c4a8f80fbd3bc3409db314f39557c23d5642339bb42c2fba9127ef255d10357ef34f043a95dc78aded57967f182d086e7824c949e6c2fac5eeca3aaa2a58f90fc5e44fb9e4a7b16fd58fffb6646423eccd02b06edb787ea3131654e8757d66cf9c9c042b338bea13c76554c4f7f651f26eaa52c62cd2540bff768618e47efb0fa92ae9c3923eabfa52d062b98eead988216a43c303c1bdf8f9fc7c16f3243e458f234254bed5a95386d8eac6ad9f207e2585c9b93483f00026f6b7e4fd4ac4e543d01164c1b58c19dd916c3a65da076a3b08ff4c4f0f5353f447f396e1136c9569abc3c1fe9db6b92b9ff61672b0f3c470549896069f48e4b9107d9ef6d5308d097ae020e20803c64af0063ce03bd8ea4dc043684e3481375ca1984a1ecfe44b886b0fcd234c35b7e17b65bde6a21f03af20ed1aec576ec9e9b5bd2997961d7ff0747ccae2194d7ef443c5a13e28aeab26cd967ed3d68effdf5309fa81d537b89d4490a5901dff45a8dcc22a76ba947b2725bafa34e2718a07d794c0bbb0897e630c66fec85e85d8559bacf64d5d0bb9b27454b8ca727befe04aa1e9096eaae2395135d40733473b245ee5226c115cc80227d9bc4cbb409ae14c3fc5406b0b4e8ccc248ceec31b54a6f09aa11f8b43f8b40c94488dc32fb2fafd3ca9045124c0cf15c419afb30264e5f3c31762dfc63a07fbeb87ada77a7db13a407364a3a2ba78ff16829b98ed658312a33e90c14a3119513b35f131df44978135718f2c54c20614cfa145c31b4132ec72769b659edc018ba39a418cb5ba54faf4cb8b23286a41d0f0ff245c5afe67493ebaed585fad4443f7a079367427b45b7bf0b80e632042cc24a3851ccbdbe93172228c9610319400212b198b35281ea7a6deac08be12f2b27221fb1f1d50dfdadff8c1a00ec1d948a56a51343e7ae9cfa9c674b83ff2768057ca97b6bfa866b59d3553ca888dd9d89344075b80514f7af5894bad703adb8aa6ba9bdea92bf29b4f4404957b4b98bfe9f6ea6c931e63ba3fa2f9adb4a49335fc8b381f88d4bee3ffb1be95f85fe2bdef822b3e2f6096bc81ac6be32daea2f9f7626a9c6830c14c12f75678a9543354a765ec8196d926975e2abfdd4fe12633ef2e6795ef42f4647e155fc99e89933a4400d7372ccbef3c87de4b6bb943cfae15dc26c3b94134be421d039b3fddc284478fb82003b9004de8e0633980bf8a6bdf7d2b7d0b2c52a0b2e3ab7a15fbce89941a849980e7942af0efb63fa2a8b65da3d1995f6aafaaeac99ede07b78f393ce0f58f6e741675e5293f0f7c3ec2f89c6ac4cf6df28aa7c1944941113ef2a1329379575376d350d67331572251044dc2396ad88ac0803820a20dfe576467185436a69d829335a8332e96ae74dc72b8960328acb405a6269fda32d44f2106f1036ee3fb00ae768e00c1c6407e82cbb2860f9e8a714e01cf715fa5b568b4fce57c36c8cc9b016823cc62ef676740ee5b035112a593a4312e458b8ba821144024f9caf2ed3deb68cd733727d8df3eabdd96f45a6a28ffc2e6558fa9cd954d611720a46a2193cf8237fed3462b843ee17aa565d5463092ff31d4a4e2c9f76d8fb60b9e5a377e1774150d51c17bd0b5875d83768f1c8381da94884daa326d6c555d75b63f9412531fcc0ebe1b94cd9fec2dcc1b9de6e09282faf719af13426ed45d773e82ff0fdd828c69c6381daec3894ee026dcc3d1656ee5fb2ad1be40c9f1a318cef2ac308233006e42b74e08c6f6d8c45a8d127bbff9daaf9d6bce238f403e413bd7db7442067b02f0bf42841a14ba914a44925e851d7b51a1bf8419ce642c8b6e8cfa045458349ddd6fd065da287e91c79e2e8203a9b4d1db4834f46aae029cd6f9070686046870f108f14e4524a9f0f4cb33b2d00af89fd8d21b583b232be965f88fd993bb5ea20320c0d1f3cc05122c091fe7995b3832651f307f45ae2a872f83d6bc3454f06261526a6d8281ec1bb6dc61fbb348f16cc8f348fc33c5d99bc5e754a4c54fcb12056316e800ef13e4d8887c8867cceb264d1ce20a84e60a06ce91ca0c58f7d7380e98c5cfc5ceb233477c5f9c3f477ddab63f6e2b7b265a4d9455e9c9b4db36d8c5076553d6b83c9c365db2ef515972ef53ce23aa056e77ba572463b18381ef3a8f6589367e4270b773043479965b1474436490ab40f33bbc1defbd157ec579e9862956295e82660529aad51e1210536fd5d08ad879dd83622e60abef9069f8bddb508baa0d676dc7cec87561ec5c3fd7ebb753f4f9b565cba4384cdab467ae08c395fb15e708ef151c49cb407b7895fb6f2ba3f149add65913e67fbf20f9243ab53b32d8ab2cb4395dd8817e7daf731bc46a0aaa00910a529d04239ea2bdd3afca7c428b885f193b9b538c813368b3ab91163191d6051e5f060234459cdd8e396fee3500c9f0551f507b42cc61f78814149eeefdaa3fc3349778ea46b0300d2ccc0e2bdbc13540ecdfba6928be34f328ed1b0d0eb63fc622ff2253424209409a125a35304fc11d9c4f90e62d6e81477d9bba8fc4baafb718df3f8c8cc6fe6c9bef161539c58dd23f6f149990ce10206870fcada2a5c7aab749c9dee18e78712b9898ad4dfba65a8fb5b14bceadfad0db72bdee85101c344f6ff676d74410b50b4e52850a9e95664c63aa7fe0514571c82ec484236b2a3b0d156977820b15accb36f02072cc7a6c528b84b3823d0d41f8263e1372f33cf69da3014976576087ec2531001301635528b27b9c3a2c0dea39398cd14a25120cfb1736e5ceb4aaaaf5cfce98efd949745bfef31a517c691473819310910e93b143379aa5e138a78a502923af2cea85461964840bd18a583436b5ab946a5d15793b43e4260f45b4b9c839559fef8f2f465433924200cad98800f97641d7b92d1e2b1dafac92a8005b2154bbffa0c263681439de797abe783da8c39a1a7a3bc20056ae88a9cacea24c96577be9241b928ece10cba49af097e5bc3829c4af9a8b7bc9b3b436c8e37d56bc8ed41c76e62f40ab93df695166cae9fb77823f7180660a8bf42d3d6a39bcfc600a59cfec82b05082054c484519708a978a5e75abc8f60da9b54e2174939f321208fc87a82f9c77a7852ea7426c47e4910d68b20fc8753eca72099d6d2f8a5b3777668db77aaf7affc84f8dd6ba8ca909a3da808a46924d3f9b8114685c41c750c35268dbdcdf760994c61fb0f7589cab761861e47572bfd1b10a4f702c6ba8c9494808be8f83c6f939140573017c7b0ac7aa4fe04a225860de45d3430047d60ee3c9a900b2aca6e172ac7c00dd74cfd660e70a2fbeafb4826c9a7ceb4c5c17f61944a30715c5040c163e8d3017ca55635089840ade9834f8ff18b345effa069b7db2fdc5f99e829c5a2a997910ffd5418878856c3c906912c2743b7f19d48755b0b67b0f324b59e6bcce0bad78a415505cf730155e90a9cbfbce5f2eeeb8fce3d865187e2af1d350fe7fb551d5e7639a048c9d6dfb0237876368a892ef414f153c737398a84a8c3ec90703e921bee51341a2587119a1ea64a12bbf5da9aefd6e985b52e1b96f8e69d437ac2abca4e01017f3c29ceb5b8b2010a73310e92856eb30ae81b018ca3e15bbd8760f6463e28aa5fbfc39b6de89c4dee22cceccbcb981a2f95ae009974d8e213597d13cd40a6dcfadab4a5404dd25d550f586482429da0828f8f89889958de133d6f243a239da22efdddf79866b23ed901e54eabc0de0a2ba74e2d0d7f39d8265e714b5d875ff61b435db7d5b5076f48028924371b7c4f3dac95b0231668a2f019de65c51095239626af0af9d5b9b31d422e5366afaa697ded2485e12b06abf05b7abf2fea58a3b882168d7a0624890f7a79fcd7243dc5911c821cfce9d5eb8c6348c21aa580aa1dfb3ac01db783851d46a384fa7129ba24e22d555fe5509f48d0e0fdb6bf9e7d07fb6d1f9707f984b131095f769cfd52268922dd7159ab05936f60bcd84088bbbf98f4668871a180545f9fe231412b5e26eb1c2b1bdfca7a7ccf6c635c662086d8bccdf70217415ca30b3162f141759d39e4330996afcd819dd9a72b1d04c46a45c47e9f959a2b9ced1eacacd3500d070961454835599fa0df0e9ead03165d759cfe061894552231910365d411881f77054e75e9315ca7cb1ea58ec83b80838443505af445d4ea0df9a7889994d7051415a44f29105b9308525e6cb21cbc38c35aee56121782d8e48fa8a00e01127acd385bfdd5f5c579147dd25255b7c3b6e15b897deedacd124d5bada09b925b6a457f6cfe9a49233f56e7a50f9eea28dc2ba1c7ec35fa377910b30db8cb1b32ab26cd186685ce2b01e779af542b9ad603fbfadc7b2bc39c63bd3d4271d568b504689b65ead641d6cf9c986528463e4653520a95b140a837b8870782b93bde5839bc8ab072f0bf7c14ca3d8e6f900c7de9f40eef48246c05a9f42b10bd83e58937be9d5a2fee39351973dc2fa784297cc14b161ee9ee105133563897423706a53c55d2b550e662c933b418f7cb065627106880a1c91b46e0b315c98668193404099703063e70c72da2b5c1a17b7c9c02158d67b6b05f3550b8de95f8f65811af3658be6f2d1d91c2b1825c28deed23ee0c32a88b3685ccd63057476f4b009c5cfb0177d8ae1de1d1395ff56b9ba2e7d0ee996872c9f9bd12be83daeaf7977a2fdf1ffaf8609d9b72ccea89a92c362b51759a14ddc708353df11593407829400d6207d199b4f679d86e54c21cc7eb1ecc835e6c5c2c05a3127768bad431eef0c112dcab4a42d158c7f09b41461972a7d5888626a21ae789d02bda445788f4cec135ff9cdee3551a25240bdba0ae1d71c1e60b4644f69873572310e403f1518c43b7231e1624ed09e7694de1df55ca242edc00c253a0690c41d4ef32cd32726b89b4eb05cb750b06f437a89bac92e3a15b929fe2d3a1210900c3db1be3918afbbb75a729e46a40de5ff96e2ac1cc1baceb1bfb102a984fcce2f40769f9de2789302edd7848e196ae3b72653d26c6c2125e49a1b39a02a0116e4341f30e4f6b9d471b8aa4e8baa97d0b30a4a1e19488e950573482f02e470312e77e9810475388929cc6402f4f7f87a2a87d1afc3b4b55fdf9b5f8c11feeb33bc6886a76fe2787bf1d5f2e29a082d7e8bb84270e94470578a5ed4610f23b776aadb95652821cb86e7f50591b2efc5ef6e587762ffe5515332000faf06a055852ed029c31bf80c25bdb32146ac9403174234e96df689d5919cc856fa8baf77029fd6844c76b7e7c62a5a4e73be54c6dd9a8efc265de75df517628af352676e5d73e69d452cc022d198b65e3137f617da87073d6ed185efbbff0d80b1f02acd4212b712ef00ca5703979665610e09241e11b1d7e914bf95a7e4adf99e57e63f848886fda226c4bd27b31aeed5dfa027da75c742affe25fcdf9d306cd40c3c8e76fc05e2cafc61cb850554e75234bcba4ddd92098cb64882e7c345203a100423658802f3f07b39f7f4795aee788aae3920bbfab8d5edb22fc526012bd2c93fadd7a0eead300e91b129a4ba3a91e67b61d1f54c3bb34588113a7d8511ecd5916e5acda2fbab6097cb20b4f4a1d5754e1b3787c16b048ce2a2599a3b9dd43e3aaf3647adaa4865c63b99f2f9cc9eff696af88f922d84c97e6fe48ffafa1e6dd1c53af181b6c08475992c9d39e1705ee1d9f7cc6cb136ccc27fed981b8d9517dbda24c12592ccd61162d9c737fe42570d43771aca4209b700f0bd7406aa6e1793c4faec6b7fdda5e329dffefddea854693ceffd07f883dc7b0279318d88a7fa60708e7143b25715755d7f7b74fe2c46844060258e799464c20a590abf6452321476da0b6e60434406e98ad7a7a5d5ae12c6555a1acfc2dfe7dcb6b346828ceea9d464fc59eabc02564cef2d2c14f0d6d2d4b38fcba0ddae1fc8a33bccbaf4a263b925b4dd7a3eea789f2963684cf941fe64cc15b726f7731380aa2a20ac9e3658176836b44e943deeacd196bbf01b4e7f1a45a84b1e4f2c3c08e14e156920f177091a2669f9a1d5ca31898995ce573d780f45c6d039d4b6cf841f131b9c806c157f04c818d1763bfe4ed6076aa80b335a9d2b514030654890ce82955b123fc9d9723bd46849fcb03d5036bf2da0b855794513eeb67e1ac4c31408e615826b28c9f8ce3e3ca4f4c2996fafa42a8718737d3cbb8f21e903ce54a0fa7942f53b798717cf58f55ce68e423bdfd28463352e64aea41c0044fbd7ddee5cdac494d639bda2f6104b363141142050da6ba7f7ea610f93bcc23266013e3247777d8cdf4e985aba051d2b5a2618c3cb9f4f899429749b59b88b6ac3a0aa3643574909570687d8529592eefdfb9c7381485c3b95f22b2980f2b576d268344a9c2f2b4977d6dd551979fda546ca92c2e72fa2c9c539e869374aec8d6d66cab9b3c69ba74a78d21ef93af30c3bdca8ba65bf7113ce4d543dc1278038ff170aba9a3f3bfed66af8eafa654766ff9cc0747848d5ab1cdff4574ac5e2e380b2a3de6359155882d4267da07db54f3b537e6018dc3e48153d8099bcd0465b1ffa242088804b28997d307bab8be385e105091dee981bfbb0b21a2696d41008666da3b5c12e9f2eeb93d074c184e46ad25611d4fa191f2c29081b7e2450c389162795590bc06681e02f734b243aa13ee4c9f8361e9e2e56ae7cb29be28737175a6a649613f7a000f1990d60cba7817b0610388d86c418698b07e92969d8aff30d9ecd995e67d8cd10cef3983205216151a892e2dd109f3959e0d5e1dbbe3a327041dc0c7eb87503aa067562f22d33701137c2e280541a0d5b74a31acbeeec243659b36a72e11ab7a1944360f0e0d7a569f42b97b2b466b25f1184ae8e326d0b5a630d1d9397e3e0006bb88d701028693283f74fed7c45f39a3295955e05ed1e08bcbad77e10640e395bab2c540e8b0f3f3c09b37f796df6c6bd55b1de8874961c415117b7f8c089e661e0526a82d2f63dcc48a62389085fc9189775c06a51fda6499153672e0261580edfd0c121cb0a309315b3469ae45f9a54dcf6ece0b0f5cfbda6d6db082d900ee1501bd02f564e4633b0d2e0c1e5e3972794bea38ae1e4e56bd12ff7b4d88277d42785ee560eb3492bda388cfce564374649a9d36e9ea082f6b9d59b8a308bd4903f8f92c3dbef6823d459759534235f4276853a6ed9df55845bc89af353f956348d997f813d02a91bd3fc4090bd39bc48accd202b227bb0a0be4cf8de0059826bccc159edc3b2d1a9ef1d412ac97096447fcd2c09f8d58a938c1dffe3886b51db9528d4513e2047e4a13c2d58e7aabb266452aa8d91ecea2dc4a373f969b49f97afd622b976984d20b0134dac96ea88859eb98fd086ad2b7be5ec344519eddaa725b9b347d071ceca9646b0e9b6a8a48a9f9584ecbe2a7e9cbcb11db60915197184adf0e16f920135f4776e1febd623270296b53b54941a6a6e25c953a706da0a436abb3248878841c12bed592ff7ee13c4a0b82b1dadac2aad50925780626c68e1ab6ac124415793384c71392e1e3a9ca44cf91fad3123b2471fbe8e2c59f638980fcd0bef00e8f42b864d9dc66a3923ff98594d9f14f97ef0769f2a208f4cf5bfa083020be378d9af0b2790eb923d0322766891e97f9cd907ad9239c43f92b507ebe7b9c17568141ab9dda6ad0978b55c9d34f4797fa135bb8f93297ffdf0af1c01c6e497fb42ff1656eb4be691283e818c46950a32e86801dd1ebb9c5120cffa132bac1de2e7fe5ca02bb584ca23ae36db3226211b38491b23c05a3f60a4c66671a674b9074728b57860a990145905d1cfc58408a6b4758d827352854858abeaf92c0ec132c817513c633e22b3f54c150a5cc83fc9072ef0c105c3fc2de083e70106e98f61e30dffab6df13925cb0b2f2068bd5741a43028443221cae7ef33bc5310b5d38bfcaa2f7e33d2bd64a7848d1d58dd69f77c7f42c3e3c6b330a077b3b44e22f8fd5eb2ed6175450a30a6105ebfb0b3f864e7522871fe4dc75416bf5cd882e660125da9b62e3199300cced8b8e29f7f9af8e01b2e4ec95de01b3d5b4184f3c91892a990628f1384b9e84e442658dac21b63c95a8eb6a286bc5895c5093f411db78d9b2559dbf77fb2466f8fcb26490054cb500283201548e502a499fcec4023b5b67d4f1151be3dfb652a8fcdf5933cb4cee8f8644d256b149be7a962e67245735bbe0111e8225d2ca46fdd6e70d6a22c64d3ad2a265bb4b811d4fe22230dda08c07f8394d14bf9d5e7e8f5acb855e1a35b725418976931a1af26984330873c079aee069035df5c6a034dcd56372235fb5bb1e02cf1ca0f5f011fae24d7cc21c4a4cfe1abd5f6258e4762137a956d1a919219a213b6cc76640ceaa48b2af30102d2c523bbf7f6341e390d56bf07c421216d441eb006c7204cf901656f5d176a7239690d6cd47362f0e3fc49bfc499598a0c99f9d3e080e88eedcf5f784154d1196ad587acf3e6f68ca27c3283a8784f63e76c928f984d58bbb8a13b0463c7cdc5fe62b9e97ce80e5097bed40815066a9a87d8fdc9fc16198b99be93aab1fa413161dc503cd0339c79c457b8dbafd70e7484e5118343e0d0a7352f094408aa9bec875f6ec690ad59aa17befa53849900d0252349a539670ccb55f16eed4bc48a91ea403aa3fccac2aec538e1533c1bc502d850403ffbab4cb0315a61c97683bf6baf228f94bc009231a323e144ab9587b3899008fd2432c249e018d39f6aa475cefbeb2800b60cf1fdc1312735432050eac929a2cb3c0b64b5dfe7b2d636e0954bc5fe16b8f2740bb5d159779c508453540b6515a49d3a4b40fffe0f6e6a440b931f272242ec55aaa6cf65b20b42a8e9faf3b37806711f3a6bb4c762e6127dba1d5e01c167cf46d99f1a0b3eb8a274643629de715f129cf68822e79c1bbe6425e5e435e9a628173b71564e00c8bb86e1a4c4712890c8db2a7851bc5f17098f659fdfdb302ec75e3f49867fa654a2cd7354dc71f42491d9d2082a3ca4b3e26a3edb235b53be7f3c6e605eae71cb3fe03a150b6c0dfdb9df0930810da20c285ff0ca7a11f6b0be695c8b65a7c4fd1006cc8407fdfb8082d277be9f86ded3dad2825e3bb0cfe6ee76302c7a8294c1286f0f5eedd62ae7f8675bb6afa62fb077dc09bc544102fa59830054c585408013b6b63213c4738248abaf60391f978481bfd4ac3ce0eb26e9768fa78047ae09238a6c108f896e52e2b58149ee99762e1dc259ae90e7a9e0cce5de09b569141baa7786a7837514232089e32115289d65d02746b624a56b6aa8813ae3f77ba358250c3759bc59eb3a29a5628ac61b873d2f8f17711948d89467c4335cacfb1483613b3256bd5f9ad1a62bcf595bf525c56c6b1d50cfe6d6ced346c25bc133d163f2d08ac01770fb273e80e1a8f17ef42d7e110ccb28f8a27fbdb28d8bb427ed060606abef9a8773721baa198f802aa89c3a8c20a9272f657655becdcbfab7c440f2dca34176c455840f65510ea3e20e62f394f383ba299008a10eb9ae4a860ebfdddf4c4c5f1a4d0c246b3ec42188ad431a696c769a32251671811c467b428b0b1bbbef332872b7b545ac10b13cb030b32fee1ad48ce6626c0d373066419c7780d4b3a1a9417c7f0398b946ebed2dadda0ac2cf84c66f86ad3f0f545ab35f08a462b920b449d72334d6ad21c421dc26d612bc6284d0ae5cb2a2babe9381ce8658bc48e58247ffa641a827c4e951aa3f6c437ece49ad3ff7be187f4fa7e8d4e461994f890a9934e79c392268593390e6f3c9261f32f347db954b174a39815926bd5374fc7bd693977b9d0864cdd8b40bf369a5ae6593c49698d20f16094e963b32af237fbc544ce142696c674896b5a1e2cb658816d984602cf2c077dada9d79d89f33d2d7cd5f24205673010f6dd3f2a0fe9cc59c44b8d4a1d2592a3077dc626b8a6d0dc8aeb2aff789b2c1c3e94503f28bc93942c4e3f801814e3bfc307103afacb730f02e38bbeba23392305c7ccff35c2d14e23a5ea67632e484608938287f39b6a42dcd154de166dfd1669993e8166c5620ee4fbece2b2f944d885797d516b5bdce9b3b087cd165d9ab43460ac1086179e02138835e1d309e4bc0ab27b864c98d33cc6f59a37bd4b4943ad4a84f2aa865fc8ae501279d18bdda3d9f07f97c33cc247f88b306606fa5a964a8a86999aea357ae8d668a48ba22b4e347d3425f7ad7c431bdc4140cab6d0dd73e18dc9f0015e5bcca4dced3c41697f5f61df01cad00e28372e4239f73e4879c12109fb0b1a2fab9284715253d865ba741ffc12427d586bdcc982855cccb04dd6b7451a654b0ccee8913d3f34e9de7fe0981301b254a3cee34a44fd46ada82d32b8a3c0f833dae150cf3208716287996e67cbc2c8bf5cf4cdd71ef23e06d0e44ba909cf6ad3be826adf2bd3a1b7fe5327b2311b4f0ae3b58a9ebd31823486841f71faa0d6134973d22e844548458c2477c714b8660583f3e9e16a41acfbf802fda39366cee71e61ef8f504732a611bd1f5178ea70f1dfd304ac057d9dee11d44045f91067b4b58239e806be6162a3d6657133e4f4437798b1a34a8f68fe42d6bb8c5a1b9c9bb2c2050816d3243a384212867e01d2f8942c80972d96fe75c8c2ae1cc01e8230efc9f40ac2acded554fed8702020a80617607998efcea25a9b53da4096ebb84e85e7e1ae6db83df5f86fd7f2055d7882af357f3a27f653680eeaa8d14082efec9b0b38177bf4675fd15411838fd50f6b0f52f70ffe98b10cc3638cfbb954c584f984f91a8be4d90d2788ea36aa48c986b63ea4b6a7c8a8d0e23bc73b255ac87454850245e36ed06bda292174fc3b06b18e1675ceff6383aff9c43f88c5a8a15eb4b1f4c449d9205e2f282b1fa29f5f941c1f1c1f1a27a7729fd23fb022f8a3e3608d091d6ed32fe1e788a2a6fe3aad964f4395835c043c8051a0ead265a478e5cf32ab754aef6a7336877751e90a07d3b6078b0b5c3894cd48efff004b65a3e29de42470ec9d58cda1f9c3390ed7bde5db8cb4ead119603897ad36ecd5dfcecdd6bbc22f00e9da041353424c9da8cbbc9cec9b0c7d9d7ea21222dd3ab99b3a787c7b7a544e4f86fbeddc1f3b5e7f2ea3fa72ff0891c532b29604439b5b9317e9723adc232a30e617ae6cac001dd922c47f1f7103a64643306fa7e8dc01571093ff23e9c1eb225b66a7a1011fdfc4fc333061adbf40e093c8bc39e9b3bbf89a60f209ebce7f94d712de50c403fcf33e80cfbd16c83d7a66b4ac7d4444d43cd1786577d08b51d6c2046bd2bdfbcf43c0fb8a342fff8930a0452166b580eece881e53bc2049bd7589f7e201e62bf9f255b736e35570f108f3d6881047bc9a4c8b9a610bb3acc83fc5ea9972c1fd86e0130f868a10810912ea17ccff7b7a646f8050fa19489c46fe5bd15f81576a80c6737248cab96e7d102d7c7bd8edda52730ba3220f98ad0557189f77f86492d5a220c85aaa8a9ce2034b4d424c0234ed511c487e1bbca4b329d2d4641d456984b33c5bedfa6d2d834238425302e79d500be531e6b8e6ac8a9618ba9a41d210e88624b1a63a5f0b787365f655ab6b57e7488a590beb30a800f47231a29e55423e03d0c34fbcfc70bcfa1bda46830f74dae35b4ab653d150371ce4c642e4c022927b3e947fdac42fd79fe8c36b99b177845b72a7e33a2cadb4a800c02e1c2777b4d72cc401cd1e89707c6b58e5628712dec1d5dd1350cd4eb5a9323421d2cf8fb86f18601dcedba9f5b3679fd953132b3647f868424ebb19b98fe1cf7639eabeaa75fe1dccea66a5bf6f704af4d60c70f3b3f2b616a0b4537cbac0d000d6e9e4bfc8e12de47e024d3926408f94812dfd73e74bf0a5bc641a2c500b252585f6af1407af999579f894b7c21b4319ebe41bda7e4baef51580a89542948f3a3cb9240bb215eaf66610c63ca236e51c57a45ea3b4946e17f62bed40eda0a5d192a9413ea29950569a8a725257c81b0a4060b635b32a4eebaa12cecdac8f455a2a05dc104e49793280da2f267cfe66fb502f243838fa639119ee4239f29fb41a2f086e202c0e4fdcefe9df343bbe3697a6990bf5da374dc37550fbb5a056ce8d0e47440e7cf672b28e6343761f49a69ed6152bda6cd6637ec74d91d08a514d73b5243db743abe042875601d5e02c1b8eb9f5b2f7740127682c0c3fd46a2a37b60274a507ad1cf09942a6224b73272775b2117ce5a7335d35074f85d45b72e862a03de30b3d62275bbc45be3ec21042ab9080d4394451d2eb64c7089d535bfa63525e787f018f9334957803b8a66c409ad913e0def3a2ddca00f91780a62c63a0e9e359f3c464b49d52752bd4502717ce85a78047170e23fe0cf5dcce5fe144b1f5c0f492523c8b16a260ccc58e5661c71126a5d2a9d9a82f2c40c72d3c56c0d264f5da6d2ae83473e4676e0b59dafda546a78f6e01f3fdb8afebb7f7fc3a49e52c74cfe16e59ffaebea49be69b24763aec7a0f19408419a95fb0e6d192877275e1b42b2927250cc87fe6635c6d59a9e25fb05195f76c466a15586da121187ec053d6d279a04b737425251e88320f57b382c4e5ad6671b8639b3e68807bb86f34ccb778e53a47090b24f0fde85bd2310e5e287b9120faaf05d988999d13caf605278b1faf263da13d7cf78fdcb4ffae910c31d5720f1d8e71b5cd2092e1f63b08d5270b20a758157d1ff74a0a58aef04fdcefeb9ddfa65035ab2184becfd340b09e476389225148e02f266f60f112766035e3857d942d45cb47090190ed7aaf974bfaf3a1217bebbca8015490ed1db939c986e88169a6c323681eb3d1a8f8b825625eff283d92a2a444472838aeff59bef2ca93c4308ce4cdc3794b0a12c85ebd99404d2bb35f85ba9f5eb00d3e9d13a2d63f0d8c47f3d4685c7cd6ae4f795a21956bcea5db0f3d503545b8d4ded38bd826194ba6cc944600a979b6b143565141707637e2a420780fcb522dd29a23bce8d34e77321a54f9422ee16c2a4c27c8416b79341b6ef8fbbfd5a709409dde6e34ce066adda1c00809abb6e74d953246a94fed9c699c1d7efc77396d7c0f98f23025a4fde08dce4f925a370eb7c22dd65a6e64dd3a9eb1165aa3f4d608d9bd560ccf6846fe3cefb4a76dc7b299474da55f52ba60d72d3a12fe998f2f1dfe0da2c087b599e47d8ec474758f8a62ad17dc7a5877908a7cefc8fb1f8b97a65ab1b820c3fe3670df7d24a17b026d45edbe14208d97d465b9b264f4c5f9d65dd72ef8b395da3090c86675b7784d5d1bf477fbb581e09f2045a271bc1e0d84cbd5f7da750b00debb49ded8550444424ed4ea23c09ce9ae9687ac9b948e54e04bcd606712797f7c76fa494ee568017eade2e158bda481f288ce7ee7f606ed29b33254fde9ad7bf84877c7123b0489b38b7dc448eff3cf9c002efcf14e54b3ffda32a63516508e3c4e7aaee70829f6960dcb56d8fbd4aab4e4ef8d9ead4582f85fb2b9c15d4900364ffff4c6e62b01de1c2a729e1bf64232e90a7d23ef0217c5910a329e8e73a1cb3317632a9c83f582a407a8a47b816fb9283e2a2c17f8fbd754770321bca0b21938cfa7ea8ae4f6b833ac287d88aaaf69919c88d2d9d65eee5632723367875392038a041384f1cdc371236893d1e6755d796f4f674371875eeaaa30b1adc5019bfc8141b9ac21ede015343102f088e45fe5dc27a1fe4bbf7374a7e9dc0ced85a9c050207b4d457f11749812109e261a1ff444fd1fcfc0e36573548f338f589a339d9c386b09551255e58139e82c0620deb1a8290314df19dd6201962b51a9ccc55104d12acf15c950d6f8582027e00eb9447aeebfab4483f316ad595156488af0b65cf34dc5d0a7f8b5d959ffbbe503380a08694d11a888eaf54eb8f0de425f5333ee824a822ec7819095181c00808d09d8fb381760c1a5317f7efa7339d8079e9eab65b77490c54d238a9cbe5da2240026e0b6150440d0bab267eb762596fd6d089de63f599f6502bf67b722c633888cd91e2b3a6f5599c24842add2306f2336859c0b28627ca5fdb2c66eee4a9c7446920e9ac5b234005896f6b842118a518bb16e4e7d7d492260688d8c5ce182bdacdfa7035931b715e53c3fe3731f17569aea02995c8ec1e15af71ebc31b644cfebe54784c53e2ef3e7b76283bb45cc47f9fdf2e3cb9ce8a1bf5a5c6c1e9431154d619a1e2cec7f41c5430b2ca423eea02e479bc7964ed9facc10143a6b1cbeb54adc02db889f322a5db83b684779a20dc8abf2ac64f3bfd28bb443351c62dd02ec7f64165050d560be587b193d73b4b7cc8981ed63dbe4535a7fa14eccaf262574e21626420d8931b3a499cbdec754c4f7677adf606cac51d694ec6849764c3bfa26e0c1a7205a2cee5d74b0d091242d151928be019b7516f42fb8118632a56ee07edd080212cf3a9234069a7ed4d9bf80f031943bfb0495d096ac4d8142912e10bc41da80cc98b55448f8883f1d4aa955d57ecf43b57d6c2402930093a9d25e6861055d1973ae70e47c8d93254b936022f8d195479dec6219e00373a6ff3ff53e4e09a1ebfbfd4d88c74bf6bea26bfd704cbb5346e810e77f827c2d28f8087f2fca7080218ed542982ae5ffbec169c64da7c53134873785166f5f5e231b34ef8b014220ef21bcb1325e7822339b36229cbc149d7a49aa038f3c1e2c0866b0503224fb0b61fb008d7fcfca0554690a38a379b1a60b8da80481326aa1b3b688dc900fb3b9361ba20f771710f7057da1fe2e93fbf2f17e7f10842b1d272f4f977c3870e0866c6f3be953eb5d9b4911dba9598f17f083d3e3ff5fa06c7ace9385483b84c74bfd5eb1c12051c8963bc36f30952b3a6f341ef9351f3e5fac50a67b98fe1b9be07ec11f93ade100713fd2c20a71d4054057369096ac860df74f5e180305ffeb5017f2bbfb4c26df5f45be09add82d9cf18ee3ea8f22338ab7f7807a14ab79b505d633127da50dc2126e2257958d704356c835a70b4b108cd246dce24366276e5bd400c59f984015d7bd94b024e0861294ab929496031212499639adb0dd55aa433978dfc49c533a358ffb0d60dc7e89b7340e0b25a9b66a751efc8a4c8c6f6ba2c018105b490d13043068283f91ff3b9825f2f830e18da1c9691e957f67d885f34912c2e48a03b5b424095836a5af5a6be301a1a606c044f6795f4c91b39f5120be91a9cdcc7871248940da3f78c5c6407c95cdf914c361dd56adc5c412d5e31f0cc11e0edb99523b9a87cbe38ee7cf4e4faba640180e133da97bce68f20ebbdd664eae1446000438cb7adff714a6410dce3c3548132b3b65af6ead0c6c45ee779089d348a68427eab4e111cd1d359fe2cdeab88f89183a91f6899ceb230710f8a1072d5d52d696d8d5846194c38c90bd516dbf61f0343216d601202a91ad021291cd28555522d09e0942b714a384a958eb64fdc051249afb2e42939942a5ce9065afcf991615818bc8811d4ac4a91858ce6eb1f89c2f6d56c076728e94e080c65b33d30c62370dcf31377448017b1f06b2b00348e94e84a7ea26215684a45346368d0630898c8428c0cdf06a150ff3d5a82e458c3c1a5dededc90230a6a27b2b24e42ea474eceef30ca09a0223939940b41d31362abbe93e40aba89f7ef2e4b592e45faf55f34eba7d4812ac5df3ea8b9735eb37c531ff5f0ea98c14945339815b811aea1b811f1605d5ec1f3b62b2ec830e1e3bbe68a11516c70aa0ffd92c4e6e3207206993e3ba4b07f30afb3454c98dd1bb22e04cdf8ff20eeceb6006ac377e3d063d4f102f7f2c421669b8541cd8223c959f13d284ffc982bb9bfba7460c55971944bab7e45374db6d230ff11636550b912cbb60b230bfcc9d8a96a723c9da90711c9278b47d49be85f7acae639d0600da8b7a92994faae146936bf00c0695590696dc44ff6e68e3770a5213f7c3895fd5f6776d65f330d6f02994575ab415440dc14dd66f2a0927979968182cd08c6d884436496a93e2e11384a47da5cdabeeccc50368e1788b283c9e6ff38d495a109247c699986c9ebae210f3077d303fb0a1a8ee3453397f4c911081539e62f6ed058a50861e686afb30729bca87549fb585d04aa4794dbeab1686209e0877c6948fb9f3e1ce097f519787d2d1dc7a194d816323bf4eb55f5ecb4fae311673c6194a508b438011698e05f48434bd213cb6430eda4c7373ae8c97c0f2bfadefd99863ba041dbf80652a039c5f94bf598b97c97dc18806e13b119c94f4db4e807e3d93a65a8f8b0f8c7a86fd74898e88fb346459325d7c759854fdbb985186b94ca846102143e574ebae31b2dcf71bac5386aaf30ee9d73a8aa6890d673eb5d65e9b0528c8685e62784bf0ccc857b593316680c4337650fc608329450f6b8cddc484c26be02e161abe7e705d81343053104df069483cc5f3ce960adf71bca482dee537fe7fe5531bc4775ef22ca05f210e66ba69a57a99ac0bd86fd1c57e746db2dd0b5b7496c60d726a2125407a648ada00cf2c765553b9ad4efcae57145dc1f0a28ea43886ddef640a477dc54aa21924e4bc10919e4412c25b256ff86ece1ff1df9307388ce11aa5b6cddf28c1165c6d79cfcfc8921b3bc9b55eb0f878459218c689ee1b40aad43a5bad661f0d260a751028c82b12a605fbc8f2d51c617dccbe517798b962146aecaa7d78718cf3ee6d7b1c7e5730389609d9b6f62122568a3ce3281441e04505806a426fc15948101237d610e9c60e8d75ae05cfb0766459c7f1a35dec3fc4e1d0a7c67cc5e235833e46c4de3c581707b3d6e4c41b328323121e27ea959e201327fa90e795b8ac97cac20c9a7cf14757af020f1e8ccbf6651b9822f334b07bb059f7f93bdd48e48fa9c972dc01cf75eaf4c3aa2e87887a0a36e01897ed457a62dcf8faadf31c5fc391dd2351ac939a13ed989b7ae535392d0cfd6a26fc2f5456d5fd60499b73234b7f3cdd1e757970e147e66480c0cd94f19cc78504a85dc4746042bbfab85e4751916b081c6d461eec8ef7c0d1fc9b4f25e31456da6aedbfbfcfc4c5d72a5aa403422efbd094ceeb14da6a8a96a56ee914aed0bff434540bc01ec693f8c9f87499146715105aca03f3ce34747bdf234f49847c47564c0446734775dd854c78bc00560add0ce00be226e1a7a3c0a8d1eb2d3d6e7180c4405e54d5ab6ee88c9100ddd0147b6803aa63f3184fa369b98845094fb1ffaa3fb405644393d4fa38324f2c3dd53b6057c30e6efcc47ed849ab8c7d5a816603bd1b6c34bd4599964616cc0739e59e0135055f8d1ed4d5b004265b29415893772fcd1218fb9ae2375b344a0fbce7fe9e2ce22d9a4c0a164e88f111c208a2a6ac3c07c437ec350692b53fac84e5d6da4d48f65ec88c335a96bf81869c3140f027a6295ad5625b132ea9045411caddb49f7868e45cf4a9599e5db4674bfcc1016a3600fb0d1d4028cd6f227e91a792dc006393379229ce75df3abddf0ab27b6f7c8c7fbeef4a7484e2fd004463d24e1f3fa5e63076cddb4e7bced4a1746964db6f17a0cde87b2f3196c827ed24ebe535fa56ad7f7e7b8bf8cf0bec79c345a07cf9ab38b2be4d8d99e10dd85dc4f773c43d2f383f07d6f162ee5981edfa310968ce30cfb3c3bd31a67c5b7e9c2dad14a6f2e9759437a542b5050074e7f4b48781247db42897cc33e5106feeb8b5f005640494d457427db2993fcb278f3151cbab72234dfb64ea9f07ce23faf34cfd47f368269ee7a44c311f64c54ccf4c3a49c54327a1fa01a12f509d201a5706f7179b929b6d42d18dd986ffe07a4e757a5a2999efb85f296d0593e69cbf25cfa790d41676061d5b48e30b3a7a4054463a86da8aa45e456ff61e338d6a78a3b2570c72c8bcf16447b8916cde4c8f4fcdf5049e7164e5135e6141e96810e2c67b2830bb013e6a6fb7b55ba6a1a7086c0e90ebe0d049d8fb5f0943802fdf9b09cc720651fc084107bb4876b50238b3445d333e210a5a4afc70edf14b9776c3d7aee793497dc1aacbcaf3638aed3eaf66c75e03b53d8b18e0d7ad1cd3a6483b4342aa1e53b68c05aa4620cfdcd3973c3f1375ceed6947a6c1351ae013f0682db6373237b73ab64943d16ff73e0d9bfdb3c3978c70d76f1fd452aa00582c19f21fcb3b76b7ce95a56920f23ab2e4e85b8d3ff4741ef134125919924b47ba278ebf24d55da75cce45734a48d5823c2ee957b1ddff1ba04479dac29640f320c797833a8127e0fcbcb3d5ea9dfd46dff67ab5e4e1a9a3ccb9d7a540c5c28008b563533457f17018220744872f021853c5f2d7973c469687c52a2aabe41ecf41952cbbb6eaca7827020bcafb32446749a2bb351e544a47052f35c86e80890c6dfc0266e7cfd9dfa3e36f4d608109bebc17e726bf225b6abaf7bc04823064582d9f2c114062621c6616541d9de605581ed6bdb64780fd64c1696fd47555452a22d4034bd14c40228b0090da0d9b07410ebfb4af6280d86519d026b1e9abf147e108dda5800551264ec90b622f3df649fab5d54bddf3ca26ccdf218d240f48c58f3996c62102268a4b8b4e97eb4b61e142198d343604b3fb2d4b98f0b3321932c051c0baea3bae23af303137026fb4c81443176d08dd6a9e1a96f6926198d172dc308999ea9643eac54b17bc26bd4c5be8888d118f4e7a86dcbb2eccb7fcb640907515eb34e58c419a5996c4f0460cc2099bea252ac0daed372838aff492f6bd288f616578e98b81c3fc204d72a887765ce43757fb9f3a3c1c7d5d42de0649097ba45bf24e930b55c301291fd9ce2830ee54b1edfa1dd04ea19b25e41d8498813e5705eb45201d913740d5d937cff3fd7510813721c31afd269fbbbe80bb1158217663fa17aef65de3efc221cae14b0f9e5947c68ea92c734b75d92cd10f0a195f104327666daf87242591e4e5a5347732e15af63d269b0f8e9b097ab72e59015ea40206d23db6d0fdb66d22bfe7745434dd15754f95a1540cef6d65981389e75b4f58c45b42aa326b81af7d1bd84f6ad03b6d103fa8a87cc8eeca48da0fc220d562560f25983eb9ae4f039d6bea08b4eac02deb771393278d4383277424333f6cacf856eb519b26b314497607f3837aaae504583af3da43964ca662d779ef9eb9d34d2cbbb726263b1c78e6ec0fe32dc97d4fa46f2cf7ba3da0bbe23df66d816722b377d38fd2dc065d376de0a93f33d7584f90b21a3974563fe75a079ff33aed5fc2ed438a6d721fac6b93cebd2eff333be299b2a85514d959ebc0156378f683fc4a03d72bdb7c1da117427a9d36413e0c02bfd4201ccdbb30c86b6de3c45084b1af27523e738801e10bcc1e19f22d3c5e667213b23352f59ca0943391c485c00ccf2dbe1de25c86c16aafd2c2258f068e53caadfadf6454b2ea1bff5fc1afdb89bd9f7719c13e6538213563155f880c9a0408e48e32c10a1fb230aa88ddcb2292dacf33ea5fc39a3d257d44313184415a82db33d9b4db27193e469e94e52ad45bab4de58cedb9e2385537b89807fe2b3d9c7911aa0744531f07d44f069ed6dde41d4d9b18dba7679e8767002d5eca619547539ba0aee0ed37da1fd1d63a5e976153fbed07b78087fc49c67b69057307f652353af0b64a4d82e2a99e9de580a5b2b2a28e05980d38c2dba1fa0e468b65f4e844ddf3cb3bbd795191589a2b7c2a228c6a6fe3fd100007eb9a16320a2c4086f3001c2de5d53b364ba285ba61062ff31c21b194dd51de0f41d79cdd82e6ebe24360dad517f830262abe299ae4aea2e372288a4e7f57c36ea3cf171d482a8af1964146ed121b48bb4645225aad22f84ea8039dc14e8501326d8f73daa7d2cd235b3423d897aa39a31575e35286075aaf8aee03831cb5b139cbb14983c78c6e7cf98adda5c4f7f60192c06a4d0915e138c7f41740c6790f096aa4276507a24664723b94df7bcfc1ef613cae77481cb0529073835c9485a0a981828d7b15d5f3c52a8c8eb930f45e7facac062b98f05125d27c33ea9c3b2d722fd36b5ddc3eeb0f94094a6ac6c899bd8277cf09aab0e9dbdf970fd1ecbd6b383b64bcd47504b81bedded8120365b136c110d5ef77d2a2eec06ca1b609c760d89bc0c79c6bb6579fc2bcf50a0977585b7f956ad2fdcc25ce3c3b0be60f37ffd31bca8810e76562fc66630158954a05690d71fff430cd1f9a6e9f8de8c344900808a325ab71b99aa161774505aaa9777c973bb56885ede8df59e309c1018d49355b24a2a10853291fd16b56fd54ace0d53e51bb1c6086417131ab41a8eb614b3fbd9e985d521e0da53beee5a775fc15f362af0737497e45f4f1b838ea706a59cd1e5e77abb029d7430209c4872440d18e732024ccb5d5ba1d2dc82f2e7b3f3a355606765f37ac949f2ec3cf48a85633fb0c01bb240f60eda2f01d00275063e40b68b642ba4e730994e50bf145a7b44fccfe31eac30e573c8d3e675405a2c9e80c7bc1c51096ef1dd8c7bbf12fc20cf5aa373595b215389471a2720e09979d52c1a7cb9e11b7ed35efb99bbdf7141a8cfe22e05de0df4dc3e5f0516efefa9a0feb7520cffc1f4f4e3628da64588666d2107e843bbfcf9b34e34b9b9e3ee3b4152c7f294019fc5ab348fa134db803fe071509f142c513f6d4e9d7621061408316dcc0cbc87e5271118210d8616c05a561f66e3708e69eaca361e4007c95184e07e6b8740605a145bbf88c9317349320372a007f4169fdb7f86e334d704afbdaaaa5df1c5281161472228184a0f78d25e66545b5fc40c153ec0fed05d51ad3d6f472036ff38adb9b076bbcd9e9427a8528c3b591e988891d9bc23bf3457ac5835cce828eb9c5c0fbdba9bf6a8ed82af3da0c232f6c675252b527d9abecb89dcecafa62de536ec71a79970f74a9a6d0c1fcd896362a30d1ea42d29f15f6c323cbd8531fa3041ffa86d2a31bc227c7f6c2049819327ceb53c02eba6cae936056caab31fb7795e001f034c691489c6bf10916341fcada0a7d856105c24b58534b5d414a8c6ba</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-wave">      <input class="hbe hbe-input-field hbe-input-field-wave" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-wave" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-wave">æ‚¨å¥½, è¯¥æ–‡ç« å·²è¢«åŠ å¯†ï¼Œè¯·é“¾æ¥åŒ—ç§‹wx(bq272701)åæŸ¥çœ‹</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-wave" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> ç”µå•† </category>
          
          <category> é—²é±¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”µå•†å¹²è´§èµ„æ–™ </tag>
            
            <tag> é—²é±¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½å¦‚ä½•åœ¨é—²é±¼ä¸Šæç±³</title>
      <link href="/article/xy272700.html"/>
      <url>/article/xy272700.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="æŠ±æ­‰, å¯†ç é”™è¯¯, è¯·é“¾æ¥åŒ—ç§‹åæŸ¥çœ‹" data-whm="æŠ±æ­‰, è¿™ä¸ªæ–‡ç« ä¸èƒ½è¢«æ ¡éªŒ, ä¸è¿‡æ‚¨è¿˜æ˜¯èƒ½çœ‹çœ‹è§£å¯†åçš„å†…å®¹.">  <script id="hbeData" type="hbeData" data-hmacdigest="8b267eb0e90f11d389eacbe0f279ad7354becdcc97711cab8042c5be35498a04">90ff52e793c3a928817a83913e92355d4b64d3a5b3f6c175372583591336813f84623ad66af071d95711fa1c02964dd87f5bef25b783257b810855df26c7e7b40aacee0d167eef7e48f05efd9af7cfad931240c1d91fd38a9e4a8298cff12818fbfeb0c08840ae6bb0482ac5c1d7d06b40181eab7ab10d84984db6b3c77a55b5b5707866bf002637619ae7f95d4fd1220fb6a6c3e1375f51333f95a80de2120293ea1451fb4150fcff90297bc87bab8a54968bb228729aa26dacba246c4e1b40eb3b718f9315a948a71c38c6e888ff434688cc6c7edc975be428c9b0b7a67fb15f87409a8fd9813e5f2ca35edc76ba53278cf5eba2cb2a0164ddac58ced6f6ebf3e344c2e141dc80d36ecf396d70d78bece4da5529d2bf7670c1edc5bd1a7a3a6151b39a4b65e533256829fd613538ece4cccfa236f8e7bc369aad3dd1c5de823df96eda1314e3647c38728a9d7f0bfae411fc3b67087a6a16f95ca8e66742f65d5c44349ab6cba89ac656d6baafbed2fc460ec8e2f79febe553a6a81b9b695c3043f80628e50d1c642072e4473988fc4827e367aa14d8d9b3df5e07d3b9918f6de0cbf0da47c2754c25802b40e46460298a48a4a282b84866c1d603414fc4d966ed410d9058c1609a239a0a6aa34affcd4a126f50e5848522ed7743b99137f2fc49ec234d0978179e31addbecdfcb5b326f9a53a2cc168e75ad6f9c4439eaafe45552e26191cb98c81e2176ad66c1a976f3508c2f5c3afb6188173b50820bf23b3d65efec05347ea67cb3ce49c3febcc62ead3ca86564176acd377a6a1ce78afe2522d5b6357112778a8a83cf9cf6eb58d3931bbb6bd47e30899671fd7c9c80c1f7013b138ad27b856553e5e6522028452b4c6a826930ee45d7bb309082f7c5be87203b2d7aba835936a00bf27261a1883c7aeabce744b7ce13413779b263a72725cf8b74bae9b91fe551e512e72505923433d77a5310529113e9b3d74657b8e4748c918c0a48bc54bf54c45101373686dee57701935d5df962f22c16f13c94e34a49daf2ab68fdbc14842a34aba0d4e4e26a92d1dc5ef4ab170518797e584910e732044dd51672196cf07838d977699d7f716376ccc579ffe6ecf0dfdb4875408e60b9dadec80dcc537f1c7fc86acb8142b2b8504c65849df66039f5ef7534c783af23e975bac4a7bb506ef3c694465024cdeb23745dd0c48026c87290030b807b2a09a9c05fcc5caaa7c18b6604cab94c3e8f0cd1ffcafc9c0f1ee15918fb1b6ee3a4a1ac0ff4d1d3568420841ed7df0644002a667784a69ab573a7ba8e2222925a10076e6daca92e6ad3b97af054444e7a16d966aae38f98fc14305622b4c2a375a367bee1a3386b512222e366b6bcf55692dda6c0dbb0b6ca97afeeebc70c7897cc41105c97621e8a3a4aab5fc90c96343f9e0fd29a5a2e5ac64055d4164a788ca86bec9d7de44e26267d9cc9b2b808b0835baa8d23b6fb7a36323dd76dca3e160ba209952b57cb3eea9ddeb252aad9295e52054175ee297241f9d63f4a6c337ca6a87178a9ef7ed1520e091b99a9fce9b5791d6f9b3514c7d76bbd455fcde9d9ba284258211d878ba5f6f13631b21c54fa085171878db211461c15e38348639d1ff779ef50864d9c8ef4b310988fe1f7233af176d4a20043e52183309769d7c9c22480c928295c1ff1ffdcbdbeca6a92e79586531e6c13379f27670203efeeb81306ebd6e2600866d7f757f9d937c59a4ec556aa707a5015d2e2cdba1eaeb2739ac3b406056069b607bc04f7296402894098f05eadda1e5ee5ee91cc3107fbdb8f39f977d781b6b6be641a054d0ad32d0dd1a7402fb5cf4fdde58d5647df8e7dbf6c76f9a94b19400a842c62b44ed5ff656749d255627abd21734c1ce0794b1f47c778f29981edaccd80120c423e8271c342b6d1f61e21b605e0b8f4c333b891ecb676ad903ffdf6d0403412c6304f08776f05f0431375f689f5bae16330c0ce1ff6393666384cc4520c734fdb98130952ac4f87db1bc4be3a899b58a1763e9a4cc34b27d066afae44185fdf3e86d6c556c6c033a731b3d07b32f52496958ef65c667f71d5684e077a58bd8538bb80a38792447c822815027fc934471f7981c30eb7dfce3ccbde07c5986f799c587de07a75cdff27cc748004a93aa17b8023e6ec2ca8076061bcdbb8a1449131fc69362daafb6992f652ce91671044814f4b0f3d08bf8e6bbf804b7db9f13134e3575acde4339c1d5ec9021d2231f42bed1f9e24331b8d784afcb354deb6fa9244aec0c31cad87d059cea2d2721d402dd71f1f8cb86310f3fcb07c62615b8f2d617dd3d11274f3f966f0b77413879679af1bd5f5ebb7320e86b32b64302b71ddc9be795a382057cad03e8e6f71242c47b2573987ad7a73e53c178e052bef7bf33fea51dda7a0e1b4fb0096a6c1a1b7ab76e0646eb86e5792337039cdc657aec3e8318608bd0a907cf7d170a393306686a64285667222b40fcdc6dec386c21f7f148b1772ebd712a6fb4cc882489c8d1b3636fd0e37292277b82ae9e783cf935e56efa3d35e4027465b2117cbdc97bb6d89564bd72727509bac23ed963b252b13d6e5e6bb7d823ff441fe9c29da18dd000babe5eb5ce4943755c05030f413f5387ea782330a8b75e8ea42cd3b4a92055e0b2719a7e10875e3cc09d0fc609297f701481abcc71d0125fa97880cb9541a8cb1e301eee5cda6b7418b9a94c030338611e6627069ea1ec8eb443ecc4d657b8bade6c83fc97b98c13067a655977daf9ce5aa0e5f5d2c08cce6aa0066da13423b3c28b8269a1e7014050a1f5510b93876201125e3a8cf9f067f8fce97144aac324089994e79143c4cfc28d52eed31b47ee8beb60c6c49dade1cc17ac70b76bd24bb1c67eff1d027cc2fc41f9bda2bf3f5c4208bd1654581910deefa2fede38405ec4d84b312b55ea0f9b6cf05b06a3179c57f741cbc5d92c6828ad981141c99fd5984c851f0dd46bdac1d0465cddd8ae6f1537b0ab8eaea447a1c84010d97c76c2f37599515a0111b3a654a908a3c1751ebcffe8e96e457cfcc945ea2cc1e8ab3e8eb7e0a0c38083b867f7defe57fb150fe2ba140e1c348e0ea0b09b62d1746ffff46db44a67fef0ae8b872b659b677faee9349fc024346ec938b53663f54592d619241edb282cd7ca74d63bf081d632a8999b10c08910e6eb9da5b55f32f67bfd4d7cfb10336f5fe13ee12aa0a0dce3aa5ae44b25e836abd4fcf23e75d6d9991276ccb6070030fc279a9660f0b3f368c8f0cd1f8c39d3b24a3f2bca9ff184d58e22369941fd588ce25bf61b3175bb9c05b5c2dfa685fe2c20eab5d48788a801e19143a07bc462e3902bf4021cf779f918bb26fb39458c69d5a84e1cc66dcfeeecd399811d36f7433f1bb636d1bf49fc61728cd1fbb5cdddb36f1dec0f9f2006f69b9adc896c909dc7b8ca7f37d8abf44f80074bfd73f92ede50d60652615365c1b3d1ffb24600d6e0421b01f22f8dda48b923a62b2aa5063be06879bef11b4196b38346d7c902e8c6180665b426c28fa6e33cb38814e146bd279bcd5adb62f9c4093f79149c0d7a8c2b17dbccb906f92aa31511002f368341f7b9eee95741038f7cd8d8f2950bd7772062eac2f629272785489b67b3e32bd004af52edc8da6c62d724cafb4fd77d87bd7ac3c77011231f7efe358156ee400adcf16fa728f75bc51067896bb57ec77bca9d0ad8833caa0ef00e595dd2a930a0d6c2565841b319493a9fea3efb69a94178d6abb79b7d938d3ab0bf6157e137ca33da05eae6538f6346da358ac5ffb52081f5fbe6ccd07bd56be77055af5a9a1da354271737e20bfe0142afe92f446d12ef7babcab109c319015812b6600fc51672d5f9f0b691619fb333b70ca2dc54cf2b51ffe477735d073c854fbc4ccc657287977e1055531c77c77755a576cb8b61a1c92f68a0de45c598d27d0ad241aab1fc1a2258f4cd55d9b7b21338b83e11e7196affb53b0b2b81c1867f4ca094a87d173da841329b7c28e93960c389dd1e97330c7e65494410dfc7c544597b606d1d11db63073367621df00330b65160fe85df47712bab0d255e8c1f2648cca65d3aee5adcd3629ed3747bb875c8dba1473193c1f365e1ddee41ee2081141fd951965d7ac2a36971982f2da66897e244f3412243142a6039b8efc392d4ba57a762c185d88206054d6b877bc06cfd24b7151d0a785ac960993db18010842761ffdbaf4eac54ee769cdfd43376064a3c1583028eba8a1d20e875d9995828b9db96da260c1d69f1fc6db20060c258a35eeb846f6cc9fcda6eb05c66b414beb59d99a1005ac7626dc077020a725ee675064b28418107e93e46a86e0c0264421773711c5475e5d565e063408146259394422f5087cd5fcee62b2916b4d8b4428c0af59e54a3db49e8b980405e0f5f4c27edd92636e4e8a0e978cfd2d9b93ab906e6f63eccffa48195aa2cb761749f9ac7feb76d210ca204845642903a04fa33cfb4671f62b0cb552c8307ec9d3d31e3da716dbd8c0860269cbf2003b3f3f0afac8158a2125f3b57eee0a1b68e9a715479ef04a6bf7df3bb7f54b45fc8e25b820991279dabde13e1795f46118bfa3dcfb95199e639918cdbe275d0ffdea682fa88c903bafd15f0e7ff9c1d1b689e0158a0fd3dfa8a89ebaf9ba7d4b0f6cd55d924b4767203c290fe158ba110079fa3d82e514bc1e498f96329b224381b8b2abbabca81a72a748427708bdd3a92a85a4679cff79730e007107389de3ad0a1113c54b4064838d8c7dea25f6399a891af37b96f4a92101ae57ea9824f91f089dc2aee6eee2ccd3c0d758f1a243c362942944ef215e40f274af82f87e22cf4892167a77f48183f30beeec70c78c7566ff39e548f4424167e93c99e02f23ab4f3a62f863aac01c04b733859c2fa0551f24de8b68487880e9477e3be288b8473875265118ac9354d82e400d6e4232a3f503f3c9bf7630743eff54098b39885789192ed8f5d36d6bf9541368f6f69086507b52461a033b2a612be79bd0ce10a9416302fb4cb6ee94a6941a1f858900e6b89dbd7811b9c7591fc19de6296bd18c7ada928001cb9ce1e2249b28d7f4d8166021166aa4603768afa6960014e6ca0cb3833c265100c525f37098d3335dd3975683cbb61e32371946ae82e6de291d463895d1f4bb4dfa4bf3b16eff3454a9e3c33f2273d4e34938540ae20e2a094ce05e3c57c195220c1921d704f0489a060c00ace6162e086cdcd6acbe9f02cf37c21f3b6882a5f98e057eaf1f6313c8d80ff51c3361a5cac2fd9ca7a4a66b15afbe0536a0035b55ed3868e5c748217d7ad323b24ff14b534ae2e718d9e596b616aec4bf6e8a5fa0c6d488973af758cd8036a2a16b36cfc26e045ae81eaeb4a33c3546086f6183ac9aaaa852fe63e40765cd21c52205637ed617cbfa38f818f173ba18ff98d20a76ab8563cea337cbf5fa7d9d81ba539ec663f4f40e6cc0450c6ad5d6a3a6fa801f03db0ab41774faf0e6bdfb8a8828aaf564db372af3b8b75f5dfcc4a131e7d19df0d4655f1b23ea40c2a4bf4e04b736ac514664853c6b5b9fab961b200a31b2da6882a27c3b4f0fb9c98507af79ba7e8504bbb48779bddc568490c707e46f855773b8793d6bf6b78c0ade5c64c105db690a7112280acca744cf32f24d3ac4add6d6a183c7c8b2e690b42cb0d6a79fd9558223fb5ef94d9776773a49c28c3ee7fb497fa11274158f1aeca1765aac969d87e6f54949488712f0bba7c0487701d5a1b20644e9ac6a8c5aadd82d23a2d79c33b3a30020f67ad85f28ad156616fd4f713f06306ca39704c3b3f078022de5c421857a9c26ce8e11fb45062b9737f3a2629b21b092bf9e54a0ef2171d578e10b3d9a557544a5b71354c550cf89b73e61e79fa8949028d99b66ee08598eff368cab56dd4618555f44828c28b7d960758b2d9f049c670f381026ba1f0c4cdb445c86bc0311eb33b9ae1ce7063caf2d9b508094d03f81fc331c1a194b181780d7bfad2b2527f6cadfdaca6409ee4cae681595973b67a8c5c92b021dc511eb388ee8ffa1e64e21c85ab1fd4aaacdd608fe5f2e8efa2ff51167f57137ff47382b05a870b8f262946438b59784a5b459b69ab76901fe26896a0b302361bd5dbe0f2986fbf5e67d3a5d271de957b12e96a130581805fffe9b1a7356d8d18741503d7d8cf8d1843ed138a842978ff451eae5fefa636eedf47fad403506397c6cdec42abb10a7a65abef8a32f6b869339309e945e2a85663f891374ccf941f0ce07e0e7c9df866fa7d53c317c54f3ad01ab9cdde75d564a1783010fed9018d56849e84a1914fa2646cb80b161ccb7d8e0756334df125c3bcd7ac681cbc57e96932eed388257729ff95be9b08b1585b0f22cda92810e879db58720b62515c1a0cc8325e7fcd3d9c478c4621224dc2b99c2f90b9765d3cd5c610217d26737bef49bf7c5a3a4ca803f1dc2cea69fed36f4df4f19f2ff24e8e1b9d34f604faba064d52a2d38a77fabb4f4ce43d43119bf648a2c93fb23760871898abc0b638679525e0c5ec6e8d4c36b12e39508090df6e6d6949f5a8d42a6704863a1732fed36e97dc63cc72c814f1351abe010f1af4c5a4351020ff2385caa7e570ec05b9bfff32dc4afcb4964e6aeb2c7a034bba6c4948b26a1c8d9d452ae7817da82740a657f121c1b2eeb1a7824eb5dfb2a4ec44412bdd18e4a428ad5d6f46795b74eef2a669bfef2297bd026628eb6aecdfb50bbaf9f754bb62c35d15f99c72dbc6b16f5a66299bebbf9a4ba76576ec45dd4e6eb43bddc1f3469b1930e66025236e9d2b38bb6b469e8054869c22317a48d2c9047d8417c73afce0fd76d608dbb0b83f8bbd864f4d816e8ab78395defdd250dca323e8ed26dca00dfaa4e4d8cf94c18cb0139d19c07278270c2bd2433e46d7c85b4e5999952f2e5ee6d70979217b234707545e7ae52e8a926b26fe9f1f8eb042cd1316efb4fabae4cccb0163884aacea39afafaafefb243cd3d54cf05f197ce6e961c97a3cdfd56972dff1310c1e57d3674928ce4ed9eea0974317bfad2913105fd8fbdaf1318dd56cfb52d1c8d0432ac237de9546c828df12cde88a8305ed8ef88b9dff805966dd3f257b07dd34a055b0a45722d320da3ea52092f84fee7dd60418299d8febc35b39c0cc0177162d5b5dff1ad9ad643652abf334e7d10456a93bbf2090195fda4d4714b3aabd3cd7d6d272416c9d8cd956ab9f1379fbd850c972dcd09b649c3a35f7fcf34eb62138755f4ff1bbada45ad21634929842141967273a086507f988213fcfb369b2e8759252f51fc3a41299baf75eab58b5a70801122e03bc3d89cd38741de1eb6f02bc1e8b672d77d043769660626014c49cb419c1009566050de8a81fe82263ecc2c4503d77feba47db6ed778271531fa340f416e2200e00b8e0a10868d602fdc2cd3990e2958708df6c08fa6cb04a06edc68e252ca287c4bcd7f31532f30815782bb81380ae24ec66bbdf8b9e077e6caea512e7f31d28ca29feb1a02e196001394a18acd941fff0ce54760ef2f1b79b1e7e6f7d380bb66df7f31dcdbe100e16a723258077c0ed90ee13f285c1f064b358f61c40efc8286cf142bfd273bd6f36461660eae55f485d0ac005a256a37eb2d0e968996abd6d70792fc9cab34cf1f0c39ccd7f7f3746995bf79a839c76729f9f9d8cdc957aaa75f410f7aec2946058067effe79a6606007e25259e7fdff7ece37119236237235ff3f80da894814c133adaba51e5d20adbf0f1212bd52db9000e95a8cae12ef31a7411e4b547bc0fff6f3cf3337558f0e309117efae1c358e56ea41d1574e4413bc8671150eaf72399b199652a29ef5269431207de3e7e19e0712b8a056ebee7004cf564fa5d46525659ef7eebfd49bdad08cf21d94a7a1e4f0fae2cc8d3e4e3b3a03422e93735bdba44be8f1bc4cca11e4bbd8efd08c9d9b507038991b68f95b660ba50700495a58b83dce8b793edfa3711bb43ffb8150e4ab636479273a85d5bae5257e1316fdbc2d9c8d46cdaeb44b3529924d86d9490788f42227dbcc307b32b5c3e59697fe66234d5706ece905e61dd5eada295968fb09fd7c0f3ab1a511bba1abd2034c2821d2b0883ebc38a8e9eb7f99db654dbb7234472aaac925c0a07181e9bc54b47219e24c3708123bec391feeec0168363e9d165dad7c6d1b8883dd385a7352177966cbadf040777da0eade9a33c91e4afccd665e2cc4c3f79a2c363d5e0898c3649c0924fc63e8220f98784343f42517efb9cbd86c49e3f19270fbad36a6ee490183cd5c7f0217f57f46551c6c6a1f2d97aaea54ecf680a68a0e3f9c087a2d523f9d1a90e992225ab7fff45b54e0730feaf67e0d6140310754510117324b2c067e32e935da789fb37a9a603c8efb9cf5df23d2d883df0c999d761e95b9d437ec0be120867455b911e5cdb851af0f9a7a6cba98bd8a46224cd9a42f37b04217719c48a116c5c7dc47fc805a30241354e945f51c72e99aa86a9d2ec3876f6ba54ea8d99aeb5a05d8cdfc8893a8938d5a137be99e7409ac7716f7dcc19934d4ae6c5a5780f102a083b8acbffa4c56f68be2b80d8e2e4103b091d4a1797d0daa3226896a14fb9edf5f7bc5c6825564d04fa8e552100ff9cfae1909287c7032ea457db0d03a47155c6e6111ca9ebb47cd63c585c679d1cd0d1a7f95d1608f8bb6a742843be43aa61ff98764b042d5d082d073e5637876d291baf9d76589d53c27dc27f564d30b42d96936f3479d729778b048df668f2df73671f937c548340bdeca89421b8945b898fc4411d98e1176449faedb5d221d8100167fcb6410bd4ab4e8ab9c4824efb022b58b428839012c880146643cb85578dfb31ce4dc0a356136b932ad25a6cc8ec2c617d9b78804f62a4090d182f1f618c61d97f87a139e70a6d389832ea6dc8a8af1fb61fa9a08ca96ffde129fd0e98a52ee2d49dc45e70f2227a80b1aeb75dd2309ef277e1ddcea86c0f2c27a214e4581954344b1f5382ce0f0a8333e2edf9024f43b144aaf418bb378f0ac8b4c2cb5c189fdfe8efe59ec8cfdcb1a3d7da01fcc507fbf44061bd8b026b21200c558c50bc4f17e55912b64ff3c81681928acc79575c05a84e159d02e6fc3cc0e9c46c46dbec6fe18effe12115aa3637711fefadc41b4989151bde4a014196a05356ef63d889319d4463d67436a142b96559002839e8b10bfededae909843752fa2b3070765d8948124b9e4e9c6ce444933fa24e2e758186d7d20b7441f9a1dbfa0d8dcad0cfb6ddaa7a0f3b767d421b289f2dd511c6cc6aaef330632a3e6ddc3f349802751c423259fde6f71873469147842b43f5076f4a214cc636d99b74efb5488dc0a2713de3cbd9eaf649e43c8c777e38511dc5809112afad0ceeb0edc36f8d3fad2eeca90bba96b99384a1c3c48e9aa81ca17ede6f1fa506a588934f43ac536d81d4cf74c0384a059c747d14fe2ee4f8db480ee9707b293c9c5521b323a2f1c78f0ea170bdd82dd6841a84fbea6cf38ceeff50d02f4fa37c5e7c7a658e2975f81167afcdb347fca3f0c1e4acd1b5000b727510afa702166b6a7a488409054a00addf4bff56bbce55a7cc75f5a6066608b7bea3c2e28ae80d453e77207cc052d871105d06f1308676d4e80e2fa84288628938e55dc3a91b7e7d1754820ad0281afce750182f99a24e50643b6fe2cdcd689b52d0bcb99da72bbd65d8500c2214f34704ea02dc7bcbaf979743bf1606828b6cf594f65c28c2e4c79d241827789c96a3f19022c6ce8678a8a28c8a0660cacd09f48654e964654287e84943105e29d9c5287f94ef04266324576e50aac26eb1b45cbb45433d2ed7ba9b87d685c1e7c0336b9f8539934bc674fef6c33c10cb2b74504a629a93e8e26ae703a5873dd5e6af6eaec6bbdfd68b26bc86dd427bcfea9f0de97254b646ed47d8e3c932d50fd5faea98a493f60ee183044518eac37b8a7cbd5bf6c4a6091986cbe4b336cb1b5bbe2d00039e5c77ffc72d8b4531bc39326c1ba52bc8962114aa386982ab3c4fe419e6ae11796387f2bda655cc8f817e32b10aad0e835389e94374f989d8064a1f53c41addf624edb845253cd5847be01a8591ff9c13c347e91a237242f6ccccf0b53074cba037c992abc99a85af74d53b3ccee1571a31d97d44524bddf85bbb6b5d11a4b1359d3b827865e9d5d92fd6313eed256e82130c35620fce81cee682609b9e78b52afe7c46bfdc194d0cd150ae7b14874e237d23fad83a4a2e89f4f9beffc0405222fa7d9018126673debf425d3d234498369c5e4e6dc3bcb445aa32528d77a30e402386a89a1b0eab83366ebac4959ac52c111997dbf60128ec86ba926b1bbbdb41969b9e0c9d30425331e1e95b2ddcb2fc51951323fb32e5171eabbd56e503d6ac521b3e7191d5f94337b71e7b319c4e75bf34c1e4a0a67237ee5bc28e3787db5131ffcf22cf18f8fa22e4b7e18e95cb85b85c3e651af93821478d12ddb0bae088e5b45f35f7fb87c99c7864f8ded4556ca2a2b7dad72b9699511de90bfabc331c5dda6df031a419e5a00c674ffbf5b48e7561233de2eebcf4111e0f5d12afe8174fc1848c0bd84e687a73222aa3be56c863485e416a9dd25ff1bfb9e1b6ffb436196fb4e4ee4250cecbac8ca127420fe37e2861fdd36246bd849da8f6c0e12f4c68ed8e41c94d34ba159cd82b650a2ade923fd1a10cfe3a39def83bc0b91cbecb7feb982feafff4d0233d44923f621d9980aaf101f8525660cbb0065cf46c04df4686acaf744064d36848e3bdbc0eb97a97531783627f80af6e1eb6c2630e2ea676d0e062afb836c24bd057198dbcbb55c21cd3c50609d66685cb2d9233cf23cc5544ae85a52849dcd55b0f4ca2cb8dc0ead94e45aaec83e5087b52f37b00c46ce98f467f38090499bf982088362f09f678fee76588e729876bf8c59035fcf3da18d2672befc422b067bdaa153326312f3f30aa40d9aaea6264f1ff5ab7a82dd4408fea685a0375aa2f2bec0af9edeefcaa578cf48dd17873a9623a425b80ff0b40591e1b26933473d38487094ee0d530336e48bc369d238a771c47f77a30eddc16ec883b547e5a2c40aff0f4cbeeeca77c090482dd98e5f9d030ca28afacd5b05cc072a233ae9673ec8016fe38de9551650ddc21f8f7a6d6d805416dde50dbf4c0460e85b9ae55a0ac720b9fefbf06291c3a793b040b0f7b5b95b386e38028a6a086b1d695f00de5a7411736d8b6eb2e61796cf86983dd611357cc1d9d2a814461a248852935c0fdc635ecd6748fe0b313b9e9cfe3264eb05554e128336944deb51bab9075b1b77a4f527274342d58bcc1bbfa50894305ee3c636ed7276c13d5c786f126daf5853c11811615ac8470c4092f82a784a0788ffc86343b3bf29486deee0266a4058c8e798b4aedf96cff9ece43cacd86ccf64ed3c1861e343d0ee1648d221e2b2d9fe5a23f851e8ac7281fd514d636fb34b3224e37f322f74140fd12d2abe4829e6a5f41e18ebb9b64516a2e99e4c856b3c70dd02f614abbcfbab18e3b06d620ea3a1c8f28e77da1daded085e5e51c5a62e73c831c80f2e405fab16a5d31ae46e9da2ef32c1990c038c044e66288f6a41f7a8188b11be383cf81f44e00dc420ce37a34b7c49c8d6c2557010799a6d25ab0704759a858aa12caa84be615484f18548667a185528926e36b1b06dd2c9db7d8ea3d134d477975469b407b84faa691690b03021885c66146b72650c0ff121fa6f26acf6f402cd5f975d3db1a2d82cc73789ad7aa5e573eba3d36a5b0d6269b7122bf30b77595287252c15eeb691470e45b972160f192e176f20c010663dbe9e776cd679ad0298a8df042b14b3a5bb40e898ff5fea40d63a28fc03a19600264e8f8caf16ef1ba2096bf3258e6d0b2e8e76f50ee481c0ceb4bec544e5f1af6861efb8e3eb523b3f76806e69080e37e77040e83b86031af93bdbc1c99c74b2bbaec19ae3d42b0486203b4e0fa2b6aecca2a0a8fa9fec68ee5e87f1300fc47585a77f4d2b87bf71dfa0fa56a75bc06bf5fb79d4afb6002972f7d69dc3ca6c27f7f1e460ab8be4226099e6d2f83c6c5179932911f6d46af0a57040ef9a74403a964ef01f8ed23fb059033f0b7682bae28e70125f0d8afa86f7cd650713f143c0c304d2d96b3490cdc982659a0bf06244928ea30cb08110eaf003a00b037874d29f021088b430c91e3dcf9887795ddd47ebd806abe2cf03ced19224a719c0c81da62210e35d025b3677b4a3b0559e8ae8ad154e9f8a247d6ccd9d2d5dcede7e638982e18f1dad7215375a218d3e860989c3edc9d2412228bc2d3f16c1ccfd9ae274b93167247d566ba7f48fe6d57ec81727188d840898a5340a1eb9323a58fe16bb5f41eb8b3269289feaeab2ed2af00d551c02b874a88000e6ab6515c8f2d3d9841b9478b4f5a0b9864169e7a42b2fda49792997c98e7a34d2965a6a6b113c1df0bf962116cc255e9b73396e3afbb1af41e6cedff86e927e0eaa24583689ab297a2f99f575119828db7e5953e044856d616faafcde87ae1266dd33df05b4c8228ddf9e2154e99e303dcc9f92451ba2e426b0b1162a4981824b9035ed09767847ca7f8242565e82008335f0f5c6f0df89fbeee6c1390922f42847e76c7e13cfdb36b8d5a4a5c6c035c0ecc17bbbcecd52f84aa2d943d8cb0b96ea4c62e4fea156df9e94471537d4b4e0b2d309004578fa1d6672c1f4ef1ae275f2502bc06ce66979e0e3e8302e1acd994dd253dd12a497ded54765d7b195a6608c7aa816dac4f3d47f3465d60550eafa7b3ef3deb8314ef21abc111639a07dfb2e22af7bbdaa71d4ca72c3974f64323014a236fa4e9fdd5a133d8b1b464ec1e40a9f2696fdcc0712ebee73b81792d2624377ec5fde26b2d4850ee4f05a186628a6cdabeba3def5589fa31d575bdc83ef7389d231899c35912defde418cbbd1dcc260c2f03e80d51e18190f0caf84f3a87110eaf5f8ea60bb1563983726489663947f417c1ea13666256cc2021edd181d1a3ae0ea84317f71ef4ded5bb317e11e75ac212c9523cf882baa3486740f2058dae3180d8f02e2f6a3fbee6d4c6a7fea782ce87866f6f3cc87987cac8fa2dd29cbeb63a41341efb6f300de93bcbac2c414f2752c7bdb90bd75e976c30e5ca54b5182054e68821c36bdbb2a7f061dc8d811c341c9cb368749f4e22f10f169ddaa111ba173cc6417c5b3f700e1415438d8356e8af3650ea15c0fe821904c4e8a3645adc887deddd8c6d970783ce3a366361dc702256483165c2feb269fe53d6a2c14e09f9382f990f82f29d0ca073474280fc3dc730899ae69bbef7822f79118a0d6a9feac56e9c8d2acc52a3714ad2cad77044ac8efed8698486a539bf8cba1b497ef25f8249df14944545bafc3f31a9a0326666aaf0841eec77087726e585e375e7bc9e081f2fcdd2e887fdc6e53fd09befd621111555eaad07cd574f331ee94c49b92bf368ae60e2ff404db7e2f84936eb96dd633ef70e1e708d1c846dee356ffd60aa29c88f396b843b1b754cd40c6d83bb86e738a090591a4b44972dd9d4efd2084c17bbc831c7877c6df333c43cbca8fe0679ddcef394c4b97a3dd38b1762d53b32ef14e9afa2c76f88aa7c5cdf53afec391b6aa2bcd5079e52f9c800bd4574dd2c8eb94629fda4683dae058bd0b3ec69cf713f0ac8483b06d6e9aa4d32fbd988c5fce12e762c5a21d400638b04a74bf54a6b4951b8e7d344252b7274008bb55886734757d7a2cd90ba95a8fff67607e790401883a89c90c0427bb3f41de738eb1f3e570641fb0f8d09b209842927b3ad56c0f7eebf5685f872f6e99e4d84a6fe4f55dc07ac551c055eb12531409aba1049261f5d0e888ddc9d4545eead3e13c9067075d3cc91ced3548ba37f543f813c29c3e170af5a1b80bab3190c2b7b35443a1fcf85e715dee3e27a5cece56e077d5713a18ecefb2494ac2e694895895b657c9938bbae9774f69ed1846ba390be7c5ee567c95f2e21a86f31fb5d6ee61f8c63d380d638f38a2d5826fdb5227c3188ba80b4f67296d803e9c9cd741ed619ebece5b90c8e2e9b20a429e183a2286217f3421164acdc257302afd7225a31b7c4c4d0583cc82a19b5c005f3e26a43be082cedec3e94ae08fe9ca69448bf0d37442a9b8c9362f86dc67d3e949747dca2e7f6d856b0444d18d1c78cb40a19e73d66c14fd032929919ced1fff4cf650ccfe9ae565969edc847161c2b6ad87bd091847de1d362af45d866796377d23cdd3b6672b4eef44300fdd383d5301747556db20787997e5e0348f58b198a706b2a47ae0a5107d1c2c4359b7eaa9eedc9f9d46379687488aae30f69c4bacd40eb995fa4c75544ce9f8b46bb9bada92993f8c8ae0bb20617daab8feadc612da13cfdef52a1877adf27f5cbead80902b4c70266c88ee23b8bfb900c88159498aeda8a8d0db2ed0c967950ed22bc8c9081e16cfd333ba42480a619d7a351b13257dce64103fe6cad3741d2f01b5cf233ac36f5b254c4000ec4d5c006ddc141b30b92fe853ea5ab71d5d6616e36714e7fd27d178a60e4b9d0f341ccd070096a89c111661f2a66df36e1d9797744c043924c1f922baf8a6ca19fa362f84c368aab553ed4d9870586791a69b460ec40f525bfc7aeecd5fd6200d2926a1fb234ed0a7c8429ca94a2e63c36873f9c324b3fdb48c7c7871fa332db577373390c235dc5b2e6450c66dc73facb1e17ff6af15c64f4a5499b03c3dbb0ad1917ca381f79c809f3d6be6504b1ecdd148286ac1257086c92c46c0591195b5c57380ec3dd0dd09855d0b4f1abe07367ccf6122e2db21470219fe65689b6da6f91f1990dec9406bd34c945fcb318e55f0565a0ef38fc9a96e4a458a95906ecfc684bf146237407b2eb72f5eb0b59209df4a2cc3b050a3449d8014c075f1e9b6c75367826ebeb3ffd1c76b5a72b016107348db9fac3eeadfc8758090902c1453e8cc13b3d3338457117feb34dd1fa78e94f48df8f8fbbfa93be91158a4294152eae3a9845e344bfba535482ce55952413cd1728444ea645f2c54f5e8d38ee8aef8bdaf19ee0081ca0d4abea4e69064bdf18a992b7982f04ed81bf8ecd7190b3c28d47987f7ebfd030d32b943cf422b18f3d6c24e5d8318306989635d1f237f46028fc24d36acec086d6f8d8120748131792f402e52065d15af8f21038383389e3b72dd41c61a467e4fdd72c2418fa7516c721899c8811d20b3c00f873afa94291b39aa83d036db7907277721473e8465f24e0b287ceac29a47c9504e6e6322ee5992f0d7f04f34426c5cbb322ee3d66d324c0ec62baa812492fdea62bf12a57435bcda6ea6e89a5f3b5530364eadac68b0405575dbedaf29785fdc2f30b8a9c0d7a3ab3359e7314a3814006136ff699353dd2a546a727873c52fefab66ac9d77c725bcfd55c42d220cb53bd42127098b00995a63dff1f29bcc55f262b30f0abb13e5b1c8893bc6b13472fa877e03caebda33e49c9ae3ab36ad23ea6108a323b26ffdd6bd83ff4888e124d30e7723a8a7d8820f43f81a6536256c0224a5b7cf3e0f34285f65c73c00e19fbe82a50174cbd4ff62f58a46f46cb973751de6233688010f37a1a6088f1334f0312c381d02dcb2b9a8bcc5e471b496fb7b933c07cd4cc1bba548d12eb9df34f712f6bef3465370541b9ac44de74dd0272c5c8fe41ca0392da256e7d36cecd6a1b090cf6b24b46cf4952e03c55adf975bf3370123e8df2343dac7f2b6cf86f90e04163889cd2bcf08eab41742bf6abf2dd367cd14e5ca72a5c68dca48e96ccac8aff5da8c931362d0baed0b7888135774b25222927aea40159b4be958acdda336c6fca25621e0e608a53496a247633b58f70f89e2f9fe807b8e1dc17b3aeda43c6c02c5ac94076130d2d924e695a2c53b9f44e9e9d6a1779587abc3aeaa0e7e466a6337d783250cdfd2c2dd4327e303b0797dccfe08ac75407e2f87ee896c94023a803c0aec2ad2492e4f4c44acc76f1b68e73cf1c9cd868182576dc90dc8452d39907b53fc504495b3b481d48c17ba0d4e52cbe1a80c16ed18bf2e562c6d935b9053916531ddaa2e5f259790167ca9dff4721277db4cd7691bd950860d757d169ad39732fc2f481a88d48b87c43424fa3a0d97ee3f5e8bd81f6fb6934fea610472658de7baa265a2538d3fa226ec4d1381904ee17136adb1e75ca085399131f749550e4059c4495a9dd1ee8976ed84648b2bc33e09882d38ffe9ffa480aef1bbead68473934f67bdd1c7f5367b4f37cddeb459ece15792a6a190bab95f965e8a9af5782880c9532f8e1d44a19b9ef6e9fd4b2950b8aa603a7a1750948e5ccd236d9e4ae400bff1c8b2da3bd554acb2d312a39a8b3aee373bc07e035d2f54e88f296ea9d443726bd46dcf0eaf5d55fdcc1645ee362804031604dbfc006af3d6b4b6c05a9b5d478843e63cb0342ea344a05a382f1a5872174434f9b8bc3297e9dd8c87578ca143311912bf559f3029912a38df837bad5b16bfc632ec871e35499dcb2378e1bd31ba97d42b3d7a8501e58cc7d9b5f3097a38af3ef30236a38fbe78018eefdfe6baf2035e0ad77353568ebddf8f44f7441cb8f34fb1269ccd56b03765155ebe1a2f4ba72ff166494f8d0501d0e5476ef55dae38b58f44ecad205ba4416e92d090bdbaa2601e4b55ea0e8ee851d747c8a466c259803d89257eb0683c90ee1fff4cdb75a8cedff23b3e9eff0075ac15f220d5861f70532610b40656069d1e6efde7bda6922a525056c2ee74b04791bfc338354b21ebd0e398587afa0a5c51a81bf8a81ffa6d84182a77779533c4695577ef6dd73812e28d21dc29f686de1560780f8891db52a6421ebc9c2d64b5abaaaa06d2fc4dee438f01554f5638811e095350f4c8517107f948046d865c046f943afc6117a91f38579cc4fb7859bca591eb1186c56b226fc9ff1afb4a2aafe61cf9f1878cb5a1636316410d6aa4d3185d410da46b57c5ddb25d27aba521e65efb527c09c18e2a5dc7ed09aaeee0a985f980051c38a812f612baedd8369c19413b5355167e422a10b5517757c8a79794590816ad1646c08ec631409072df15ba786cf595409e105b88f99f5c9760f527bb78b7e07618aec42d9c4eef22cba391e5d7c687990ad2eed33201703e577eb1ed9567ddfbbc9ae08f99841e9763394dfb5b970894e765b8c5c7691dacfbcb4334b7f6058f9cf769193d99a73d0b913cdb68ca25ed803f9bf9b71511816025946189d4d36f59fa6ccf21171c2c2cc576e23c03445d7c7330e0823beac7db0bfa6f852487622f432296c0110c8e8a09fdfa75a76f090b388f008aae3756676eb0ee5f80d76f58f03c93fefe93e4f7bfdfb6ec9f9e35ab9bf223800c31eb5fade237b0beec1a49ce6b24a2059ee027971329b16e6c7936e56749613734818709f32002b1ccbba6167cf5823500505fb5538583054d564a8ee79ef35b125a7e35b6df20a0b04d220ce5d29ec25a7e40b9050dd56cd5753e9f57ba5e955947e5a81010fa54d9a9d8bdcb83d4cd10294ce811f1897387617ed139c5a43f0d4287f57b233886361a06059ac3c46b1b78e9c534d61ad3b628a3e3edcdd1a6ba8858e2e534c96a5238acb93eee96ac4c7816af46dde2d90f954c46d7899218d76ef150a68435245652fbb2df8ea1284038b4c25041ba1da8f3fb5565d4085ba78ba7ce461c687e53ca7e61139d9665beffbdb23dbc3fcfdff7fa5535bae7dc36abba7a34ea60eb11f416b530538ad92c16dccf88f44a1ed1bc1c68f282b5b83a9cff2be4f7bea65dd8f01e4e0efbb11f3aa146ba66f42fe801aba4a13adf092c706994504f606304d88554f3d398a00af0923b102445337099df7ab69dfa24c7327388615666ff4ac81db966446a3362460c3db846d741887f1398591cfdf09f14bf6ec5692e6fbcd8254a42f2d5a66e40bb7d981b31d0a8efce095eac52ff7a9e514845a3a923dd5f19600515d7a3315eb0e17bba476ba818d7d220a74fc8265b495e61943b9844de4f83443fe9c9c82f3b63c71c8920680cd2e9014f35090765f3260bd386d5716d1e97ef17db03ef7afc88d3e793d587482dc6d9c0bc670865136b2377fa1957b2debfcb73b672d8ea829169c69b701d0fe26e98fc5640cc68e89e8f2ba1cda93e52b0ef06f60065015e81ea43e26e7be8001c317d399fbd8f2fbb66cf2a5728d1df0d81e70647388a7822e00bade8e53de47d7532fd1c989f37f7d63a8f9fc20b525461b8efe0e7280f0969d31e3248fc6ae878cffe6ca212bf082ee4f8d5f9bb7d0b493e290ed56ac2f18b3884d01424420b2fc4abf797177fa6e55c07124d21614f6bf41999df599014874e5926d7dcfad14567cf0376fe9c18137cc20ba3e1c6507d88d30abe8e0fd92c33a4bb54be7e8773ef576f9cc28636134ac5ed63709992ff6532e34a6c1dcca4e0580ab817c088ee0310e97828b00127f7ab7e4ed8bca7950b96da400974cdac127136b1940040a17c55885cf3bc6ef04f05fead9b63cee4d19410c2548ca27c7a67635224cb92ef759716e0f9b42f199a0e8a06c8fe71a2ce991e338018f1a0ad74d13e49630e918272476fbc8bb804181c54e53c3ce09a6e7ce0cf7e0e72747afb31c5ee42dfb68de3387b6a2e343ae1563fd692b4409de55839228a4ec8c277a4a316d39f6b71aefdfaa9f133196b9c115d07b3984662da48625ba10f719cbf239d942675bb36f12c735a77b53293ab08b21908ad2c7dd33932f6cb716498a7687d1d430e147091b26de4f0960f41c753a850a2a0238828ecbd3c23f88abef90db99578feb21e537bf7aa5ef5a185a861f5610c4b366c187d3bdbadc075aa73162aa49fae3e44f6d3ba0f3360c56080c4faf878fce885f9d8a8ee9cb3de7dd7c651dbd517a1ba2c7ec18cb8abc916578a87534fb4ad0da3ff3f64ed4d1151ccf7ea0a41a00d6cd0735772d19ba8d2699729725faa4aa502a3adde3041f7fe630d4e0020ca1f11912cb44b1d082506f7c1c3f57ace50aff1b884d4e734453d748e3b1b123345edc3febd2a8e9189fac1e8dcffb9d6b699d09f151c1bb03d9008efe1e3d44030b571e39202c7151799a6770ad2e037d14160a81fae121f7312d9fce06eac83a5da398cbc24193aa39e40272965aba0a7c149c62fe94c8b97e7fd95142df11753cf128b08d73e2d9a84fbedf5c37c2f11af47d32b987c794d78a8201adc9ce5057a04d64f5cd011511bab5e1ae0bb8c50c8261f0c96c357cc335820ca9e38216d971eb0120845e2693d8a3ba127304f0650513734b613f6befaadcc4be5be8afb13b2073f69ef48613ffedc4710e982eadadd697f1317f6c968546a8078b01a13bc2f3ceb35a471adbd6a91193628e051d6d4932ad53eca2d39aa875f0468fbe5922ce9423379ca35eb7f9c768095748610b8c4a7c5ac792513414dd806f0dff0791d7ff13f6d4de39967206f3e397633514cc50b22813a6e697a4870ce7978ba9c861853f15c2a95f140fbe9e8d8cff4ea9299809b04f402d384b478be7afebdde2a9367a68df0a6432b1b109339dd2a3414a8d12664d56315fd0cf27a888eefdc8862350e27e6a7a3c296cf3bd540512bfa5aa1dc0af61588e3d2186e942dcf261d9a416859e45b180e7cee50f5816293b613a9da1f18e5ef26d8107e74af70b560b56ceb7353a731b7c288c1283b2b75cb0615b75fb8ff3eb1b90974ff022b68e7591aed90c61dfbe4e4492031616db92384876a67d055e49348d9ba916f3c412490b5b26d2bd36cf266737af43a001fefe98fe2eb255ab8a8bba5cd3d5b2ddd057a6fbf6138e111216f9490851cd83fe6eda088473360e0183f17ec22934aff7d2eea8b2333ce4fd38a31ce7850f9a53f1567a8a1ded6ed5d19adaba93370276ca8d13877311fba4245296cd3a34e4de833a740c143ec5e20861dbfbe0b914d8e9baf236403ce6cd18c0e10b2cc63e3f7cd896088a16aa15103892cfc186595a2385e0c4cfffdf5404d633dc05b2d02d9cb5552f9411b38e063a5084ccd12dbb593397fa00f5c8b90c7a92d34a080d5f09747fc9e6a169841d937eb790f627cc71f3bf1ea3b01eec2f4339411241b270f2b160351c0303754f8992c558c99e21445ddf0e318b230ffdee4a914285bf40d435154636fef146489854629b355530874a1b5a155ad58af98ac42f2fa16675f2326d15def674ea7d16c2b8375959c33895f3123cd2967ce60970bed04037b625a1d303335849cd976a780b17cd7cd436c066467ca425f472fe1fdf99c1628dd48f38e4f3bb866214726fe8abf75c35e1ae768864221321cbd1d4c3e4f11394bbd442c1b81d3f5999260198acd2fa4f9066b22854be44cae063a9303add6c72eada33cfbb9a1739dbeb8cff448cbe6d77daee06dc770c9fc02574ee8986e706af51ed579023b31233b46d209370f0ae1c9ddc3623a0fc4b0a3b46b906cb78bc1e44886cb4286e7f326d89a7ff501da7ed89acc2ce4f3ee3d12db2a2563938d7c70ae88316cc349a1c3843b1edf51ddac3abd891aace9c9bdbd1decda62dd617e9b597a35154b0f69fb0295fcd446e3f956f8e327da87289d0040fa64d3b755675a555a440670dac0008f4bb2e1576ecb12a404d459db63ad3800e2fa743d86a701be447c3673702870ea82570a60123d34fe385ecc2eaf0f2468d26bd4737426f520ab3ff043afdf6ddb9a3f0ee39ddbb3b80844e9880d0738fabcd23e75d2dfeb8969c45e84c389b45381690c2acb307d769f08c8262395ce95af09180ae3bf9fff771981c72763ff2352ec7eade29db3fddcd62931270e63f73442c7d2f33558901d34bd177576c72e860490d2480a3d45f8c83b8a52aca800802577b8dfe89bb4685471d6fb0c44c3fdf3a2183798dfc61f3ade5ace00cb47b12962b4d42239fde02021c10695b852648df878b8889e035cd71d38b957dec81c6b28576af5da654aa78ed6f592475d46b88c36b8a758e6e806c965b197212ed2187b11c93db7d0ac6566149c331360c977ad01bac51c7cfc10b0e4a5a81718c893231b52dcbecd9a6ef3664404565dc9497e97b2288a0c1b04916616ab05b363fbd81c6ef0753f239e19254bf8bb67b2a4fde68f6349ddfd3cbf2ff6a9e6b71e8526a3e6a13f4f2ba668fe7f8f7c6dad0d508c5fa55278201b6071481a4aa5411741851c984b4d874f26342bd2a95f59636f89ba36efc4c606416404b2973310ceec6edca075cdf0f45fd79052ca9dea504e285bcfbef952414d5e63c5b737eceb5d27de06a3cc9859a7e36ab332a7fa84bb709d866ad41164950e0ae8052c20f2154ccc6a3f0f5999b2896ab72c046344eac988304ae2c9d1b75ad0a6e237cbfdbda9dacc8a90f41785d33ec86b0336a404379b212591aa083dd1eb81f3e33a8f2a0e94203c8c553307c24d5a23aee21d84e27dc827e370ce1816a8c3f9e98f70f49b99e13fc8a3c7dc8a42b925ee87148e9458ff14ee94ad79d8facac286ae1de8b88d33478fd89f8025eb808af2e8951d7ebe92bfa515dffbb288b35d733cda25bd4ee09aa0e50ec691617a3105d968b8b331d7c2bc6e7d74dd6c48ee7c193f45c538d18750291077d9bddf088a355e5a996158605d448f35735b4bf76bb9455237df9a9a228e91493cea7bed81adf469c035556fbf7a80ca30f1a2028dceaf75c504e83b88130be6dfce4890e9a78f6e3c5ad7d3e20343dc806a85ba92dc329ccedd04ea54d3c729379c8aa538c4668266cfde57091050682c0cb3a69c8a6715aae1e6ed447e4c5110655c4e8643afc8c8e10a4f6236b79779047b0cb4ba33cecefb861fc0ba16221d2c1fcc6f21d1226642ed2789b068f11bcd013ac2d3c032017d653c0774879c9dd4a192795d968073ae53f4af9a53e0e479aa997c05dde80debd88e12480fefbf112b9138d0ecad6b9de3b76f6017fd7d1548350af400d315f6f06bde73a405c65b48749758e66abf27d5cd3a9b35945cd70238e3ffa8c5be034180c58abe22a96f54466e224077266c73329810e029eb985178d3bd985b70f8ac7d56b9aa9e6f7e31e990ca7f626f972311237d0746524517649a4e9b561b926dcad5488113632df03d16575b723452378bb84163c7c3f9a1b2a34134891498dfe34a43d22f70465d57d4be09de8680b2c1beb1231e2c1cf7fe3d1cb3fd4ad9a040617f31eecb945a32698c1d77b9d01fea968296865c577df90bb44dc39b65ac8639a4c5c4593b8d350544bf2e6ec7e6eef460baf11ba11ea8f0a5276ff7a57795f9122d8d2b828cbb7329ab4146c85f650a3639b8e2849d55cd59b49551083e93499506194d25ea43d7c33fd7bbefb815baac7429abf02b7d3b03453f296518ddd314335199909effd79e8681079d248645c57e1f7ea2d9332255dee9b5d45ab829b71c3591a02f885fbd7d422f0328825b9e616a0850ce02182a9b0396ca33637755bd82fd2a21ba8cb78b150e191c795167ae4c43f5d3cb132784e0902a8dc6bffe33e7084343706ef88f1d3102e1fc3254554bd48f039bc499e39c656a3f90f98714b71b5858904796f311e4fd9dc7681b7636d84bd0df0fd0712bce6e759af26ae7d34818e22e900d634e843c5b5dad20277c8214ac369fff63f1d7c3a766f3441fd169601bb5a2ce8306245071e361117bb73c6a8c9c1ee77eab125ed9e7ae522c6ca80de0d39f5018690c8b33ef1649e812d5cbcac1ea1d4412697cb45710f1a12ad1d27c0cdc27bc778ff86d95319cca0eb5002ba15a5203857d56d8c8f3893f9cc8094923f8b18f252682c52f5e8076bb2dcdd014517bf080b67f518b53160c3613cfb813ee963334daa1f097ca0cac066addc39bb4952bc6d59a158a6f90db5557599c91853bc78df7fc268f8733ceccd67b4bb8f029e09e0b9a456dd1aa06cb2ba45a062d2d7dde6754a8fb9d58162ecee4ddc552ce9ec86eb198053f03a4b2eac592242c2c030568ad68212022a9a9ab4dbd03aaced21e2641938ef9f0409daa51fc1cf99c6eb5089458819cd9a00ffa9b105c44c420a768255b05368be3f4d1484b520dcbba0f3e946a3a469e7ce720d20303173b976bac74224a425e9b2fc5cee7b5d7cfd9d9eeff72ca5b1e1726b90f2eab8a13af260d360a886df852eeb98d7dc0a9f8775d59fd8f502b89443ac77392f89454e9045fb733de66a546c8e6c47159777ddfe7df283f6f57a7805c5e6440482379d3ba9578ab90d28611f814de0dba2f677ea2b13950c5014692c92bb6f4d2dd230560f9d7815a8eedd41624c63ffd3591a8b24d375527917248e1ec5738182923bcbaa9ecb93d6f26c50a41df8dbff07268a0b24f2b8d24c5db3091f28473c412d49b02c82dfc1f9226bd6c3b5b6ae976a33c39996cf2b9b965ccfa175d6fd6e2eabeac2ddb453eec611da72c9cb3ae76c1adbef730af25ea214eb7cd016b6073d110e604175d6b727a904de6ed6c2e74541790d9e2f152eb1e34c4c5c231ffcbddf594bd78703821d34f2f80aaccdf5fd89b2f73b2125c6742a5fcf778ff95cd633e4ee0bd1cd2573e1caed7ba17d5e6c768ade000dfee54269b53d163c31c06ea6006933387c14849e1d91b87b8744194f8275550ac7d2702955129f7462166c30400fb60557b7660ee0b82ef9b1f867a74afeed989d5bfbf5c285ccf69d4acdcc3403666c811e4b3d0a81c2d9f75db40de2a65f2129e6dfdba0819815f72facdabac01f76cfadfa4edf2c51ddc742c76c3e4249ca9f73fbb8417a6eb007ed7b796ed5103f3d17bee980f75aa87f0a5b23e6f2ce975bbea71f001a209903ff163ba938b890c6b84220a7033c13ecde69355bed7b2e42a1fcecdd510fa51c41dc718e005a58c6a081e32ee934c1d797c02b56f3dbc43eccebd60f2c0cac6e841dbab8f98b772484537af3e782f457ffc01b36502ef3db51b0fefbdcbb6e37a733dff541fba5a6dde18845cd7c1702c2547d7966e421013a57d7f916087d61192efe2fcfc2bf81b11b4176ebd849c22e783042ef85d4c4e942d2347f9b05c8d154baf0f37a696f4fa78c87ec5088260921cb3522698f268a1ed4b4df4892d5a291c31e42d1ff01c7f8abb4b7a3115700a1d9e6ba6a4aee86691c1ff62a484224e13345bcb1821d92784b70a5ab8e6a01689d96d93f45eae34324766f79bf9cb86a6a64678ab9397d855d7eee2196441e0b4c895b7b92005e2f3281ac46380c0a01fcd54040f5832c257fb2b32895edc7aa67aeac253b86b18f12cdb691f0a939ba7216ecd072523727541ccd1932e247954a6c02e5fe1b861e39d209b7cf411dd3e5b7253f1100cf20cffb0173fa89a8f242d741ebc7f3e0faf9f501f5cc66c0befac64ad25143abad9ded0c8b362efb364d1aa1daaa2d47d45c660d0be006a3618e5f9bb3b2b9ff8e1484482c8d88fe4cc8ecb012a072b3daa2f1b85f5d121b9467b462ff4f7a3c1802f2ec8decb2e2ffe91bf70acfbb4bc0485547e9d36b6552a5729d89a04604ddd3bbf5b22582454333b4f2861a9cf199eb6a563a361fb58e247f8ebcff83022489544faca373424634181439b38f5dd38918ac1f644135b8a45127f65fba87a39b6c8dda8b4935d0ba040dcc98761fe15309895add1e25d0c4837452a0487a956663980641350dd1f86332aa777b7a6df290f9c9f1dc67ff9e11ac8022bd4bc97e7fe48babf735dd27ec19f2ce5537cd2e12a92ceca6b9eedb1a99da31c46cca8abb25690a00512a31f1fa85f8411e3747f7a1a4a425a99b3425d9975a1361eb33a208890eeef4f75036b837bbd5c8a5dd4ba8f0a1a21abb79e2f7ac1a0e9a76fa47c28de5dcd1d51091bf841b07204ea5b750c559518512339d2632597e9facee4feb66e47c40506fc46aeba9a4633b93f12ae03d147734718527e72d13d8c4a3a3683d9bad1c6efb907440fa5093390f6d4fdeee2ef2c8d2d36495c69b3b3385c56a6b4696d55d2e85a755c12f4db409ba1ec1f0e976eb4aa27195b6e9ed0556aac7554afaaf3bcea57508267d2fd4fae1fb6c56a0d52badd76273768a9ce3e1546dec924e03679fbd1ba59c0e22a2735c1878a6354f4854fefb0e35e8a77ef8ddc3a2b09be012fa3b2666718827611e347bf05c5ff18a1bcb911e709764401a69481249240d682168ef981f1a5cc80ab88f9dccf2f9d5cb448485dfd6afc733fc08af928b845344dc354c756358f56d6e868ae2d7ce3ec579bc81faf1ab409a6bf686063fdc4fe7c099242c8856e8ecb54ed45799891b89c34fc52c6bcca08be31eba3457da2e94d16d02ab16d4f789d89fba826b28ff78ccd7aae9bd51dabeea21eb767fd745830f51564539a10852e159cc643eb1852ee0025c64a216540e00697341d2e2f1989d2da9fbcb42bbe6b69c1f45b83a430e3c60bff79e5eeabe621ed8f51a8dfcb50148896455a27759e6dd7bcd55f5ef3ef7773d4162b72c29206dbac2c99cd0595956db53fc3e8e9fc61fe4e427643ef6a4216d4968f979dba08f3ac007eb90d947d50a74eba375d78e38c82dd9388b998a3b2954837f4ac7244d54aadc8dcc8162b4a0e2f2cd0bfb8036f11f9bac599f7a052ea920bdeb1f15fc5f76ef2a02037ce871a18d0ffdbc2d4f805b3635b51ab350c3cf751c2c206f397dba3581e680f8dc581898338657e5a28c869521dfeab2d8d4864ba5fc53ed6e661b8236229ca5715776f0ddf77ee2541d0e776668ac7045847a7de94f8bea250abbd6c7a80ead82aa64b3b5bbc73263b752f07eb00a1d594c26e49b890000447457f32784971f08427b38410d2abf981a2facaf87d55ae172db38d7d17bbde25f25f07dfe32d6f5f7828153aeaf7242882a1a57349d7be71765cddf2c288796c1460fc67200d13c3fe4fafa6983299ea5544073f6cb7b21d92ae70069262585dfd65f2f9c62a802b5034408c8073bc24411774c629715afa152e3556c746019c119ce92ec3d8d245d8752a6ef82ee302c5a6108fea30c8b856032cb563da8e2e3b706af51a2b72d942c4351a68a2854311b0c026426a4cc2439f009683ea5c9475fa2bff5e42f6d4dfd0ce01a41d67e3635de40a21068ee2bbdf005637f2cefe49dfba5d52e46eb8bb78e1f2239df49125ba4a0b512900691d249daf7ccc3ec644020f2cb5e0085a722a41bed434f4b0de3f53bc49f0e9b72ebc9c9b72cc3fd42c5e37ddd6482fa126074dae6a75d5ee85ebbc5fefa4bdecbe2f12e988b5ab9e7123b742e291b17facf1bf88a5f860cdf5f541008ee5bfa390b81c0e565d0b2e72263eda8e12485f3af68999558b99a0fcf6367dea11434aa762b8bb357b5a26ce4b5c1c2f250346daf5d016380a419fa540b6c11655870acd4238a6c1b73b522a8d0b0a95cab897668b5233996e3f5ba81bc629954cb006065032311de942324a55041f2125f42f0ab1be3254d1a859d4fc25ed265caeb8a911b5a470bcc086df8ed3bafea5050fcf96bd06fb160223f1e8e7ea979df855f4f4513727e1371f614855ae71b220d63fcfbd6c9dd1cb27a1511608936c000b08ccadc85c505ded8bd878ab92f9c36d209b969ddf547846082a943a63e45071e87d2bf2c02d9a939b0de5b0791612e982f02410295eaaebc9dce70518a163273b907faaf5b5fdb2ce883ff36243f806e99f0aca890266871f061e57b252823dc503eb882faa9921d0ff7558ad391e26bc53ac21c8f8f7fa84d5297ae5ca92d69bb9b075f3227c009f2a70b056ed15d6406c7e427eaa3b2c4836c03c0579a207ea672852b586cf4e94fbd46b3489b23badda3a97ae9051904cda1fd41af6ad3bc9764591ec81399f6df4a87acc073c4bc84ed344dc6ae7583ee9b7a2506f0d4c180d9bb00c979e2f9c3751adee2ac860079333ae38864a89110a8860e6d919b06ba806d5e901c6d5ee447b02df066c0b2c2b0699d9c9263cac27e5584ccb1eaebd66e2f4e1c11b438d59507d3ba7353b21def02e0136dd9156dd3291ef95b4dbf1e94ca78929d768595b4607fd0d8693cf58dd3a8b226e7c2b51f8e9df287f3b0a395d8b17bd05f1d34da757bdcb6901cd39ce5bd88fad0d51daf4ffd05af2a8dfb617e0f382914a187a2b53f946b74132a28724a6cd267ea1f7c00d5ac5f1c4827d591f027fa6ec2a460c2311615b329bbca7cd54965e368ba854bf006fc9cb99b8c4d5a5fecc886059e0d053ae9076a5385b42d090e33cf2abf527f0d1508e0885729504a6e5704fd787aec8433c49b385d94c08b531cd11d5c35ac70c481b5dd7237fcc3e0d5ebd52939451741d304bf5f8e210d8d82debf49f91f9eb5857213da0d523b12bc2b68c19dd60f67a611330c4c0b61c4da4e3504a182c26e16ac045e10953458e8f2053a0eb39799af9b0c8d0f2b30177aa64a4d2fee4971e912f88f20c4228c5304cb853a31312465d705291ff58fff4405aebb47e44c80c2df4a352a38ccbdf2c910a62ca7da27de925c8fd5139b417249ab674330e8907da7fd62d872cc426b96cdeec850cfcb6e70a4b4ecc06d05a4a261884ec36766093fad53e2671bdf73cf32147efffe3e23bb8589fc0519e0720b62cf2f8bacc0a9dfa8fa653c726d702768067b433d0419382f63a89b04dc51cd39e4dea789ac7f1eb63ad1605e4f6a15dbfeecdda297c45f37bbde661da3043a4526c73b069e1318109f449941d22d74d72270ac8e28998b8cb36606bb4cdee44dd70ec4966adde54d555b1a328c5d5b60b34e5f63948dcbf1947af90ff78853eb009ed1144bfde9f7a45bbc662611526aada27f633e9649e0458787d2027d6525ea8072218dcffe1a171129d7fd301f9f8e1127049de0cfaff2f3e00319b936c577430123352b2aa4079c74839aa1145ef675bc4fea5a9b71ec6947427b7740989fe3a673ac7f822d5e0336ba8cd750153659e0177e97732af3cd03e7bf3ca590d56ac16204750350a5f49570ea97d83cef004fd439bdfd8b2263168c534ec4d41707dc1112f7994a712eff31fb32aa1a39ab11836760e5c8077c74d600acc6a339939dd54a224d7ae48c5e999c366eff2a415465e0a067ab2c5ff55ba34c6da26b585f9973203fa4b41bd33cc381671babf02dd28e6caf3c63ce4d5441f663d64c869ba5a3dc8b592bbc8d6927d04d4f6c57a7d4b2437191a17bd3000aac2c336f383d4aa44722743a4b2d6b7f7bae9ae87ffffafa45deeea78d29a2c8031b267541ac16962ce53989fa55f010cf4efd13bc615ab778400c75fa8383b537dc7f1eb2836815f258f262ace1bb083735dd5471fa0abe6ca1f30ad3a27e27588cec1df4db25206fb65cb5a9ed9f70269ddab2d33c16ce8eb4d1f1f9bb9765bde758f99268d8885cf52f425ab7a9706ec793c005f58a73a73a4227326d1bb506d239cd03709950a49f06975c4163baa4e74368e79d2f1d9703edf28468754641f0cd7ebf342da3199b7d20a149a0eaef06f9136f4a9e1c6378442de02038ef0eaae06a799fae3a9c347600ec41ba4b2d34d867acf8951afe9045913aa8e6c3e8d9c35a42d8fc84a40630d9fbaa4b50765c76d4629b719b33e9725731bf1ccefa7559cbb4cc9dce5bfba0dc2730d10794724a8b4a4f2c9adc145d5eb86a3f157d55872456a4549eb47f8e93f6d1625298424b77e6c9ddcdf6fac57216c4471079afcea7d16489757fd79c68b4c02e1c50bb6dd5dcca41040a218fae13b18b198164d0c8ab6711d12c5a8b2b9c72079f023692656ba77df12d946702d8b3ff06b8a5df8222a01e381df36411992c334e21ea6cba6efb6c4c1d68e9806627a0e19baf68dba233b708aff26e5ac86f0bc323389cecb1c6a43f4f8663af8ced3e3558b6ef89fbe28600d6300d5d2fbd6dbc3dcfdb1fb878af8826ba2b42eb53ded0ce440dac89ed40a6973f3f59402ee03f147d5f15d653264241bece76cb43a8f3a31971840571768616124708fd46bb28f3428f707ac507746d8c01e1b3da45d49e08b0e10f7d569bbc325a029b22ed98d37c24157276b7df37d7c9e67606e57348f449df53a32e0d7b39caa01760506ca9a64bed43ce40e943e02a43e81f45f1469a01181414e197ac2230278d3adb0f98f8a647d5a60037421dc58231a340afe27c6ceab5d68f36d97796227bfee970169f0e6c957cc8108f9743f021a8e884df161aadb151d344f66f3f01d81815fa1ed7d172f21c3c9ab46cf8eed1bf97267e9c3e3ff93d258d1694e36161bb3b388cc5112e142476bf60a2a080b7df9ca9ee896c45e3d98f774aa35b4ab059c4461c7103bfdb65fa5a3409df09c1bb7fcdc4a5213b89cde7c59c11822d295c94ff82349ef0914da9f5bf9df3efe60ac11a4bcd18d11621a2860d65365d1f509510039296cfe54faea935508e1abba4b2a74170607ff8b478a44a81ffc9013f9c7bf184636f3a8cd2a28cf83887e54f016d0d2ee8c789674f9db7a878399fb72abefd288d0beecb12f5c766ad1cab60fb930115</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-wave">      <input class="hbe hbe-input-field hbe-input-field-wave" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-wave" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-wave">æ‚¨å¥½, è¯¥æ–‡ç« å·²è¢«åŠ å¯†ï¼Œè¯·é“¾æ¥åŒ—ç§‹wx(bq272701)åæŸ¥çœ‹</span>      </label>      <svg class="hbe hbe-graphic hbe-graphic-wave" width="300%" height="100%" viewBox="0 0 1200 60" preserveAspectRatio="none">        <path d="M0,56.5c0,0,298.666,0,399.333,0C448.336,56.5,513.994,46,597,46c77.327,0,135,10.5,200.999,10.5c95.996,0,402.001,0,402.001,0"></path>      </svg>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> ç”µå•† </category>
          
          <category> é—²é±¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç”µå•†å¹²è´§èµ„æ–™ </tag>
            
            <tag> é—²é±¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŒ—ç§‹æœ‰è¯è¯´</title>
      <link href="/article/bq272701.html"/>
      <url>/article/bq272701.html</url>
      
        <content type="html"><![CDATA[<p>åŒ—ç§‹æ˜¯ä¸ªè‰æ ¹ï¼Œå¾ˆæ™®é€šçš„äººï¼Œ<br>äº²èº«ç»å†è¿‡ï¼Œé€šè¿‡äº’è”ç½‘ï¼Œç¿»äº†èº«ï¼Œ<br>ä¸å†åœ¨èŒåœºå¼ºé¢œæ¬¢ç¬‘ï¼Œä¸å†éœ€è¦ç»™å¼±æ™ºé¢†å¯¼é˜¿è°€å¥‰æ‰¿ï¼Œ<br>ä¸€ç‚¹ä¸€ç‚¹è®©è‡ªå·±å˜å¾—æ›´é«˜çº§ï¼Œ<br>æˆ‘æ·±åˆ»ç†è§£ï¼Œåœ¨è¿™ä¸ªæ—¶ä»£ï¼Œ<br>äº’è”ç½‘å°±æ˜¯æ™®é€šäººå¼¯é“è¶…è½¦ï¼Œå”¯ä¸€çš„æœºä¼šï¼Œ<br>ç»å†è¿‡çš„äººæ‰ä¼šæ‡‚ã€‚<br>â€¦â€¦<br>è¿™ä¸ªç½‘ç«™æ˜¯æˆ‘æŠŠèƒ½æ¥è§¦åˆ°çš„èµ„æº/å·¥å…·æ‰“åŒ…æ•´ç†ï¼Œå¹¶ä¸”ä¼šä¸€ç›´æ›´æ–°ï¼Œ<br>æ˜¯è§é¢ç¤¼ï¼Œä¹Ÿæ˜¯å¯¹åæ¥è€…çš„ä¸€ä»½å°å°çš„å¸®åŠ©ï¼Œ<br>å¿ƒæ€€å¸Œæœ›ï¼Œè‰æ ¹é€†è¢­ï¼Œ<br>åªè¦ä½ æ•¢æƒ³ï¼Œä½ å°±æ˜¯ä¸»è§’ï¼</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Reacté€šè¿‡useEffectä½¿ç”¨å®šæ—¶å™¨</title>
      <link href="/article/e8c9c076.html"/>
      <url>/article/e8c9c076.html</url>
      
        <content type="html"><![CDATA[<p>æœ¬æ–‡è®²è§£äº†Reactä¸­å¦‚ä½•å®šä¹‰ã€ä½¿ç”¨ä»¥åŠé”€æ¯å®šæ—¶å™¨</p><hr><p>ä½¿ç”¨åœºæ™¯ï¼šé¡µé¢åˆ·æ–°æ•°æ®ï¼Œé¡µé¢è·å–å½“å‰æ—¶é—´ç­‰<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span>, &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Test</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;render&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>)</span><br><span class="line">  <span class="title function_">useEffect</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å¼€å¯å®šæ—¶å™¨&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è¿›å…¥å®šæ—¶å™¨&#x27;</span>)</span><br><span class="line">      <span class="comment">// æ³¨:åœ¨setCountä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°æ˜¯æœ€å¥½æ–¹å¼ä¹‹ä¸€,åªæœ‰ä¸€ä¸ªtimerç”Ÿæˆ</span></span><br><span class="line">      <span class="title function_">setCount</span>(<span class="function">(<span class="params">count</span>) =&gt;</span> count + <span class="number">1</span>) </span><br><span class="line">    &#125;, <span class="number">2000</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ¸…é™¤å®šæ—¶å™¨&#x27;</span>)</span><br><span class="line">      <span class="built_in">clearInterval</span>(timer)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, []) <span class="comment">//å¦‚æœè®¾ç½®countä¾èµ–,ä¼šæœ‰å¤šä¸ªtimerç”Ÿæˆ,é”€æ¯</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;count&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">render</span>(<span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>, <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>))</span><br></pre></td></tr></table></figure><br>æ³¨æ„ï¼šå¦‚æœåˆ‡æ¢åˆ°å…¶ä»–é¡µé¢ï¼Œä¸æ¸…é™¤å®šæ—¶å™¨çš„æ—¶å€™æ§åˆ¶å°ä¼šå‡ºç°æŠ¥é”™ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯â€œæ— æ³•å¯¹å·²å¸è½½çš„ç»„ä»¶æ‰§è¡Œååº”çŠ¶æ€æ›´æ–°ã€‚è¿™æ˜¯ä¸€ä¸ªno-opï¼Œä½†å®ƒè¡¨ç¤ºåº”ç”¨ç¨‹åºä¸­å­˜åœ¨å†…å­˜æ³„æ¼ã€‚è‹¥è¦ä¿®å¤ï¼Œè¯·å–æ¶ˆuseffectæ¸…é™¤å‡½æ•°ä¸­çš„æ‰€æœ‰è®¢é˜…å’Œå¼‚æ­¥ä»»åŠ¡ã€‚åœ¨timeè¿™ä¸ªç»„ä»¶â€</p><p>æ‰€ä»¥å„ä½é”€æ¯ç»„ä»¶æ—¶åƒä¸‡è¦æŠŠå®šæ—¶å™¨ä¸€èµ·æ¸…é™¤æ‰ï¼Œå¦åˆ™å®¹æ˜“å‡ºç°ä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„é”™è¯¯ï¼</p>]]></content>
      
      
      <categories>
          
          <category> React </category>
          
          <category> å‰ç«¯ä¸‰å¤§åŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•™ç¨‹ </tag>
            
            <tag> React </tag>
            
            <tag> å‰ç«¯å®šæ—¶å™¨ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿œç¨‹è¿‡ç¨‹è°ƒç”¨(RPC)è¯¦è§£</title>
      <link href="/article/9ea696d1.html"/>
      <url>/article/9ea696d1.html</url>
      
        <content type="html"><![CDATA[<p>å‰è¨€ï¼š<br>RPC æ˜¯è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRemote Procedure Callï¼‰çš„ç¼©å†™å½¢å¼ï¼ŒBirrell å’Œ Nelson åœ¨ 1984 å‘è¡¨äº ACMTransactions on Computer Systems çš„è®ºæ–‡ã€ŠImplementing remote procedure callsã€‹å¯¹ RPCåšäº†ç»å…¸çš„è¯ é‡Šã€‚</p><hr><p>æœ¬æ–‡ä»‹ç»äº†ä»€ä¹ˆæ˜¯è¿œç¨‹è¿‡ç¨‹è°ƒç”¨(<a href="https://so.csdn.net/so/search?q=RPC&amp;spm=1001.2101.3001.7020">RPC</a>)ï¼ŒRPC æœ‰å“ªäº›å¸¸ç”¨çš„æ–¹æ³•ï¼ŒRPC ç»å†äº†å“ªäº›å‘å±•é˜¶æ®µï¼Œä»¥åŠæ¯”è¾ƒäº†å„ç§ RPC æŠ€æœ¯çš„ä¼˜åŠ£ã€‚</p><h2 id="ä»€ä¹ˆæ˜¯-RPC"><a href="#ä»€ä¹ˆæ˜¯-RPC" class="headerlink" title="ä»€ä¹ˆæ˜¯ RPC"></a>ä»€ä¹ˆæ˜¯ RPC</h2><p>RPC æ˜¯è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRemote Procedure Callï¼‰çš„ç¼©å†™å½¢å¼ï¼ŒBirrell å’Œ Nelson åœ¨ 1984 å‘è¡¨äº <a href="https://so.csdn.net/so/search?q=ACM&amp;spm=1001.2101.3001.7020">ACM</a> Transactions on Computer Systems çš„è®ºæ–‡ã€ŠImplementing remote procedure callsã€‹å¯¹ RPC åšäº†ç»å…¸çš„è¯ é‡Šã€‚RPC æ˜¯æŒ‡è®¡ç®—æœº A ä¸Šçš„è¿›ç¨‹ï¼Œè°ƒç”¨å¦å¤–ä¸€å°è®¡ç®—æœº B ä¸Šçš„è¿›ç¨‹ï¼Œå…¶ä¸­ A ä¸Šçš„è°ƒç”¨è¿›ç¨‹è¢«æŒ‚èµ·ï¼Œè€Œ B ä¸Šçš„è¢«è°ƒç”¨è¿›ç¨‹å¼€å§‹æ‰§è¡Œï¼Œå½“å€¼è¿”å›ç»™ A æ—¶ï¼ŒA è¿›ç¨‹ç»§ç»­æ‰§è¡Œã€‚è°ƒç”¨æ–¹å¯ä»¥é€šè¿‡ä½¿ç”¨å‚æ•°å°†ä¿¡æ¯ä¼ é€ç»™è¢«è°ƒç”¨æ–¹ï¼Œè€Œåå¯ä»¥é€šè¿‡ä¼ å›çš„ç»“æœå¾—åˆ°ä¿¡æ¯ã€‚è€Œè¿™ä¸€è¿‡ç¨‹ï¼Œå¯¹äºå¼€å‘äººå‘˜æ¥è¯´æ˜¯é€æ˜çš„ã€‚</p><p><a href="https://imgtu.com/i/jyJOQx"><img src="https://s1.ax1x.com/2022/07/10/jyJOQx.jpg" alt="jyJOQx.jpg"></a></p><p>å›¾1 æè¿°äº†æ•°æ®æŠ¥åœ¨ä¸€ä¸ªç®€å•çš„RPCä¼ é€’çš„è¿‡ç¨‹</p><p>æ³¨ï¼šä¸Šè¿°è®ºæ–‡ï¼Œå¯ä»¥åœ¨çº¿é˜…è¯» <a href="https://www.cs.virginia.edu/~zaher/classes/CS656/birrel.pdf">http://www.cs.virginia.edu/~zaher/classes/CS656/birrel.pdf</a>ã€‚</p><p>è¿œç¨‹è¿‡ç¨‹è°ƒç”¨é‡‡ç”¨å®¢æˆ·æœº/æœåŠ¡å™¨(C/S)æ¨¡å¼ã€‚è¯·æ±‚ç¨‹åºå°±æ˜¯ä¸€ä¸ªå®¢æˆ·æœºï¼Œè€ŒæœåŠ¡æä¾›ç¨‹åºå°±æ˜¯ä¸€å°æœåŠ¡å™¨ã€‚å’Œå¸¸è§„æˆ–æœ¬åœ°è¿‡ç¨‹è°ƒç”¨ä¸€æ ·ï¼Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨æ˜¯åŒæ­¥æ“ä½œï¼Œåœ¨è¿œç¨‹è¿‡ç¨‹ç»“æœè¿”å›ä¹‹å‰ï¼Œéœ€è¦æš‚æ—¶ä¸­æ­¢è¯·æ±‚ç¨‹åºã€‚ä½¿ç”¨ç›¸åŒåœ°å€ç©ºé—´çš„ä½æƒè¿›ç¨‹æˆ–ä½æƒçº¿ç¨‹å…è®¸åŒæ—¶è¿è¡Œå¤šä¸ªè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚</p><h2 id="RPC-çš„åŸºæœ¬æ“ä½œ"><a href="#RPC-çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="RPC çš„åŸºæœ¬æ“ä½œ"></a>RPC çš„åŸºæœ¬æ“ä½œ</h2><p>è®©æˆ‘ä»¬çœ‹çœ‹æœ¬åœ°è¿‡ç¨‹è°ƒç”¨æ˜¯å¦‚ä½•å®ç°çš„ã€‚è€ƒè™‘ä¸‹é¢çš„ C è¯­è¨€çš„è°ƒç”¨ï¼š</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">count = <span class="keyword">read</span>(fd, buf, nbytes);</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œfd ä¸ºä¸€ä¸ªæ•´å‹æ•°ï¼Œè¡¨ç¤ºä¸€ä¸ªæ–‡ä»¶ã€‚buf ä¸ºä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼Œç”¨äºå­˜å‚¨è¯»å…¥çš„æ•°æ®ã€‚ nbytes ä¸ºå¦ä¸€ä¸ªæ•´å‹æ•°ï¼Œç”¨äºè®°å½•å®é™…è¯»å…¥çš„å­—èŠ‚æ•°ã€‚å¦‚æœè¯¥è°ƒç”¨ä½äºä¸»ç¨‹åºä¸­ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨ä¹‹å‰å †æ ˆçš„çŠ¶æ€å¦‚å›¾2(a)æ‰€ç¤ºã€‚ä¸ºäº†è¿›è¡Œè°ƒç”¨ï¼Œè°ƒç”¨æ–¹é¦–å…ˆæŠŠå‚æ•°ååºå‹å…¥å †æ ˆï¼Œå³ä¸ºæœ€åä¸€ä¸ªå‚æ•°å…ˆå‹å…¥ï¼Œå¦‚å›¾2(b)æ‰€ç¤ºã€‚åœ¨ read æ“ä½œè¿è¡Œå®Œæ¯•åï¼Œå®ƒå°†è¿”å›å€¼æ”¾åœ¨æŸä¸ªå¯„å­˜å™¨ä¸­ï¼Œç§»å‡ºè¿”å›åœ°å€ï¼Œå¹¶å°†æ§åˆ¶æƒäº¤å›ç»™è°ƒç”¨æ–¹ã€‚è°ƒç”¨æ–¹éšåå°†å‚æ•°ä»å †æ ˆä¸­ç§»å‡ºï¼Œä½¿å †æ ˆè¿˜åŸåˆ°æœ€åˆçš„çŠ¶æ€ã€‚</p><p><a href="https://imgtu.com/i/jyJHY9"><img src="https://s1.ax1x.com/2022/07/10/jyJHY9.jpg" alt="jyJHY9.jpg"></a></p><p>å›¾2 è¿‡ç¨‹è°ƒç”¨ä¸­çš„å‚æ•°ä¼ é€’</p><p>RPC èƒŒåçš„æ€æƒ³æ˜¯å°½é‡ä½¿è¿œç¨‹è¿‡ç¨‹è°ƒç”¨å…·æœ‰ä¸æœ¬åœ°è°ƒç”¨ç›¸åŒçš„å½¢å¼ã€‚å‡è®¾ç¨‹åºéœ€è¦ä»æŸä¸ªæ–‡ä»¶è¯»å–æ•°æ®ï¼Œç¨‹åºå‘˜åœ¨ä»£ç ä¸­æ‰§è¡Œ read è°ƒç”¨æ¥å–å¾—æ•°æ®ã€‚åœ¨ä¼ ç»Ÿçš„ç³»ç»Ÿä¸­ï¼Œ read ä¾‹ç¨‹ç”±é“¾æ¥å™¨ä»åº“ä¸­æå–å‡ºæ¥ï¼Œç„¶åé“¾æ¥å™¨å†å°†å®ƒæ’å…¥ç›®æ ‡ç¨‹åºä¸­ã€‚ read è¿‡ç¨‹æ˜¯ä¸€ä¸ªçŸ­è¿‡ç¨‹ï¼Œä¸€èˆ¬é€šè¿‡æ‰§è¡Œä¸€ä¸ªç­‰æ•ˆçš„ read ç³»ç»Ÿè°ƒç”¨æ¥å®ç°ã€‚å³ï¼Œread è¿‡ç¨‹æ˜¯ä¸€ä¸ªä½äºç”¨æˆ·ä»£ç ä¸æœ¬åœ°æ“ä½œç³»ç»Ÿä¹‹é—´çš„æ¥å£ã€‚</p><p>è™½ç„¶ read ä¸­æ‰§è¡Œäº†ç³»ç»Ÿè°ƒç”¨ï¼Œä½†å®ƒæœ¬èº«ä¾ç„¶æ˜¯é€šè¿‡å°†å‚æ•°å‹å…¥å †æ ˆçš„å¸¸è§„æ–¹å¼è°ƒç”¨çš„ã€‚å¦‚å›¾2(b)æ‰€ç¤ºï¼Œç¨‹åºå‘˜å¹¶ä¸çŸ¥é“ read å¹²äº†å•¥ã€‚</p><p>RPC æ˜¯é€šè¿‡ç±»ä¼¼çš„é€”å¾„æ¥è·å¾—é€æ˜æ€§ã€‚å½“ read å®é™…ä¸Šæ˜¯ä¸€ä¸ªè¿œç¨‹è¿‡ç¨‹æ—¶ï¼ˆæ¯”å¦‚åœ¨æ–‡ä»¶æœåŠ¡å™¨æ‰€åœ¨çš„æœºå™¨ä¸Šè¿è¡Œçš„è¿‡ç¨‹ï¼‰ï¼Œåº“ä¸­å°±æ”¾å…¥ read çš„å¦å¤–ä¸€ä¸ªç‰ˆæœ¬ï¼Œç§°ä¸ºå®¢æˆ·å­˜æ ¹ï¼ˆclient stubï¼‰ã€‚è¿™ç§ç‰ˆæœ¬çš„ read è¿‡ç¨‹åŒæ ·éµå¾ªå›¾2(b)çš„è°ƒç”¨æ¬¡åºï¼Œè¿™ç‚¹ä¸åŸæ¥çš„ read è¿‡ç¨‹ç›¸åŒã€‚å¦ä¸€ä¸ªç›¸åŒç‚¹æ˜¯å…¶ä¸­ä¹Ÿæ‰§è¡Œäº†æœ¬åœ°æ“ä½œç³»ç»Ÿè°ƒç”¨ã€‚å”¯ä¸€ä¸åŒç‚¹æ˜¯å®ƒä¸è¦æ±‚æ“ä½œç³»ç»Ÿæä¾›æ•°æ®ï¼Œè€Œæ˜¯å°†å‚æ•°æ‰“åŒ…æˆæ¶ˆæ¯ï¼Œè€Œåè¯·æ±‚æ­¤æ¶ˆæ¯å‘é€åˆ°æœåŠ¡å™¨ï¼Œå¦‚å›¾3æ‰€ç¤ºã€‚åœ¨å¯¹ send çš„è°ƒç”¨åï¼Œå®¢æˆ·å­˜æ ¹è°ƒç”¨ receive è¿‡ç¨‹ï¼Œéšå³é˜»å¡è‡ªå·±ï¼Œç›´åˆ°æ”¶åˆ°å“åº”æ¶ˆæ¯ã€‚</p><p><a href="https://imgtu.com/i/jyJoo4"><img src="https://s1.ax1x.com/2022/07/10/jyJoo4.jpg" alt="jyJoo4.jpg"></a></p><p>å›¾3 å®¢æˆ·ä¸æœåŠ¡å™¨ä¹‹é—´çš„RPCåŸç†</p><p>å½“æ¶ˆæ¯åˆ°è¾¾æœåŠ¡å™¨æ—¶ï¼ŒæœåŠ¡å™¨ä¸Šçš„æ“ä½œç³»ç»Ÿå°†å®ƒä¼ é€’ç»™æœåŠ¡å™¨å­˜æ ¹ï¼ˆserver stubï¼‰ã€‚æœåŠ¡å™¨å­˜æ ¹æ˜¯å®¢æˆ·å­˜æ ¹åœ¨æœåŠ¡å™¨ç«¯çš„ç­‰ä»·ç‰©ï¼Œä¹Ÿæ˜¯ä¸€æ®µä»£ç ï¼Œç”¨æ¥å°†é€šè¿‡ç½‘ç»œè¾“å…¥çš„è¯·æ±‚è½¬æ¢ä¸ºæœ¬åœ°è¿‡ç¨‹è°ƒç”¨ã€‚æœåŠ¡å™¨å­˜æ ¹ä¸€èˆ¬å…ˆè°ƒç”¨ receive ï¼Œç„¶åè¢«é˜»å¡ï¼Œç­‰å¾…æ¶ˆæ¯è¾“å…¥ã€‚æ”¶åˆ°æ¶ˆæ¯åï¼ŒæœåŠ¡å™¨å°†å‚æ•°ç”±æ¶ˆæ¯ä¸­æå–å‡ºæ¥ï¼Œç„¶åä»¥å¸¸è§„æ–¹å¼è°ƒç”¨æœåŠ¡å™¨ä¸Šçš„ç›¸åº”è¿‡ç¨‹ï¼ˆå¦‚å›¾3æ‰€ç¤ºï¼‰ã€‚ä»æœåŠ¡å™¨è§’åº¦çœ‹ï¼Œè¿‡ç¨‹å¥½åƒæ˜¯ç”±å®¢æˆ·ç›´æ¥è°ƒç”¨çš„ä¸€æ ·ï¼šå‚æ•°å’Œè¿”å›åœ°å€éƒ½ä½äºå †æ ˆä¸­ï¼Œä¸€åˆ‡éƒ½å¾ˆæ­£å¸¸ã€‚æœåŠ¡å™¨æ‰§è¡Œæ‰€è¦æ±‚çš„æ“ä½œï¼Œéšåå°†å¾—åˆ°çš„ç»“æœä»¥å¸¸è§„çš„æ–¹å¼è¿”å›ç»™è°ƒç”¨æ–¹ã€‚ä»¥ read ä¸ºä¾‹ï¼ŒæœåŠ¡å™¨å°†ç”¨æ•°æ®å¡«å…… read ä¸­ç¬¬äºŒä¸ªå‚æ•°æŒ‡å‘çš„ç¼“å†²åŒºï¼Œè¯¥ç¼“å­˜åŒºæ˜¯å±äºæœåŠ¡å™¨å­˜æ ¹å†…éƒ¨çš„ã€‚</p><p>è°ƒç”¨å®Œåï¼ŒæœåŠ¡å™¨å­˜æ ¹è¦å°†æ§åˆ¶æƒæ•™ä¼šç»™å®¢æˆ·å‘å‡ºè°ƒç”¨çš„è¿‡ç¨‹ï¼Œå®ƒå°†ç»“æœï¼ˆç¼“å†²åŒºï¼‰æ‰“åŒ…æˆæ¶ˆæ¯ï¼Œéšåè°ƒç”¨ send å°†ç»“æœè¿”å›ç»™å®¢æˆ·ã€‚äº‹åï¼ŒæœåŠ¡å™¨å­˜æ ¹ä¸€èˆ¬ä¼šå†æ¬¡è°ƒç”¨ receiveï¼Œç­‰å¾…ä¸‹ä¸€ä¸ªè¾“å…¥çš„è¯·æ±‚ã€‚</p><p>å®¢æˆ·æœºå™¨æ¥æ”¶åˆ°æ¶ˆæ¯åï¼Œå®¢æˆ·æ“ä½œç³»ç»Ÿå‘ç°è¯¥æ¶ˆæ¯å±äºæŸä¸ªå®¢æˆ·è¿›ç¨‹ï¼ˆå®é™…ä¸Šè¯¥è¿›ç¨‹æ˜¯å®¢æˆ·å­˜æ ¹ï¼Œåªæ˜¯æ“ä½œç³»ç»Ÿæ— æ³•åŒºåˆ†äºŒè€…ï¼‰ã€‚æ“ä½œç³»ç»Ÿå°†æ¶ˆæ¯å¤åˆ¶åˆ°ç›¸åº”çš„ç¼“å­˜åŒºä¸­ï¼Œéšåè§£é™¤å¯¹å®¢æˆ·è¿›ç¨‹çš„é˜»å¡ã€‚å®¢æˆ·å­˜æ ¹æ£€æŸ¥è¯¥æ¶ˆæ¯ï¼Œå°†ç»“æœæå–å‡ºæ¥å¹¶å¤åˆ¶ç»™è°ƒç”¨è€…ï¼Œè€Œåä»¥é€šå¸¸çš„æ–¹å¼è¿”å›ã€‚å½“è°ƒç”¨è€…åœ¨ read è°ƒç”¨è¿›è¡Œå®Œæ¯•åé‡æ–°è·å¾—æ§åˆ¶æƒæ—¶ï¼Œå®ƒæ‰€çŸ¥é“çš„å”¯ä¸€äº‹å°±æ˜¯å·²ç»å¾—åˆ°äº†æ‰€éœ€çš„æ•°æ®ã€‚å®ƒä¸æŒ‡å¯¼æ“ä½œæ˜¯åœ¨æœ¬åœ°æ“ä½œç³»ç»Ÿè¿›è¡Œï¼Œè¿˜æ˜¯è¿œç¨‹å®Œæˆã€‚</p><p>æ•´ä¸ªæ–¹æ³•ï¼Œå®¢æˆ·æ–¹å¯ä»¥ç®€å•åœ°å¿½ç•¥ä¸å…³å¿ƒçš„å†…å®¹ã€‚å®¢æˆ·æ‰€æ¶‰åŠçš„æ“ä½œåªæ˜¯æ‰§è¡Œæ™®é€šçš„ï¼ˆæœ¬åœ°ï¼‰è¿‡ç¨‹è°ƒç”¨æ¥è®¿é—®è¿œç¨‹æœåŠ¡ï¼Œå®ƒå¹¶ä¸éœ€è¦ç›´æ¥è°ƒç”¨ send å’Œ receive ã€‚æ¶ˆæ¯ä¼ é€’çš„æ‰€æœ‰ç»†èŠ‚éƒ½éšè—åœ¨åŒæ–¹çš„åº“è¿‡ç¨‹ä¸­ï¼Œå°±åƒä¼ ç»Ÿåº“éšè—äº†æ‰§è¡Œå®é™…ç³»ç»Ÿè°ƒç”¨çš„ç»†èŠ‚ä¸€æ ·ã€‚</p><p>æ¦‚å†µæ¥è¯´ï¼Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨åŒ…å«å¦‚ä¸‹æ­¥éª¤ï¼š</p><ol><li>å®¢æˆ·è¿‡ç¨‹ä»¥æ­£å¸¸çš„æ–¹å¼è°ƒç”¨å®¢æˆ·å­˜æ ¹ï¼›</li><li>å®¢æˆ·å­˜æ ¹ç”Ÿæˆä¸€ä¸ªæ¶ˆæ¯ï¼Œç„¶åè°ƒç”¨æœ¬åœ°æ“ä½œç³»ç»Ÿï¼›</li><li>å®¢æˆ·ç«¯æ“ä½œç³»ç»Ÿå°†æ¶ˆæ¯å‘é€ç»™è¿œç¨‹æ“ä½œç³»ç»Ÿï¼›</li><li>è¿œç¨‹æ“ä½œç³»ç»Ÿå°†æ¶ˆæ¯äº¤ç»™æœåŠ¡å™¨å­˜æ ¹ï¼›</li><li>æœåŠ¡å™¨å­˜æ ¹è°ƒå°†å‚æ•°æå–å‡ºæ¥ï¼Œè€Œåè°ƒç”¨æœåŠ¡å™¨ï¼›</li><li>æœåŠ¡å™¨æ‰§è¡Œè¦æ±‚çš„æ“ä½œï¼Œæ“ä½œå®Œæˆåå°†ç»“æœè¿”å›ç»™æœåŠ¡å™¨å­˜æ ¹ï¼›</li><li>æœåŠ¡å™¨å­˜æ ¹å°†ç»“æœæ‰“åŒ…æˆä¸€ä¸ªæ¶ˆæ¯ï¼Œè€Œåè°ƒç”¨æœ¬åœ°æ“ä½œç³»ç»Ÿï¼›</li><li>æœåŠ¡å™¨æ“ä½œç³»ç»Ÿå°†å«æœ‰ç»“æœçš„æ¶ˆæ¯å‘é€ç»™å®¢æˆ·ç«¯æ“ä½œç³»ç»Ÿï¼›</li><li>å®¢æˆ·ç«¯æ“ä½œç³»ç»Ÿå°†æ¶ˆæ¯äº¤ç»™å®¢æˆ·å­˜æ ¹ï¼›</li><li>å®¢æˆ·å­˜æ ¹å°†ç»“æœä»æ¶ˆæ¯ä¸­æå–å‡ºæ¥ï¼Œè¿”å›ç»™è°ƒç”¨å®ƒçš„å®¢æˆ·å­˜æ ¹ã€‚</li></ol><p>ä»¥ä¸Šæ­¥éª¤å°±æ˜¯å°†å®¢æˆ·è¿‡ç¨‹å¯¹å®¢æˆ·å­˜æ ¹å‘å‡ºçš„æœ¬åœ°è°ƒç”¨è½¬æ¢æˆå¯¹æœåŠ¡å™¨è¿‡ç¨‹çš„æœ¬åœ°è°ƒç”¨ï¼Œè€Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½ä¸ä¼šæ„è¯†åˆ°ä¸­é—´æ­¥éª¤çš„å­˜åœ¨ã€‚</p><p>RPC çš„ä¸»è¦å¥½å¤„æ˜¯åŒé‡çš„ã€‚é¦–å…ˆ,ç¨‹åºå‘˜å¯ä»¥ä½¿ç”¨è¿‡ç¨‹è°ƒç”¨è¯­ä¹‰æ¥è°ƒç”¨è¿œç¨‹å‡½æ•°å¹¶è·å–å“åº”ã€‚å…¶æ¬¡,ç®€åŒ–äº†ç¼–å†™åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºçš„éš¾åº¦,å› ä¸º RPC éšè—äº†æ‰€æœ‰çš„ç½‘ç»œä»£ç å­˜æ ¹å‡½æ•°ã€‚åº”ç”¨ç¨‹åºä¸å¿…æ‹…å¿ƒä¸€äº›ç»†èŠ‚,æ¯”å¦‚ socketã€ç«¯å£å·ä»¥åŠæ•°æ®çš„è½¬æ¢å’Œè§£æã€‚åœ¨ OSI å‚è€ƒæ¨¡å‹,RPC è·¨è¶Šäº†ä¼šè¯å±‚å’Œè¡¨ç¤ºå±‚ã€‚</p><h2 id="å®ç°è¿œç¨‹è¿‡ç¨‹è°ƒç”¨"><a href="#å®ç°è¿œç¨‹è¿‡ç¨‹è°ƒç”¨" class="headerlink" title="å®ç°è¿œç¨‹è¿‡ç¨‹è°ƒç”¨"></a>å®ç°è¿œç¨‹è¿‡ç¨‹è°ƒç”¨</h2><p>è¦å®ç°è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œéœ€è€ƒè™‘ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ã€‚</p><h3 id="å¦‚ä½•ä¼ é€’å‚æ•°"><a href="#å¦‚ä½•ä¼ é€’å‚æ•°" class="headerlink" title="å¦‚ä½•ä¼ é€’å‚æ•°"></a>å¦‚ä½•ä¼ é€’å‚æ•°</h3><p>ä¼ é€’å€¼å‚æ•°</p><p>ä¼ é€’å€¼å‚æ•°æ¯”è¾ƒç®€å•ï¼Œä¸‹å›¾å›¾å±•ç¤ºäº†ä¸€ä¸ªç®€å• RPC è¿›è¡Œè¿œç¨‹è®¡ç®—çš„ä¾‹å­ã€‚å…¶ä¸­ï¼Œè¿œç¨‹è¿‡ç¨‹ add(i,j) æœ‰ä¸¤ä¸ªå‚æ•° i å’Œ jï¼Œ å…¶ç»“æœæ˜¯è¿”å› i å’Œ j çš„ç®—æœ¯å’Œã€‚</p><p><a href="https://imgtu.com/i/jyJLS1"><img src="https://s1.ax1x.com/2022/07/10/jyJLS1.jpg" alt="jyJLS1.jpg"></a></p><p>å›¾4 é€šè¿‡RPCè¿›è¡Œè¿œç¨‹è®¡ç®—çš„æ­¥éª¤</p><p>é€šè¿‡ RPC è¿›è¡Œè¿œç¨‹è®¡ç®—çš„æ­¥éª¤æœ‰ï¼š</p><ol><li>å°†å‚æ•°æ”¾å…¥æ¶ˆæ¯ä¸­ï¼Œå¹¶åœ¨æ¶ˆæ¯ä¸­æ·»åŠ è¦è°ƒç”¨çš„è¿‡ç¨‹çš„åç§°æˆ–è€…ç¼–ç ã€‚</li><li>æ¶ˆæ¯åˆ°è¾¾æœåŠ¡å™¨åï¼ŒæœåŠ¡å™¨å­˜æ ¹å †è¯¥æ¶ˆæ¯è¿›è¡Œåˆ†æï¼Œä»¥åˆ¤æ˜éœ€è¦è°ƒç”¨å“ªä¸ªè¿‡ç¨‹ï¼Œéšåæ‰§è¡Œç›¸åº”çš„è°ƒç”¨ã€‚</li><li>æœåŠ¡å™¨è¿è¡Œå®Œæ¯•åï¼ŒæœåŠ¡å™¨å­˜æ ¹å°†æœåŠ¡å™¨å¾—åˆ°çš„ç»“æœæ‰“åŒ…æˆæ¶ˆæ¯é€å›å®¢æˆ·å­˜æ ¹ï¼Œå®¢æˆ·å­˜æ ¹å°†ç»“æœä»æ¶ˆæ¯ä¸­æå–å‡ºæ¥ï¼ŒæŠŠç»“æœå€¼è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li></ol><p>å½“ç„¶ï¼Œè¿™é‡Œåªæ˜¯åšäº†ç®€å•çš„æ¼”ç¤ºï¼Œåœ¨å®é™…åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œè¿˜éœ€è¦è€ƒè™‘å…¶ä»–æƒ…å†µï¼Œå› ä¸ºä¸åŒçš„æœºå™¨å¯¹äºæ•°å­—ã€å­—ç¬¦å’Œå…¶ä»–ç±»å‹çš„æ•°æ®é¡¹çš„è¡¨ç¤ºæ–¹å¼å¸¸æœ‰å·®å¼‚ã€‚æ¯”å¦‚æ•´æ•°å‹ï¼Œå°±æœ‰ Big Endian å’Œ Little Endian ä¹‹åˆ†ã€‚</p><p>ä¼ é€’å¼•ç”¨å‚æ•°</p><p>ä¼ é€’å¼•ç”¨å‚æ•°ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå›°éš¾ã€‚å•çº¯ä¼ é€’å‚æ•°çš„å¼•ç”¨ï¼ˆä¹ŸåŒ…å«æŒ‡é’ˆï¼‰æ˜¯å®Œå…¨æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºå¼•ç”¨åœ°å€ä¼ é€’ç»™è¿œç¨‹è®¡ç®—æœº,å…¶æŒ‡å‘çš„å†…å­˜ä½ç½®å¯èƒ½è·Ÿè¿œç¨‹ç³»ç»Ÿä¸Šå®Œå…¨ä¸åŒã€‚å¦‚æœä½ æƒ³æ”¯æŒä¼ é€’å¼•ç”¨å‚æ•°,ä½ å¿…é¡»å‘é€å‚æ•°çš„å‰¯æœ¬,å°†å®ƒä»¬æ”¾ç½®åœ¨è¿œç¨‹ç³»ç»Ÿå†…å­˜ä¸­ï¼Œå‘ä»–ä»¬ä¼ é€’ä¸€ä¸ªæŒ‡å‘æœåŠ¡å™¨å‡½æ•°çš„æŒ‡é’ˆï¼Œç„¶åå°†å¯¹è±¡å‘é€å›å®¢æˆ·ç«¯ï¼Œå¤åˆ¶å®ƒçš„å¼•ç”¨ã€‚å¦‚æœè¿œç¨‹è¿‡ç¨‹è°ƒç”¨å¿…é¡»æ”¯æŒå¼•ç”¨å¤æ‚çš„ç»“æ„ï¼Œæ¯”å¦‚æ ‘å’Œé“¾è¡¨ï¼Œä»–ä»¬éœ€è¦å°†ç»“æ„å¤åˆ¶åˆ°ä¸€ä¸ªæ— æŒ‡é’ˆçš„è¡¨ç¤ºé‡Œé¢ï¼ˆæ¯”å¦‚ï¼Œä¸€ä¸ªæ‰å¹³çš„æ ‘)ï¼Œå¹¶ä¼ è¾“åˆ°åœ¨è¿œç¨‹ç«¯æ¥é‡å»ºæ•°æ®ç»“æ„ã€‚</p><h3 id="å¦‚ä½•è¡¨ç¤ºæ•°æ®"><a href="#å¦‚ä½•è¡¨ç¤ºæ•°æ®" class="headerlink" title="å¦‚ä½•è¡¨ç¤ºæ•°æ®"></a>å¦‚ä½•è¡¨ç¤ºæ•°æ®</h3><p>åœ¨æœ¬åœ°ç³»ç»Ÿä¸Šä¸å­˜åœ¨æ•°æ®ä¸ç›¸å®¹çš„é—®é¢˜ï¼Œå› ä¸ºæ•°æ®æ ¼å¼æ€»æ˜¯ç›¸åŒçš„ã€‚è€Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¸åŒè¿œç¨‹æœºå™¨ä¸Šå¯èƒ½æœ‰ä¸åŒçš„å­—èŠ‚é¡ºåºï¼Œä¸åŒå¤§å°çš„æ•´æ•°ï¼Œä»¥åŠä¸åŒçš„æµ®ç‚¹è¡¨ç¤ºã€‚å¯¹äº RPCï¼Œå¦‚æœæƒ³ä¸å¼‚æ„ç³»ç»Ÿé€šä¿¡ï¼Œæˆ‘ä»¬å°±éœ€è¦æƒ³å‡ºä¸€ä¸ªâ€œæ ‡å‡†â€æ¥å¯¹æ‰€æœ‰æ•°æ®ç±»å‹è¿›è¡Œç¼–ç ï¼Œå¹¶å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ã€‚ä¾‹å¦‚ï¼ŒONC RPC ä½¿ç”¨ XDR (eXternal Data Representation) æ ¼å¼ ã€‚è¿™äº›æ•°æ®è¡¨ç¤ºæ ¼å¼å¯ä»¥ä½¿ç”¨éšå¼æˆ–æ˜¾å¼ç±»å‹ã€‚éšå¼ç±»å‹ï¼Œæ˜¯æŒ‡åªä¼ é€’å€¼ï¼Œè€Œä¸ä¼ é€’å˜é‡çš„åç§°æˆ–ç±»å‹ã€‚å¸¸è§çš„ä¾‹å­æ˜¯ ONC RPC çš„ XDR å’Œ DCE RPC çš„ NDRã€‚æ˜¾å¼ç±»å‹ï¼ŒæŒ‡éœ€è¦ä¼ é€’æ¯ä¸ªå­—æ®µçš„ç±»å‹ä»¥åŠå€¼ã€‚å¸¸è§çš„ä¾‹å­æ˜¯ ISO æ ‡å‡† ASN.1 (Abstract Syntax Notation)ã€JSON (JavaScript Object Notation)ã€Google Protocol Buffersã€ä»¥åŠå„ç§åŸºäº XML çš„æ•°æ®è¡¨ç¤ºæ ¼å¼ã€‚</p><h3 id="å¦‚ä½•é€‰ç”¨ä¼ è¾“åè®®"><a href="#å¦‚ä½•é€‰ç”¨ä¼ è¾“åè®®" class="headerlink" title="å¦‚ä½•é€‰ç”¨ä¼ è¾“åè®®"></a>å¦‚ä½•é€‰ç”¨ä¼ è¾“åè®®</h3><p>æœ‰äº›å®ç°åªå…è®¸ä½¿ç”¨ä¸€ä¸ªåè®®(ä¾‹å¦‚ TCP )ã€‚å¤§å¤šæ•° RPC å®ç°æ”¯æŒå‡ ä¸ªï¼Œå¹¶å…è®¸ç”¨æˆ·é€‰æ‹©ã€‚</p><h3 id="å‡ºé”™æ—¶-ä¼šå‘ç”Ÿä»€ä¹ˆ"><a href="#å‡ºé”™æ—¶-ä¼šå‘ç”Ÿä»€ä¹ˆ" class="headerlink" title="å‡ºé”™æ—¶,ä¼šå‘ç”Ÿä»€ä¹ˆ"></a>å‡ºé”™æ—¶,ä¼šå‘ç”Ÿä»€ä¹ˆ</h3><p>ç›¸æ¯”äºæœ¬åœ°è¿‡ç¨‹è°ƒç”¨ï¼Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨å‡ºé”™çš„æœºä¼šå°†ä¼šæ›´å¤šã€‚ç”±äºæœ¬åœ°è¿‡ç¨‹è°ƒç”¨æ²¡æœ‰è¿‡ç¨‹è°ƒç”¨å¤±è´¥çš„æ¦‚å¿µï¼Œé¡¹ç›®ä½¿ç”¨è¿œç¨‹è¿‡ç¨‹è°ƒç”¨å¿…é¡»å‡†å¤‡æµ‹è¯•è¿œç¨‹è¿‡ç¨‹è°ƒç”¨çš„å¤±è´¥æˆ–æ•è·å¼‚å¸¸ã€‚</p><h3 id="è¿œç¨‹è°ƒç”¨çš„è¯­ä¹‰æ˜¯ä»€ä¹ˆ"><a href="#è¿œç¨‹è°ƒç”¨çš„è¯­ä¹‰æ˜¯ä»€ä¹ˆ" class="headerlink" title="è¿œç¨‹è°ƒç”¨çš„è¯­ä¹‰æ˜¯ä»€ä¹ˆ"></a><a href="https://so.csdn.net/so/search?q=è¿œç¨‹è°ƒç”¨&amp;spm=1001.2101.3001.7020">è¿œç¨‹è°ƒç”¨</a>çš„è¯­ä¹‰æ˜¯ä»€ä¹ˆ</h3><p>è°ƒç”¨ä¸€ä¸ªæ™®é€šçš„è¿‡ç¨‹è¯­ä¹‰å¾ˆç®€å•:å½“æˆ‘ä»¬è°ƒç”¨æ—¶ï¼Œè¿‡ç¨‹è¢«æ‰§è¡Œã€‚è¿œç¨‹è¿‡ç¨‹å®Œå…¨ä¸€æ¬¡æ€§è°ƒç”¨æˆåŠŸæ˜¯éå¸¸éš¾ä»¥å®ç°ã€‚æ‰§è¡Œè¿œç¨‹è¿‡ç¨‹å¯ä»¥æœ‰å¦‚ä¸‹ç»“æœ:</p><ul><li>å¦‚æœæœåŠ¡å™¨å´©æºƒæˆ–è¿›ç¨‹åœ¨è¿è¡ŒæœåŠ¡å™¨ä»£ç ä¹‹å‰å°±æ­»äº†ï¼Œé‚£ä¹ˆè¿œç¨‹è¿‡ç¨‹ä¼šè¢«æ‰§è¡Œ0æ¬¡ï¼›</li><li>å¦‚æœä¸€åˆ‡å·¥ä½œæ­£å¸¸ï¼Œè¿œç¨‹è¿‡ç¨‹ä¼šè¢«æ‰§è¡Œ1æ¬¡ï¼›</li><li>å¦‚æœæœåŠ¡å™¨è¿”å›æœåŠ¡å™¨å­˜æ ¹ååœ¨å‘é€å“åº”å‰å°±å¥”æºƒäº†ï¼Œè¿œç¨‹è¿‡ç¨‹ä¼šè¢«æ‰§è¡Œ1æ¬¡æˆ–è€…å¤šæ¬¡ã€‚å®¢æˆ·ç«¯æ¥æ”¶ä¸åˆ°è¿”å›çš„å“åº”,å¯ä»¥å†³å®šå†è¯•ä¸€æ¬¡,å› æ­¤å‡ºç°å¤šæ¬¡æ‰§è¡Œå‡½æ•°ã€‚å¦‚æœæ²¡æœ‰å†è¯•ä¸€æ¬¡,å‡½æ•°æ‰§è¡Œä¸€æ¬¡ï¼›</li><li>å¦‚æœå®¢æˆ·æœºè¶…æ—¶å’Œé‡æ–°ä¼ è¾“ï¼Œé‚£ä¹ˆè¿œç¨‹è¿‡ç¨‹ä¼šè¢«æ‰§è¡Œå¤šæ¬¡ã€‚ä¹Ÿæœ‰å¯èƒ½æ˜¯åŸå§‹è¯·æ±‚å»¶è¿Ÿäº†ã€‚ä¸¤è€…éƒ½å¯èƒ½ä¼šæ‰§è¡Œæˆ–ä¸æ‰§è¡Œã€‚</li></ul><p>RPC ç³»ç»Ÿé€šå¸¸ä¼šæä¾›è‡³å°‘ä¸€æ¬¡æˆ–æœ€å¤šä¸€æ¬¡çš„è¯­ä¹‰ï¼Œæˆ–è€…åœ¨ä¸¤è€…ä¹‹é—´é€‰æ‹©ã€‚å¦‚æœéœ€è¦äº†è§£åº”ç”¨ç¨‹åºçš„æ€§è´¨å’Œè¿œç¨‹è¿‡ç¨‹çš„åŠŸèƒ½æ˜¯å¦å®‰å…¨ï¼Œå¯ä»¥é€šè¿‡å¤šæ¬¡è°ƒç”¨åŒä¸€ä¸ªå‡½æ•°æ¥éªŒè¯ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°å¯ä»¥è¿è¡Œä»»ä½•æ¬¡æ•°è€Œä¸å½±å“ç»“æœï¼Œè¿™æ˜¯å¹‚ç­‰ï¼ˆidempotentï¼‰å‡½æ•°çš„ï¼Œå¦‚æ¯å¤©çš„æ—¶é—´ã€æ•°å­¦å‡½æ•°ã€è¯»å–é™æ€æ•°æ®ç­‰ã€‚å¦åˆ™,å®ƒæ˜¯ä¸€ä¸ªéå¹‚ç­‰ï¼ˆnonidempotentï¼‰å‡½æ•°ï¼Œå¦‚æ·»åŠ æˆ–ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶)ã€‚</p><h3 id="è¿œç¨‹è°ƒç”¨çš„æ€§èƒ½æ€ä¹ˆæ ·"><a href="#è¿œç¨‹è°ƒç”¨çš„æ€§èƒ½æ€ä¹ˆæ ·" class="headerlink" title="è¿œç¨‹è°ƒç”¨çš„æ€§èƒ½æ€ä¹ˆæ ·"></a>è¿œç¨‹è°ƒç”¨çš„æ€§èƒ½æ€ä¹ˆæ ·</h3><p>æ¯«æ— ç–‘é—®,ä¸€ä¸ªè¿œç¨‹è¿‡ç¨‹è°ƒç”¨å°†ä¼šæ¯”å¸¸è§„çš„æœ¬åœ°è¿‡ç¨‹è°ƒç”¨æ…¢å¾—å¤šï¼Œå› ä¸ºäº§ç”Ÿäº†é¢å¤–çš„æ­¥éª¤ä»¥åŠç½‘ç»œä¼ è¾“æœ¬èº«å­˜åœ¨å»¶è¿Ÿã€‚ç„¶è€Œï¼Œè¿™å¹¶ä¸åº”è¯¥é˜»æ­¢æˆ‘ä»¬ä½¿ç”¨è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚</p><h3 id="è¿œç¨‹è°ƒç”¨å®‰å…¨å—ï¼Ÿ"><a href="#è¿œç¨‹è°ƒç”¨å®‰å…¨å—ï¼Ÿ" class="headerlink" title="è¿œç¨‹è°ƒç”¨å®‰å…¨å—ï¼Ÿ"></a>è¿œç¨‹è°ƒç”¨å®‰å…¨å—ï¼Ÿ</h3><p>ä½¿ç”¨ RPC,æˆ‘ä»¬å¿…é¡»å…³æ³¨å„ç§å®‰å…¨é—®é¢˜:</p><ul><li>å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯åˆ°è¿œç¨‹è¿‡ç¨‹ï¼Œé‚£ä¸ªè¿‡ç¨‹æ˜¯å¯ä¿¡çš„å—?</li><li>å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯åˆ°è¿œç¨‹è®¡ç®—æœºï¼Œé‚£ä¸ªè¿œç¨‹æœºå™¨æ˜¯å¯ä¿¡çš„å—?</li><li>æœåŠ¡å™¨å¦‚ä½•éªŒè¯æ¥æ”¶çš„æ¶ˆæ¯æ˜¯æ¥è‡ªåˆæ³•çš„å®¢æˆ·ç«¯å—?æœåŠ¡å™¨å¦‚ä½•è¯†åˆ«å®¢æˆ·ç«¯?</li><li>æ¶ˆæ¯åœ¨ç½‘ç»œä¸­ä¼ æ’­å¦‚ä½•é˜²æ­¢æ—¶è¢«å…¶ä»–è¿›ç¨‹å—…æ¢?</li><li>å¯ä»¥ç”±å…¶ä»–è¿›ç¨‹æ¶ˆæ¯è¢«æ‹¦æˆªå’Œä¿®æ”¹æ—¶éå†ç½‘ç»œä»å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨æˆ–æœåŠ¡å™¨ç«¯?</li><li>åè®®èƒ½é˜²æ­¢é‡æ’­æ”»å‡»å—?</li><li>å¦‚ä½•é˜²æ­¢æ¶ˆæ¯åœ¨ç½‘ç»œä¼ æ’­ä¸­è¢«æ„å¤–æŸåæˆ–æˆªæ–­?</li></ul><h2 id="è¿œç¨‹è¿‡ç¨‹è°ƒç”¨çš„ä¼˜ç‚¹"><a href="#è¿œç¨‹è¿‡ç¨‹è°ƒç”¨çš„ä¼˜ç‚¹" class="headerlink" title="è¿œç¨‹è¿‡ç¨‹è°ƒç”¨çš„ä¼˜ç‚¹"></a>è¿œç¨‹è¿‡ç¨‹è°ƒç”¨çš„ä¼˜ç‚¹</h2><p>è¿œç¨‹è¿‡ç¨‹è°ƒç”¨æœ‰è¯¸å¤šçš„ä¼˜ç‚¹ï¼š</p><ul><li>ä½ ä¸å¿…æ‹…å¿ƒä¼ è¾“åœ°å€é—®é¢˜ã€‚æœåŠ¡å™¨å¯ä»¥ç»‘å®šåˆ°ä»»ä½•å¯ç”¨çš„ç«¯å£,ç„¶åç”¨ RPC åç§°æœåŠ¡æ¥æ³¨å†Œç«¯å£ã€‚å®¢æˆ·ç«¯å°†é€šè¿‡è¯¥åç§°æœåŠ¡æ¥æ‰¾åˆ°å¯¹åº”çš„ç«¯å£å·æ‰€éœ€è¦çš„ç¨‹åºã€‚è€Œè¿™ä¸€åˆ‡å¯¹äºç¨‹åºå‘˜æ¥è¯´æ˜¯é€æ˜çš„ã€‚</li><li>ç³»ç»Ÿå¯ä»¥ç‹¬ç«‹äºä¼ è¾“æä¾›è€…ã€‚è‡ªåŠ¨ç”ŸæˆæœåŠ¡å™¨å­˜æ ¹ä½¿å…¶å¯ä»¥åœ¨ç³»ç»Ÿä¸Šçš„ä»»ä½•ä¸€ä¸ªä¼ è¾“æä¾›è€…ä¸Šå¯ç”¨,åŒ…æ‹¬ TCP å’Œ UDPï¼Œè€Œè¿™äº›ï¼Œå®¢æˆ·ç«¯å¯ä»¥åŠ¨æ€é€‰æ‹©çš„ã€‚å½“ä»£ç å‘é€ä»¥åï¼Œæ¥æ”¶æ¶ˆæ¯æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œè€Œä¸éœ€è¦é¢å¤–çš„ç¼–ç¨‹ä»£ç ã€‚</li><li>åº”ç”¨ç¨‹åºåœ¨å®¢æˆ·ç«¯åªéœ€è¦çŸ¥é“ä¸€ä¸ªä¼ è¾“åœ°å€â€”â€”åç§°æœåŠ¡ï¼Œè´Ÿè´£å‘Šè¯‰åº”ç”¨ç¨‹åºå»å“ªé‡Œè¿æ¥æœåŠ¡å™¨å‡½æ•°é›†ã€‚</li><li>ä½¿ç”¨å‡½æ•°è°ƒç”¨æ¨¡å‹æ¥ä»£æ›¿ socket çš„å‘é€/æ¥æ”¶(è¯»/å†™)æ¥å£ã€‚ç”¨æˆ·ä¸éœ€è¦å¤„ç†å‚æ•°çš„è§£æã€‚</li></ul><h2 id="RPC-API"><a href="#RPC-API" class="headerlink" title="RPC API"></a>RPC API</h2><p>ä»»ä½• RPC å®ç°éƒ½éœ€è¦æä¾›ä¸€ç»„æ”¯æŒåº“ã€‚è¿™äº›åŒ…æ‹¬:</p><ul><li>åç§°æœåŠ¡æ“ä½œï¼š æ³¨å†Œå’ŒæŸ¥æ‰¾ç»‘å®šä¿¡æ¯(ç«¯å£ã€æœºå™¨)ã€‚å…è®¸ä¸€ä¸ªåº”ç”¨ç¨‹åºä½¿ç”¨åŠ¨æ€ç«¯å£(æ“ä½œç³»ç»Ÿåˆ†é…çš„)ï¼›</li><li>ç»‘å®šæ“ä½œï¼šä½¿ç”¨é€‚å½“çš„åè®®å»ºç«‹å®¢æˆ·æœº/æœåŠ¡å™¨é€šä¿¡(å»ºç«‹é€šä¿¡ç«¯ç‚¹)ï¼›</li><li>ç»ˆç«¯æ“ä½œï¼šæ³¨å†Œç«¯ç‚¹ä¿¡æ¯(åè®®ã€ç«¯å£å·ã€æœºå™¨å)åˆ°åç§°æœåŠ¡å¹¶ç›‘å¬è¿‡ç¨‹è°ƒç”¨è¯·æ±‚ã€‚è¿™äº›å‡½æ•°é€šå¸¸è¢«è‡ªåŠ¨ç”Ÿæˆçš„ä¸»ç¨‹åºâ€”â€”æœåŠ¡å™¨å­˜æ ¹(éª¨æ¶)æ‰€è°ƒç”¨ï¼›</li><li>å®‰å…¨æ“ä½œï¼šç³»ç»Ÿåº”è¯¥æä¾›æœºåˆ¶ä¿è¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´èƒ½å¤Ÿç›¸äº’éªŒè¯,ä¸¤è€…ä¹‹é—´æä¾›ä¸€ä¸ªå®‰å…¨çš„é€šä¿¡é€šé“ï¼›</li><li>å›½é™…åŒ–æ“ä½œ(å¯èƒ½)ï¼šè¿™æ˜¯å¾ˆå°‘çš„ä¸€éƒ¨åˆ† RPC åŒ…å¯èƒ½åŒ…æ‹¬äº†è½¬æ¢æ—¶é—´æ ¼å¼ã€è´§å¸æ ¼å¼å’Œç‰¹å®šäºè¯­è¨€çš„åœ¨å­—ç¬¦ä¸²è¡¨çš„å­—ç¬¦ä¸²çš„åŠŸèƒ½ï¼›</li><li>å°é€å¤„ç†/æ•°æ®è½¬æ¢æ“ä½œï¼šå‡½æ•°å°†æ•°æ®åºåˆ—åŒ–ä¸ºä¸€ä¸ªæ™®é€šçš„çš„å­—èŠ‚æ•°ç»„ï¼Œé€šè¿‡ç½‘ç»œè¿›è¡Œä¼ é€’ï¼Œå¹¶èƒ½å¤Ÿé‡å»ºï¼›</li><li>å­˜æ ¹å†…å­˜ç®¡ç†å’Œåƒåœ¾æ”¶é›†ï¼šå­˜æ ¹å¯èƒ½éœ€è¦åˆ†é…å†…å­˜æ¥å­˜å‚¨å‚æ•°ï¼Œç‰¹åˆ«æ˜¯æ¨¡æ‹Ÿå¼•ç”¨ä¼ é€’è¯­ä¹‰ã€‚RPC åŒ…éœ€è¦åˆ†é…å’Œæ¸…ç†ä»»ä½•è¿™æ ·çš„åˆ†é…ã€‚ä»–ä»¬ä¹Ÿå¯èƒ½éœ€è¦ä¸ºåˆ›å»ºç½‘ç»œç¼“å†²åŒºè€Œåˆ†é…å†…å­˜ã€‚RPC åŒ…æ”¯æŒå¯¹è±¡ï¼ŒRPC ç³»ç»Ÿéœ€è¦ä¸€ç§è·Ÿè¸ªè¿œç¨‹å®¢æˆ·ç«¯æ˜¯å¦ä»æœ‰å¼•ç”¨å¯¹è±¡æˆ–ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯ä»¥åˆ é™¤ã€‚</li><li>ç¨‹åºæ ‡è¯†æ“ä½œï¼šå…è®¸åº”ç”¨ç¨‹åºè®¿é—®(æˆ–å¤„ç†) RPC æ¥å£é›†çš„æ ‡è¯†ç¬¦ï¼Œè¿™æ ·çš„æœåŠ¡å™¨æä¾›çš„æ¥å£é›†å¯ä»¥è¢«ç”¨æ¥äº¤æµå’Œä½¿ç”¨ã€‚</li><li>å¯¹è±¡å’Œå‡½æ•°çš„æ ‡è¯†æ“ä½œï¼š å…è®¸å°†è¿œç¨‹å‡½æ•°æˆ–è¿œç¨‹å¯¹è±¡çš„å¼•ç”¨ä¼ é€’ç»™å…¶ä»–è¿›ç¨‹ã€‚å¹¶ä¸æ˜¯æ‰€æœ‰çš„ RPC ç³»ç»Ÿéƒ½æ”¯æŒã€‚</li></ul><p>æ‰€ä»¥ï¼Œåˆ¤æ–­ä¸€ç§é€šä¿¡æ–¹å¼æ˜¯å¦æ˜¯ RPCï¼Œå°±çœ‹å®ƒæ˜¯å¦æä¾›ä¸Šè¿°çš„ APIã€‚</p><h2 id="ç¬¬ä¸€ä»£-RPC"><a href="#ç¬¬ä¸€ä»£-RPC" class="headerlink" title="ç¬¬ä¸€ä»£ RPC"></a>ç¬¬ä¸€ä»£ RPC</h2><h3 id="ONC-RPC-ä»¥å‰ç§°ä¸º-Sun-RPC"><a href="#ONC-RPC-ä»¥å‰ç§°ä¸º-Sun-RPC" class="headerlink" title="ONC RPC(ä»¥å‰ç§°ä¸º Sun RPC)"></a>ONC RPC(ä»¥å‰ç§°ä¸º Sun RPC)</h3><p>Sun å…¬å¸æ˜¯ç¬¬ä¸€ä¸ªæä¾›å•†ä¸šåŒ– RPC åº“å’Œ RPC ç¼–è¯‘å™¨ã€‚åœ¨1980å¹´ä»£ä¸­æœŸ Sun è®¡ç®—æœºæä¾› RPCï¼Œå¹¶åœ¨ Sun Network File System(NFS) å¾—åˆ°æ”¯æŒã€‚è¯¥åè®®è¢«ä¸»è¦ä»¥ Sun å’Œ AT&amp;T ä¸ºé¦–çš„ Open Network Computing ï¼ˆå¼€æ”¾ç½‘ç»œè®¡ç®—ï¼‰ä½œä¸ºä¸€ä¸ªæ ‡å‡†æ¥æ¨åŠ¨ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸è½»é‡çº§ RPC ç³»ç»Ÿå¯ç”¨åœ¨å¤§å¤šæ•° POSIX å’Œç±» POSIX æ“ä½œç³»ç»Ÿä¸­ä½¿ç”¨ï¼ŒåŒ…æ‹¬ Linuxã€SunOSã€OS X å’Œå„ç§å‘å¸ƒç‰ˆæœ¬çš„ BSDã€‚è¿™æ ·çš„ç³»ç»Ÿè¢«ç§°ä¸º Sun RPC æˆ– ONC RPCã€‚</p><p>ONC RPC æä¾›äº†ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œéœ€è¦ä¸€ä¸ªè¿œç¨‹è¿‡ç¨‹æ¥å£çš„å®šä¹‰æ¥ç”Ÿæˆå®¢æˆ·æœºå’ŒæœåŠ¡å™¨çš„å­˜æ ¹å‡½æ•°ã€‚è¿™ä¸ªç¼–è¯‘å™¨å«åš rpcgenã€‚åœ¨è¿è¡Œæ­¤ç¼–è¯‘å™¨ä¹‹å‰ï¼Œç¨‹åºå‘˜å¿…é¡»æä¾›æ¥å£å®šä¹‰ã€‚åŒ…å«å‡½æ•°å£°æ˜çš„æ¥å£å®šä¹‰ï¼Œé€šè¿‡ç‰ˆæœ¬å·è¿›è¡Œåˆ†ç»„ï¼Œå¹¶è¢«ä¸€ä¸ªç‹¬ç‰¹çš„ç¨‹åºç¼–ç æ¥æ ‡è¯†ã€‚è¯¥ç¨‹åºç¼–ç èƒ½å¤Ÿè®©å®¢æˆ·æ¥ç¡®å®šæ‰€éœ€çš„æ¥å£ã€‚ç‰ˆæœ¬å·æ˜¯éå¸¸æœ‰ç”¨çš„,å³ä½¿å®¢æˆ·æ²¡æœ‰æ›´æ–°åˆ°æœ€æ–°çš„ä»£ç ä»ç„¶å¯ä»¥è¿æ¥åˆ°ä¸€ä¸ªæ–°çš„æœåŠ¡å™¨ï¼Œåªè¦è¯¥æœåŠ¡å™¨è¿˜æ”¯æŒæ—§æ¥å£ã€‚</p><p>å‚æ•°é€šè¿‡ç½‘ç»œè½¬åŒ–æˆä¸€ç§éšå¼ç±»å‹åºåˆ—åŒ–æ ¼å¼è¢«ç§°ä¸º XDR (eXternal Data Representation)ã€‚è¿™å°†ç¡®ä¿å‚æ•°èƒ½å¤Ÿå‘é€åˆ°å¼‚æ„ç³»ç»Ÿå¯ä»¥è¢«æ­£å¸¸ä½¿ç”¨ï¼ŒåŠæ—¶è¿™äº›ç³»ç»Ÿå¯èƒ½ä½¿ç”¨äº†ä¸åŒçš„å­—èŠ‚é¡ºåºï¼Œä¸åŒå¤§å°çš„æ•´æ•°ï¼Œæˆ–ä¸åŒçš„æµ®ç‚¹æˆ–å­—ç¬¦ä¸²è¡¨ç¤ºã€‚æœ€åï¼ŒSun RPC æä¾›äº†ä¸€ä¸ªå®ç°å¿…è¦çš„æ”¯æŒ RPC åè®®å’Œ socket ä¾‹ç¨‹çš„è¿è¡Œæ—¶åº“ã€‚</p><p>æ‰€æœ‰çš„ç¨‹åºå‘˜éƒ½éœ€è¦å†™æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ç¨‹åº(<a href="https://www.cs.rutgers.edu/~pxk/417/notes/rpc/client.c">client.c</a>),æœåŠ¡å™¨åŠŸèƒ½(<a href="https://www.cs.rutgers.edu/~pxk/417/notes/rpc/server.c">server.c</a>)å’Œ RPC æ¥å£å®šä¹‰(<a href="https://www.cs.rutgers.edu/~pxk/417/notes/rpc/date.x">date.x</a>)ã€‚å½“ RPC æ¥å£å®šä¹‰(åç¼€ä¸º.x çš„æ–‡ä»¶ï¼Œä¾‹å¦‚ date.x)æ˜¯ç”¨ rpcgen ç¼–è¯‘çš„,ä¼šåˆ›å»ºä¸‰ä¸ªæˆ–å››ä¸ªæ–‡ä»¶ã€‚ä¸‹é¢æ˜¯ date.x çš„ä¾‹å­:</p><ul><li>date.hï¼šåŒ…å«é¡¹ç›®çš„å®šä¹‰ã€ç‰ˆæœ¬å’Œå£°æ˜çš„å‡½æ•°ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯åŠŸèƒ½åº”è¯¥åŒ…æ‹¬è¿™ä¸ªæ–‡ä»¶ã€‚</li><li>date_svc.c ï¼šC è¯­è¨€ä»£ç æ¥å®ç°æœåŠ¡å™¨å­˜æ ¹ã€‚</li><li>date_clnt.c ï¼šC è¯­è¨€ä»£ç æ¥å®ç°å®¢æˆ·ç«¯å­˜æ ¹ã€‚</li><li>date_xdr.c ï¼šåŒ…å« XDR ä¾‹ç¨‹æ¥å°†æ•°æ®è½¬åŒ–ä¸º XDR æ ¼å¼ã€‚å¦‚æœè¿™ä¸ªæ–‡ä»¶ç”Ÿæˆ,å®ƒåº”è¯¥ç¼–è¯‘å¹¶ç”¨æ¥é“¾æ¥åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„å‡½æ•°ã€‚</li></ul><p>åˆ›å»ºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¯æ‰§è¡Œæ–‡ä»¶çš„ç¬¬ä¸€æ­¥æ˜¯å®šä¹‰åœ¨æ–‡ä»¶ <a href="https://www.cs.rutgers.edu/~pxk/417/notes/rpc/date.x">date.x</a> é‡Œçš„ç¼–è¯‘æ•°æ®ã€‚ä¹‹åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å‡½æ•°å¯èƒ½è¢«ç¼–è¯‘ï¼Œå¹¶é“¾æ¥å„è‡ª rpcgen ç”Ÿæˆçš„å­˜æ ¹å‡½æ•°ã€‚</p><p>åœ¨æ—§ç‰ˆæœ¬é‡Œï¼Œä¼ è¾“åè®®åªèƒ½å°†å­—ç¬¦ä¸²â€œtcpâ€æˆ–å­—ç¬¦ä¸²â€œudpâ€æ¥æŒ‡å®šå„è‡ªçš„ IP æœåŠ¡ RPCï¼Œä¸”ä»…é™äº Linux å®ç°çš„ RPCã€‚ä¸ºäº†ä½¿æ¥å£æ›´åŠ çµæ´»ï¼ŒUNIX ç³»ç»Ÿä»ç‰ˆæœ¬ 4 (SunOS ä»ç‰ˆæœ¬ 5)å¼€å§‹ç½‘ç»œé€‰æ‹©ç¨‹åºå…è®¸ä¸€ä¸ªæ›´æ™®é€šçš„è§„èŒƒã€‚ä»–ä»¬æœç´¢æ–‡ä»¶(/etc/netconfig)ï¼Œæ¥æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæ»¡è¶³æ‚¨éœ€æ±‚çš„æä¾›è€…ã€‚æœ€åä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯:</p><ul><li>â€œnetpathâ€ï¼šæœç´¢ NETPATH ç¯å¢ƒå˜é‡ç”¨äºé¦–é€‰ä¼ è¾“æä¾›è€…çš„åºåˆ—ï¼›</li><li>â€œcircuit_nâ€ï¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ªåœ¨ NETPATH åˆ—è¡¨ä¸­çš„è™šæ‹Ÿç”µè·¯æä¾›è€…ï¼›</li><li>â€œdatagram_nâ€ï¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ª NETPATH åˆ—è¡¨ä¸­çš„æ•°æ®æŠ¥æä¾›è€…ï¼›</li><li>â€œvisibleâ€ï¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ªåœ¨ /etc/netconfig çš„å¯è§ä¼ è¾“æä¾›è€…ï¼›</li><li>â€œcircuit_vâ€ï¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ªåœ¨ /etc/netconfig çš„å¯è§è™šæ‹Ÿç”µè·¯ä¼ è¾“æä¾›è€…ï¼›</li><li>â€œdatagram_vâ€ï¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ªåœ¨ /etc/netconfig çš„å¯è§æ•°æ®æŠ¥ä¼ è¾“æä¾›è€…ï¼›</li></ul><p>æ¯ä¸ªè¿œç¨‹è¿‡ç¨‹è°ƒç”¨æœ€åˆä»…é™äºæ¥å—ä¸€ä¸ªè¾“å…¥å‚æ•°ã€‚ç³»ç»Ÿåªæ˜¯åæ¥ä¿®æ”¹ä¸ºæ”¯æŒå¤šä¸ªå‚æ•°ã€‚æ”¯æŒå•ä¸€å‚æ•° RPC åœ¨ä¸€äº› rpcgen çš„ç‰ˆæœ¬ä¸­ä»ç„¶æ˜¯é»˜è®¤çš„ï¼Œæ¯”å¦‚è‹¹æœçš„ OS Xã€‚ä¼ é€’å¤šä¸ªå‚æ•°å¿…é¡»é€šè¿‡å®šä¹‰ä¸€ä¸ªç»“æ„ï¼ŒåŒ…å«æ‰€éœ€çš„å‚æ•°ï¼Œåˆå§‹åŒ–å®ƒï¼Œå¹¶ä¼ é€’è¿™ä¸ªç»“æ„ã€‚</p><p>è¿œç¨‹è¿‡ç¨‹è°ƒç”¨è¿”å›ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ç»“æœè€Œä¸æ˜¯æœŸæœ›çš„ç»“æœã€‚æœåŠ¡å™¨å‡½æ•°å¿…é¡»ä¿®æ”¹æ¥èƒ½æ¥å—ä¸€ä¸ª RPC å®šä¹‰ï¼ˆ.x æ–‡ä»¶ï¼‰ä¸­å£°æ˜çš„å€¼çš„æŒ‡é’ˆä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›ä¸€ä¸ªç»“æœå€¼çš„æŒ‡é’ˆã€‚åœ¨æœåŠ¡å™¨ä¸Šï¼Œä¸€ä¸ªæŒ‡é’ˆå¿…é¡»æ˜¯æŒ‡å‘é™æ€æ•°æ®çš„æŒ‡é’ˆã€‚å¦åˆ™ï¼Œå½“è¿‡ç¨‹è¿”å›æˆ–é‡Šæ”¾è¿‡ç¨‹çš„æ¡†æ¶æ‰€æŒ‡å‡ºçš„åŒºåŸŸå°†æœªå®šä¹‰ã€‚åœ¨å®¢æˆ·ç«¯,è¿”å›æŒ‡é’ˆå¯ä»¥è®©æˆ‘ä»¬åŒºåˆ†ä¸€ä¸ªå¤±è´¥çš„ RPC(ç©ºæŒ‡é’ˆ)å’Œä¸€ä¸ªç©ºè¿”å›ä»æœåŠ¡å™¨(é—´æ¥ç©ºæŒ‡é’ˆ)ã€‚</p><p>RPC è¿‡ç¨‹çš„åç§°è‹¥åœ¨ RPC å®šä¹‰æ–‡ä»¶ä¸­åšäº†å®šä¹‰ï¼Œåˆ™ä¼šè½¬æ¢ä¸ºå°å†™ï¼Œå¹¶åœ¨åç¼€ä»·ä¸‹åˆ’çº¿ï¼Œåè·Ÿä¸€ä¸ªç‰ˆæœ¬å·ã€‚ä¾‹å¦‚ï¼ŒBIN_DATE è½¬æˆä¸ºå¼•ç”¨å‡½æ•° bin_date_1 ã€‚æ‚¨çš„æœåŠ¡å™¨å¿…é¡»å®ç° bin_date_1ã€‚</p><h3 id="å½“æˆ‘ä»¬è¿è¡Œè¿™ä¸ªç¨‹åºæ—¶-ä¼šå‘ç”Ÿä»€ä¹ˆ"><a href="#å½“æˆ‘ä»¬è¿è¡Œè¿™ä¸ªç¨‹åºæ—¶-ä¼šå‘ç”Ÿä»€ä¹ˆ" class="headerlink" title="å½“æˆ‘ä»¬è¿è¡Œè¿™ä¸ªç¨‹åºæ—¶,ä¼šå‘ç”Ÿä»€ä¹ˆ?"></a>å½“æˆ‘ä»¬è¿è¡Œè¿™ä¸ªç¨‹åºæ—¶,ä¼šå‘ç”Ÿä»€ä¹ˆ?</h3><p>æœåŠ¡å™¨</p><p>å½“æˆ‘ä»¬å¯åŠ¨æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å­˜æ ¹ä»£ç (ç¨‹åº)åœ¨åå°è¿è¡Œè¿è¡Œã€‚å®ƒåˆ›å»ºä¸€ä¸ª socket å¹¶å¯ç»‘å®šä»»ä½•æœ¬åœ°ç«¯å£åˆ° socketã€‚ç„¶åè°ƒç”¨ä¸€ä¸ªåœ¨ RPC åº“çš„å‡½æ•° svc_registerï¼Œæ¥æ³¨å†Œç¨‹åºç¼–å·å’Œç‰ˆæœ¬ã€‚è¿™ä¸ªæ˜¯ç”¨æ¥è”ç³» port mapperï¼ˆç«¯å£æ˜ å°„å™¨ï¼‰ã€‚port mapper æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œé€šå¸¸æ˜¯åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶å¯åŠ¨ã€‚å®ƒè·Ÿè¸ªç«¯å£å·ã€ç‰ˆæœ¬å·ä»¥åŠç¨‹åºç¼–å·ã€‚åœ¨ UNIX ç³»ç»Ÿç‰ˆæœ¬4ä¸­ï¼Œè¿™ä¸ªè¿›ç¨‹ç§°ä¸º rpcbindã€‚åœ¨ Linux ã€OS X å’Œ BSD ç³»ç»Ÿ,å®ƒè¢«ç§°ä¸º portmapã€‚</p><p><a href="https://imgtu.com/i/jyJbWR"><img src="https://s1.ax1x.com/2022/07/10/jyJbWR.jpg" alt="jyJbWR.jpg"></a></p><p>å›¾5 ONC RPC ä¸­çš„å‡½æ•°æŸ¥æ‰¾</p><p>å®¢æˆ·ç«¯</p><p>å½“æˆ‘ä»¬å¼€å§‹å®¢æˆ·ç«¯ç¨‹åºæ—¶ï¼Œå®ƒé¦–å…ˆç”¨è¿œç¨‹ç³»ç»Ÿçš„åç§°ã€ç¨‹åºç¼–å·ã€ç‰ˆæœ¬å·å’Œåè®®æ¥è°ƒç”¨ clnt_create ã€‚å®ƒæ¥è§¦è¿œç¨‹ç³»ç»Ÿä¸Šçš„ç«¯å£æ˜ å°„å™¨,æ¥ä¸ºç³»ç»Ÿæ‰¾åˆ°åˆé€‚çš„ç«¯å£ã€‚</p><p>ç„¶åå®¢æˆ·ç«¯è°ƒç”¨ RPC å­˜æ ¹å‡½æ•°(åœ¨æœ¬ä¾‹ä¸­ä¸º bin_date_1)ã€‚è¯¥å‡½æ•°å‘é€ä¸€æ¡æ¶ˆæ¯(å¦‚ï¼Œæ•°æ®æŠ¥)åˆ°æœåŠ¡å™¨(ä½¿ç”¨æ—©äº›æ—¶å€™å‘ç°çš„ç«¯å£å·)å¹¶ç­‰å¾…å“åº”ã€‚å¯¹äºæ•°æ®æŠ¥æœåŠ¡æ¥è¯´ï¼Œè‹¥æ²¡æœ‰æ¥æ”¶åˆ°å“åº”ï¼Œå®ƒå°†é‡æ–°å‘é€ä¸€ä¸ªå›ºå®šçš„æ¬¡æ•°è¯·æ±‚ã€‚</p><p>æ¶ˆæ¯æ¥ç€è¢«è¿œç¨‹ç³»ç»Ÿæ¥æ”¶åˆ°ï¼Œå®ƒè°ƒç”¨æœåŠ¡å™¨å‡½æ•°(bin_date_1)å¹¶å°†è¿”å›å€¼è¿”å›ç»™å®¢æˆ·ç«¯å­˜æ ¹ã€‚å®¢æˆ·ç«¯å­˜æ ¹è€Œåè¿”å›åˆ°å®¢æˆ·ç«¯å‘å‡ºè°ƒç”¨çš„ä»£ç ã€‚</p><h2 id="åˆ†å¸ƒå¼è®¡ç®—ç¯å¢ƒä¸­çš„-RPC-DCE-RPC"><a href="#åˆ†å¸ƒå¼è®¡ç®—ç¯å¢ƒä¸­çš„-RPC-DCE-RPC" class="headerlink" title="åˆ†å¸ƒå¼è®¡ç®—ç¯å¢ƒä¸­çš„ RPC(DCE RPC)"></a>åˆ†å¸ƒå¼è®¡ç®—ç¯å¢ƒä¸­çš„ RPC(DCE RPC)</h2><p>DCE(Distributed Computing Environmentï¼Œåˆ†å¸ƒå¼è®¡ç®—ç¯å¢ƒ)æ˜¯ä¸€ç»„ç”±OFS(Open Software Foundationï¼Œå¼€æ”¾è½¯ä»¶åŸºé‡‘ä¼š)è®¾è®¡çš„ç»„ä»¶ï¼Œç”¨æ¥æä¾›æ”¯æŒåˆ†å¸ƒå¼åº”ç”¨å’Œåˆ†å¸ƒå¼ç¯å¢ƒã€‚ä¸ X/Open åˆå¹¶å,è¿™ç»„ç»‡æˆä¸ºäº† The Open Group ï¼ˆå¼€æ”¾å¼å¼€å‘ç»„ï¼‰ã€‚DCE æä¾›çš„ç»„ä»¶åŒ…æ‹¬ä¸€ä¸ªåˆ†å¸ƒå¼æ–‡ä»¶æœåŠ¡ã€æ—¶é—´æœåŠ¡ã€ç›®å½•æœåŠ¡ä»¥åŠå…¶ä»–æœåŠ¡ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬æ„Ÿå…´è¶£çš„æ˜¯ DCE çš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚å®ƒéå¸¸ç±»ä¼¼äº Sun RPCã€‚æ¥å£æ˜¯ç”± Interface Definition Notation (IDN) å®šä¹‰çš„ã€‚ç±»ä¼¼äº Sun RPCï¼Œæ¥å£å®šä¹‰å°±åƒå‡½æ•°åŸå‹ã€‚</p><p>Sun RPC ä¸è¶³ä¹‹å¤„åœ¨äºï¼ŒæœåŠ¡å™¨çš„æ ‡è¯†æ˜¯ä¸€ä¸ªâ€œç‹¬ç‰¹â€çš„ 32-bit æ•°å­—ã€‚è™½ç„¶è¿™æ˜¯ä¸€ä¸ªæ¯”åœ¨ socket ä¸­ 16-bit å¯ç”¨ç©ºé—´æ›´å¤§çš„ç©ºé—´ï¼Œä½†ä»ç„¶æ— æ³•æ»¡è¶³æ•°å­—å”¯ä¸€æ€§çš„éœ€æ±‚ã€‚DCE RPC è€ƒè™‘åˆ°äº†è¿™ä¸€ç¼ºé™·ï¼Œå®ƒæ— éœ€ç¨‹åºå‘˜æ¥å¤„ç†ç¼–ç ã€‚åœ¨ç¼–å†™åº”ç”¨ç¨‹åºæ—¶çš„ç¬¬ä¸€æ­¥æ˜¯ä» uuidgen ç¨‹åºè·å¾—ä¸€ä¸ªæƒŸä¸€çš„ IDã€‚è¿™ä¸ªç¨‹åºä¼šç”Ÿæˆä¸€ä¸ªåŒ…å« ID æ¥å£çš„åŸå‹ IDN æ–‡ä»¶ï¼Œå¹¶ä¿è¯æ°¸è¿œä¸ä¼šå†æ¬¡ä½¿ç”¨ã€‚å®ƒæ˜¯ä¸€ä¸ª 128-bit çš„å€¼ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªä½ç½®ä»£ç å’Œåˆ›å»ºæ—¶é—´çš„ç¼–ç ã€‚ç„¶åç”¨æˆ·ç¼–è¾‘åŸå‹æ–‡ä»¶ï¼Œå¡«å†™è¿œç¨‹è¿‡ç¨‹å£°æ˜ã€‚</p><p>åœ¨è¿™ä¸€æ­¥åï¼ŒIDN çš„ç¼–è¯‘å™¨ dceidlï¼ˆç±»ä¼¼äº rpcgenï¼‰ä¼šç”Ÿæˆä¸€ä¸ªå¤´ã€å®¢æˆ·æœºå­˜æ ¹å’ŒæœåŠ¡å™¨å­˜æ ¹ã€‚</p><p>Sun RPC çš„å¦ä¸€ä¸ªç¼ºé™·æ˜¯ï¼Œå®¢æˆ·ç«¯å¿…é¡»çŸ¥é“æœåŠ¡å™¨åœ¨å“ªå°æœºå™¨ä¸Šã€‚å½“å®ƒè¦è®¿é—®æ—¶ï¼Œå¿…é¡»è¦è¯¢é—®æœºå™¨ä¸Šçš„ RPC åç§°æœåŠ¡ç¨‹åºç¼–ç æ‰€å¯¹åº”çš„ç«¯å£å·ã€‚DCE æ”¯æŒå°†å¤šä¸ªæœºå™¨ç»„ç»‡æˆä¸ºç®¡ç†å®ä½“ï¼Œç§°ä¸º cellsã€‚cell ç›®å½•æœåŠ¡å™¨ä½¿å¾—æ¯å°æœºå™¨çŸ¥é“å¦‚ä½•ä¸å¦å¤–ä¸€å°è´Ÿè´£ç»´æŠ¤ cell ä¿¡æ¯æœåŠ¡æœºå™¨äº¤äº’ã€‚</p><p>åœ¨ Sun RPC ä¸­ï¼ŒæœåŠ¡å™¨åªèƒ½ç”¨æœ¬åœ°åç§°æœåŠ¡(ç«¯å£æ˜ å°„å™¨)æ¥æ³¨å†Œå…¶ç¨‹åºç¼–å·åˆ°ç«¯å£æ˜ å°„ã€‚è€Œåœ¨ DCE ä¸­ï¼ŒæœåŠ¡å™¨ç”¨ RPC å®ˆæŠ¤è¿›ç¨‹(åç§°æœåŠ¡å™¨)æ¥æ³¨å†Œå…¶ç«¯ç‚¹(ç«¯å£)åˆ°æœ¬åœ°æœºå™¨ï¼Œå¹¶ä¸”ç”¨ cell ç›®å½•æœåŠ¡å™¨æ³¨å†Œå…¶ç¨‹åºåå­—åˆ°æœºå™¨çš„æ˜ å°„ã€‚å½“å®¢æˆ·æœºæƒ³è¦ä¸ä¸€ä¸ª RPC æœåŠ¡å™¨å»ºç«‹é€šä¿¡ï¼Œå®ƒé¦–å…ˆè¦æ±‚å…¶ cell ç›®å½•æœåŠ¡å™¨æ¥å®šä½æœåŠ¡å™¨æ‰€åœ¨çš„æœºå™¨ã€‚ç„¶åå®¢æˆ·ç«¯ä» RPC å®ˆæŠ¤è¿›ç¨‹å¤„è·å¾—æœºå™¨ä¸ŠæœåŠ¡å™¨è¿›ç¨‹çš„ç«¯å£å·ã€‚DCE çš„è·¨ cell è¿˜æ”¯æŒæ›´å¤æ‚çš„æœç´¢ã€‚</p><p>DCE RPC å®šä¹‰äº† NDR (Network Data Representation) ç”¨äºå¯¹ç½‘ç»œè¿›è¡Œç¼–ç æ¥å°é€ä¿¡æ¯ã€‚ä¸ç”¨ä¸€ä¸ªå•ä¸€çš„è§„èŒƒæ¥è¡¨ç¤ºä¸åŒçš„æ•°æ®ç±»å‹ç›¸æ¯”ï¼ŒNDR æ”¯æŒå¤šè§„èŒƒï¼ˆmulti-canonicalï¼‰æ ¼å¼ã€‚å…è®¸å®¢æˆ·ç«¯æ¥é€‰æ‹©ä½¿ç”¨å“ªç§æ ¼å¼ï¼Œç†æƒ³çš„æƒ…å†µæ˜¯ä¸éœ€è¦å°†å®ƒä»æœ¬åœ°ç±»å‹æ¥è½¬æ¢ã€‚å¦‚æœè¿™ä¸åŒäºæœåŠ¡å™¨çš„æœ¬åœ°æ•°æ®è¡¨ç¤º,æœåŠ¡å™¨å°†ä»ç„¶éœ€è¦è½¬æ¢ï¼Œä½†å¤šè§„èŒƒæ ¼å¼å¯ä»¥é¿å…å½“å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å…±äº«ç›¸åŒçš„æœ¬åœ°æ ¼å¼çš„æƒ…å†µä¸‹è½¬æ¢ä¸ºå…¶ä»–å¤–éƒ¨æ ¼å¼ã€‚ä¾‹å¦‚,åœ¨ä¸€ä¸ªè§„å®šäº†å¤§ç«¯å­—èŠ‚åºç½‘ç»œæ•°æ®æ ¼å¼çš„æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åªæ”¯æŒå°ç«¯å­—èŠ‚åºï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯å¿…é¡»å°†æ¯ä¸ªæ•°æ®ä»å°ç«¯å­—èŠ‚åºè½¬ä¸ºå¤§ç«¯å­—èŠ‚åºï¼Œè€Œå½“æœåŠ¡å™¨æ¥å—åˆ°æ¶ˆæ¯å,å°†æ¯ä¸ªæ•°æ®è½¬å›å°ç«¯å­—èŠ‚åºã€‚å¤šè§„èŒƒç½‘ç»œæ•°æ®è¡¨ç¤ºå°†å…è®¸å®¢æˆ·ç«¯å‘é€ç½‘ç»œæ¶ˆæ¯åŒ…å«å°ç«¯å­—èŠ‚åºæ ¼å¼çš„æ•°æ®ã€‚</p><p><a href="https://imgtu.com/i/jyJXy6"><img src="https://s1.ax1x.com/2022/07/10/jyJXy6.jpg" alt="jyJXy6.jpg"></a></p><p>å›¾6 DCE RPC ä¸­çš„å‡½æ•°æŸ¥æ‰¾</p><h2 id="ç¬¬äºŒä»£-RPC-æ”¯æŒå¯¹è±¡"><a href="#ç¬¬äºŒä»£-RPC-æ”¯æŒå¯¹è±¡" class="headerlink" title="ç¬¬äºŒä»£ RPC:æ”¯æŒå¯¹è±¡"></a>ç¬¬äºŒä»£ RPC:æ”¯æŒå¯¹è±¡</h2><p>é¢å‘å¯¹è±¡çš„è¯­è¨€å¼€å§‹åœ¨1980å¹´ä»£æœ«å…´èµ·ï¼Œå¾ˆæ˜æ˜¾ï¼Œå½“æ—¶çš„ Sun ONC å’Œ DCE RPC ç³»ç»Ÿéƒ½æ²¡æœ‰æä¾›ä»»ä½•æ”¯æŒè¯¸å¦‚ä»è¿œç¨‹ç±»å®ä¾‹åŒ–è¿œç¨‹å¯¹è±¡ã€è·Ÿè¸ªå¯¹è±¡çš„å®ä¾‹æˆ–æä¾›æ”¯æŒå¤šæ€æ€§ã€‚ç°æœ‰çš„ RPC æœºåˆ¶è™½ç„¶å¯ä»¥è¿ä½œï¼Œä½†ä»–ä»¬ä»ç„¶ä¸æ”¯æŒè‡ªåŠ¨ã€é€æ˜çš„æ–¹å¼çš„é¢å‘å¯¹è±¡ç¼–ç¨‹æŠ€æœ¯ã€‚</p><h3 id="å¾®è½¯-DCOM-COM"><a href="#å¾®è½¯-DCOM-COM" class="headerlink" title="å¾®è½¯ DCOM(COM+)"></a>å¾®è½¯ DCOM(COM+)</h3><p>1992å¹´4æœˆ,å¾®è½¯å‘å¸ƒ Windows 3.1 åŒ…æ‹¬ä¸€ç§æœºåˆ¶ç§°ä¸º OLE (Object Linking and Embedding)ã€‚è¿™å…è®¸ä¸€ä¸ªç¨‹åºåŠ¨æ€é“¾æ¥å…¶ä»–åº“æ¥æ”¯æŒçš„å…¶ä»–åŠŸèƒ½ã€‚å¦‚å°†ä¸€ä¸ªç”µå­è¡¨æ ¼åµŒå…¥åˆ° Word æ–‡æ¡£ã€‚OLE æ¼”å˜æˆäº† COM (Component Object Model)ã€‚ä¸€ä¸ª COM å¯¹è±¡æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ã€‚ä½¿ç”¨ COM æœåŠ¡çš„ç¨‹åºæ¥è®¿é—®æ ‡å‡†åŒ–æ¥å£çš„ COM å¯¹è±¡è€Œä¸æ˜¯å…¶å†…éƒ¨ç»“æ„ã€‚COM å¯¹è±¡ç”¨å…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦(GUID)æ¥å‘½åï¼Œç”¨ç±»çš„ ID æ¥è¯†åˆ«å¯¹è±¡çš„ç±»ã€‚å‡ ç§æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ª COM å¯¹è±¡(ä¾‹å¦‚ CoGetInstanceFromFile)ã€‚COM åº“åœ¨ç³»ç»Ÿæ³¨å†Œè¡¨ä¸­æŸ¥æ‰¾ç›¸åº”çš„äºŒè¿›åˆ¶ä»£ç (ä¸€ä¸ª DLL æˆ–å¯æ‰§è¡Œæ–‡ä»¶)ï¼Œæ¥åˆ›å»ºå¯¹è±¡ï¼Œå¹¶ç»™è°ƒç”¨è€…è¿”å›ä¸€ä¸ªæ¥å£æŒ‡é’ˆã€‚COM çš„ç€çœ¼ç‚¹æ˜¯åœ¨äºåŒä¸€å°è®¡ç®—æœºä¸Šä¸åŒåº”ç”¨ç¨‹åºä¹‹é—´çš„é€šè®¯éœ€æ±‚.</p><p>DCOMï¼ˆ Distributed Component Object Modelï¼‰æ˜¯ COM çš„æ‰©å±•ï¼Œå®ƒæ”¯æŒä¸åŒçš„ä¸¤å°æœºå™¨ä¸Šçš„ç»„ä»¶é—´çš„é€šä¿¡ï¼Œè€Œä¸”ä¸è®ºå®ƒä»¬æ˜¯è¿è¡Œåœ¨å±€åŸŸç½‘ã€å¹¿åŸŸç½‘ã€è¿˜æ˜¯ Internet ä¸Šã€‚å€ŸåŠ© DCOM ä½ çš„åº”ç”¨ç¨‹åºå°†èƒ½å¤Ÿè¿›è¡Œä»»æ„ç©ºé—´åˆ†å¸ƒã€‚DCOM äº1996å¹´åœ¨ Windows NT4.0 ä¸­å¼•å…¥çš„ï¼Œåæ¥æ›´åä¸º COM+ã€‚ç”±äº DCOM æ˜¯ä¸ºäº†æ”¯æŒè®¿é—®è¿œç¨‹ COM å¯¹è±¡ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„è¿‡ç¨‹ï¼Œæ­¤æ—¶éœ€è¦æä¾›æœåŠ¡å™¨çš„ç½‘ç»œåä»¥åŠç±» IDã€‚å¾®è½¯æä¾›äº†ä¸€äº›æœºåˆ¶æ¥å®ç°è¿™ä¸€ç‚¹ã€‚æœ€é€æ˜çš„æ–¹å¼æ˜¯è¿œç¨‹è®¡ç®—æœºçš„åç§°å›ºå®šåœ¨æ³¨å†Œè¡¨ï¼ˆæˆ– DCOM ç±»å­˜å‚¨ï¼‰é‡Œï¼Œä¸ç‰¹å®šç±» ID ç›¸å…³è”ã€‚ä»¥æ­¤æ–¹å¼ï¼Œåº”ç”¨ç¨‹åºä¸çŸ¥é“å®ƒæ­£åœ¨è®¿é—®ä¸€ä¸ªè¿œç¨‹å¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨ä¸è®¿é—®æœ¬åœ° COM å¯¹è±¡ç›¸åŒçš„æ¥å£æŒ‡é’ˆã€‚å¦ä¸€æ–¹é¢ï¼Œåº”ç”¨ç¨‹åºä¹Ÿå¯æŒ‡å®šä¸€ä¸ªæœºå™¨åä½œä¸ºå‚æ•°ã€‚</p><p>ç”±äº DCOM æ˜¯ COM è¿™ä¸ªç»„ä»¶æŠ€æœ¯çš„æ— ç¼å‡çº§ï¼Œæ‰€ä»¥ä½ èƒ½å¤Ÿä»ä½ ç°æœ‰çš„æœ‰å…³ COM å¾—çŸ¥è¯†ä¸­è·ç›Šï¼Œä½ çš„ä»¥å‰åœ¨ COM ä¸­å¼€å‘çš„åº”ç”¨ç¨‹åºã€ç»„ä»¶ã€å·¥å…·éƒ½å¯ä»¥ç§»å…¥åˆ†å¸ƒå¼çš„ç¯å¢ƒä¸­ã€‚DCOM å°†ä¸ºä½ å±è”½åº•å±‚ç½‘ç»œåè®®çš„ç»†èŠ‚ï¼Œä½ åªéœ€è¦é›†ä¸­ç²¾åŠ›äºä½ çš„åº”ç”¨ã€‚</p><p>DCOM æœ€å¤§çš„ç¼ºç‚¹æ˜¯è¿™æ˜¯å¾®è½¯ç‹¬å®¶çš„è§£å†³åŠæ³•ï¼Œåœ¨è·¨é˜²ç«å¢™æ–¹é¢çš„å·¥ä½œåšå¾—ä¸æ˜¯å¾ˆå¥½ï¼ˆå¤§å¤šæ•°RPCç³»ç»Ÿä¹Ÿæœ‰ç±»ä¼¼çš„é—®é¢˜ï¼‰ï¼Œå› ä¸ºé˜²ç«å¢™å¿…é¡»å…è®¸æŸäº›ç«¯å£æ¥å…è®¸ ORPC å’Œ DCOM é€šè¿‡ã€‚</p><h3 id="CORBA"><a href="#CORBA" class="headerlink" title="CORBA"></a>CORBA</h3><p>è™½ç„¶ DCE ä¿®å¤çš„ä¸€äº› Sun RPC çš„ç¼ºç‚¹ï¼Œä½†æŸäº›ç¼ºé™·ä¾ç„¶å­˜åœ¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæœåŠ¡å™¨æ²¡æœ‰è¿è¡Œï¼Œå®¢æˆ·ç«¯æ˜¯æ— æ³•è¿æ¥åˆ°è¿œç¨‹è¿‡ç¨‹è¿›è¡Œè°ƒç”¨çš„ã€‚ç®¡ç†å‘˜å¿…é¡»è¦ç¡®ä¿åœ¨ä»»ä½•å®¢æˆ·ç«¯è¯•å›¾è¿æ¥åˆ°æœåŠ¡å™¨ä¹‹å‰å°†æœåŠ¡å™¨å¯åŠ¨ã€‚å¦‚æœä¸€ä¸ªæ–°æœåŠ¡æˆ–æ¥å£æ·»åŠ åˆ°äº†ç³»ç»Ÿï¼Œå®¢æˆ·ç«¯æ˜¯ä¸èƒ½å‘ç°çš„ã€‚æœ€å,é¢å‘å¯¹è±¡è¯­è¨€æœŸæœ›åœ¨å‡½æ•°è°ƒç”¨ä¸­ä½“ç°å¤šæ€æ€§ï¼Œå³ä¸åŒç±»å‹çš„æ•°æ®çš„å‡½æ•°çš„è¡Œä¸ºåº”è¯¥æœ‰æ‰€ä¸åŒï¼Œè€Œè¿™ç‚¹æ°æ°æ˜¯ä¼ ç»Ÿçš„ RPC æ‰€ä¸æ”¯æŒçš„ã€‚</p><p>CORBA (Common Object Request Broker Architecture) å°±æ˜¯ä¸ºäº†è§£å†³ä¸Šé¢æåˆ°çš„å„ç§é—®é¢˜ã€‚æ˜¯ç”± OMG ç»„ç»‡åˆ¶è®¢çš„ä¸€ç§æ ‡å‡†çš„é¢å‘å¯¹è±¡åº”ç”¨ç¨‹ åºä½“ç³»è§„èŒƒã€‚æˆ–è€…è¯´ CORBAä½“ç³»ç»“æ„æ˜¯å¯¹è±¡ç®¡ç†ç»„ç»‡ï¼ˆOMGï¼‰ä¸ºè§£å†³åˆ†å¸ƒå¼å¤„ç†ç¯å¢ƒ(DCE)ä¸­ï¼Œç¡¬ä»¶å’Œè½¯ä»¶ç³»ç»Ÿçš„äº’è¿è€Œæå‡ºçš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚OMG æˆç«‹äº1989å¹´ï¼Œä½œä¸ºä¸€ä¸ªéè¥åˆ©æ€§ç»„ç»‡ï¼Œé›†ä¸­è‡´åŠ›äºå¼€å‘åœ¨æŠ€æœ¯ä¸Šå…·æœ‰å…ˆè¿›æ€§ã€åœ¨å•†ä¸šä¸Šå…·æœ‰å¯è¡Œæ€§å¹¶ä¸”ç‹¬ç«‹äºå‚å•†çš„è½¯ä»¶äº’è”è§„èŒƒï¼Œæ¨å¹¿é¢å‘å¯¹è±¡æ¨¡å‹æŠ€æœ¯ï¼Œå¢å¼ºè½¯ä»¶çš„å¯ç§»æ¤æ€§ï¼ˆPortabilityï¼‰ã€å¯é‡ç”¨æ€§ï¼ˆReusabilityï¼‰å’Œäº’æ“ä½œæ€§ï¼ˆInteroperabilityï¼‰ã€‚è¯¥ç»„ç»‡æˆç«‹ä¹‹åˆï¼Œæˆå‘˜åŒ…æ‹¬ Unisysã€Sunã€Cannonã€Hewlett-Packard å’Œ Philips ç­‰åœ¨ä¸šç•Œäº«æœ‰å£°èª‰çš„è½¯ç¡¬ä»¶å‚å•†ï¼Œç›®å‰è¯¥ç»„ç»‡æ‹¥æœ‰800å¤šå®¶æˆå‘˜ã€‚</p><p>CORBA ä½“ç³»çš„ä¸»è¦å†…å®¹åŒ…æ‹¬ä»¥ä¸‹å‡ éƒ¨åˆ†ï¼š</p><ul><li>å¯¹è±¡è¯·æ±‚ä»£ç† ï¼ˆObject Request Brokerï¼ŒORBï¼‰ï¼šè´Ÿè´£å¯¹è±¡åœ¨åˆ†å¸ƒç¯å¢ƒä¸­é€æ˜åœ°æ”¶å‘è¯·æ±‚å’Œå“åº”ï¼Œå®ƒæ˜¯æ„å»ºåˆ†å¸ƒå¯¹è±¡åº”ç”¨ã€åœ¨å¼‚æ„æˆ–åŒæ„ç¯å¢ƒä¸‹å®ç°åº”ç”¨é—´äº’æ“ä½œçš„åŸºç¡€ã€‚</li><li>å¯¹è±¡æœåŠ¡ï¼ˆObject Servicesï¼‰ï¼šä¸ºä½¿ç”¨å’Œå®ç°å¯¹è±¡è€Œæä¾›çš„åŸºæœ¬å¯¹è±¡é›†åˆï¼Œè¿™äº›æœåŠ¡åº”ç‹¬ç«‹äºåº”ç”¨é¢†åŸŸã€‚ä¸»è¦çš„ CORBA æœåŠ¡æœ‰ï¼šåå½•æœåŠ¡ï¼ˆNaming Serviceï¼‰ã€äº‹ä»¶æœåŠ¡ï¼ˆEvent Serviceï¼‰ã€ç”Ÿå‘½å‘¨æœŸæœåŠ¡ï¼ˆLife Cycle Serviceï¼‰ã€å…³ç³»æœåŠ¡ï¼ˆRelationship Serviceï¼‰ä»¥åŠäº‹åŠ¡æœåŠ¡ï¼ˆTransaction Serviceï¼‰ç­‰ã€‚è¿™äº›æœåŠ¡å‡ ä¹åŒ…æ‹¬åˆ†å¸ƒç³»ç»Ÿå’Œé¢å‘å¯¹è±¡ç³»ç»Ÿçš„å„ä¸ªæ–¹é¢ï¼Œæ¯ä¸ªç»„æˆéƒ¨åˆ†éƒ½éå¸¸å¤æ‚ã€‚</li><li>å…¬å…±è®¾æ–½ï¼ˆCommon Facilititesï¼‰ï¼šå‘ç»ˆç«¯ç”¨æˆ·æä¾›ä¸€ç»„å…±äº«æœåŠ¡æ¥å£ï¼Œä¾‹å¦‚ç³»ç»Ÿç®¡ç†ã€ç»„åˆæ–‡æ¡£å’Œç”µå­é‚®ä»¶ç­‰ã€‚</li><li>åº”ç”¨æ¥å£ï¼ˆApplication Interfacesï¼‰ã€‚ç”±é”€å”®å•†æä¾›çš„å¯æ§åˆ¶å…¶æ¥å£çš„äº§å“ï¼Œç›¸åº”äºä¼ ç»Ÿçš„åº”ç”¨å±‚è¡¨ç¤ºï¼Œå¤„äºå‚è€ƒæ¨¡å‹çš„æœ€é«˜å±‚ã€‚</li><li>é¢†åŸŸæ¥å£ï¼ˆDomain Interfacesï¼‰ï¼šä¸ºåº”ç”¨é¢†åŸŸæœåŠ¡è€Œæä¾›çš„æ¥å£ï¼Œå¦‚OMG ç»„ç»‡ä¸º PDM ç³»ç»Ÿåˆ¶å®šçš„è§„èŒƒã€‚</li></ul><p>å½“å®¢æˆ·ç«¯å‘å‡ºè¯·æ±‚æ—¶,ORB åšäº†å¦‚ä¸‹äº‹æƒ…:</p><ul><li>åœ¨å®¢æˆ·ç«¯ç¼–ç»„å‚æ•°ï¼›</li><li>å®šä½æœåŠ¡å™¨å¯¹è±¡ã€‚å¦‚æœæœ‰å¿…è¦çš„è¯,å®ƒä¼šåœ¨æœåŠ¡å™¨åˆ›å»ºä¸€ä¸ªè¿‡ç¨‹æ¥å¤„ç†è¯·æ±‚ï¼›</li><li>å¦‚æœæœåŠ¡å™¨æ˜¯è¿œç¨‹æ˜¯,å°±ä½¿ç”¨ RPC æˆ– socket æ¥ä¼ é€è¯·æ±‚ï¼›</li><li>åœ¨æœåŠ¡å™¨ä¸Šå°†å‚æ•°è§£ææˆä¸ºæœåŠ¡å™¨æ ¼å¼ï¼›</li><li>åœ¨æœåŠ¡å™¨ä¸Šç»„è£…è¿”å›å€¼ï¼›</li><li>å¦‚æœæœåŠ¡å™¨æ˜¯è¿œç¨‹çš„ï¼Œå°±å°†è¿”å›å€¼ä¼ å›ï¼›</li><li>åœ¨å®¢æˆ·ç«¯å¯¹è¿”å›ç»“æœè¿›è¡Œè§£æï¼›</li></ul><p>IDL(Interface Definition Language) æ˜¯ç”¨äºæŒ‡å®šç±»çš„åå­—ã€å±æ€§å’Œæ–¹æ³•ã€‚å®ƒä¸åŒ…å«å¯¹è±¡çš„å®ç°ã€‚IDL ç¼–è¯‘å™¨ç”Ÿæˆä»£ç æ¥å¤„ç†ç¼–ç»„ã€è§£å°ä»¥åŠORBä¸ç½‘ç»œä¹‹é—´çš„äº¤äº’ã€‚å®ƒä¼šç”Ÿæˆå®¢æˆ·æœºå’ŒæœåŠ¡å™¨å­˜æ ¹ã€‚IDL æ˜¯ç¼–ç¨‹è¯­è¨€ä¸­ç«‹ï¼Œæ”¯æŒåŒ…æ‹¬Cã€C++ã€Javaã€Perlã€Pythonã€Adaã€COBOLã€Smalltalkã€Objective C å’Œ LISP ç­‰è¯­è¨€ã€‚ä¸€ä¸ªç¤ºä¾‹IDLå¦‚ä¸‹æ‰€ç¤º:</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Module StudentObject &#123;</span><br><span class="line">    Struct StudentInfo &#123;</span><br><span class="line">        String name;</span><br><span class="line">        <span class="built_in">int</span> id;</span><br><span class="line">        <span class="built_in">float</span> gpa;</span><br><span class="line">    &#125;;</span><br><span class="line">    exception Unknown &#123;&#125;;</span><br><span class="line">    <span class="keyword">interface</span> <span class="title">Student</span> &#123;</span><br><span class="line">        <span class="function">StudentInfo <span class="title">getinfo</span>(<span class="params"><span class="keyword">in</span> <span class="built_in">string</span> name</span>)</span></span><br><span class="line"><span class="function">            <span class="title">raises</span>(<span class="params">unknown</span>)</span>;</span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">putinfo</span>(<span class="params"><span class="keyword">in</span> StudentInfo data</span>)</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>IDLæ•°æ®ç±»å‹åŒ…æ‹¬:</p><ul><li>åŸºæœ¬ç±»å‹:long, short, string, float, â€¦</li><li>æ„é€ ç±»å‹:structã€unionã€æšä¸¾ã€åºåˆ—</li><li>å¯¹è±¡å¼•ç”¨</li><li>any ç±»å‹:ä¸€ä¸ªåŠ¨æ€ç±»å‹çš„å€¼</li></ul><p>ç¼–ç¨‹ä¸­æœ€å¸¸è§çš„å®ç°æ–¹å¼æ˜¯é€šè¿‡å¯¹è±¡å¼•ç”¨æ¥å®ç°è¯·æ±‚ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ IDL çš„ä¾‹å­:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Student</span> <span class="variable">st</span> <span class="operator">=</span> ... <span class="comment">// get object reference</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="type">StudentInfo</span> <span class="variable">sinfo</span> <span class="operator">=</span> st.getinfo(<span class="string">&quot;Fred Grampp&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">    ... <span class="comment">// error</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ CORBA è§„èŒƒä¸­ï¼Œæ²¡æœ‰æ˜ç¡®è¯´æ˜ä¸åŒå‚å•†çš„ä¸­é—´ä»¶äº§å“è¦å®ç°æ‰€æœ‰çš„æœåŠ¡åŠŸèƒ½ï¼Œå¹¶ä¸”å…è®¸å‚å•†å¼€å‘è‡ªå·±çš„æœåŠ¡ç±»å‹ã€‚å› æ­¤, ä¸åŒå‚å•†çš„ ORB äº§å“å¯¹ CORBA æœåŠ¡çš„æ”¯æŒèƒ½åŠ›ä¸åŒï¼Œä½¿æˆ‘ä»¬åœ¨é’ˆå¯¹å¾…å¼€å‘ç³»ç»Ÿçš„åŠŸèƒ½è¿›è¡Œä¸­é—´ä»¶äº§å“é€‰æ‹©æ—¶ï¼Œæœ‰æ›´å¤šçš„é€‰æ‹©ä½™åœ°ã€‚</p><p>CORBA çš„ä¸è¶³æœ‰ï¼š</p><ul><li>å°½ç®¡æœ‰å¤šå®¶ä¾›åº”å•†æä¾›CORBAäº§å“ï¼Œä½†æ˜¯ä»æ‰¾ä¸åˆ°èƒ½å¤Ÿå•ç‹¬ä¸ºå¼‚ç§ç½‘ç»œä¸­çš„æ‰€æœ‰ç¯å¢ƒæä¾›å®ç°çš„ä¾›åº”å•†ã€‚ä¸åŒçš„ CORBA å®ç°ä¹‹é—´ä¼šå‡ºç°ç¼ºä¹äº’æ“ä½œæ€§çš„ç°è±¡ï¼Œä»è€Œé€ æˆä¸€äº›é—®é¢˜ï¼›è€Œä¸”ï¼Œç”±äºä¾›åº”å•†å¸¸å¸¸ä¼šè‡ªè¡Œå®šä¹‰æ‰©å±•ï¼Œè€Œ CORBA åˆç¼ºä¹é’ˆå¯¹å¤šçº¿ç¨‹ç¯å¢ƒçš„è§„èŒƒï¼Œå¯¹äºåƒ C æˆ– C++ è¿™æ ·çš„è¯­è¨€ï¼Œæºç å…¼å®¹æ€§å¹¶æœªå®Œå…¨å®ç°ã€‚</li><li>CORBA è¿‡äºå¤æ‚ï¼Œè¦ç†Ÿæ‚‰ CORBAï¼Œå¹¶è¿›è¡Œç›¸åº”çš„è®¾è®¡å’Œç¼–ç¨‹ï¼Œéœ€è¦è®¸å¤šä¸ªæœˆæ¥æŒæ¡ï¼Œè€Œè¦è¾¾åˆ°ä¸“å®¶æ°´å¹³ï¼Œåˆ™éœ€è¦å¥½å‡ å¹´ã€‚</li></ul><p>æ›´å¤šæœ‰å…³ CORBA çš„ä¼˜ç¼ºç‚¹ï¼Œå¯ä»¥å‚é˜… Michi Henning çš„ã€Š<a href="http://queue.acm.org/detail.cfm?id=1142044">The rise and fall of CORBA</a>ã€‹ã€‚</p><h3 id="Java-RMI"><a href="#Java-RMI" class="headerlink" title="Java RMI"></a>Java RMI</h3><p>CORBA æ—¨åœ¨æä¾›ä¸€ç»„å…¨é¢çš„æœåŠ¡æ¥ç®¡ç†åœ¨å¼‚æ„ç¯å¢ƒä¸­(ä¸åŒè¯­è¨€ã€æ“ä½œç³»ç»Ÿã€ç½‘ç»œ)çš„å¯¹è±¡ã€‚Java åœ¨å…¶æœ€åˆåªæ”¯æŒé€šè¿‡ socket æ¥å®ç°åˆ†å¸ƒå¼é€šä¿¡ã€‚1995å¹´,ä½œä¸º Java çš„ç¼”é€ è€…ï¼ŒSun å…¬å¸å¼€å§‹åˆ›å»ºä¸€ä¸ª Java çš„æ‰©å±•ï¼Œç§°ä¸º Java RMI(Remote Method Invocationï¼Œè¿œç¨‹æ–¹æ³•è°ƒç”¨)ã€‚Java RMI å…è®¸ç¨‹åºå‘˜åˆ›å»ºåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºæ—¶ï¼Œå¯ä»¥ä»å…¶ä»– Java è™šæ‹Ÿæœº(JVM)è°ƒç”¨è¿œç¨‹å¯¹è±¡çš„æ–¹æ³•ã€‚</p><p>ä¸€æ—¦åº”ç”¨ç¨‹åº(å®¢æˆ·ç«¯)å¼•ç”¨äº†è¿œç¨‹å¯¹è±¡ï¼Œå°±å¯ä»¥è¿›è¡Œè¿œç¨‹è°ƒç”¨äº†ã€‚è¿™æ˜¯é€šè¿‡ RMI æä¾›çš„å‘½åæœåŠ¡(RMI æ³¨å†Œä¸­å¿ƒ)æ¥æŸ¥æ‰¾è¿œç¨‹å¯¹è±¡ï¼Œæ¥æ¥æ”¶ä½œä¸ºè¿”å›å€¼çš„å¼•ç”¨ã€‚Java RMI åœ¨æ¦‚å¿µä¸Šç±»ä¼¼äº RPCï¼Œä½†èƒ½åœ¨ä¸åŒåœ°å€ç©ºé—´æ”¯æŒå¯¹è±¡è°ƒç”¨çš„è¯­ä¹‰ã€‚</p><p>ä¸å¤§å¤šæ•°å…¶ä»–è¯¸å¦‚ CORBA çš„ RPC ç³»ç»Ÿä¸åŒï¼ŒRMI åªæ”¯æŒåŸºäº Java æ¥æ„å»ºï¼Œä½†ä¹Ÿæ­£æ˜¯è¿™ä¸ªåŸå› ï¼Œ RMI å¯¹äºè¯­è¨€æ¥è¯´æ›´åŠ æ•´æ´ï¼Œæ— éœ€åšé¢å¤–çš„æ•°æ®åºåˆ—åŒ–å·¥ä½œã€‚Java RMI çš„è®¾è®¡ç›®æ ‡åº”è¯¥æ˜¯:</p><ul><li>èƒ½å¤Ÿé€‚åº”è¯­è¨€ã€é›†æˆåˆ°è¯­è¨€ã€æ˜“äºä½¿ç”¨ï¼›</li><li>æ”¯æŒæ— ç¼çš„è¿œç¨‹è°ƒç”¨å¯¹è±¡ï¼›</li><li>æ”¯æŒæœåŠ¡å™¨åˆ° applet çš„å›è°ƒï¼›</li><li>ä¿éšœ Java å¯¹è±¡çš„å®‰å…¨ç¯å¢ƒï¼›</li><li>æ”¯æŒåˆ†å¸ƒå¼åƒåœ¾å›æ”¶ï¼›</li><li>æ”¯æŒå¤šç§ä¼ è¾“ã€‚</li></ul><p>åˆ†å¸ƒå¼å¯¹è±¡æ¨¡å‹ä¸æœ¬åœ° Java å¯¹è±¡æ¨¡å‹ç›¸ä¼¼ç‚¹åœ¨äº:</p><ul><li>å¼•ç”¨ä¸€ä¸ªå¯¹è±¡å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’æˆ–ä½œä¸ºè¿”å›çš„ç»“æœï¼›</li><li>è¿œç¨‹å¯¹è±¡å¯ä»¥æŠ•åˆ°ä»»ä½•ä½¿ç”¨ Java è¯­æ³•å®ç°çš„è¿œç¨‹æ¥å£çš„é›†åˆä¸Šï¼›</li><li>å†…ç½® Java instanceof æ“ä½œç¬¦å¯ä»¥ç”¨æ¥æµ‹è¯•è¿œç¨‹å¯¹è±¡æ˜¯å¦æ”¯æŒè¿œç¨‹æ¥å£ã€‚</li></ul><p>ä¸åŒç‚¹åœ¨äº:</p><ul><li>è¿œç¨‹å¯¹è±¡çš„ç±»æ˜¯ä¸è¿œç¨‹æ¥å£è¿›è¡Œäº¤äº’ï¼Œè€Œä¸æ˜¯ä¸è¿™äº›æ¥å£çš„å®ç°ç±»äº¤äº’ï¼›</li><li>Non-remote å‚æ•°å¯¹äºè¿œç¨‹æ–¹æ³•è°ƒç”¨æ¥è¯´æ˜¯é€šè¿‡å¤åˆ¶ï¼Œè€Œä¸æ˜¯é€šè¿‡å¼•ç”¨ï¼›</li><li>è¿œç¨‹å¯¹è±¡æ˜¯é€šè¿‡å¼•ç”¨æ¥ä¼ é€’ï¼Œè€Œä¸æ˜¯å¤åˆ¶å®é™…çš„è¿œç¨‹å®ç°ï¼›</li><li>å®¢æˆ·ç«¯å¿…é¡»å¤„ç†é¢å¤–çš„å¼‚å¸¸ã€‚</li></ul><p>æ¥å£å’Œç±»</p><p>æ‰€æœ‰çš„è¿œç¨‹æ¥å£éƒ½ç»§æ‰¿è‡ª <code>java.rmi.Remote</code> æ¥å£ã€‚ä¾‹å¦‚:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">bankaccount</span> <span class="keyword">extends</span> <span class="title class_">Remote</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deposit</span><span class="params">(<span class="type">float</span> amount)</span></span><br><span class="line">        <span class="keyword">throws</span> java.rmi.RemoteException;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">withdraw</span><span class="params">(<span class="type">float</span> amount)</span></span><br><span class="line">        <span class="keyword">throws</span> OverdrawnException,</span><br><span class="line">        java.rmi.RemoteException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„,æ¯ä¸ªæ–¹æ³•å¿…é¡»åœ¨ throws é‡Œé¢å£°æ˜ <code>java.rmi.RemoteException</code> ã€‚ åªè¦å®¢æˆ·ç«¯è°ƒç”¨è¿œç¨‹æ–¹æ³•å‡ºç°å¤±è´¥ï¼Œè¿™ä¸ªå¼‚å¸¸å°±ä¼šæŠ›å‡ºã€‚</p><p>è¿œç¨‹å¯¹è±¡ç±»</p><p><code>Java.rmi.server.RemoteObject</code> ç±»æä¾›äº†è¿œç¨‹å¯¹è±¡å®ç°çš„è¯­ä¹‰åŒ…æ‹¬hashCodeã€equalsã€€å’Œã€€toStringã€‚ <code>java.rmi.server.RemoteServer</code>ã€€åŠå…¶å­ç±»æä¾›è®©å¯¹è±¡å®ç°è¿œç¨‹å¯è§ã€‚<code>java.rmi.server.UnicastRemoteObject</code> ç±»å®šä¹‰äº†å®¢æˆ·æœºä¸æœåŠ¡å™¨å¯¹è±¡å®ä¾‹å»ºç«‹ä¸€å¯¹ä¸€çš„è¿æ¥.</p><p>å­˜æ ¹</p><p>Java RMI é€šè¿‡åˆ›å»ºå­˜æ ¹å‡½æ•°æ¥å·¥ä½œã€‚å­˜æ ¹ç”± rmic ç¼–è¯‘å™¨ç”Ÿæˆã€‚è‡ª Java 1.5 ä»¥æ¥,Java æ”¯æŒåœ¨è¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆå­˜æ ¹ç±»ã€‚ç¼–è¯‘å™¨ rmic ä¼šæä¾›å„ç§ç¼–è¯‘é€‰é¡¹ã€‚</p><p>å®šä½å¯¹è±¡</p><p>å¼•å¯¼åç§°æœåŠ¡æä¾›äº†ç”¨äºå­˜å‚¨å¯¹è¿œç¨‹å¯¹è±¡çš„å‘½åå¼•ç”¨ã€‚ä¸€ä¸ªè¿œç¨‹å¯¹è±¡å¼•ç”¨å¯ä»¥å­˜å‚¨ä½¿ç”¨ç±» <code>java.rmi.Naming</code> æä¾›çš„åŸºäº URL çš„æ–¹æ³•ã€‚ä¾‹å¦‚,</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">BankAccount</span> <span class="variable">acct</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BankAcctImpl</span>();</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;rmi://java.sun.com/account&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// bind url to remote object</span></span><br><span class="line"></span><br><span class="line">java.rmi.Naming.bind(url, acct);</span><br><span class="line"></span><br><span class="line"><span class="comment">// look up account</span></span><br><span class="line"></span><br><span class="line">acct = (BankAccount)java.rmi.Naming.lookup(url);</span><br></pre></td></tr></table></figure><p><a href="https://imgtu.com/i/jyJjOK"><img src="https://s1.ax1x.com/2022/07/10/jyJjOK.jpg" alt="jyJjOK.jpg"></a></p><p>å›¾7 Java RMI å·¥ä½œæµç¨‹</p><p>RMI æ¶æ„</p><p>RMI æ˜¯ä¸€ä¸ªä¸‰å±‚æ¶æ„(å›¾8)ã€‚æœ€ä¸Šé¢æ˜¯ Stub/Skeleton layerï¼ˆå­˜æ ¹/éª¨æ¶å±‚ï¼‰ã€‚æ–¹æ³•è°ƒç”¨ä» Stubã€Remote Reference Layer (è¿œç¨‹å¼•ç”¨å±‚)å’Œ Transport Layerï¼ˆä¼ è¾“å±‚ï¼‰å‘ä¸‹ï¼Œä¼ é€’ç»™ä¸»æœºï¼Œç„¶åå†æ¬¡ç»ä¼  Transport Layer å±‚ï¼Œå‘ä¸Šç©¿è¿‡ Remote Reference Layer å’Œ Skeleton ï¼Œåˆ°è¾¾æœåŠ¡å™¨å¯¹è±¡ã€‚ Stub æ‰®æ¼”ç€è¿œç¨‹æœåŠ¡å™¨å¯¹è±¡çš„ä»£ç†çš„è§’è‰²ï¼Œä½¿è¯¥å¯¹è±¡å¯è¢«å®¢æˆ·æ¿€æ´»ã€‚Remote Reference Layer å¤„ç†è¯­ä¹‰ã€ç®¡ç†å•ä¸€æˆ–å¤šé‡å¯¹è±¡çš„é€šä¿¡ï¼Œå†³å®šè°ƒç”¨æ˜¯åº”å‘å¾€ä¸€ä¸ªæœåŠ¡å™¨è¿˜æ˜¯å¤šä¸ªã€‚Transport Layer ç®¡ç†å®é™…çš„è¿æ¥ï¼Œå¹¶ä¸”è¿½è¸ªå¯ä»¥æ¥å—æ–¹æ³•è°ƒç”¨çš„è¿œç¨‹å¯¹è±¡ã€‚æœåŠ¡å™¨ç«¯çš„ Skeleton å®Œæˆå¯¹æœåŠ¡å™¨å¯¹è±¡å®é™…çš„æ–¹æ³•è°ƒç”¨ï¼Œå¹¶è·å–è¿”å›å€¼ã€‚è¿”å›å€¼å‘ä¸‹ç» Remote Reference Layer ã€æœåŠ¡å™¨ç«¯çš„ Transport Layer ä¼ é€’å›å®¢æˆ·ç«¯ï¼Œå†å‘ä¸Šç» Transport Layer å’Œ Remote Reference Layer è¿”å›ã€‚æœ€åï¼ŒStub ç¨‹åºè·å¾—è¿”å›å€¼ã€‚</p><p>è¦å®Œæˆä»¥ä¸Šæ­¥éª¤éœ€è¦æœ‰ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p><ul><li>ç”Ÿæˆä¸€ä¸ªè¿œç¨‹æ¥å£ï¼›</li><li>å®ç°è¿œç¨‹å¯¹è±¡(æœåŠ¡å™¨ç«¯ç¨‹åº)ï¼›</li><li>ç”Ÿæˆ Stub å’Œ Skeleton(æœåŠ¡å™¨ç«¯ç¨‹åº)ï¼›</li><li>ç¼–å†™æœåŠ¡å™¨ç¨‹åº ï¼›</li><li>ç¼–å†™å®¢æˆ·ç¨‹åº ï¼›</li><li>æ³¨å†Œè¿œç¨‹å¯¹è±¡ï¼›</li><li>å¯åŠ¨è¿œç¨‹å¯¹è±¡</li></ul><p><a href="https://imgtu.com/i/jyJxeO"><img src="https://s1.ax1x.com/2022/07/10/jyJxeO.jpg" alt="jyJxeO.jpg"></a></p><p>å›¾8 Java RMI æ¶æ„</p><p>RMI åˆ†å¸ƒå¼åƒåœ¾å›æ”¶</p><p>æ ¹æ® Java è™šæ‹Ÿæœºçš„åƒåœ¾å›æ”¶æœºåˆ¶åŸç†ï¼Œåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼ŒæœåŠ¡å™¨è¿›ç¨‹éœ€è¦çŸ¥é“å“ªäº›å¯¹è±¡ä¸å†ç”±å®¢æˆ·ç«¯å¼•ç”¨ï¼Œä»è€Œå¯ä»¥è¢«åˆ é™¤(åƒåœ¾å›æ”¶)ã€‚åœ¨ JVMä¸­,Java ä½¿ç”¨å¼•ç”¨è®¡æ•°ã€‚å½“å¼•ç”¨è®¡æ•°å½’é›¶æ—¶ï¼Œå¯¹è±¡å°†ä¼šåƒåœ¾å›æ”¶ã€‚åœ¨RMI,Java æ”¯æŒä¸¤ç§æ“ä½œ:dirty å’Œ cleanã€‚æœ¬åœ° JVM å®šæœŸå‘é€ä¸€ä¸ª dirty åˆ°æœåŠ¡å™¨æ¥è¯´æ˜è¯¥å¯¹è±¡ä»åœ¨ä½¿ç”¨ã€‚å®šæœŸé‡å‘ dirty çš„å‘¨æœŸæ˜¯ç”±æœåŠ¡å™¨ç§Ÿèµæ—¶é—´æ¥å†³å®šçš„ã€‚å½“å®¢æˆ·ç«¯æ²¡æœ‰éœ€è¦æ›´å¤šçš„æœ¬åœ°å¼•ç”¨è¿œç¨‹å¯¹è±¡æ—¶,å®ƒå‘é€ä¸€ä¸ª clean è°ƒç”¨ç»™æœåŠ¡å™¨ã€‚ä¸åƒ DCOM,æœåŠ¡å™¨ä¸éœ€è¦è®¡ç®—æ¯ä¸ªå®¢æˆ·æœºä½¿ç”¨çš„å¯¹è±¡,åªæ˜¯ç®€å•çš„åšä¸‹é€šçŸ¥ã€‚å¦‚æœå®ƒç§Ÿèµæ—¶é—´åˆ°æœŸä¹‹å‰æ²¡æœ‰æ¥æ”¶åˆ°ä»»ä½• dirty æˆ–è€… clean çš„æ¶ˆæ¯ï¼Œåˆ™å¯ä»¥å®‰æ’å°†å¯¹è±¡åˆ é™¤ã€‚</p><h2 id="ç¬¬ä¸‰ä»£-RPC-ä»¥åŠ-Web-Services"><a href="#ç¬¬ä¸‰ä»£-RPC-ä»¥åŠ-Web-Services" class="headerlink" title="ç¬¬ä¸‰ä»£ RPC ä»¥åŠ Web Services"></a>ç¬¬ä¸‰ä»£ RPC ä»¥åŠ Web Services</h2><p>ç”±äºäº’è”ç½‘çš„å…´èµ·ï¼ŒWeb æµè§ˆå™¨æˆä¸ºå ä¸»å¯¼åœ°ä½çš„ç”¨äºè®¿é—®ä¿¡æ¯çš„æ¨¡å‹ã€‚ç°åœ¨çš„åº”ç”¨è®¾è®¡çš„é¦–è¦ä»»åŠ¡å¤§å¤šæ•°æ˜¯æä¾›ç”¨æˆ·é€šè¿‡æµè§ˆå™¨æ¥è®¿é—®ï¼Œè€Œä¸æ˜¯ç¼–ç¨‹è®¿é—®æˆ–æ“ä½œæ•°æ®ã€‚</p><p>ç½‘é¡µè®¾è®¡å…³æ³¨çš„æ˜¯å†…å®¹ã€‚è§£æå±•ç°æ–¹é¢å¾€å¾€æ˜¯ç¹ççš„ã€‚ä¼ ç»Ÿ RPC è§£å†³æ–¹æ¡ˆå¯ä»¥å·¥ä½œåœ¨äº’è”ç½‘ä¸Šï¼Œä½†é—®é¢˜æ˜¯ï¼Œä»–ä»¬é€šå¸¸ä¸¥é‡ä¾èµ–äºåŠ¨æ€ç«¯å£åˆ†é…ï¼Œå¾€å¾€è¦è¿›è¡Œé¢å¤–çš„é˜²ç«å¢™é…ç½®ã€‚</p><p>Web Services æˆä¸ºä¸€ç»„åè®®,å…è®¸æœåŠ¡è¢«å‘å¸ƒã€å‘ç°ï¼Œå¹¶ç”¨äºæŠ€æœ¯æ— å…³çš„å½¢å¼ã€‚å³æœåŠ¡ä¸åº”è¯¥ä¾èµ–äºå®¢æˆ·çš„è¯­è¨€ã€æ“ä½œç³»ç»Ÿæˆ–æœºå™¨æ¶æ„ã€‚</p><p>Web Services çš„å®ç°ä¸€èˆ¬æ˜¯ä½¿ç”¨ Web æœåŠ¡å™¨ä½œä¸ºæœåŠ¡è¯·æ±‚çš„ç®¡é“ã€‚å®¢æˆ·ç«¯è®¿é—®è¯¥æœåŠ¡ï¼Œé¦–å…ˆæ˜¯é€šè¿‡ä¸€ä¸ª HTTP åè®®å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ä¸Šçš„ Web æœåŠ¡å™¨ã€‚Web æœåŠ¡å™¨é…ç½®è¯†åˆ« URL çš„ä¸€éƒ¨åˆ†è·¯å¾„åæˆ–æ–‡ä»¶ååç¼€å¹¶å°†è¯·æ±‚ä¼ é€’ç»™ç‰¹å®šçš„æµè§ˆå™¨æ’ä»¶æ¨¡å—ã€‚è¿™ä¸ªæ¨¡å—å¯ä»¥é™¤å»å¤´ã€è§£ææ•°æ®(å¦‚æœéœ€è¦),å¹¶æ ¹æ®éœ€è¦è°ƒç”¨å…¶ä»–å‡½æ•°æˆ–æ¨¡å—ã€‚å¯¹äºè¿™ä¸ªå®ç°æµï¼Œä¸€ä¸ªå¸¸è§çš„ä¾‹å­æ˜¯æµè§ˆå™¨å¯¹äº Java Servlet çš„æ”¯æŒã€‚HTTP è¯·æ±‚ä¼šè¢«è½¬å‘åˆ° JVM è¿è¡Œçš„æœåŠ¡ç«¯ä»£ç æ¥æ‰§è¡Œå¤„ç†ã€‚</p><h3 id="XML-RPC"><a href="#XML-RPC" class="headerlink" title="XML-RPC"></a>XML-RPC</h3><p>XML-RPC æ˜¯1998å¹´ä½œä¸ºä¸€ä¸ª RPC æ¶ˆæ¯ä¼ é€’åè®®ï¼Œå°†è¯·æ±‚å’Œå“åº”å°è£…è§£æä¸ºäººç±»å¯è¯»çš„ XML æ ¼å¼ã€‚XML æ ¼å¼åŸºäº HTTP åè®®ï¼Œç¼“è§£äº†ä¼ ç»Ÿä¼ä¸šçš„é˜²ç«å¢™éœ€è¦ä¸º RPC æœåŠ¡å™¨åº”ç”¨ç¨‹åºæ‰“å¼€é¢å¤–çš„ç«¯å£çš„é—®é¢˜ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ª XML-RPC æ¶ˆæ¯çš„ä¾‹å­:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">methodCall</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">methodName</span>&gt;</span></span><br><span class="line">        sample.sumAndDifference</span><br><span class="line">    <span class="tag">&lt;/<span class="name">methodName</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">params</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span>&gt;</span><span class="tag">&lt;<span class="name">value</span>&gt;</span><span class="tag">&lt;<span class="name">int</span>&gt;</span> 5 <span class="tag">&lt;/<span class="name">int</span>&gt;</span><span class="tag">&lt;/<span class="name">value</span>&gt;</span><span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span>&gt;</span><span class="tag">&lt;<span class="name">value</span>&gt;</span><span class="tag">&lt;<span class="name">int</span>&gt;</span> 3 <span class="tag">&lt;/<span class="name">int</span>&gt;</span><span class="tag">&lt;/<span class="name">value</span>&gt;</span><span class="tag">&lt;/<span class="name">param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">params</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">methodCall</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ–¹æ³• sumAndDifference æœ‰ä¸¤ä¸ªæ•´æ•°å‚æ•° 5 å’Œ 3ã€‚</p><p>XML-RPC æ”¯æŒçš„åŸºæœ¬æ•°æ®ç±»å‹æ˜¯:intã€stringã€booleanã€double å’Œ dateTime.iso8601ã€‚æ­¤å¤–,è¿˜æœ‰ base64 ç±»å‹ç”¨äºç¼–ç ä»»æ„äºŒè¿›åˆ¶æ•°æ®ã€‚array å’Œ struct å…è®¸å®šä¹‰æ•°ç»„å’Œç»“æ„ã€‚</p><p>XML-RPC ä¸é™åˆ¶è¯­ä»»ä½•ç‰¹å®šçš„è¯­è¨€ï¼Œä¹Ÿä¸æ˜¯ä¸€å¥—å®Œæ•´çš„è½¯ä»¶æ¥å¤„ç†è¿œç¨‹è¿‡ç¨‹ï¼Œè¯¸å¦‚å­˜æ ¹ç”Ÿæˆã€å¯¹è±¡ç®¡ç†å’ŒæœåŠ¡æŸ¥æ‰¾éƒ½ä¸åœ¨åè®®å†…ã€‚ç°åœ¨æœ‰å¾ˆå¤šåº“é’ˆå¯ä»¥é’ˆå¯¹ä¸åŒçš„è¯­è¨€ï¼Œæ¯”å¦‚ Apache XML-RPC å¯ä»¥ç”¨äº Javaã€Python å’Œ Perlã€‚</p><p>XML-RPC æ˜¯ä¸€ä¸ªç®€å•çš„è§„èŒƒ(çº¦7é¡µ)ï¼Œæ²¡æœ‰é›„å¿ƒå‹ƒå‹ƒçš„ç›®æ ‡â€”â€”å®ƒåªå…³æ³¨æ¶ˆæ¯ï¼Œè€Œå¹¶ä¸å¤„ç†è¯¸å¦‚åƒåœ¾æ”¶é›†ã€è¿œç¨‹å¯¹è±¡ã€è¿œç¨‹è¿‡ç¨‹çš„åç§°æœåŠ¡å’Œå…¶ä»–æ–¹é¢çš„é—®é¢˜ã€‚ç„¶è€Œï¼Œå³ä½¿æ²¡æœ‰å¹¿æ³›çš„äº§ä¸šæ”¯æŒï¼Œç®€å•çš„åè®®å´èƒ½å¹¿æ³›é‡‡ç”¨ã€‚</p><h3 id="SOAP"><a href="#SOAP" class="headerlink" title="SOAP"></a>SOAP</h3><p>SOAPï¼ˆSimple Object Access Protocolï¼Œç®€å•å¯¹è±¡è®¿é—®åè®®ï¼‰ï¼Œæ˜¯ä»¥ XML-RPC è§„èŒƒä½œä¸ºåˆ›å»º SOAP çš„ä¾æ®ï¼Œæˆç«‹äº1998å¹´ï¼Œè·å¾—å¾®è½¯å’Œ IBM çš„å¤§åŠ›æ”¯æŒã€‚è¯¥åè®®åœ¨åˆ›å»ºåˆæœŸåªä½œä¸ºä¸€ç§å¯¹è±¡è®¿é—®åè®®ï¼Œä½†ç”±äº SOAP çš„å‘å±•ï¼Œå…¶åè®®å·²ç»ä¸å•åªæ˜¯ç”¨äºç®€å•çš„è®¿é—®å¯¹è±¡ï¼Œæ‰€ä»¥è¿™ç§ SOAP ç¼©å†™å·²ç»åœ¨æ ‡å‡†çš„1.2ç‰ˆåè¢«åºŸæ­¢äº†ã€‚1.2ç‰ˆåœ¨2003å¹´6æœˆ24æ—¥æˆä¸º W3C çš„æ¨èç‰ˆæœ¬ã€‚SOAP æŒ‡å®š XML ä½œä¸ºæ— çŠ¶æ€çš„æ¶ˆæ¯äº¤æ¢æ ¼å¼ï¼ŒåŒ…æ‹¬äº† RPC å¼çš„è¿‡ç¨‹è°ƒç”¨ã€‚</p><p>æœ‰å…³ SOAP çš„æ ‡å‡†å¯ä»¥å‚é˜… <a href="https://www.w3.org/TR/soap/">SOAP Specifications</a>ã€‚</p><p>SOAP åªæ˜¯ä¸€ç§æ¶ˆæ¯æ ¼å¼ï¼Œå¹¶æœªå®šä¹‰åƒåœ¾å›æ”¶ã€å¯¹è±¡å¼•ç”¨ã€å­˜æ ¹ç”Ÿæˆå’Œä¼ è¾“åè®®ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&#x27;1.0&#x27; ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">env:Envelope</span> <span class="attr">xmlns:env</span>=<span class="string">&quot;http://www.w3.org/2003/05/soap-envelope&quot;</span>&gt;</span> </span><br><span class="line"> <span class="tag">&lt;<span class="name">env:Header</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">m:reservation</span> <span class="attr">xmlns:m</span>=<span class="string">&quot;http://travelcompany.example.org/reservation&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">env:role</span>=<span class="string">&quot;http://www.w3.org/2003/05/soap-envelope/role/next&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">env:mustUnderstand</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">m:reference</span>&gt;</span>uuid:093a2da1-q345-739r-ba5d-pqff98fe8j7d<span class="tag">&lt;/<span class="name">m:reference</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">m:dateAndTime</span>&gt;</span>2001-11-29T13:20:00.000-05:00<span class="tag">&lt;/<span class="name">m:dateAndTime</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">m:reservation</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">n:passenger</span> <span class="attr">xmlns:n</span>=<span class="string">&quot;http://mycompany.example.com/employees&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">env:role</span>=<span class="string">&quot;http://www.w3.org/2003/05/soap-envelope/role/next&quot;</span></span></span><br><span class="line"><span class="tag">           <span class="attr">env:mustUnderstand</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">n:name</span>&gt;</span>Ã…ke JÃ³gvan Ã˜yvind<span class="tag">&lt;/<span class="name">n:name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">n:passenger</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">env:Header</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">env:Body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p:itinerary</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:p</span>=<span class="string">&quot;http://travelcompany.example.org/reservation/travel&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p:departure</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">p:departing</span>&gt;</span>New York<span class="tag">&lt;/<span class="name">p:departing</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">p:arriving</span>&gt;</span>Los Angeles<span class="tag">&lt;/<span class="name">p:arriving</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">p:departureDate</span>&gt;</span>2001-12-14<span class="tag">&lt;/<span class="name">p:departureDate</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">p:departureTime</span>&gt;</span>late afternoon<span class="tag">&lt;/<span class="name">p:departureTime</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">p:seatPreference</span>&gt;</span>aisle<span class="tag">&lt;/<span class="name">p:seatPreference</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">p:departure</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p:return</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">p:departing</span>&gt;</span>Los Angeles<span class="tag">&lt;/<span class="name">p:departing</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">p:arriving</span>&gt;</span>New York<span class="tag">&lt;/<span class="name">p:arriving</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">p:departureDate</span>&gt;</span>2001-12-20<span class="tag">&lt;/<span class="name">p:departureDate</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">p:departureTime</span>&gt;</span>mid-morning<span class="tag">&lt;/<span class="name">p:departureTime</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">p:seatPreference</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">p:return</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">p:itinerary</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">q:lodging</span></span></span><br><span class="line"><span class="tag">   <span class="attr">xmlns:q</span>=<span class="string">&quot;http://travelcompany.example.org/reservation/hotels&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">q:preference</span>&gt;</span>none<span class="tag">&lt;/<span class="name">q:preference</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">q:lodging</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">env:Body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">env:Envelope</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>&lt;soap:Envelope&gt;</code>æ˜¯ SOAP æ¶ˆæ¯ä¸­çš„æ ¹èŠ‚ç‚¹ï¼Œæ˜¯ SOAP æ¶ˆæ¯ä¸­å¿…é¡»çš„éƒ¨åˆ†ã€‚<code>&lt;soap:Header&gt;</code>æ˜¯ SOAP æ¶ˆæ¯ä¸­å¯é€‰éƒ¨åˆ†ï¼Œæ˜¯æŒ‡æ¶ˆæ¯å¤´ã€‚<code>&lt;soap:Body&gt;</code>æ˜¯ SOAP ä¸­å¿…é¡»éƒ¨åˆ†ï¼Œæ˜¯æŒ‡æ¶ˆæ¯ä½“ã€‚</p><p>ä¸Šé¢ä¾‹å­çš„ SOAP æ¶ˆæ¯ç»“æ„å¦‚ä¸‹ï¼š</p><p><a href="https://imgtu.com/i/jyJzwD"><img src="https://s1.ax1x.com/2022/07/10/jyJzwD.jpg" alt="jyJzwD.jpg"></a></p><p>å›¾9 SOAP æ¶ˆæ¯ç»“æ„</p><p>SOAP å®ƒåªæ˜¯æä¾›äº†ä¸€ä¸ªæ ‡å‡†åŒ–çš„æ¶ˆæ¯ç»“æ„ï¼Œä¸ºäº†å®ç°å®ƒå¾€å¾€éœ€è¦ç”¨ WSDL æ¥æè¿° Web Services çš„æ–¹æ³•ã€‚WSDL (Web Services Description Language) æ˜¯åŸºäº XML çš„ä¸€ç§ç”¨äºæè¿° Web Services ä»¥åŠå¦‚ä½•è®¿é—® Web Services çš„è¯­è¨€ã€‚</p><p>WSDL æ–‡æ¡£åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†:</p><ul><li>ç±»å‹ï¼ˆTypesï¼‰:å®šä¹‰äº† Web Services ä½¿ç”¨çš„æ•°æ®ç±»å‹ï¼›</li><li>æ¶ˆæ¯ï¼ˆn/aï¼‰:æè¿°ä½¿ç”¨æ¶ˆæ¯çš„æ•°æ®å…ƒç´ æˆ–å‚æ•°ï¼›</li><li>æ¥å£ï¼ˆInterfaceï¼‰:æè¿°æœåŠ¡æä¾›çš„æ“ä½œã€‚è¿™åŒ…æ‹¬æ“ä½œä»¥åŠæ¯ä¸ªæ“ä½œæ‰€ä½¿ç”¨çš„è¾“å…¥å’Œè¾“å‡ºæ¶ˆæ¯ï¼›</li><li>ç»‘å®šï¼ˆBindingï¼‰:ä¸ºæ¯ä¸ªç«¯å£å®šä¹‰æ¶ˆæ¯æ ¼å¼å’Œåè®®ç»†èŠ‚ã€‚ä¾‹å¦‚,å®ƒå¯ä»¥å®šä¹‰ RPC å¼çš„æ¶ˆæ¯ï¼›</li><li>æœåŠ¡ï¼ˆServiceï¼‰ï¼šç³»ç»ŸåŠŸèƒ½ç›¸å…³çš„é›†åˆï¼ŒåŒ…æ‹¬å…¶å…³è”çš„æ¥å£ã€æ“ä½œã€æ¶ˆæ¯ç­‰ï¼›</li><li>ç»ˆç‚¹ï¼ˆEndpointï¼‰ï¼šå®šä¹‰äº†åœ°å€æˆ–è€… Web Services çš„è¿æ¥ç‚¹ï¼›</li><li>æ“ä½œï¼ˆOperationï¼‰ï¼šå®šä¹‰äº† SOAP çš„åŠ¨ä½œï¼Œä»¥åŠæ¶ˆæ¯ç¼–ç çš„æ–¹å¼ã€‚</li></ul><p>ä¸‹é¢æ˜¯ä¸€ä¸ª WSDL 2.0 ç‰ˆæœ¬çš„ä¾‹å­ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">description</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/ns/wsdl&quot;</span> </span></span><br><span class="line"><span class="tag">             <span class="attr">xmlns:tns</span>=<span class="string">&quot;http://www.tmsws.com/wsdl20sample&quot;</span> </span></span><br><span class="line"><span class="tag">             <span class="attr">xmlns:whttp</span>=<span class="string">&quot;http://schemas.xmlsoap.org/wsdl/http/&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">xmlns:wsoap</span>=<span class="string">&quot;http://schemas.xmlsoap.org/wsdl/soap/&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">targetNamespace</span>=<span class="string">&quot;http://www.tmsws.com/wsdl20sample&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">documentation</span>&gt;</span></span><br><span class="line">    This is a sample WSDL 2.0 document. </span><br><span class="line"><span class="tag">&lt;/<span class="name">documentation</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- Abstract type --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">types</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">xs:schema</span> <span class="attr">xmlns:xs</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">xmlns</span>=<span class="string">&quot;http://www.tmsws.com/wsdl20sample&quot;</span></span></span><br><span class="line"><span class="tag">                <span class="attr">targetNamespace</span>=<span class="string">&quot;http://www.example.com/wsdl20sample&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">xs:element</span> <span class="attr">name</span>=<span class="string">&quot;request&quot;</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">xs:element</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">xs:element</span> <span class="attr">name</span>=<span class="string">&quot;response&quot;</span>&gt;</span> ... <span class="tag">&lt;/<span class="name">xs:element</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">xs:schema</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">types</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- Abstract interfaces --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">interface</span> <span class="attr">name</span>=<span class="string">&quot;Interface1&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">fault</span> <span class="attr">name</span>=<span class="string">&quot;Error1&quot;</span> <span class="attr">element</span>=<span class="string">&quot;tns:response&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">operation</span> <span class="attr">name</span>=<span class="string">&quot;Get&quot;</span> <span class="attr">pattern</span>=<span class="string">&quot;http://www.w3.org/ns/wsdl/in-out&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">input</span> <span class="attr">messageLabel</span>=<span class="string">&quot;In&quot;</span> <span class="attr">element</span>=<span class="string">&quot;tns:request&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">output</span> <span class="attr">messageLabel</span>=<span class="string">&quot;Out&quot;</span> <span class="attr">element</span>=<span class="string">&quot;tns:response&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">operation</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">interface</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- Concrete Binding Over HTTP --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">binding</span> <span class="attr">name</span>=<span class="string">&quot;HttpBinding&quot;</span> <span class="attr">interface</span>=<span class="string">&quot;tns:Interface1&quot;</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;http://www.w3.org/ns/wsdl/http&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">operation</span> <span class="attr">ref</span>=<span class="string">&quot;tns:Get&quot;</span> <span class="attr">whttp:method</span>=<span class="string">&quot;GET&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">binding</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- Concrete Binding with SOAP--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">binding</span> <span class="attr">name</span>=<span class="string">&quot;SoapBinding&quot;</span> <span class="attr">interface</span>=<span class="string">&quot;tns:Interface1&quot;</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;http://www.w3.org/ns/wsdl/soap&quot;</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">wsoap:protocol</span>=<span class="string">&quot;http://www.w3.org/2003/05/soap/bindings/HTTP/&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">wsoap:mepDefault</span>=<span class="string">&quot;http://www.w3.org/2003/05/soap/mep/request-response&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">operation</span> <span class="attr">ref</span>=<span class="string">&quot;tns:Get&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">binding</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- Web Service offering endpoints for both bindings--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">service</span> <span class="attr">name</span>=<span class="string">&quot;Service1&quot;</span> <span class="attr">interface</span>=<span class="string">&quot;tns:Interface1&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">endpoint</span> <span class="attr">name</span>=<span class="string">&quot;HttpEndpoint&quot;</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">binding</span>=<span class="string">&quot;tns:HttpBinding&quot;</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">address</span>=<span class="string">&quot;http://www.example.com/rest/&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">endpoint</span> <span class="attr">name</span>=<span class="string">&quot;SoapEndpoint&quot;</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">binding</span>=<span class="string">&quot;tns:SoapBinding&quot;</span> </span></span><br><span class="line"><span class="tag">                <span class="attr">address</span>=<span class="string">&quot;http://www.example.com/soap/&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">service</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Microsoft-NET-Remoting"><a href="#Microsoft-NET-Remoting" class="headerlink" title="Microsoft .NET Remoting"></a>Microsoft .NET Remoting</h3><p>ä»å¾®è½¯çš„äº§å“è§’åº¦æ¥çœ‹ï¼Œå¯ä»¥è¯´ .NET Remoting å°±æ˜¯ DCOM çš„ä¸€ç§å‡çº§ï¼Œå®ƒæ”¹å–„äº†å¾ˆå¤šåŠŸèƒ½ï¼Œå¹¶æå¥½çš„èåˆåˆ° .NET å¹³å°ä¸‹ã€‚Microsoft .NET Remoting æä¾›äº†ä¸€ç§å…è®¸å¯¹è±¡é€šè¿‡åº”ç”¨ç¨‹åºåŸŸä¸å¦ä¸€å¯¹è±¡è¿›è¡Œäº¤äº’çš„æ¡†æ¶ã€‚</p><p>.NET Remoting æä¾›äº†ä¸€ç§å…è®¸å¯¹è±¡é€šè¿‡åº”ç”¨ç¨‹åºåŸŸä¸å¦ä¸€å¯¹è±¡è¿›è¡Œäº¤äº’çš„æ¡†æ¶ã€‚è¿™ç§æ¡†æ¶æä¾›äº†å¤šç§æœåŠ¡ï¼ŒåŒ…æ‹¬æ¿€æ´»å’Œç”Ÿå­˜æœŸæ”¯æŒï¼Œä»¥åŠè´Ÿè´£ä¸è¿œç¨‹åº”ç”¨ç¨‹åºè¿›è¡Œæ¶ˆæ¯ä¼ è¾“çš„é€šè®¯é€šé“ã€‚æ ¼å¼åŒ–ç¨‹åºç”¨äºåœ¨æ¶ˆæ¯é€šè¿‡é€šé“ä¼ è¾“ä¹‹å‰ï¼Œå¯¹å…¶è¿›è¡Œç¼–ç å’Œè§£ç ã€‚åº”ç”¨ç¨‹åºå¯ä»¥åœ¨æ³¨é‡æ€§èƒ½çš„åœºåˆä½¿ç”¨äºŒè¿›åˆ¶ç¼–ç ï¼Œåœ¨éœ€è¦ä¸å…¶ä»–è¿œç¨‹å¤„ç†æ¡†æ¶è¿›è¡Œäº¤äº’çš„åœºåˆä½¿ç”¨ XML ç¼–ç ã€‚åœ¨ä»ä¸€ä¸ªåº”ç”¨ç¨‹åºåŸŸå‘å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºåŸŸä¼ è¾“æ¶ˆæ¯æ—¶ï¼Œæ‰€æœ‰çš„ XML ç¼–ç éƒ½ä½¿ç”¨ SOAP åè®®ã€‚å‡ºäºå®‰å…¨æ€§æ–¹é¢çš„è€ƒè™‘ï¼Œè¿œç¨‹å¤„ç†æä¾›äº†å¤§é‡æŒ‚é’©ï¼Œä½¿å¾—åœ¨æ¶ˆæ¯æµé€šè¿‡é€šé“è¿›è¡Œä¼ è¾“ä¹‹å‰ï¼Œå®‰å…¨æ¥æ”¶å™¨èƒ½å¤Ÿè®¿é—®æ¶ˆæ¯å’Œåºåˆ—åŒ–æµ</p><p>.NET Remoting å¯¹è±¡</p><p>æœ‰ä¸‰ç±»å¯¹è±¡å¯ä»¥é…ç½®ä¸º .NET Remoting å¯¹è±¡ã€‚æ‚¨å¯ä»¥æ ¹æ®åº”ç”¨ç¨‹åºçš„éœ€è¦æ¥é€‰æ‹©å¯¹è±¡ç±»å‹ï¼š</p><ul><li>Single Callï¼ˆå•ä¸€è°ƒç”¨å¯¹è±¡ï¼‰ï¼š Single Call èƒ½ä¸”åªèƒ½ä¸ºä¸€ä¸ªè¯·æ±‚æä¾›æœåŠ¡ã€‚åœ¨éœ€è¦å¯¹è±¡å®Œæˆçš„å·¥ä½œé‡æœ‰é™çš„æƒ…å†µä¸‹ Single Call éå¸¸æœ‰ç”¨ã€‚Single Call å¯¹è±¡é€šå¸¸ä¸è¦æ±‚å­˜å‚¨çŠ¶æ€ä¿¡æ¯ï¼Œå¹¶ä¸”ä¸èƒ½åœ¨æ–¹æ³•è°ƒç”¨ä¹‹é—´ä¿ç•™çŠ¶æ€ä¿¡æ¯ã€‚ä½†æ˜¯ï¼ŒSingle Callå¯¹è±¡å¯ä»¥é…ç½®ä¸ºè´Ÿè½½å¹³è¡¡æ¨¡å¼ã€‚</li><li>Singleton Objectsï¼ˆå•ä¸€å…ƒç´ å¯¹è±¡ï¼‰ï¼š Singleton Objects å¯ä»¥ä¸ºå¤šä¸ªå®¢æˆ·ç«¯æä¾›æœåŠ¡ï¼Œå› æ­¤å¯ä»¥é€šè¿‡ä¿å­˜å®¢æˆ·ç«¯è°ƒç”¨çš„çŠ¶æ€ä¿¡æ¯æ¥å®ç°æ•°æ®å…±äº«ã€‚å½“å®¢æˆ·ç«¯ä¹‹é—´éœ€è¦æ˜ç¡®åœ°å…±äº«æ•°æ®ï¼Œå¹¶ä¸”ä¸èƒ½å¿½ç•¥åˆ›å»ºå’Œç»´æŠ¤å¯¹è±¡çš„å¼€é”€æ—¶ï¼Œè¿™ç±»å¯¹è±¡éå¸¸æœ‰ç”¨ã€‚</li><li>Client-Activated Objects (CAOï¼Œå®¢æˆ·ç«¯æ¿€æ´»çš„å¯¹è±¡)ï¼š CAO æ˜¯æœåŠ¡å™¨ç«¯çš„å¯¹è±¡ï¼Œå°†æ ¹æ®æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚æ¿€æ´»è¿™äº›å¯¹è±¡ã€‚è¿™ç§æ¿€æ´»æœåŠ¡å™¨å¯¹è±¡çš„æ–¹æ³•ä¸ä¼ ç»Ÿçš„ COM coclass æ¿€æ´»æ–¹æ³•éå¸¸ç›¸ä¼¼ã€‚å½“å®¢æˆ·ç«¯ä½¿ç”¨â€œnewâ€è¿ç®—ç¬¦æäº¤å¯¹æœåŠ¡å™¨å¯¹è±¡çš„è¯·æ±‚æ—¶ï¼Œä¼šå‘è¿œç¨‹åº”ç”¨ç¨‹åºå‘é€ä¸€ä¸ªæ¿€æ´»è¯·æ±‚æ¶ˆæ¯ã€‚éšåï¼ŒæœåŠ¡å™¨åˆ›å»ºè¢«è¯·æ±‚ç±»çš„å®ä¾‹ï¼Œå¹¶å‘è°ƒç”¨å®ƒçš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºè¿”å› ObjRefã€‚ç„¶åï¼Œä½¿ç”¨æ­¤ ObjRef åœ¨å®¢æˆ·ç«¯ä¸Šåˆ›å»ºä»£ç†ã€‚å®¢æˆ·ç«¯çš„æ–¹æ³•è°ƒç”¨å°†åœ¨ä»£ç†ä¸Šæ‰§è¡Œã€‚å®¢æˆ·ç«¯æ¿€æ´»çš„å¯¹è±¡å¯ä»¥ä¸ºç‰¹å®šçš„å®¢æˆ·ç«¯ï¼ˆä¸èƒ½è·¨è¶Šä¸åŒçš„å®¢æˆ·ç«¯å¯¹è±¡ï¼‰ä¿å­˜æ–¹æ³•è°ƒç”¨ä¹‹é—´çš„çŠ¶æ€ä¿¡æ¯ã€‚æ¯ä¸ªâ€œnewâ€è°ƒç”¨éƒ½ä¼šå‘æœåŠ¡å™¨ç±»å‹çš„ç‹¬ç«‹å®ä¾‹è¿”å›ä»£ç†ã€‚</li></ul><p>åœ¨ .NET Remoting ä¸­ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼åœ¨åº”ç”¨ç¨‹åºä¹‹é—´ä¼ é€’å¯¹è±¡ï¼š</p><ul><li>ä½œä¸ºæ–¹æ³•è°ƒç”¨ä¸­çš„å‚æ•°ï¼Œä¾‹å¦‚ï¼š<code>public int myRemoteMethod (MyRemoteObject myObj)</code></li><li>æ–¹æ³•è°ƒç”¨çš„è¿”å›å€¼,ä¾‹å¦‚ï¼š<code>public MyRemoteObject myRemoteMethod(String myString)</code></li><li>è®¿é—® .NET ç»„ä»¶çš„å±æ€§æˆ–å­—æ®µå¾—åˆ°çš„å€¼,ä¾‹å¦‚ï¼š<code>myObj.myNestedObject</code></li></ul><p>å¯¹äº Marshal By Value (MBV,æŒ‰å€¼å°é€)çš„å¯¹è±¡ï¼Œå½“å®ƒåœ¨åº”ç”¨ç¨‹åºä¹‹é—´ä¼ é€’æ—¶ï¼Œå°†åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„å‰¯æœ¬ã€‚</p><p>å¯¹äº Marshal By Reference (MBRï¼ŒæŒ‰å¼•ç”¨å°é€)çš„å¯¹è±¡ï¼Œå½“å®ƒåœ¨åº”ç”¨ç¨‹åºä¹‹é—´ä¼ é€’æ—¶ï¼Œå°†åˆ›å»ºè¯¥å¯¹è±¡çš„å¼•ç”¨ã€‚å½“å¯¹è±¡å¼•ç”¨ (ObjRef) åˆ°è¾¾è¿œç¨‹åº”ç”¨ç¨‹åºåï¼Œå°†è½¬å˜æˆâ€œä»£ç†â€è¿”å›ç»™åŸå§‹å¯¹è±¡ã€‚ ã€€ã€€ ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å• .NET Remoting æœåŠ¡å™¨å¯¹è±¡çš„ä»£ç ç¤ºä¾‹ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">using <span class="title class_">System</span>;</span><br><span class="line">using <span class="title class_">System</span>.<span class="property">Runtime</span>.<span class="property">Remoting</span>;</span><br><span class="line"><span class="keyword">namespace</span> myRemoteService</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Well Known Web Service object</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">myRemoteObject</span> : <span class="title class_">MarshalByRefObject</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// Method myRemoteMethod</span></span><br><span class="line">        <span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">myRemoteMethod</span>(<span class="params"><span class="built_in">String</span> s</span>) </span><br><span class="line">        &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="string">&quot;Hello World&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯å®¢æˆ·ç«¯ä»£ç æ¥è®¿é—®è¿™ä¸ªå¯¹è±¡ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Runtime.Remoting;</span><br><span class="line"><span class="keyword">using</span> System.Runtime.Remoting.Channels;</span><br><span class="line"><span class="keyword">using</span> System.Runtime.Remoting.Channels.Http;</span><br><span class="line"><span class="keyword">using</span> myRemoteService;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Client</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        ChannelServices.RegisterChannel(<span class="keyword">new</span> HttpChannel());</span><br><span class="line">      <span class="comment">// Create an instance of a myRemoteObject class </span></span><br><span class="line">   myRemoteObject myObj = ( myRemoteObject)Activator.GetObject(<span class="keyword">typeof</span>(myRemoteObject),</span><br><span class="line">            <span class="string">&quot;http://myHost:7021/host/myRemoteObject.soap&quot;</span>);</span><br><span class="line">      myObj. myRemoteMethod (<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç§Ÿç”¨ç”Ÿå­˜æœŸ</p><p>å¯¹äºé‚£äº›å…·æœ‰åœ¨åº”ç”¨ç¨‹åºä¹‹å¤–ä¼ é€çš„å¯¹è±¡å¼•ç”¨çš„å¯¹è±¡ï¼Œå°†åˆ›å»ºä¸€ä¸ªç§Ÿç”¨ã€‚ç§Ÿç”¨å…·æœ‰ä¸€ä¸ªç§Ÿç”¨æ—¶é—´ã€‚å¦‚æœç§Ÿç”¨æ—¶é—´ä¸º 0ï¼Œåˆ™ç§Ÿç”¨è¿‡æœŸï¼Œå¯¹è±¡å°±æ–­å¼€ä¸ .NET Romoting æ¡†æ¶çš„è¿æ¥ã€‚ä¸€æ—¦ AppDomain ä¸­çš„æ‰€æœ‰å¯¹è±¡å¼•ç”¨éƒ½è¢«é‡Šæ”¾ï¼Œåˆ™ä¸‹æ¬¡åƒåœ¾å›æ”¶æ—¶ï¼Œè¯¥å¯¹è±¡å°†è¢«å›æ”¶ã€‚ç§Ÿç”¨æ§åˆ¶äº†å¯¹è±¡çš„ç”Ÿå­˜æœŸã€‚</p><p>å¯¹è±¡æœ‰é»˜è®¤çš„ç§Ÿç”¨é˜¶æ®µã€‚å½“å®¢æˆ·ç«¯è¦åœ¨åŒä¸€æœåŠ¡å™¨å¯¹è±¡ä¸­ç»´æŠ¤çŠ¶æ€æ—¶ï¼Œå¯ä»¥é€šè¿‡è®¸å¤šæ–¹æ³•æ‰©å±•ç§Ÿç”¨é˜¶æ®µï¼Œä½¿å¯¹è±¡ç»§ç»­ç”Ÿå­˜:</p><ul><li>æœåŠ¡å™¨å¯¹è±¡å¯ä»¥å°†å…¶ç§Ÿç”¨æ—¶é—´è®¾ç½®ä¸ºæ— é™ï¼Œè¿™æ · Remoting åœ¨åƒåœ¾å›æ”¶æ—¶å°±ä¸ä¼šå›æ”¶æ­¤å¯¹è±¡ã€‚</li><li>å®¢æˆ·ç«¯å¯ä»¥è°ƒç”¨ <code>RemotingServices.GetLifetimeService</code> æ–¹æ³•ï¼Œä» AppDomain çš„ç§Ÿç”¨ç®¡ç†å™¨è·å–æœåŠ¡å™¨å¯¹è±¡çš„ç§Ÿç”¨ã€‚ç„¶åï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ Lease å¯¹è±¡è°ƒç”¨ Lease.Renew æ–¹æ³•ä»¥å»¶é•¿ç§Ÿç”¨ã€‚</li><li>å®¢æˆ·ç«¯å¯ç”¨ AppDomain çš„ç§Ÿç”¨ç®¡ç†å™¨ä¸ºç‰¹å®šçš„ç§Ÿç”¨æ³¨å†Œè´Ÿè´£äººã€‚å½“ Remoting å¯¹è±¡çš„ç§Ÿç”¨è¿‡æœŸæ—¶ï¼Œç§Ÿç”¨ç®¡ç†å™¨å°†é€šçŸ¥è´Ÿè´£äººæå‡ºç»­ç§Ÿçš„ç”³è¯·ã€‚</li><li>å¦‚æœè®¾ç½®äº† <code>ILease::RenewOnCallTime</code> å±æ€§ï¼Œåˆ™æ¯æ¬¡è°ƒç”¨ Remoting å¯¹è±¡æ—¶ï¼Œéƒ½ä¼šç”¨ RenewOnCallTime å±æ€§æŒ‡å®šçš„æ€»æ—¶é—´æ›´æ–°ç§Ÿç”¨ã€‚</li></ul><p>é›†æˆ .NET Remoting å¯¹è±¡</p><p>.NET Remoting å¯¹è±¡å¯ä»¥é›†æˆåœ¨ï¼š</p><ul><li>æ‰˜ç®¡å¯æ‰§è¡Œé¡¹: .NET Remoting å¯¹è±¡å¯ä»¥é›†æˆåœ¨ä»»ä½•å¸¸è§„çš„ .NET EXE æˆ–æ‰˜ç®¡æœåŠ¡ä¸­ã€‚</li><li>.NET ç»„ä»¶æœåŠ¡: .NET Remoting å¯¹è±¡å¯ä»¥é›†æˆåœ¨ .NET ç»„ä»¶æœåŠ¡åŸºç¡€ç»“æ„ä¸­ï¼Œä»¥ä¾¿åˆ©ç”¨å„ç§ COM+ æœåŠ¡ï¼Œä¾‹å¦‚ï¼šäº‹åŠ¡ã€JIT å’Œå¯¹è±¡æ± ç­‰ã€‚</li><li>IIS : .NET Remoting å¯¹è±¡å¯ä»¥é›†æˆåœ¨ Internet Information Server (IIS) ä¸­ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œé›†æˆåœ¨ IIS ä¸­çš„ Remoting å¯¹è±¡é€šè¿‡ HTTP é€šé“æ¥æ”¶æ¶ˆæ¯ã€‚è¦åœ¨ IIS ä¸­é›†æˆ Remoting å¯¹è±¡ï¼Œå¿…é¡»åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿçš„æ ¹ï¼Œå¹¶å°† remoting.config æ–‡ä»¶å¤åˆ¶åˆ°å…¶ä¸­ã€‚åŒ…å« Remoting å¯¹è±¡çš„å¯æ‰§è¡Œæ–‡ä»¶æˆ– DLL åº”æ”¾åœ¨ IIS æ ¹æŒ‡å‘çš„ç›®å½•ä¸‹çš„ bin ç›®å½•ä¸­ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒIIS æ ¹åç§°åº”è¯¥ä¸é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„åº”ç”¨ç¨‹åºåç§°ç›¸åŒã€‚å½“ç¬¬ä¸€ä¸ªæ¶ˆæ¯åˆ°è¾¾åº”ç”¨ç¨‹åºæ—¶ï¼ŒRemoting é…ç½®æ–‡ä»¶ä¼šè‡ªåŠ¨åŠ è½½ã€‚ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œå¯ä»¥æä¾› .NET Remoting å¯¹è±¡ä½œä¸º Web æœåŠ¡ã€‚</li></ul><p>ä¸‹é¢æ˜¯ä¸€ä¸ª Remoting.cfg æ–‡ä»¶çš„ä¾‹å­ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">system.runtime.remoting</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span> <span class="attr">name</span>=<span class="string">&quot;RemotingHello&quot;</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">      <span class="tag">&lt;<span class="name">service</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">wellknown</span> <span class="attr">mode</span>=<span class="string">&quot;SingleCall&quot;</span> </span></span><br><span class="line"><span class="tag">                   <span class="attr">type</span>=<span class="string">&quot;Hello.HelloService, Hello&quot;</span> </span></span><br><span class="line"><span class="tag">                   <span class="attr">objectUri</span>=<span class="string">&quot;HelloService.soap&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">service</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">      <span class="tag">&lt;<span class="name">channels</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">channel</span> <span class="attr">port</span>=<span class="string">&quot;8000&quot;</span> </span></span><br><span class="line"><span class="tag"><span class="attr">type</span>=<span class="string">&quot;System.Runtime.Remoting.Channels.Http.HttpChannel, </span></span></span><br><span class="line"><span class="string"><span class="tag">System.Runtime.Remoting&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">channels</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">system.runtime.remoting</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é€šé“æœåŠ¡ (System.Runtime.Remoting.Channels)</p><p>.NET åº”ç”¨ç¨‹åºå’Œ AppDomain ä¹‹é—´ä½¿ç”¨æ¶ˆæ¯è¿›è¡Œé€šä¿¡ã€‚.NET é€šé“æœåŠ¡ä¸ºè¿™ä¸€é€šä¿¡è¿‡ç¨‹æä¾›äº†åŸºç¡€ä¼ è¾“æœºåˆ¶ã€‚</p><p>.NET æ¡†æ¶æä¾›äº† HTTP å’Œ TCP é€šé“ï¼Œä½†æ˜¯ç¬¬ä¸‰æ–¹ä¹Ÿå¯ä»¥ç¼–å†™å¹¶ä½¿ç”¨è‡ªå·±çš„é€šé“ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒHTTP é€šé“ä½¿ç”¨ SOAP è¿›è¡Œé€šä¿¡ï¼ŒTCP é€šé“ä½¿ç”¨äºŒè¿›åˆ¶æœ‰æ•ˆè´Ÿè½½ã€‚</p><p>é€šè¿‡ä½¿ç”¨å¯ä»¥ç¼–å†™åˆ°é›†æˆæ··åˆåº”ç”¨ç¨‹åºä¸­çš„è‡ªå®šä¹‰é€šé“ï¼Œå¯ä»¥æ’å…¥é€šé“æœåŠ¡ï¼ˆä½¿ç”¨ IChannelï¼‰ã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªåŠ è½½é€šé“æœåŠ¡çš„ä¾‹å­ï¼š</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">myRemotingObj</span></span><br><span class="line">&#123;</span><br><span class="line">    HttpChannel httpChannel;</span><br><span class="line">    TcpChannel tcpChannel;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">myRemotingMethod</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        httpChannel =  <span class="keyword">new</span> HttpChannel();</span><br><span class="line">        tcpChannel  =  <span class="keyword">new</span> TcpChannel();</span><br><span class="line">        ChannelServices.RegisterChannel(httpChannel);</span><br><span class="line">        <span class="comment">// Register the HTTP Channel </span></span><br><span class="line">        ChannelServices.RegisterChannel(tcpChannel);</span><br><span class="line">        <span class="comment">// Register the TCP Channel  </span></span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>åºåˆ—åŒ–æ ¼å¼åŒ–ç¨‹åº (System.Runtime.Serialization.Formatters)</p><p>.NET åºåˆ—åŒ–æ ¼å¼åŒ–ç¨‹åºå¯¹ .NET åº”ç”¨ç¨‹åºå’Œ AppDomain ä¹‹é—´çš„æ¶ˆæ¯è¿›è¡Œç¼–ç å’Œè§£ç ã€‚åœ¨ .NET è¿è¡Œæ—¶ä¸­æœ‰ä¸¤ä¸ªæœ¬åœ°æ ¼å¼åŒ–ç¨‹åºï¼Œåˆ†åˆ«ä¸ºäºŒè¿›åˆ¶ (<code>System.Runtime.Serialization.Formatters.Binary</code>) å’Œ SOAP (<code>System.Runtime.Serialization.Formatters.Soap</code>)ã€‚</p><p>é€šè¿‡å®ç° IRemotingFormatter æ¥å£ï¼Œå¹¶å°†å…¶æ’å…¥åˆ°ä¸Šæ–‡ä»‹ç»çš„é€šé“ä¸­ï¼Œå¯ä»¥æ’å…¥åºåˆ—åŒ–æ ¼å¼åŒ–ç¨‹åºã€‚è¿™æ ·ï¼Œæ‚¨å¯ä»¥çµæ´»åœ°é€‰æ‹©é€šé“å’Œæ ¼å¼åŒ–ç¨‹åºçš„ç»„åˆæ–¹å¼ï¼Œé‡‡ç”¨æœ€é€‚åˆåº”ç”¨ç¨‹åºçš„æ–¹æ¡ˆã€‚</p><p>ä¾‹å¦‚ï¼šæ‚¨å¯ä»¥é‡‡ç”¨ HTTP é€šé“å’ŒäºŒè¿›åˆ¶æ ¼å¼åŒ–ç¨‹åºï¼ˆä¸²è¡ŒåŒ–äºŒè¿›åˆ¶æ•°æ®ï¼‰ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨ TCP é€šé“å’Œ SOAP æ ¼å¼ã€‚</p><p>Remoting ä¸Šä¸‹æ–‡</p><p>ä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªåŒ…å«å…±äº«å…¬å…±è¿è¡Œæ—¶å±æ€§çš„å¯¹è±¡çš„èŒƒå›´ã€‚æŸäº›ä¸Šä¸‹æ–‡å±æ€§çš„ä¾‹å­æ˜¯ä¸åŒæ­¥å’Œçº¿ç¨‹ç´§å¯†ç›¸å…³çš„ã€‚å½“ .NET å¯¹è±¡è¢«æ¿€æ´»æ—¶ï¼Œè¿è¡Œæ—¶å°†æ£€æŸ¥å½“å‰ä¸Šä¸‹æ–‡æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸ä¸€è‡´ï¼Œå°†åˆ›å»ºæ–°çš„ä¸Šä¸‹æ–‡ã€‚å¤šä¸ªå¯¹è±¡å¯ä»¥åŒæ—¶åœ¨ä¸€ä¸ªä¸Šä¸‹æ–‡ä¸­è¿è¡Œï¼Œå¹¶ä¸”ä¸€ä¸ª AppDomain ä¸­å¯ä»¥æœ‰å¤šä¸ªä¸Šä¸‹æ–‡ã€‚</p><p>ä¸€ä¸ªä¸Šä¸‹æ–‡ä¸­çš„å¯¹è±¡è°ƒç”¨å¦ä¸€ä¸ªä¸Šä¸‹æ–‡ä¸­çš„å¯¹è±¡æ—¶ï¼Œè°ƒç”¨å°†é€šè¿‡ä¸Šä¸‹æ–‡ä»£ç†æ¥æ‰§è¡Œï¼Œå¹¶ä¸”ä¼šå—ç»„åˆçš„ä¸Šä¸‹æ–‡å±æ€§çš„å¼ºåˆ¶ç­–ç•¥å½±å“ã€‚æ–°å¯¹è±¡çš„ä¸Šä¸‹æ–‡é€šå¸¸æ˜¯åŸºäºç±»çš„å…ƒæ•°æ®å±æ€§é€‰æ‹©çš„ã€‚</p><p>å¯ä»¥ä¸ä¸Šä¸‹æ–‡ç»‘å®šçš„ç±»ç§°ä½œä¸Šä¸‹æ–‡ç»‘å®šç±»ã€‚ä¸Šä¸‹æ–‡ç»‘å®šç±»å¯ä»¥å…·æœ‰ç§°ä¸ºä¸Šä¸‹æ–‡å±æ€§çš„ä¸“ç”¨è‡ªå®šä¹‰å±æ€§ã€‚ä¸Šä¸‹æ–‡å±æ€§æ˜¯å®Œå…¨å¯æ‰©å±•çš„ï¼Œæ‚¨å¯ä»¥åˆ›å»ºè¿™äº›å±æ€§å¹¶å°†å®ƒä»¬é™„åŠ åˆ°è‡ªå·±çš„ç±»ä¸­ã€‚ä¸ä¸Šä¸‹æ–‡ç»‘å®šçš„å¯¹è±¡æ˜¯ä» <code>System.ContextBoundObject</code> å¯¼å‡ºçš„ã€‚</p><p>.NET Remoting å…ƒæ•°æ®å’Œé…ç½®æ–‡ä»¶</p><p>å…ƒæ•°æ®</p><p>.NET æ¡†æ¶ä½¿ç”¨å…ƒæ•°æ®å’Œç¨‹åºé›†æ¥å­˜å‚¨æœ‰å…³ç»„ä»¶çš„ä¿¡æ¯ï¼Œä½¿å¾—è·¨è¯­è¨€ç¼–ç¨‹æˆä¸ºå¯èƒ½ã€‚.NET Remoting ä½¿ç”¨å…ƒæ•°æ®æ¥åŠ¨æ€åˆ›å»ºä»£ç†å¯¹è±¡ã€‚åœ¨å®¢æˆ·ç«¯åˆ›å»ºçš„ä»£ç†å¯¹è±¡å…·æœ‰ä¸åŸå§‹ç±»ç›¸åŒçš„æˆå‘˜ã€‚ä½†æ˜¯ï¼Œä»£ç†å¯¹è±¡çš„å®ç°ä»…ä»…å°†æ‰€æœ‰è¯·æ±‚é€šè¿‡ .NET Remoting è¿è¡Œæ—¶è½¬å‘ç»™åŸå§‹å¯¹è±¡ã€‚åºåˆ—åŒ–æ ¼å¼åŒ–ç¨‹åºä½¿ç”¨å…ƒæ•°æ®åœ¨æ–¹æ³•è°ƒç”¨å’Œæœ‰æ•ˆè´Ÿè½½æ•°æ®æµä¹‹é—´æ¥å›è½¬æ¢ã€‚</p><p>å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•è·å–è®¿é—® Remoting å¯¹è±¡æ‰€éœ€çš„å…ƒæ•°æ®ä¿¡æ¯ï¼š</p><ul><li>æœåŠ¡å™¨å¯¹è±¡çš„ .NET ç¨‹åºé›† : æœåŠ¡å™¨å¯¹è±¡å¯ä»¥åˆ›å»ºå…ƒæ•°æ®ç¨‹åºé›†ï¼Œå¹¶å°†å…¶åˆ†å‘ç»™å®¢æˆ·ç«¯ã€‚åœ¨ç¼–è¯‘å®¢æˆ·ç«¯å¯¹è±¡æ—¶ï¼Œå®¢æˆ·ç«¯å¯¹è±¡å¯ä»¥å¼•ç”¨è¿™äº›ç¨‹åºé›†ã€‚åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½æ˜¯æ‰˜ç®¡ç»„ä»¶çš„å°é—­ç¯å¢ƒä¸­ï¼Œè¿™ç§æ–¹æ³•éå¸¸æœ‰ç”¨ã€‚</li><li>Remoting å¯¹è±¡å¯ä»¥æä¾› WSDLæ–‡ä»¶ï¼Œç”¨äºè¯´æ˜å¯¹è±¡åŠå…¶æ–¹æ³•ã€‚æ‰€æœ‰å¯ä»¥æ ¹æ® WSDL æ–‡ä»¶è¯»å–å’Œç”Ÿæˆ SOAP è¯·æ±‚çš„å®¢æˆ·ç«¯éƒ½å¯ä»¥è°ƒç”¨æ­¤å¯¹è±¡ï¼Œæˆ–ä½¿ç”¨ SOAP ä¸ä¹‹é€šä¿¡ã€‚ä½¿ç”¨ä¸ .NET SDK ä¸€åŒåˆ†å‘çš„ SOAPSUDS.EXE å·¥å…·ï¼Œ.NET Remoting æœåŠ¡å™¨å¯¹è±¡å¯ä»¥ç”Ÿæˆå…·æœ‰å…ƒæ•°æ®åŠŸèƒ½çš„ WSDL æ–‡ä»¶ã€‚å½“æŸä¸ªç»„ç»‡å¸Œæœ›æä¾›æ‰€æœ‰å®¢æˆ·éƒ½èƒ½è®¿é—®å’Œä½¿ç”¨çš„å…¬å…±æœåŠ¡æ—¶ï¼Œè¿™ç§æ–¹æ³•éå¸¸æœ‰ç”¨ã€‚</li><li>.NET å®¢æˆ·å¯ä»¥ä½¿ç”¨ SOAPSUDS å·¥å…·ä»æœåŠ¡å™¨ä¸Šä¸‹è½½ XML æ¶æ„ï¼ˆåœ¨æœåŠ¡å™¨ä¸Šç”Ÿæˆï¼‰ï¼Œç”Ÿæˆä»…åŒ…å«å…ƒæ•°æ®ï¼ˆæ²¡æœ‰ä»£ç ï¼‰çš„æºæ–‡ä»¶æˆ–ç¨‹åºé›†ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦å°†æºæ–‡ä»¶ç¼–è¯‘åˆ°å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºä¸­ã€‚å¦‚æœå¤šå±‚åº”ç”¨ç¨‹åºä¸­æŸä¸€å±‚çš„å¯¹è±¡éœ€è¦è®¿é—®å…¶ä»–å±‚çš„ Remoting å¯¹è±¡ï¼Œåˆ™ç»å¸¸ä½¿ç”¨æ­¤æ–¹æ³•ã€‚</li></ul><p>é…ç½®æ–‡ä»¶</p><p>ã€€ã€€ é…ç½®æ–‡ä»¶ï¼ˆ.config æ–‡ä»¶ï¼‰ç”¨äºæŒ‡å®šç»™å®šå¯¹è±¡çš„å„ç§ Remoting ç‰¹æœ‰ä¿¡æ¯ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæ¯ä¸ª AppDomain éƒ½æœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶ã€‚ä½¿ç”¨é…ç½®æ–‡ä»¶æœ‰åŠ©äºå®ç°ä½ç½®çš„é€æ˜æ€§ã€‚é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šçš„è¯¦ç»†ä¿¡æ¯ä¹Ÿå¯ä»¥é€šè¿‡ç¼–ç¨‹æ¥å®Œæˆã€‚ä½¿ç”¨é…ç½®æ–‡ä»¶çš„ä¸»è¦å¥½å¤„åœ¨äºï¼Œå®ƒå°†ä¸å®¢æˆ·ç«¯ä»£ç æ— å…³çš„é…ç½®ä¿¡æ¯åˆ†ç¦»å‡ºæ¥ï¼Œè¿™æ ·åœ¨æ—¥åæ›´æ”¹æ—¶ä»…éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œè€Œä¸ç”¨ç¼–è¾‘å’Œé‡æ–°ç¼–è¯‘æºæ–‡ä»¶ã€‚.NET Remoting çš„å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¯¹è±¡éƒ½ä½¿ç”¨é…ç½®æ–‡ä»¶ã€‚</p><p>å…¸å‹çš„é…ç½®æ–‡ä»¶åŒ…å«ä»¥ä¸‹ä¿¡æ¯åŠå…¶ä»–ä¿¡æ¯ï¼š</p><ul><li>é›†æˆåº”ç”¨ç¨‹åºä¿¡æ¯</li><li>å¯¹è±¡åç§°</li><li>å¯¹è±¡çš„ URI</li><li>æ³¨å†Œçš„é€šé“ï¼ˆå¯ä»¥åŒæ—¶æ³¨å†Œå¤šä¸ªé€šé“ï¼‰</li><li>æœåŠ¡å™¨å¯¹è±¡çš„ç§Ÿç”¨æ—¶é—´ä¿¡æ¯</li></ul><p>ä¸‹é¢æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ç¤ºä¾‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">system.runtime.remoting</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">application</span> <span class="attr">name</span>=<span class="string">&quot;HelloNew&quot;</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">      <span class="tag">&lt;<span class="name">lifetime</span> <span class="attr">leaseTime</span>=<span class="string">&quot;20ms&quot;</span> <span class="attr">sponsorshipTimeout</span>=<span class="string">&quot;20ms&quot;</span> </span></span><br><span class="line"><span class="tag"><span class="attr">renewOnCallTime</span>=<span class="string">&quot;20ms&quot;</span> /&gt;</span>  </span><br><span class="line"> </span><br><span class="line">      <span class="tag">&lt;<span class="name">client</span> <span class="attr">url</span>=<span class="string">&quot;http://localhost:8000/RemotingHello&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">wellknown</span> <span class="attr">type</span>=<span class="string">&quot;Hello.HelloService, MyHello&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">url</span>=<span class="string">&quot;http://localhost:8000/RemotingHello/HelloService.soap&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activated</span> <span class="attr">type</span>=<span class="string">&quot;Hello.AddService, MyHello&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">client</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">      <span class="tag">&lt;<span class="name">channels</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">channel</span> <span class="attr">port</span>=<span class="string">&quot;8001&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">type</span>=<span class="string">&quot;System.Runtime.Remoting.Channels.Http.HttpChannel, </span></span></span><br><span class="line"><span class="string"><span class="tag">      System.Runtime.Remoting&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">channels</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">    <span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">system.runtime.remoting</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>.NET Remoting æ–¹æ¡ˆ</p><p>äº†è§£ .NET Remoting å¦‚ä½•å·¥ä½œä¹‹åï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å„ç§æ–¹æ¡ˆï¼Œåˆ†æå¦‚ä½•åœ¨ä¸åŒçš„æ–¹æ¡ˆä¸­å……åˆ†å‘æŒ¥ .NET Remoting çš„ä¼˜åŠ¿ã€‚ä¸‹è¡¨åˆ—å‡ºäº†å¯èƒ½çš„å®¢æˆ·ç«¯/æœåŠ¡å™¨ç»„åˆï¼Œä»¥åŠé»˜è®¤æƒ…å†µä¸‹é‡‡ç”¨çš„åº•å±‚åè®®å’Œæœ‰æ•ˆè´Ÿè½½ã€‚è¯·æ³¨æ„ï¼Œ.NET Remoting æ¡†æ¶æ˜¯å¯æ‰©å±•çš„ï¼Œæ‚¨å¯ä»¥ç¼–å†™è‡ªå·±çš„é€šä¿¡é€šé“å’Œåºåˆ—åŒ–æ ¼å¼åŒ–ç¨‹åºã€‚</p><div class="table-container"><table><thead><tr><th style="text-align:left">å®¢æˆ·ç«¯</th><th style="text-align:left">æœåŠ¡å™¨</th><th style="text-align:left">æœ‰æ•ˆè´Ÿè½½</th><th style="text-align:left">åè®®</th></tr></thead><tbody><tr><td style="text-align:left">.NET ç»„ä»¶</td><td style="text-align:left">.NET ç»„ä»¶</td><td style="text-align:left">SOAP/XML</td><td style="text-align:left">http</td></tr><tr><td style="text-align:left">.NET ç»„ä»¶</td><td style="text-align:left">.NET ç»„ä»¶</td><td style="text-align:left">äºŒè¿›åˆ¶</td><td style="text-align:left">TCP</td></tr><tr><td style="text-align:left">æ‰˜ç®¡/éæ‰˜ç®¡</td><td style="text-align:left">.NET Web æœåŠ¡</td><td style="text-align:left">SOAP/XML</td><td style="text-align:left">http</td></tr><tr><td style="text-align:left">.NET ç»„ä»¶</td><td style="text-align:left">éæ‰˜ç®¡çš„ä¼ ç»Ÿ COM ç»„ä»¶</td><td style="text-align:left">NDRï¼ˆç½‘ç»œæ•°æ®è¡¨ç¤ºå½¢å¼ï¼‰</td><td style="text-align:left">DCOM</td></tr><tr><td style="text-align:left">éæ‰˜ç®¡çš„ä¼ ç»Ÿ COM ç»„ä»¶</td><td style="text-align:left">.NET ç»„ä»¶</td><td style="text-align:left">NDR</td><td style="text-align:left">DCOM</td></tr></tbody></table></div><p>ä½¿ç”¨ HTTP-SOAP</p><p>Web æœåŠ¡æ˜¯å¯ä»¥é€šè¿‡ URL å¯»å€çš„èµ„æºï¼Œå¹¶é€šè¿‡ç¼–ç¨‹å‘éœ€è¦ä½¿ç”¨è¿™äº›èµ„æºçš„å®¢æˆ·ç«¯è¿”å›ä¿¡æ¯ã€‚å®¢æˆ·ç«¯ä½¿ç”¨ Web Services æ—¶ä¸å¿…è€ƒè™‘å…¶å®ç°ç»†èŠ‚ã€‚Web Services ä½¿ç”¨ç§°ä¸ºâ€œåˆçº¦â€çš„ä¸¥æ ¼å®šä¹‰çš„æ¥å£ï¼Œæ­¤æ¥å£é‡‡ç”¨ Web æœåŠ¡è¯´æ˜è¯­è¨€ (WSDL) æ–‡ä»¶æè¿°ã€‚</p><p>.NET Remoting å¯¹è±¡å¯ä»¥é›†æˆåœ¨ IIS ä¸­ï¼Œä½œä¸º Web æœåŠ¡æä¾›ã€‚ä»»ä½•å¯ä»¥ä½¿ç”¨ WSDL æ–‡ä»¶çš„å®¢æˆ·ç«¯éƒ½å¯ä»¥æŒ‰ç…§ WSDL æ–‡ä»¶ä¸­æŒ‡å®šçš„åˆçº¦ï¼Œå¯¹ Remoting å¯¹è±¡æ‰§è¡Œ SOAP è°ƒç”¨ã€‚IIS ä½¿ç”¨ ISAPI æ‰©å±•å°†è¿™äº›è¯·æ±‚è·¯ç”±åˆ°ç›¸åº”çš„å¯¹è±¡ã€‚è¿™æ ·ï¼ŒRemoting å¯¹è±¡å°±å¯ä»¥ä½œä¸º Web æœåŠ¡å¯¹è±¡æ¥ä½¿ç”¨ï¼Œä»è€Œå……åˆ†å‘æŒ¥ .NET æ¡†æ¶åŸºç¡€ç»“æ„çš„ä½œç”¨ã€‚å¦‚æœæ‚¨å¸Œæœ›ä¸åŒå¹³å°/ç¯å¢ƒçš„ç¨‹åºå‡èƒ½å¤Ÿè®¿é—®å¯¹è±¡ï¼Œå¯ä»¥é‡‡ç”¨è¿™ç§é…ç½®ã€‚è¿™ç§é…ç½®ä¾¿äºå®¢æˆ·ç«¯é€šè¿‡é˜²ç«å¢™è®¿é—®æ‚¨çš„ .NET å¯¹è±¡ã€‚</p><p><a href="https://imgtu.com/i/jyYSTe"><img src="https://s1.ax1x.com/2022/07/10/jyYSTe.jpg" alt="jyYSTe.jpg"></a></p><p>å›¾10 .NET ä½¿ç”¨ HTTP-SOAP</p><p>ä½¿ç”¨ SOAP-HTTP é€šé“</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒHTTP é€šé“ä½¿ç”¨ SOAP æ ¼å¼åŒ–ç¨‹åºã€‚å› æ­¤ï¼Œå¦‚æœå®¢æˆ·ç«¯éœ€è¦é€šè¿‡ Internet è®¿é—®å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ HTTP é€šé“ã€‚å› ä¸ºè¿™ç§æ–¹æ³•ä½¿ç”¨ HTTPï¼Œæ‰€ä»¥æ­¤é…ç½®å…è®¸é€šè¿‡é˜²ç«å¢™è¿œç¨‹è®¿é—® .NET å¯¹è±¡ã€‚åªéœ€è¦æŒ‰å‰ä¸€èŠ‚ä¸­ä»‹ç»çš„æ–¹æ³•å°†è¿™äº›å¯¹è±¡é›†æˆåœ¨ IIS ä¸­ï¼Œå³å¯å°†å®ƒé…ç½®ä¸º Web æœåŠ¡å¯¹è±¡ã€‚éšåï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥è¯»å–è¿™äº›å¯¹è±¡çš„ WSDL æ–‡ä»¶ï¼Œä½¿ç”¨ SOAP ä¸ Remoting å¯¹è±¡é€šä¿¡ã€‚</p><p>ä½¿ç”¨ TCP é€šé“</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒTCP é€šé“ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼åŒ–ç¨‹åºã€‚æ­¤æ ¼å¼åŒ–ç¨‹åºä»¥äºŒè¿›åˆ¶æ ¼å¼å¯¹æ•°æ®è¿›è¡Œåºåˆ—åŒ–ï¼Œå¹¶ä½¿ç”¨åŸå§‹ socket åœ¨ç½‘ç»œä¸­ä¼ é€æ•°æ®ã€‚å¦‚æœå¯¹è±¡éƒ¨ç½²åœ¨å—é˜²ç«å¢™ä¿æŠ¤çš„å°é—­ç¯å¢ƒä¸­ï¼Œæ­¤æ–¹æ³•æ˜¯ç†æƒ³çš„é€‰æ‹©ã€‚è¿™ç§æ–¹æ³•ä½¿ç”¨ socket åœ¨å¯¹è±¡ä¹‹é—´ä¼ é€’äºŒè¿›åˆ¶æ•°æ®ï¼Œå› æ­¤æ€§èƒ½æä½³ã€‚ç”±äºå®ƒä½¿ç”¨ TCP é€šé“æ¥æä¾›å¯¹è±¡ï¼Œå› æ­¤åœ¨å°é—­ç¯å¢ƒä¸­å…·æœ‰ä½å¼€é”€çš„ä¼˜ç‚¹ã€‚ç”±äºé˜²ç«å¢™å’Œé…ç½®çš„é—®é¢˜ï¼Œæ­¤æ–¹æ³•ä¸å®œåœ¨ Internet ä¸Šä½¿ç”¨ã€‚</p><p><a href="https://imgtu.com/i/jyY9FH"><img src="https://s1.ax1x.com/2022/07/10/jyY9FH.jpg" alt="jyY9FH.jpg"></a></p><p>å›¾11 .NET ä½¿ç”¨ TCP é€šé“</p><p>ä½¿ç”¨éæ‰˜ç®¡çš„ COM ç»„ä»¶</p><p>å¯ä»¥é€šè¿‡ COM Interop Service è°ƒç”¨éæ‰˜ç®¡çš„ä¼ ç»Ÿ COM ç»„ä»¶ã€‚å½“ .NET Remoting å®¢æˆ·ç«¯å¯¹è±¡åˆ›å»º COM å¯¹è±¡çš„å®ä¾‹æ—¶ï¼Œè¯¥å¯¹è±¡é€šè¿‡è¿è¡Œæ—¶å¯è°ƒç”¨åŒ…è£…ç¨‹åº (RCW) æ¥æä¾›ã€‚å…¶ä¸­ï¼ŒRCW æ‹…å½“çœŸæ­£çš„éæ‰˜ç®¡å¯¹è±¡çš„ä»£ç†ã€‚å¯¹äº .NET å®¢æˆ·ï¼Œè¿™äº›åŒ…è£…ç¨‹åºçœ‹èµ·æ¥å’Œ .NET å®¢æˆ·ç«¯çš„ä»»ä½•å…¶ä»–æ‰˜ç®¡ç±»ä¸€æ ·ã€‚ä½†å®é™…ä¸Šï¼Œå®ƒä»¬ä»…ä»…æ˜¯æ‰˜ç®¡ (.NET) å’Œéæ‰˜ç®¡ (COM) ä»£ç ä¹‹é—´çš„å°é€è°ƒç”¨ã€‚</p><p>åŒæ ·åœ°ï¼Œæ‚¨å¯ä»¥å°† .NET Remoting æœåŠ¡å™¨å¯¹è±¡æä¾›ç»™ä¼ ç»Ÿ COM å®¢æˆ·ç«¯ã€‚å½“ COM å®¢æˆ·ç«¯åˆ›å»º .NET å¯¹è±¡çš„å®ä¾‹æ—¶ï¼Œè¯¥å¯¹è±¡é€šè¿‡ COM å¯è°ƒç”¨åŒ…è£…ç¨‹åº (CCW) æ¥æä¾›ã€‚å…¶ä¸­ï¼ŒCCW æ‹…å½“çœŸæ­£çš„æ‰˜ç®¡å¯¹è±¡çš„ä»£ç†ã€‚ ã€€ã€€ è¿™ä¸¤ç§æ–¹æ¡ˆéƒ½ä½¿ç”¨ DCOM é€šä¿¡ã€‚å¦‚æœç¯å¢ƒä¸­æ—¢æœ‰ä¼ ç»Ÿçš„ COM ç»„ä»¶ï¼Œåˆæœ‰ .NET ç»„ä»¶ï¼Œé‚£ä¹ˆè¿™ç§äº’æ“ä½œæ€§å°†ä¸ºæ‚¨æä¾›ä¾¿åˆ©ã€‚ ã€€ã€€</p><p>æ€»ç»“</p><p>Microsoft .NET æ¡†æ¶æä¾›äº†å¼ºå¤§ã€å¯æ‰©å±•ã€ç‹¬ç«‹äºè¯­è¨€çš„æ¡†æ¶ï¼Œé€‚åˆå¼€å‘å¯é ã€å¯ä¼¸ç¼©çš„åˆ†å¸ƒå¼ç³»ç»Ÿã€‚.NET Romoting æ¡†æ¶æä¾›äº†æ ¹æ®ç³»ç»Ÿéœ€æ±‚è¿›è¡Œè¿œç¨‹äº¤äº’çš„å¼ºå¤§æ‰‹æ®µã€‚.NET Remoting å®ç°äº†ä¸ Web æœåŠ¡çš„æ— ç¼é›†æˆï¼Œå¹¶æä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œå¯ä»¥æä¾› .NET å¯¹è±¡ä»¥ä¾›è·¨å¹³å°è®¿é—®ã€‚</p><h3 id="Java-ä¸­çš„-XML-Web-Services"><a href="#Java-ä¸­çš„-XML-Web-Services" class="headerlink" title="Java ä¸­çš„ XML Web Services"></a>Java ä¸­çš„ XML Web Services</h3><p>Java RMI ä¸è¿œç¨‹å¯¹è±¡è¿›è¡Œäº¤äº’ï¼Œå…¶å®ç°æ˜¯éœ€è¦åŸºäº Java çš„æ¨¡å‹ã€‚æ­¤å¤–,å®ƒæ²¡æœ‰ä½¿ç”¨ Web Services å’ŒåŸºäº HTTP çš„æ¶ˆæ¯ä¼ é€’ã€‚ç°åœ¨ï¼Œå·²ç»å‡ºç°äº†å¤§é‡çš„è½¯ä»¶æ¥æ”¯æŒåŸºäº Java çš„ Web Servicesã€‚JAX-WS (Java API for XML Web Services) å°±æ˜¯ä½œä¸º Web Services æ¶ˆæ¯æ¯å’Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨çš„è§„èŒƒã€‚å®ƒå…è®¸ä¸€ä¸ªè°ƒç”¨åŸºäºJavaçš„webæœåŠ¡ä½¿ç”¨Java RMI(å³ã€‚,ç›¸å¯¹é€æ˜çš„ç¨‹åºå‘˜)ã€‚JAX-WS çš„ä¸€ä¸ªç›®æ ‡æ˜¯å¹³å°äº’æ“ä½œæ€§ã€‚å…¶ API ä½¿ç”¨ SOAP å’ŒWSDLã€‚åŒæ–¹ä¸éœ€è¦ Java ç¯å¢ƒã€‚</p><p>åˆ›å»ºä¸€ä¸ª RPC ç«¯ç‚¹</p><p>åœ¨æœåŠ¡å™¨ç«¯,è¿›è¡Œä¸‹é¢çš„æ­¥éª¤æ¥åˆ›å»ºä¸€ä¸ª RPC ç«¯ç‚¹:</p><ul><li>å®šä¹‰ä¸€ä¸ªæ¥å£(Javaæ¥å£)ï¼›</li><li>å®ç°æœåŠ¡ï¼›</li><li>åˆ›å»ºä¸€ä¸ªå‘å¸ƒè€…,ç”¨äºåˆ›å»ºæœåŠ¡çš„å®ä¾‹ï¼Œå¹¶å‘å¸ƒä¸€ä¸ªæœåŠ¡åå­—ã€‚</li></ul><p>åœ¨å®¢æˆ·ç«¯:</p><ul><li>åˆ›å»ºä¸€ä¸ªä»£ç†(å®¢æˆ·ç«¯å­˜æ ¹)ã€‚wsimport å‘½ä»¤æ ¹æ® WSDL æ–‡æ¡£,åˆ›å»ºä¸€ä¸ªå®¢æˆ·æœºå­˜æ ¹ï¼›</li><li>ç¼–å†™ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œé€šè¿‡ä»£ç†åˆ›å»ºè¿œç¨‹æœåŠ¡çš„ä¸€ä¸ªå®ä¾‹(å­˜æ ¹),è°ƒç”¨å®ƒçš„æ–¹æ³•ã€‚</li></ul><p>JAX-RPC æ‰§è¡Œæµç¨‹å¦‚ä¸‹:</p><ul><li>Java å®¢æˆ·æœºè°ƒç”¨å­˜æ ¹ä¸Šçš„æ–¹æ³•(ä»£ç†)ï¼›</li><li>å­˜æ ¹è°ƒç”¨é€‚å½“çš„ Web æœåŠ¡ï¼›</li><li>Web æœåŠ¡å™¨è¢«è°ƒç”¨å¹¶æŒ‡å¯¼ JAX-WS æ¡†æ¶ï¼›</li><li>æ¡†æ¶è°ƒç”¨å®ç°ï¼›</li><li>å®ç°è¿”å›ç»“æœç»™è¯¥æ¡†æ¶ï¼›</li><li>è¯¥æ¡†æ¶å°†ç»“æœè¿”å›ç»™ Web æœåŠ¡å™¨ï¼›</li><li>æœåŠ¡å™¨å°†ç»“æœå‘é€ç»™å®¢æˆ·ç«¯å­˜æ ¹ï¼›</li><li>å®¢æˆ·ç«¯å­˜æ ¹è¿”å›ä¿¡æ¯ç»™è°ƒç”¨è€…ï¼›</li></ul><p><a href="https://imgtu.com/i/jyYPfA"><img src="https://s1.ax1x.com/2022/07/10/jyYPfA.jpg" alt="jyYPfA.jpg"></a></p><p>å›¾12 JAX-WS è°ƒç”¨æµç¨‹</p><h3 id="è¶…è¶Š-SOAP"><a href="#è¶…è¶Š-SOAP" class="headerlink" title="è¶…è¶Š SOAP"></a>è¶…è¶Š SOAP</h3><p>SOAP è™½ç„¶ä»ç„¶æ˜¯å¹¿æ³›éƒ¨ç½²åº”ç”¨ï¼Œä½†åœ¨è®¸å¤šç¯å¢ƒä¸­å¾ˆå¤šå‚å•†å·²ç»æŠ›å¼ƒäº† SOAPï¼Œè½¬è€Œä½¿ç”¨å…¶ä»–æ›´è½»é‡ã€æ›´å®¹æ˜“ç†è§£ã€æˆ–è€…ä¸ Web äº¤äº’æ¨¡å‹æ›´å¹²å‡€çš„æœºåˆ¶ã€‚ä¾‹å¦‚,Google çš„ API åœ¨2006å¹´åå°±ä¸å†æ”¯æŒ SOAP æ¥å£ï¼Œè€Œæ˜¯ä½¿ç”¨AJAXã€XML-RPC å’Œ REST ä½œä¸ºæ›¿ä»£ã€‚ä¸€ä¸ªåŒ¿åçš„å¾®è½¯å‘˜å·¥æ‰¹è¯„ SOAP è¿‡äºå¤æ‚ï¼Œå› ä¸ºâ€œæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„å·¥å…·æ¥é˜…è¯»å®ƒ,è€Œä¸æ˜¯äººâ€ã€‚ä¸ç®¡ä¸Šè¿°è¨€è®ºæ˜¯å¦å‡†ç¡®ï¼Œæœ‰ä¸€ç‚¹æ˜¯å¯ä»¥è‚¯å®šçš„ï¼ŒSOAP æ˜¾ç„¶æ˜¯ä¸€ä¸ªå¤æ‚å’Œé«˜åº¦å†—é•¿çš„æ ¼å¼ã€‚</p><p>AJAX</p><p>Web æµè§ˆå™¨æœ€åˆçš„è®¾è®¡ï¼Œæ˜¯ä¸º Web é¡µé¢æä¾›éåŠ¨æ€çš„äº¤äº’æ¨¡å‹ã€‚Web æµè§ˆå™¨æ˜¯å»ºç«‹åœ¨åŒæ­¥çš„è¯·æ±‚-å“åº”(request-response)çš„äº¤äº’æ¨¡å‹ã€‚å‘é€ä¸€ä¸ªè¯·æ±‚åˆ°æœåŠ¡å™¨,æœåŠ¡å™¨è¿”å›æ•´ä¸ªé¡µé¢ã€‚åœ¨å½“æ—¶æ²¡æœ‰æ›´æ–°éƒ¨åˆ†é¡µé¢çš„å¥½æ–¹æ³•ï¼Œè€Œå”¯ä¸€å¯è¡Œçš„æ–¹æ³•æ˜¯åˆ©ç”¨å¸§ï¼Œå³å°†ä¸åŒçš„é¡µé¢åŠ è½½åˆ°æ¯ä¸€å¸§ï¼Œå…¶å®ç°æ˜¯ç¬¨é‡çš„ï¼Œä¹Ÿæœ‰å¾ˆå¤§çš„é™åˆ¶æ€§ã€‚è€Œæ”¹å˜äº†è¿™ä¸€åˆ‡çš„å…³é”®å› ç´ æ˜¯ï¼š</p><ul><li>æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼ˆDocument Object Modelï¼‰å’Œ JavaScript çš„å‡ºç°,ä½¿å¾—å¯ä»¥ä»¥ç¼–ç¨‹æ–¹å¼æ¥æ›´æ”¹ Web é¡µé¢çš„å„ä¸ªéƒ¨åˆ†ï¼›</li><li>AJAX æä¾›äº†ä¸æœåŠ¡å™¨ä»¥éé˜»å¡æ–¹å¼è¿›è¡Œäº¤äº’ï¼Œå³å…è®¸åº•å±‚ JavaScript åœ¨ç­‰å¾…æœåŠ¡å™¨ç»“æœæ—¶ï¼Œç”¨æˆ·ä»ç„¶å¯ä»¥ä¸é¡µé¢è¿›è¡Œäº¤äº’ã€‚</li></ul><p>AJAX å…¨ç§°æ˜¯ Asynchronous JavaScript And XMLï¼ˆå¼‚æ­¥çš„ JavaScript å’Œ XMLï¼‰ã€‚è®©æˆ‘ä»¬çœ‹çœ‹è¿™äº›ä¸‰é¡¹:</p><ul><li>å®ƒæ˜¯å¼‚æ­¥çš„,å› ä¸ºå®¢æˆ·ç«¯ç­‰å¾…æœåŠ¡å™¨ç»“æœä¸ä¼šè¢«é˜»å¡ï¼›</li><li>AJAX é›†æˆåˆ°äº† JavaScriptï¼Œä½œä¸ºæµè§ˆå™¨è§£é‡Š Web é¡µé¢çš„ä¸€éƒ¨åˆ†ã€‚JavaScript ä½¿ç”¨ HTTPRequest æ¥è°ƒç”¨ AJAX è¯·æ±‚ã€‚JavaScript ä¹Ÿå¯èƒ½ä¿®æ”¹æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œå®šä¹‰äº†é¡µé¢çš„æ ·å­ï¼›</li><li>æ•°æ®ä»¥ XML æ–‡æ¡£å½¢å¼å‘é€å’Œæ¥æ”¶ã€‚ï¼ˆåœ¨åæœŸå‘å±•ä¸­ï¼ŒAJAX ä¹Ÿæ”¯æŒå…¶ä»–çš„æ•°æ®æ ¼å¼ï¼Œæ¯”å¦‚ JSONï¼‰</li></ul><p>AJAX åœ¨æ¨åŠ¨ Web 2.0 çš„è¿‡ç¨‹ä¸­å‘æŒ¥äº†é‡è¦çš„ï¼Œæ¯”å¦‚äº§ç”Ÿäº†å¾ˆå¤šé«˜åº¦äº¤äº’çš„æœåŠ¡,å¦‚Google Mapsã€Writelyç­‰ã€‚åŸºæœ¬ä¸Š,å®ƒå…è®¸ JavaScript å‘å‡ºHTTP è¯·æ±‚ï¼Œè·å–å’Œå¤„ç†ç»“æœï¼Œåˆ·æ–°å±€éƒ¨é¡µé¢å…ƒç´ è€Œä¸æ˜¯æ•´ä¸ªé¡µé¢ã€‚åœ¨å¤§å¤šæ•°æµè§ˆå™¨è¯·æ±‚çš„æ ¼å¼å¦‚ä¸‹:</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">xmlhttp.open(â€œHEADâ€, â€œindex.htmlâ€, <span class="literal">true</span>)Tell <span class="built_in">object</span>:</span><br></pre></td></tr></table></figure><h3 id="REST"><a href="#REST" class="headerlink" title="REST"></a>REST</h3><p>SOAP åœ¨åˆ›å»ºè‡ªå·±çš„æ¶ˆæ¯ä¼ é€’åè®®æ—¶æ˜¯åŸºäºHTTPï¼Œä½†å®é™…ä¸Š REST (REpresentational State Transfer) çš„æ–¹å¼æ‰æ˜¯ä¿æŒ Web çš„åŸç†å’Œä½¿ç”¨ HTTP åè®®çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚</p><p>åŸå§‹çš„ HTTP åè®®å·²ç»å®šä¹‰äº†å››ä¸ªå‘½ä»¤ï¼Œæ¸…æ™°åœ°æ˜ å°„åˆ°å„ç§æ•°æ®(å®šä¹‰ä¸ºâ€œèµ„æºâ€)æ“ä½œ:</p><ul><li>PUT (æ’å…¥)</li><li>GET (é€‰æ‹©)</li><li>POST (æ›´æ–°)</li><li>DELETE (åˆ é™¤)</li></ul><p>REST å…¶èƒŒåçš„ç†å¿µæ˜¯ä½¿ç”¨è¿™äº› HTTP å‘½ä»¤æ¥è¯·æ±‚å’Œæ“ä½œæ•°æ®ã€‚ä½œä¸º HTTPåè®®çš„ä¸€éƒ¨åˆ†ï¼ŒREST ä½¿ç”¨ URL æ¥å¼•ç”¨å¯¹è±¡å’Œæ“ä½œã€‚è€ƒè™‘è¿™ä¸ª HTTP æ“ä½œåˆ—è¡¨çš„ä¾‹å­:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">HTTP</span> <span class="variable constant_">GET</span> <span class="comment">//www.waylau.com/parts</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤å°†è¿”å›ä¸€ä¸ª XML æ–‡æ¡£,å…¶ä¸­åŒ…å«éƒ¨åˆ†çš„åˆ—è¡¨ã€‚æ³¨æ„,è¿”å›çš„ä¸æ˜¯ä¸€ä¸ªç½‘é¡µ,åªæ˜¯ä¸€ä¸ªåŒ…å«æ‰€è¯·æ±‚çš„æ•°æ® XML æ•°æ®ç»“æ„ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p:Parts</span> <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.waylau.com&quot;</span> </span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xlink</span>=<span class="string">&quot;http://www.w3.org/1999/xlink&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Part</span> <span class="attr">id</span>=<span class="string">&quot;00345&quot;</span> <span class="attr">xlink:href</span>=<span class="string">&quot;http://www.waylau.com/parts/00345&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Part</span> <span class="attr">id</span>=<span class="string">&quot;00346&quot;</span> <span class="attr">xlink:href</span>=<span class="string">&quot;http://www.waylau.com/parts/00346&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Part</span> <span class="attr">id</span>=<span class="string">&quot;00347&quot;</span> <span class="attr">xlink:href</span>=<span class="string">&quot;http://www.waylau.com/parts/00347&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Part</span> <span class="attr">id</span>=<span class="string">&quot;00348&quot;</span> <span class="attr">xlink:href</span>=<span class="string">&quot;http://www.waylau.com/parts/00348&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p:Parts</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¦ç‰¹å®šéƒ¨åˆ†çš„è¯¦ç»†ä¿¡æ¯,å‘é€ä¸€ä¸ªHTTP get å‘½ä»¤:</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">HTTP</span> <span class="variable constant_">GET</span> <span class="comment">//www.waylau.com/parts/00345</span></span><br></pre></td></tr></table></figure><p>è¿™å°†è¿”å›ä¸€ä¸ªç‰¹å®šçš„ä¿¡æ¯éƒ¨åˆ†:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p:Part</span> <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.waylau.com&quot;</span>   </span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:xlink</span>=<span class="string">&quot;http://www.w3.org/1999/xlink&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Part-ID</span>&gt;</span>00345<span class="tag">&lt;/<span class="name">Part-ID</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Name</span>&gt;</span>Widget-A<span class="tag">&lt;/<span class="name">Name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Description</span>&gt;</span>This part is used within the frap assembly<span class="tag">&lt;/<span class="name">Description</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Specification</span> <span class="attr">xlink:href</span>=<span class="string">&quot;http://www.waylau.com/parts/00345/specification&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">UnitCost</span> <span class="attr">currency</span>=<span class="string">&quot;USD&quot;</span>&gt;</span>0.10<span class="tag">&lt;/<span class="name">UnitCost</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Quantity</span>&gt;</span>10<span class="tag">&lt;/<span class="name">Quantity</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p:Part</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œä¸Šé¢ä¾‹å­ç®€åŒ–äº† partid ä½œä¸º URL çš„å‚æ•°ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">HTTP</span> <span class="variable constant_">GET</span> <span class="comment">//www.waylau.com/parts?partid=00345</span></span><br></pre></td></tr></table></figure><p>REST ä¸æ˜¯ RPCï¼Œä½†ä¹Ÿæœ‰ç±»ä¼¼çš„è¯·æ±‚-å“åº”æ¨¡å¼ã€‚åˆ¶å®šé€æ˜åº¦è¯·æ±‚ã€å°é€æ•°æ®ã€è§£æå“åº”è¿™äº›ä¸å±äº RESTã€‚REST åº”ç”¨éå¸¸å¹¿æ³›ï¼Œå¦‚ Yahoo! Search APIã€Ruby on Railsã€Twiter å’Œ Open Zing Services ç­‰ã€‚</p><h3 id="Google-Protocol-Buffers-å°é€å¤„ç†"><a href="#Google-Protocol-Buffers-å°é€å¤„ç†" class="headerlink" title="Google Protocol Buffers:å°é€å¤„ç†"></a>Google Protocol Buffers:å°é€å¤„ç†</h3><p>æœ‰äº›æ—¶å€™ï¼Œä¸ä»…ä»…æ˜¯ä¸ºäº† RPC å’Œ Web Services çš„éœ€è¦ï¼Œç¨‹åºå‘˜åªæ˜¯æƒ³ç®€åŒ–å¯¹ç½‘ç»œä¸Šçš„æ•°æ®çš„å°é€ç¼–ç»„å’Œè§£å°çš„æ“ä½œã€‚Google Protocol Buffers å°±æ˜¯ä¸ºåºåˆ—åŒ–ç»“æ„åŒ–æ•°æ®æä¾›äº†ä¸€ç§æœ‰æ•ˆçš„æœºåˆ¶ï¼Œä½¿å®ƒå®¹æ˜“å¯¹ç½‘ç»œä¸Šçš„æ•°æ®è¿›è¡Œç¼–ç å’Œè§£ç ã€‚Protocol Buffers æ˜¯ä¸€ä¸ªç´§å‡‘çš„äºŒè¿›åˆ¶æ ¼å¼æ¯” XML æ›´ç®€å•ã€ä½“ç§¯æ›´å°ã€é€Ÿåº¦æ›´å¿«ã€‚ä»–ä»¬æ˜¯ç‹¬ç«‹äºè¯­è¨€çš„ï¼Œåªå®šä¹‰æ•°æ®ç±»å‹ã€‚æ¯ä¸ªæ¶ˆæ¯æ˜¯å¯¹æ•°æ®åç§°ã€ç±»å‹å’Œå€¼çš„ç»“æ„åŒ–é›†åˆã€‚æ¶ˆæ¯ç»“æ„å®šä¹‰åœ¨ä¸€ä¸ªé«˜çº§åˆ«çš„æ ¼å¼ï¼Œç±»ä¼¼äºè®¸å¤šæ¥å£å®šä¹‰è¯­è¨€ã€‚ç„¶åæ–‡ä»¶å¯ä»¥æ ¹æ®ä½ é€‰æ‹©çš„è¯­è¨€æ¥ç¼–è¯‘è½¬æ¢æˆä¸è¯¥è¯­è¨€ç›¸åº”çš„æ ¼å¼ã€‚Protocol Buffers åœ¨ Google ä¸­å¹¿æ³›ä½¿ç”¨ã€‚ç›®å‰å·²ç»æœ‰è¶…è¿‡48000ç§ä¸åŒçš„æ¶ˆæ¯ç±»å‹å®šä¹‰ã€‚Protocol Buffers å¯ä»¥è¢«è¿ç”¨åœ¨ç±» RPC æ¶ˆæ¯ä¼ é€’ä»¥åŠæŒä¹…æ€§å­˜å‚¨(å°†æ•°æ®è½¬æ¢æˆæ ‡å‡†çš„ä¸²è¡Œå½¢å¼å†™å…¥åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼‰ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå®šä¹‰ Protocol Buffers çš„ä¾‹å­:</p><figure class="highlight puppet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">message <span class="keyword">Person</span> &#123;</span><br><span class="line">  required string <span class="literal">name</span> = <span class="number">1</span>;</span><br><span class="line">  required int32 <span class="built_in">id</span> = <span class="number">2</span>;</span><br><span class="line">  optional string email = <span class="number">3</span>;</span><br><span class="line"> </span><br><span class="line">  enum PhoneType &#123;</span><br><span class="line">    MOBILE = <span class="number">0</span>;</span><br><span class="line">    HOME = <span class="number">1</span>;</span><br><span class="line">    WORK = <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">message</span> <span class="keyword">PhoneNumber</span> &#123;</span><br><span class="line">    required string number = <span class="number">1</span>;</span><br><span class="line">    optional PhoneType <span class="built_in">type</span> = <span class="number">2</span> [<span class="keyword">default</span> = HOME];</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">repeated</span> <span class="keyword">PhoneNumber</span> <span class="keyword">phone</span> = 4;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œè¿™åªå®šä¹‰äº†æ•°æ®ç»“æ„ï¼Œè€Œä¸æ˜¯åŠŸèƒ½ã€‚ä½¿ç”¨è¿™ä¸ªç»“æ„çš„ä¾‹å­æ˜¯:</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Person person;</span><br><span class="line">person.set_name(<span class="string">&quot;John Doe&quot;</span>);</span><br><span class="line">person.set_id(<span class="number">1234</span>);</span><br><span class="line">person.set_email(<span class="string">&quot;jdoe@example.com&quot;</span>);</span><br><span class="line"><span class="function">fstream <span class="title">output</span>(<span class="params"><span class="string">&quot;myfile&quot;</span>, ios::<span class="keyword">out</span> | ios::binary</span>)</span>;</span><br><span class="line">person.SerializeToOstream(&amp;output);</span><br></pre></td></tr></table></figure><p>å³ä½¿ä¸ç´§å‡‘çš„ XML ç‰ˆæœ¬ç›¸æ¯”ï¼ŒProtocol Buffers åœ¨æ—¶é—´å’Œç©ºé—´æ–¹é¢ï¼Œè§£æå°†æ›´åŠ æœ‰æ•ˆã€‚ä¸‹é¢æ˜¯ä¸¤è€…çš„å¯¹æ¯”.</p><p>è¿™ä¸ªæ˜¯ XML æ ¼å¼ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">person</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>John Doe<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">email</span>&gt;</span>jdoe@example.com<span class="tag">&lt;/<span class="name">email</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">person</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ²¡æœ‰ç¼–è¯‘çš„ Protocol Buffers æ ¼å¼:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">person &#123;</span><br><span class="line">   name: <span class="string">&quot;John Doe&quot;</span></span><br><span class="line">   email: <span class="string">&quot;jdoe@example.com&quot;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Protocol Buffers äº§ç”Ÿçš„äºŒè¿›åˆ¶æ¶ˆæ¯å¤§çº¦æ˜¯28å­—èŠ‚é•¿ï¼Œè§£æè€—æ—¶å¤§æ¦‚éœ€è¦100-200nsã€‚ç›¸æ¯”ä¹‹ä¸‹,XML ç‰ˆæœ¬éœ€è¦69ä¸ªå­—èŠ‚é•¿(æ˜¯ Protocol Buffers çš„ 2.5å€),è€—æ—¶æ˜¯5000-10000ns(æ˜¯ Protocol Buffers çš„ 50å€)ã€‚</p><h3 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h3><p>JSON(JavaScript Object Notation) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚å®ƒåŸºäº ECMAScript çš„ä¸€ä¸ªå­é›†ã€‚JSON é‡‡ç”¨å®Œå…¨ç‹¬ç«‹äºè¯­è¨€çš„æ–‡æœ¬æ ¼å¼ï¼Œä½†æ˜¯ä¹Ÿä½¿ç”¨äº†ç±»ä¼¼äº C è¯­è¨€å®¶æ—çš„ä¹ æƒ¯ï¼ˆåŒ…æ‹¬Cã€C++ã€C#ã€Javaã€JavaScriptã€Perlã€Python ç­‰ï¼‰ã€‚è¿™äº›ç‰¹æ€§ä½¿ JSON æˆä¸ºç†æƒ³çš„æ•°æ®äº¤æ¢è¯­è¨€ã€‚æ˜“äºäººé˜…è¯»å’Œç¼–å†™ï¼ŒåŒæ—¶ä¹Ÿæ˜“äºæœºå™¨è§£æå’Œç”Ÿæˆã€‚JSON ä¸æ˜¯ä¸€ä¸ªè¯¸å¦‚ Google Protocol Buffers çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œå› æ­¤é€‚åˆä½¿ç”¨åŸºäº HTTPçš„æ¶ˆæ¯ä¼ é€’ã€‚JSON æ˜¯å¯ä»¥ä½œä¸º XML æ›¿ä»£å“ï¼Œåœ¨è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ä¸­ï¼Œå¾ˆå¤šè¯­è¨€éƒ½æ”¯æŒ JSON-RPCã€‚è®°ä½ï¼Œè¿™åªæ˜¯ä¸€ä¸ªæ¶ˆæ¯ä¼ é€’æ ¼å¼ï¼ŒJSON å¹¶æ²¡æœ‰è¯•å›¾æä¾› RPC åº“æ¥æ”¯æŒæœåŠ¡å‘ç°ã€ç»‘å®šã€æ‰˜ç®¡å’Œåƒåœ¾æ”¶é›†ã€‚</p><h2 id="å‚è€ƒå¼•ç”¨"><a href="#å‚è€ƒå¼•ç”¨" class="headerlink" title="å‚è€ƒå¼•ç”¨"></a>å‚è€ƒå¼•ç”¨</h2><ul><li><a href="https://www.cs.virginia.edu/~zaher/classes/CS656/birrel.pdf">http://www.cs.virginia.edu/~zaher/classes/CS656/birrel.pdf</a></li><li><a href="https://www.cs.rutgers.edu/~pxk/417/notes/03-rpc.html">https://www.cs.rutgers.edu/~pxk/417/notes/03-rpc.html</a></li><li><a href="http://queue.acm.org/detail.cfm?id=1142044">The Rise and Fall of CORBA - ACM Queue</a></li><li><a href="https://en.wikipedia.org/wiki/Web_Services_Description_Language">https://en.wikipedia.org/wiki/Web_Services_Description_Language</a></li><li><a href="https://msdn.microsoft.com/en-us/library/ms973864.aspx">An Introduction to Microsoft .NET Remoting Framework | Microsoft Docs</a></li><li><a href="https://msdn.microsoft.com/en-us/library/bb985129.aspx">The Programmable Web: Web Services Provides Building Blocks for the Microsoft .NET Framework | Microsoft Docs</a></li></ul><hr><p>æœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œå’Œä»£ç å»æµæµªã€çš„åŸåˆ›æ–‡ç« ï¼Œæœ¬ç¯‡ä»…ä¾›å­¦ä¹ ä½¿ç”¨ï¼Œå°Šé‡åŸåˆ›</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/lgxzzz/article/details/120921461">https://blog.csdn.net/lgxzzz/article/details/120921461</a></p>]]></content>
      
      
      <categories>
          
          <category> RPC </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•™ç¨‹ </tag>
            
            <tag> RPC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MyBatisç¼“å­˜</title>
      <link href="/article/788b6b51.html"/>
      <url>/article/788b6b51.html</url>
      
        <content type="html"><![CDATA[<p>mybatisä¸­æä¾›æŸ¥è¯¢ç¼“å­˜ï¼Œç”¨äºå‡è½»æ•°æ®åº“çš„å‹åŠ›ï¼Œæé«˜æ•°æ®åº“çš„æ€§èƒ½ã€‚</p><hr><h1 id="MyBtaisç¼“å­˜"><a href="#MyBtaisç¼“å­˜" class="headerlink" title="MyBtaisç¼“å­˜"></a>MyBtaisç¼“å­˜</h1><h2 id="ä»‹ç»ï¼š"><a href="#ä»‹ç»ï¼š" class="headerlink" title="ä»‹ç»ï¼š"></a>ä»‹ç»ï¼š</h2><p>Mybatisçš„äºŒçº§ç¼“å­˜å…¶å®é»˜è®¤æ˜¯å¼€å¯çš„ï¼Œä½†æˆ‘ä»¬éœ€è¦æŒ‡å®šæ¯ä¸ªmapperçš„ç¼“å­˜ç­–ç•¥äºŒçº§ç¼“å­˜æ‰ä¼šç”Ÿæ•ˆï¼Œå¦‚ä½•ä¸é…ç½®ç¼“å­˜ç­–ç•¥äºŒçº§ç¼“å­˜åˆ™ä¸ç”Ÿæ•ˆã€‚</p><h2 id="å¼€å¯äºŒçº§ç¼“å­˜ä¸é…ç½®ç¼“å­˜ç­–ç•¥ï¼š"><a href="#å¼€å¯äºŒçº§ç¼“å­˜ä¸é…ç½®ç¼“å­˜ç­–ç•¥ï¼š" class="headerlink" title="å¼€å¯äºŒçº§ç¼“å­˜ä¸é…ç½®ç¼“å­˜ç­–ç•¥ï¼š"></a>å¼€å¯äºŒçº§ç¼“å­˜ä¸é…ç½®ç¼“å­˜ç­–ç•¥ï¼š</h2><p><strong>å¼€å¯äºŒçº§ç¼“å­˜ï¼š</strong></p><p>é»˜è®¤æ˜¯å¼€å¯çš„</p><p>é¦–å…ˆåœ¨å…¨å±€é…ç½®æ–‡ä»¶ mybatis-configuration.xml æ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¼€å¯äºŒçº§ç¼“å­˜  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>é…ç½®ç¼“å­˜ç­–ç•¥ï¼š</strong></p><p>åœ¨Mybatisçš„æ˜ å°„Mapper XMLæ–‡ä»¶ä¸­è®¾ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼€å¯äºŒçº§ç¼“å­˜ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cache</span>&gt;</span><span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ° mapper.xml æ–‡ä»¶ä¸­å°±è¿™ä¹ˆä¸€ä¸ªç©ºæ ‡ç­¾<cache/>ï¼Œå…¶å®è¿™é‡Œå¯ä»¥é…ç½®<cache type="org.apache.ibatis.cache.impl.PerpetualCache"/>,PerpetualCacheè¿™ä¸ªç±»æ˜¯mybatisé»˜è®¤å®ç°ç¼“å­˜åŠŸèƒ½çš„ç±»ã€‚æˆ‘ä»¬ä¸å†™typeå°±ä½¿ç”¨mybatisé»˜è®¤çš„ç¼“å­˜ï¼Œä¹Ÿå¯ä»¥å»å®ç° Cache æ¥å£æ¥è‡ªå®šä¹‰ç¼“å­˜ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span>=<span class="string">&quot;org.apache.ibatis.cache.impl.PerpetualCache&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="æ‰§è¡Œè¿‡ç¨‹è®²è§£ï¼š"><a href="#æ‰§è¡Œè¿‡ç¨‹è®²è§£ï¼š" class="headerlink" title="æ‰§è¡Œè¿‡ç¨‹è®²è§£ï¼š"></a>æ‰§è¡Œè¿‡ç¨‹è®²è§£ï¼š</h2><h3 id="è¿è¡Œç¯å¢ƒï¼š"><a href="#è¿è¡Œç¯å¢ƒï¼š" class="headerlink" title="è¿è¡Œç¯å¢ƒï¼š"></a>è¿è¡Œç¯å¢ƒï¼š</h3><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥è¯å®MybtisäºŒçº§ç¼“å­˜æ˜¯é»˜è®¤å¼€å¯çš„ï¼Œæˆ‘ä»¬åªéœ€è¦é…ç½®ç¼“å­˜ç­–ç•¥å³å¯ä½¿ç”¨äºŒçº§ç¼“å­˜</p><p><strong>å¯åŠ¨ç±»ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            resourceAsStream = Resources.getResourceAsStream(<span class="string">&quot;SqlMapperConfig.xml&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; byId = mapper.findById(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        byId = mapper.findById(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><strong>mapperæ¥å£ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> <strong>mapperæ¥å£æ˜ å°„xmlï¼š</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.example.Dao.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--    è®¾ç½®äºŒçº§ç¼“å­˜ç­–ç•¥--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span>=<span class="string">&quot;org.apache.ibatis.cache.impl.PerpetualCache&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">cache</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        select * from user where id=#&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>MyBatisé…ç½®æ–‡ä»¶ï¼š</strong></p><p>æ²¡æœ‰å»å¼€å¯äºŒçº§ç¼“å­˜</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    æ³¨æ„å…ˆåé¡ºåº--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é€šè¿‡propertiesæ ‡ç­¾ä½¿ç”¨propertiesæ–‡ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;jdbc.properties&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    è®¾ç½®UserMapperä¸­çš„ç±»å‹åˆ«å--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.example.domain.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;user&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®æ•°æ®æºç¯å¢ƒ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;dataSourceJDBC&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;dataSourceJDBC&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">transactionManager</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;driverClass&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;user&#125;&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--    é…ç½®æ˜ å°„æ–‡ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com.mapper/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="æ‰§è¡Œæµç¨‹ï¼š"><a href="#æ‰§è¡Œæµç¨‹ï¼š" class="headerlink" title="æ‰§è¡Œæµç¨‹ï¼š"></a>æ‰§è¡Œæµç¨‹ï¼š</h3><p>ç¬¬ä¸€æ¬¡æ‰§è¡Œmapper.findById(1);</p><p>ä»–ä¼šå…ˆå»è·å–ç¼“å­˜ä¸­çš„æ˜ å°„æ–¹æ³•ï¼Œå¦‚æœæœªè·å–åˆ°åˆ™è¿›è¡Œåˆ›å»ºï¼Œå¹¶å°†åˆ›å»ºçš„æ˜ å°„æ–¹æ³•å­˜å…¥ç¼“å­˜ä¸­</p><p><a href="https://imgtu.com/i/jAHS0K"><img src="https://s1.ax1x.com/2022/06/26/jAHS0K.jpg" alt="jAHS0K.jpg"></a></p><p><strong>æ‰§è¡Œexecute</strong>ï¼š</p><p>è¿è¡Œæ‰§è¡Œå™¨ï¼Œä¼šå…ˆåˆ¤æ–­å½“å‰ä¸ºä»€ä¹ˆç±»å‹çš„SQLï¼Œå¦‚æœä¸ºSELECTçš„sqlåˆä¼šåˆ†ä¸ºå¤šç»“æœç­‰ç­‰æ–¹æ³•ï¼Œè¿™ä¸ªä¸ºå¤šç»“æœçš„æŸ¥è¯¢sqlæ‰€ä»¥è¿è¡Œå¤šç»“æœæ‰§è¡Œæ–¹æ³•</p><p><a href="https://imgtu.com/i/jESdqH"><img src="https://s1.ax1x.com/2022/06/26/jESdqH.jpg" alt="jESdqH.jpg"></a></p><p><strong>è¿è¡Œå¤šç»“æœæ‰§è¡Œå™¨ï¼š</strong></p><p>åˆ¤æ–­å½“å‰æ–¹æ³•æ˜¯å¦æœ‰è¾¹ç•Œç´¢å¼•ï¼Œæ²¡æœ‰è¿›è¡ŒæŸ¥è¯¢</p><p><a href="https://imgtu.com/i/jEpbtI"><img src="https://s1.ax1x.com/2022/06/26/jEpbtI.jpg" alt="jEpbtI.jpg"></a></p><p><strong>SelectListæŸ¥è¯¢æ–¹æ³•ï¼š</strong></p><p>å…ˆè·å–é…ç½®æ–‡ä»¶ä¸­çš„æ˜ å°„è¯­å¥ï¼Œå†è¿›è¡ŒqueryæŸ¥è¯¢</p><p><a href="https://imgtu.com/i/jEpqht"><img src="https://s1.ax1x.com/2022/06/26/jEpqht.jpg" alt="jEpqht.jpg"></a></p><p><strong>queryæŸ¥è¯¢æ–¹æ³•ï¼ˆCachingExecutorç±»ï¼‰é‡è½½æ–¹æ³•ï¼š</strong></p><p>é€šè¿‡æ˜ å°„è¯­å¥MappedStatementè·å–SQL,å†è¿›è¡Œå…¶ä»–çš„ä¸€äº›å‚æ•°ç”Ÿæˆä¸€ä¸ªkeyä¹‹åç”¨æ¥è·å–ç¼“å­˜ä¸­çš„ç»“æœå€¼</p><p><a href="https://imgtu.com/i/jEpT7d"><img src="https://s1.ax1x.com/2022/06/26/jEpT7d.jpg" alt="jEpT7d.jpg"></a></p><p><strong>queryæ–¹æ³•ï¼ˆCachingExecutorç±»ï¼‰é‡è½½æ–¹æ³•ï¼š</strong></p><p>åˆ¤æ–­æ˜¯å¦å¼€å¯äº†äºŒçº§ç¼“å­˜ï¼Œæ²¡æœ‰äºŒçº§ç¼“å­˜åˆ™è¿›è¡Œä¸€çº§ç¼“å­˜çš„æŸ¥è¯¢ï¼Œä¸€çº§ç¼“å­˜è¿˜ä¼šè¿›è¡Œæœ¬åœ°ç¼“å­˜çš„ä¸€ä¸ªè·å–ï¼Œæ²¡æœ‰æ‰è¿›è¡Œæ•°æ®åº“æŸ¥è¯¢</p><p>å¦‚æœå¼€å¯äº†äºŒçº§ç¼“å­˜ï¼Œåˆ™è¿›è¡ŒäºŒçº§çš„ä¸€ä¸ªæŸ¥è¯¢ï¼Œå¦‚æœæœ‰å°±è¿›è¡Œè¿”å›ç»“æœï¼Œå¹¶å°†ç»“æœåŠ å…¥åˆ°äºŒçº§ç¼“å­˜ï¼Œæ²¡æœ‰è¿˜æ˜¯è¿›è¡Œä¸€ä¸ªä¸€çº§ç¼“å­˜çš„æŸ¥è¯¢</p><p><a href="https://imgtu.com/i/jEpHAA"><img src="https://s1.ax1x.com/2022/06/26/jEpHAA.jpg" alt="jEpHAA.jpg"></a></p><p><strong>ä¸€çº§ç¼“å­˜å…ˆæ˜¯è¿›è¡Œä¸€ä¸ªæœ¬åœ°ç¼“å­˜çš„æŸ¥è¯¢ï¼Œå¦‚æœæœ¬åœ°ç¼“å­˜æ²¡æœ‰æ•°æ®å°±è¿›è¡Œæ•°æ®åº“æŸ¥è¯¢ï¼ŒæŸ¥è¯¢åä¼šæ”¾å…¥æœ¬åœ°ç¼“å­˜</strong></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•™ç¨‹ </tag>
            
            <tag> java </tag>
            
            <tag> ç¼“å­˜åŸç† </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé“¾å¼è°ƒç”¨</title>
      <link href="/article/f29ac09e.html"/>
      <url>/article/f29ac09e.html</url>
      
        <content type="html"><![CDATA[<p>å‰è¨€ï¼š<br>é€šä¿—æ˜“æ‡‚çš„Javaé“¾å¼è°ƒç”¨è®²è§£</p><hr><p>ä¹‹å‰æ¥å…¥æ”¯ä»˜å®æ”¯ä»˜æ¥å£çš„æ—¶å€™ï¼Œçœ‹åˆ°æ”¯ä»˜å®æä¾›çš„demoä¸­æœ‰è¿™ä¹ˆä¸€æ®µä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºæ‰«ç æ”¯ä»˜è¯·æ±‚builderï¼Œè®¾ç½®è¯·æ±‚å‚æ•°</span></span><br><span class="line">        <span class="type">AlipayTradePrecreateRequestBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AlipayTradePrecreateRequestBuilder</span>()</span><br><span class="line">            .setSubject(subject)<span class="comment">//è®¢å•ä¸»é¢˜</span></span><br><span class="line">            .setTotalAmount(totalAmount)<span class="comment">//è®¢å•æ€»é‡‘é¢ï¼Œå•ä½ä¸ºå…ƒ</span></span><br><span class="line">            .setOutTradeNo(outTradeNo)<span class="comment">//è®¢å•å·</span></span><br><span class="line">            .setUndiscountableAmount(undiscountableAmount)<span class="comment">//é»˜è®¤0.0</span></span><br><span class="line">            .setSellerId(sellerId)<span class="comment">//å–å®¶æ”¯ä»˜å®è´¦å·ID</span></span><br><span class="line">            .setBody(body)<span class="comment">//è®¢å•æè¿°</span></span><br><span class="line">            .setOperatorId(operatorId)<span class="comment">//å•†æˆ·æ“ä½œå‘˜ç¼–å· 13688889999</span></span><br><span class="line">            .setStoreId(storeId)<span class="comment">//å•†æˆ·é—¨åº—ç¼–å·</span></span><br><span class="line">            .setExtendParams(extendParams)<span class="comment">//ä¸šåŠ¡æ‰©å±•å‚æ•°</span></span><br><span class="line">            .setTimeoutExpress(timeoutExpress)<span class="comment">//æ”¯ä»˜è¶…æ—¶</span></span><br><span class="line">            .setNotifyUrl(<span class="string">&quot;http://www.test-notify-url.com&quot;</span>)<span class="comment">//æ”¯ä»˜å®æœåŠ¡å™¨ä¸»åŠ¨é€šçŸ¥å•†æˆ·æœåŠ¡å™¨é‡Œ</span></span><br><span class="line">               <span class="comment">//æŒ‡å®šçš„é¡µé¢httpè·¯å¾„,æ ¹æ®éœ€è¦è®¾ç½®</span></span><br><span class="line">            .setGoodsDetailList(goodsDetailList);<span class="comment">//å•†å“æ˜ç»†åˆ—è¡¨</span></span><br><span class="line"><span class="number">123456789101112131415</span></span><br></pre></td></tr></table></figure><p>å½“æ—¶åœ¨å¼€å‘æ²¡é¡¾å¾—ä¸Šå»äº†è§£ï¼Œç°åœ¨é—²äº†ä¸€ç‚¹ï¼Œåœ¨çœ‹<a href="https://so.csdn.net/so/search?q=è®¾è®¡æ¨¡å¼&amp;spm=1001.2101.3001.7020">è®¾è®¡æ¨¡å¼</a>ï¼Œä»Šå¤©çœ‹åˆ°å»ºé€ è€…æ¨¡å¼ï¼Œçœ‹åˆ°ä»£ç å½¢æ€æ˜¯å·®ä¸å¤šçš„ï¼Œæ‰çŸ¥é“è¿™javaé“¾å¼è°ƒç”¨ã€‚<br>åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ç”¨ä»£ç æ¥ä»‹ç»javaé“¾å¼è°ƒç”¨ã€‚</p><p>ä¸€èˆ¬ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºjavaBeançš„æ—¶å€™ï¼Œé‡‡ç”¨çš„æ˜¯newå…³é”®å­—æ¥åˆ›å»ºçš„ï¼Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Computer</span> <span class="variable">computer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Computer</span>();</span><br><span class="line">computer.setCPU(<span class="string">&quot;inter-i5&quot;</span>);</span><br><span class="line">computer.setGPU(<span class="string">&quot;GTX-960&quot;</span>);</span><br><span class="line">computer.setMemoryType(<span class="string">&quot;ddr3 1666MHz&quot;</span>);</span><br><span class="line">computer.setMemorySize(<span class="number">8</span>);</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure><p>è€Œé‡‡ç”¨é“¾å¼è°ƒç”¨çš„å†™æ³•çš„è¯ï¼Œåˆ™æ˜¯ä¸ä¸€æ ·çš„é£æ ¼ï¼Œè¿™ç§é£æ ¼æ›´é€‚åˆäººç±»çš„æ€ç»´ï¼Œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Computer</span> <span class="variable">computer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Computer</span>.Builder()</span><br><span class="line">        .setCPU(<span class="string">&quot;inter-skylake-i7&quot;</span>)</span><br><span class="line">        .setGPU(<span class="string">&quot;GTX-Titan&quot;</span>)</span><br><span class="line">        .setMemoryType(<span class="string">&quot;ddr4-2133MHz&quot;</span>)</span><br><span class="line">        .setMemorySize(<span class="number">16</span>)</span><br><span class="line">        .setStorageType(<span class="string">&quot;ssd&quot;</span>)</span><br><span class="line">        .setStorageSize(<span class="number">512</span>)</span><br><span class="line">        .setScreenType(<span class="string">&quot;IPS&quot;</span>)</span><br><span class="line">        .setScreenSize(<span class="number">28</span>)</span><br><span class="line">        .setOSType(<span class="string">&quot;Ubuntu/Window10&quot;</span>)</span><br><span class="line">        .create();</span><br><span class="line"><span class="number">1234567891011</span></span><br></pre></td></tr></table></figure><p>ä¸‹é¢å°±æ˜¯Computerçš„å†™æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Computer</span> &#123;</span><br><span class="line"><span class="keyword">private</span> String CPU;</span><br><span class="line"><span class="keyword">private</span> String GPU;</span><br><span class="line"><span class="keyword">private</span> String memoryType;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> memorySize;</span><br><span class="line"><span class="keyword">private</span> String storageType;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> storageSize;</span><br><span class="line"><span class="keyword">private</span> String screenType;</span><br><span class="line"><span class="keyword">private</span> <span class="type">float</span> screenSize;</span><br><span class="line"><span class="keyword">private</span> String OSType;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ„é€ æ–¹æ³•ç§æœ‰åŒ–</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> builder</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="title function_">Computer</span><span class="params">(Builder builder)</span> &#123;</span><br><span class="line">CPU = builder.CPU;</span><br><span class="line">GPU = builder.GPU;</span><br><span class="line">memoryType = builder.memoryType;</span><br><span class="line">memorySize = builder.memorySize;</span><br><span class="line">storageType = builder.storageType;</span><br><span class="line">storageSize = builder.storageSize;</span><br><span class="line">screenType = builder.screenType;</span><br><span class="line">screenSize = builder.screenSize;</span><br><span class="line">OSType = builder.OSType;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Builder</span> &#123;</span><br><span class="line"><span class="comment">// Optional parameters - initialize with default values</span></span><br><span class="line"><span class="keyword">private</span> String CPU;</span><br><span class="line"><span class="keyword">private</span> String GPU;</span><br><span class="line"><span class="keyword">private</span> String memoryType;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> memorySize;</span><br><span class="line"><span class="keyword">private</span> String storageType;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> storageSize;</span><br><span class="line"><span class="keyword">private</span> String screenType;</span><br><span class="line"><span class="keyword">private</span> <span class="type">float</span> screenSize;</span><br><span class="line"><span class="keyword">private</span> String OSType;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æä¾›è°ƒç”¨å…¥å£</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> niwei</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@time</span>   2018ä¸‹åˆ7:34:26</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> Computer <span class="title function_">create</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Computer</span>(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Builder</span><span class="params">()</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> Builder <span class="title function_">setCPU</span><span class="params">(String CPU)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.CPU = CPU;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> Builder <span class="title function_">setGPU</span><span class="params">(String GPU)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.GPU = GPU;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> Builder <span class="title function_">setMemoryType</span><span class="params">(String memoryType)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.memoryType = memoryType;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> Builder <span class="title function_">setMemorySize</span><span class="params">(<span class="type">int</span> memorySize)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.memorySize = memorySize;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> Builder <span class="title function_">setStorageType</span><span class="params">(String storageType)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.storageType = storageType;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> Builder <span class="title function_">setStorageSize</span><span class="params">(<span class="type">int</span> storageSize)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.storageSize = storageSize;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> Builder <span class="title function_">setScreenType</span><span class="params">(String screenType)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.screenType = screenType;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> Builder <span class="title function_">setScreenSize</span><span class="params">(<span class="type">float</span> screenSize)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.screenSize = screenSize;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> Builder <span class="title function_">setOSType</span><span class="params">(String OSType)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.OSType = OSType;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¡¥å……éƒ¨åˆ†ï¼š</p><p>å…ˆè¯´ä¸€ä¸‹è¿™ä¹ˆå†™çš„å¥½å¤„åœ¨äºä¸€æ–¹é¢å¯ä»¥å°½å¯èƒ½çš„å°‘å»ç±»å‹è½¬æ¢çš„åˆ¤å®šï¼Œè€Œä¸”å¤§å¤§å¢å¼ºäº†ä»£ç çš„é˜…è¯»æ€§ï¼Œä¹Ÿå°±æ˜¯æ›´ç¬¦åˆäººç±»é˜…è¯»çš„ä¹ æƒ¯ï¼ŒåŒæ—¶ä¹Ÿå‡å°‘äº†ä»£ç é‡ã€‚</p><p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªå°ä¾‹å­æ¥æ¼”ç¤ºä¸€ä¸‹é“¾å¼ç¼–ç¨‹ï¼š</p><p>public class LinkMan {</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String title;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é“¾å¼æ¥å£è°ƒç”¨æ—¶ï¼Œè¿”å›å€¼ç±»å‹å’Œlinkè¯¥å¯¹è±¡ç±»å‹ä¿æŒä¸€è‡´</span></span><br><span class="line"><span class="comment">//è¿”å›å€¼ç±»å‹ä¸ºLinkMan</span></span><br><span class="line"><span class="keyword">public</span> LinkMan <span class="title function_">setName</span><span class="params">(String name)</span>&#123;</span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> LinkMan <span class="title function_">setTitle</span><span class="params">(String title)</span>&#123;</span><br><span class="line"><span class="built_in">this</span>.title = title;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> LinkMan <span class="title function_">setAge</span><span class="params">(Integer age)</span>&#123;</span><br><span class="line"><span class="built_in">this</span>.age = age;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getTitle</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getAge</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;nameï¼š &quot;</span> + name + <span class="string">&quot; title: &quot;</span> + title + <span class="string">&quot; age: &quot;</span> + age;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒç”¨ä»£ç ç‰‡æ®µï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">LinkMan</span> <span class="variable">linkMan</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LinkMan</span>().setName(<span class="string">&quot;NIKE&quot;</span>).setTitle(<span class="string">&quot;æµ‹è¯•&quot;</span>).setAge(<span class="number">26</span>);</span><br><span class="line">System.out.println(linkMan.toString());</span><br><span class="line">System.out.println(linkMan.getName());</span><br></pre></td></tr></table></figure><p>è¾“å‡ºä¿¡æ¯ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">nameï¼š</span> <span class="string">NIKE title: æµ‹è¯•  age: 26</span></span><br><span class="line"><span class="attr">NIKE</span></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼šé“¾å¼è°ƒç”¨æœ‰ä¸ªç¼ºç‚¹ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒJavaBeanç±»ä¸­æ˜¯å†™getter/setterçš„ï¼Œå¯ä»¥ä½¿ç”¨ideå¿«é€Ÿç”Ÿæˆï¼Œè€Œé“¾å¼è°ƒç”¨éœ€è¦æ‰‹åŠ¨å†™setteréƒ¨åˆ†çš„ä»£ç ï¼ˆå¯ä»¥å…ˆç”¨ideç”Ÿæˆï¼Œç„¶åæ‰‹åŠ¨æ”¹ç›¸å…³çš„setteréƒ¨åˆ†ä»£ç ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æ¥å‡å°‘å·¥ä½œé‡ï¼‰ï¼Œä¸è¿‡åªè¦åœ¨Java Beanå†™å®Œä¸€æ¬¡ï¼Œåœ¨åˆ«çš„åœ°æ–¹è°ƒç”¨å°±æ–¹ä¾¿äº†å¾ˆå¤šï¼Œæœ‰å¾—æœ‰å¤±ï¼Œä»£ç ä¹‹é“å•Šï¼šï¼‰</p><hr><p>æœ¬æ–‡ä¸ºCSDNåšä¸»ã€ŒZmyCoderã€çš„åŸåˆ›æ–‡ç« ï¼Œæœ¬ç¯‡ä»…ä¾›å­¦ä¹ ä½¿ç”¨ï¼Œå°Šé‡åŸåˆ›</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/a14654/article/details/112216242">https://blog.csdn.net/a14654/article/details/112216242</a></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> æ•™ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLé”çš„ç†è§£</title>
      <link href="/article/b4bbe9af.html"/>
      <url>/article/b4bbe9af.html</url>
      
        <content type="html"><![CDATA[<p>å‰è¨€ï¼š<br>é”æ˜¯MySQLåœ¨æœåŠ¡å™¨å±‚å’Œå­˜å‚¨å¼•æ“å±‚çš„çš„å¹¶å‘æ§åˆ¶ã€‚åŠ é”æ˜¯æ¶ˆè€—èµ„æºçš„ï¼Œé”çš„å„ç§æ“ä½œï¼ŒåŒ…æ‹¬è·å¾—é”ã€æ£€æµ‹é”æ˜¯å¦å·²è§£é™¤ã€é‡Šæ”¾é”ç­‰ï¼Œéƒ½ä¼šå¢åŠ ç³»ç»Ÿçš„å¼€é”€ã€‚</p><hr><h1 id="é”çš„ç±»å‹"><a href="#é”çš„ç±»å‹" class="headerlink" title="é”çš„ç±»å‹"></a>é”çš„ç±»å‹</h1><p>InnoDBå®ç°äº†å¦‚ä¸‹ä¸¤ç§æ ‡å‡†çš„è¡Œçº§é”ï¼š</p><ul><li><strong>å…±äº«é”</strong>ï¼ˆS Lockï¼‰ï¼šå…è®¸äº‹åŠ¡å¯¹ä¸€æ¡è¡Œæ•°æ®è¿›è¡Œè¯»å–</li><li><strong>æ’ä»–é”</strong>ï¼ˆX Lockï¼‰ï¼šå…è®¸äº‹åŠ¡å¯¹ä¸€æ¡è¡Œæ•°æ®è¿›è¡Œåˆ é™¤æˆ–æ›´æ–°</li></ul><p>å¦‚æœä¸€ä¸ªäº‹åŠ¡T1å·²ç»è·å¾—äº†è¡Œrçš„å…±äº«é”ï¼Œ é‚£ä¹ˆå¦å¤–çš„äº‹åŠ¡T2å¯ä»¥ç«‹å³è·å¾—è¡Œrçš„å…±äº«é”ï¼Œ å› ä¸ºè¯»å–å¹¶æ²¡æœ‰æ”¹å˜è¡Œ r çš„æ•°æ®ï¼Œ ç§°è¿™ç§æƒ…å†µä¸º<strong>é”å…¼å®¹</strong> (Lock Compatible)ã€‚ ä½†è‹¥æœ‰å…¶ä»–çš„äº‹åŠ¡T3æƒ³è·å¾—è¡Œrçš„æ’ä»–é”ï¼Œ åˆ™å…¶å¿…é¡»ç­‰å¾…äº‹åŠ¡T1, T2é‡Šæ”¾è¡Œrä¸Šçš„å…±äº«é”â€”â€”è¿™ç§æƒ…å†µç§°ä¸º<strong>é”ä¸å…¼å®¹</strong>ã€‚å› ä¸ºè·å–æ’ä»–é”ä¸€èˆ¬æ˜¯ä¸ºäº†æ”¹å˜æ•°æ®ï¼Œæ‰€ä»¥ä¸èƒ½åŒæ—¶è¿›è¡Œè¯»å–æˆ–åˆ™å…¶ä»–å†™å…¥æ“ä½œã€‚</p><p>ä»ä¸Šè¡¨å¯ä»¥å‘ç°ï¼Œ<strong>Xé”ä¸ä»»ä½•é”éƒ½ä¸å…¼å®¹ï¼Œè€ŒSé”ä»…å’ŒSé”å…¼å®¹</strong>ã€‚</p><p>æ­¤å¤–ï¼Œ InnoDB å­˜å‚¨å¼•æ“æ”¯æŒå¤šç²’åº¦é”å®šï¼Œ è¿™ç§é”å®šå…è®¸äº‹åŠ¡åœ¨è¡Œçº§ä¸Šçš„é”å’Œè¡¨çº§ä¸Šçš„é”åŒæ—¶å­˜åœ¨ã€‚ä¸ºäº†æ”¯å¾…åœ¨ä¸åŒç²’åº¦ä¸Šè¿›è¡ŒåŠ é”æ“ä½œï¼Œ InnoDB å­˜å‚¨å¼•æ“æ”¯æŒ ä¸€ç§é¢å¤–çš„é”æ–¹å¼ï¼Œ ç§°ä¹‹ä¸º<strong>æ„å‘é”</strong> (Intention Lock)ã€‚æ„å‘é”æ˜¯å°†é”å®šçš„å¯¹è±¡åˆ†ä¸ºå¤šä¸ªå±‚æ¬¡ï¼Œ æ„å‘é”æ„å‘³ç€äº‹åŠ¡å¸Œæœ›åœ¨æ›´ç»†ç²’åº¦ä¸Šè¿›è¡ŒåŠ é”ã€‚</p><p>InnoDBå­˜å‚¨å¼•æ“æ”¯æŒæ„å‘é”è®¾è®¡æ¯”è¾ƒç®€ç»ƒï¼Œå…¶<strong>æ„å‘é”å³ä¸ºè¡¨çº§åˆ«çš„é”</strong>ã€‚è®¾è®¡ç›®çš„ä¸»è¦æ˜¯ä¸ºäº†åœ¨äº‹åŠ¡ä¸­æ­ç¤ºä¸‹ä¸€è¡Œå°†è¢«è¯·æ±‚çš„é”ç±»å‹ã€‚å…¶æ”¯æŒä¸¤ç§æ„å‘é”ï¼š</p><ul><li><strong>æ„å‘å…±äº«é”</strong>ï¼ˆIS Lockï¼‰ï¼šäº‹åŠ¡æƒ³è¦è·å¾—ä¸€å¼ è¡¨ä¸­æŸå‡ è¡Œçš„å…±äº«é”</li><li><strong>æ„å‘æ’ä»–é”</strong>ï¼ˆIX Lockï¼‰ï¼šäº‹åŠ¡æƒ³è¦è·å¾—ä¸€å¼ è¡¨ä¸­æŸå‡ è¡Œçš„æ’ä»–é”</li></ul><p>ç”±äºInnoDBå­˜å‚¨å¼•æ“æ”¯æŒçš„æ˜¯è¡Œçº§åˆ«çš„é”ï¼Œå› æ­¤<strong>æ„å‘é”ä¸ä¼šé˜»å¡é™¤å…¨è¡¨æ‰«æä»¥å¤–çš„ä»»ä½•è¯·æ±‚</strong>ï¼Œå®ƒä»¬çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†è¡¨ç¤ºæ˜¯å¦æœ‰äººè¯·æ±‚é”å®šè¡¨ä¸­çš„æŸä¸€è¡Œæ•°æ®ã€‚</p><p>å¦‚æœæ²¡æœ‰æ„å‘é”ï¼Œå½“å·²ç»æœ‰äººä½¿ç”¨è¡Œé”å¯¹è¡¨ä¸­çš„æŸä¸€è¡Œè¿›è¡Œä¿®æ”¹æ—¶ï¼Œå¦‚æœå¦å¤–ä¸€ä¸ªè¯·æ±‚è¦å¯¹å…¨è¡¨è¿›è¡Œä¿®æ”¹ï¼Œé‚£ä¹ˆå°±éœ€è¦å¯¹æ‰€æœ‰çš„è¡Œæ˜¯å¦è¢«é”å®šè¿›è¡Œæ‰«æï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ•ˆç‡æ˜¯éå¸¸ä½çš„ï¼›ä¸è¿‡ï¼Œåœ¨å¼•å…¥æ„å‘é”ä¹‹åï¼Œå½“æœ‰äººä½¿ç”¨è¡Œé”å¯¹è¡¨ä¸­çš„æŸä¸€è¡Œè¿›è¡Œä¿®æ”¹ä¹‹å‰ï¼Œä¼šå…ˆä¸ºè¡¨æ·»åŠ æ„å‘äº’æ–¥é”ï¼ˆIXï¼‰ï¼Œå†ä¸ºè¡Œè®°å½•æ·»åŠ äº’æ–¥é”ï¼ˆXï¼‰ï¼Œåœ¨è¿™æ—¶å¦‚æœæœ‰äººå°è¯•å¯¹å…¨è¡¨è¿›è¡Œä¿®æ”¹å°±ä¸éœ€è¦åˆ¤æ–­è¡¨ä¸­çš„æ¯ä¸€è¡Œæ•°æ®æ˜¯å¦è¢«åŠ é”äº†ï¼Œåªéœ€è¦é€šè¿‡ç­‰å¾…æ„å‘äº’æ–¥é”è¢«é‡Šæ”¾å°±å¯ä»¥äº†ã€‚</p><p>æ•…è¡¨çº§æ„å‘é”å’Œè¡Œçº§é”çš„å…¼å®¹æ€§å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p><h1 id="é”çš„ç®—æ³•"><a href="#é”çš„ç®—æ³•" class="headerlink" title="é”çš„ç®—æ³•"></a>é”çš„ç®—æ³•</h1><p>InnoDBæœ‰ä¸‰ç§è¡Œé”çš„ç®—æ³•ï¼š</p><ul><li><p><strong>Record Lock</strong></p><p>ç®€å•è¯´å°±æ˜¯å•ä¸ªè¡Œè®°å½•ä¸ŠåŠ é”ï¼Œé˜²æ­¢äº‹åŠ¡é—´ä¿®æ”¹æˆ–åˆ é™¤æ•°æ®ã€‚Record Lockæ€»æ˜¯ä¼šå»é”ä½ç´¢å¼•è®°å½•ï¼Œå¦‚æœè¡¨å»ºç«‹çš„æ—¶å€™æ²¡æœ‰è®¾ç½®ä»»ä½•ä¸€ä¸ªç´¢å¼•ï¼ŒInnoDBå­˜å‚¨å¼•æ“ä¼šä½¿ç”¨éšå¼çš„ä¸»é”®æ¥è¿›è¡Œé”å®šã€‚</p></li><li><p><strong>Gap Lock</strong></p><p>é—´éš™é”ï¼Œè¡¨ç¤ºåªé”ä½ä¸€æ®µèŒƒå›´ï¼Œ<strong>ä¸é”è®°å½•æœ¬èº«</strong>ï¼Œé€šå¸¸è¡¨ç¤ºä¸¤ä¸ªç´¢å¼•è®°å½•ä¹‹é—´ï¼Œæˆ–è€…ç´¢å¼•ä¸Šçš„ç¬¬ä¸€æ¡è®°å½•ä¹‹å‰ï¼Œæˆ–è€…æœ€åä¸€æ¡è®°å½•ä¹‹åçš„é”ã€‚</p></li><li><p><strong>Next-Key Lock</strong></p><p>Gap Lock + Record Lockï¼Œé”å®šä¸€ä¸ªèŒƒå›´åŠé”å®šè®°å½•æœ¬èº«ã€‚ä¾‹å¦‚ä¸€ä¸ªç´¢å¼•æœ‰10, 11, 13, 20è¿™å››ä¸ªå€¼ï¼Œé‚£ä¹ˆè¯¥ç´¢å¼•å¯èƒ½è¢«Next-key Lockingçš„åŒºé—´ä¸º<code>(è´Ÿæ— ç©·, 10), (10, 11), (11, 13), (12, 20), (20, æ­£æ— ç©·)</code>ã€‚éœ€è¦ç†è§£ä¸€ç‚¹ï¼ŒInnoDBä¸­åŠ é”éƒ½æ˜¯ç»™æ‰€æœ‰è®°å½•ä¸€æ¡ä¸€æ¡åŠ é”ï¼Œå¹¶æ²¡æœ‰ä¸€ä¸ªç›´æ¥çš„èŒƒå›´å¯ä»¥ç›´æ¥é”ä½ï¼Œæ‰€ä»¥ä¼šç”Ÿæˆå¤šä¸ªåŒºé—´ã€‚</p></li></ul><p>MySQLé»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨RRçš„éš”ç¦»çº§åˆ«ï¼Œè€Œ<strong>Next-key Lockæ­£æ˜¯ä¸ºäº†è§£å†³RRéš”ç¦»çº§åˆ«ä¸‹çš„ä¸å¯é‡å¤è¯»é—®é¢˜å’Œå¹»è¯»é—®é¢˜</strong>ã€‚æ‰€è°“ä¸å¯é‡å¤è¯»å°±æ˜¯ä¸€ä¸ªäº‹åŠ¡å†…æ‰§è¡Œç›¸åŒçš„æŸ¥è¯¢ï¼Œä¼šçœ‹åˆ°ä¸åŒçš„è¡Œè®°å½•ï¼Œåœ¨RRéš”ç¦»çº§åˆ«ä¸‹è¿™æ˜¯ä¸å…è®¸çš„ã€‚</p><p>å‡è®¾ç´¢å¼•ä¸Šæœ‰è®°å½•<code>1ï¼Œ4ï¼Œ5ï¼Œ8ï¼Œ12</code>ï¼Œæˆ‘ä»¬æ‰§è¡Œç±»ä¼¼è¯­å¥<code>SELECT â€¦ WHERE col &gt; 10 FOR UPDATE</code>ã€‚å¦‚æœæˆ‘ä»¬ä¸åœ¨<code>(8, 12)</code>ä¹‹é—´åŠ ä¸ŠNext-key Lockï¼Œå¦å¤–ä¸€ä¸ªä¼šè¯å°±å¯èƒ½å‘å…¶ä¸­æ’å…¥ä¸€æ¡è®°å½•9ï¼Œå†æ‰§è¡Œä¸€æ¬¡ç›¸åŒçš„<code>SELECT ... FOR UPDATE</code>ï¼Œå°±ä¼šçœ‹åˆ°æ–°æ’å…¥çš„è®°å½•ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆMySQLæ’å…¥ä¸€æ¡è®°å½•æ—¶ï¼Œéœ€è¦åˆ¤æ–­ä¸‹ä¸€æ¡è®°å½•ä¸Šæ˜¯å¦åŠ é”äº†ï¼Œå¦‚æœåŠ é”å°±éœ€è¦ç­‰å¾…ã€‚</p><p><strong>InnoDBå¯¹è¡Œçš„æŸ¥è¯¢é»˜è®¤é‡‡ç”¨Next-keyç®—æ³•</strong>ã€‚ç„¶è€Œï¼Œ<strong>å½“æŸ¥è¯¢æ¡ä»¶ä¸ºç­‰å€¼æ—¶ï¼Œä¸”ç´¢å¼•æœ‰å”¯ä¸€å±æ€§æ—¶ï¼ˆå°±æ˜¯åªé”å®šä¸€æ¡è®°å½•ï¼‰ï¼ŒInnoDBå­˜å‚¨å¼•æ“ä¼šå¯¹Next-Key Lockè¿›è¡Œä¼˜åŒ–ï¼Œå°†å…¶é™çº§ä¸ºRecord Lock</strong>ï¼Œå³ä»…é”ä½ç´¢å¼•æœ¬èº«ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªèŒƒå›´ï¼Œå› ä¸ºæ­¤æ—¶ä¸ä¼šäº§ç”Ÿé‡å¤è¯»é—®é¢˜ã€‚</p><h1 id="é”è¯»å–"><a href="#é”è¯»å–" class="headerlink" title="é”è¯»å–"></a>é”è¯»å–</h1><blockquote><p><strong>ä¸€è‡´æ€§éé”å®šè¯»</strong>(consistent nonlocking read)æ˜¯æŒ‡InnoDBå­˜å‚¨å¼•æ“é€šè¿‡å¤šç‰ˆæœ¬æ§åˆ¶(MVCC)è¯»å–å½“å‰æ•°æ®åº“ä¸­è¡Œæ•°æ®çš„æ–¹å¼ã€‚å¦‚æœè¯»å–çš„è¡Œæ­£åœ¨æ‰§è¡ŒDELETEæˆ–UPDATEæ“ä½œï¼Œè¿™æ—¶è¯»å–æ“ä½œä¸ä¼šå› æ­¤å»ç­‰å¾…è¡Œä¸Šé”çš„é‡Šæ”¾ã€‚ç›¸ååœ°ï¼ŒInnoDBä¼šå»è¯»å–è¡Œçš„ä¸€ä¸ªå¿«ç…§ã€‚</p></blockquote><p><a href="https://imgtu.com/i/jJJdOK"><img src="https://s1.ax1x.com/2022/07/04/jJJdOK.jpg" alt="jJJdOK.jpg"></a></p><p>ä¸Šå›¾ç›´è§‚åœ°å±•ç°äº†InnoDBä¸€è‡´æ€§éé”å®šè¯»çš„æœºåˆ¶ã€‚ä¹‹æ‰€ä»¥ç§°å…¶ä¸ºéé”å®šè¯»ï¼Œæ˜¯å› ä¸ºä¸éœ€è¦ç­‰å¾…è¡Œä¸Šæ’ä»–é”çš„é‡Šæ”¾ã€‚å¿«ç…§æ•°æ®æ˜¯æŒ‡è¯¥è¡Œçš„ä¹‹å‰ç‰ˆæœ¬çš„æ•°æ®ï¼Œæ¯è¡Œè®°å½•å¯èƒ½æœ‰å¤šä¸ªç‰ˆæœ¬ï¼Œä¸€èˆ¬ç§°è¿™ç§æŠ€æœ¯ä¸º<strong>è¡Œå¤šç‰ˆæœ¬æŠ€æœ¯</strong>ã€‚ç”±æ­¤å¸¦æ¥çš„å¹¶å‘æ§åˆ¶ï¼Œç§°ä¹‹ä¸º<strong>å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶</strong>(Multi Version Concurrency Control, MVCC)ã€‚**InnoDBæ˜¯é€šè¿‡undo logæ¥å®ç°MVCCã€‚undo logæœ¬èº«ç”¨æ¥åœ¨äº‹åŠ¡ä¸­å›æ»šæ•°æ®ï¼Œå› æ­¤å¿«ç…§æ•°æ®æœ¬èº«æ˜¯æ²¡æœ‰é¢å¤–å¼€é”€ã€‚æ­¤å¤–ï¼Œè¯»å–å¿«ç…§æ•°æ®æ˜¯ä¸éœ€è¦ä¸Šé”çš„ï¼Œå› ä¸ºæ²¡æœ‰äº‹åŠ¡éœ€è¦å¯¹å†å²çš„æ•°æ®è¿›è¡Œä¿®æ”¹æ“ä½œã€‚</p><p><strong>ä¸€è‡´æ€§éé”å®šè¯»æ˜¯InnoDBé»˜è®¤çš„è¯»å–æ–¹å¼</strong>ï¼Œå³è¯»å–ä¸ä¼šå ç”¨å’Œç­‰å¾…è¡Œä¸Šçš„é”ã€‚ä½†æ˜¯å¹¶ä¸æ˜¯åœ¨æ¯ä¸ªäº‹åŠ¡éš”ç¦»çº§åˆ«ä¸‹éƒ½æ˜¯é‡‡ç”¨æ­¤ç§æ–¹å¼ã€‚æ­¤å¤–ï¼Œå³ä½¿éƒ½æ˜¯ä½¿ç”¨ä¸€è‡´æ€§éé”å®šè¯»ï¼Œä½†æ˜¯å¯¹äºå¿«ç…§æ•°æ®çš„å®šä¹‰ä¹Ÿå„ä¸ç›¸åŒã€‚</p><p>åœ¨äº‹åŠ¡éš”åˆ«READ COMMITTEDå’ŒREPEATABLE READä¸‹ï¼ŒInnoDBä½¿ç”¨ä¸€è‡´æ€§éé”å®šè¯»ã€‚ç„¶è€Œï¼Œå¯¹äºå¿«ç…§æ•°æ®çš„å®šä¹‰å´ä¸åŒã€‚</p><p>æˆ‘ä»¬ä¸‹é¢ä¸¾ä¸ªä¾‹å­æ¥è¯¦ç»†è¯´æ˜ä¸€ä¸‹ä¸Šè¿°çš„æƒ…å†µã€‚</p><p><a href="https://imgtu.com/i/jJJ0eO"><img src="https://s1.ax1x.com/2022/07/04/jJJ0eO.jpg" alt="jJJ0eO.jpg"></a></p><p>é¦–å…ˆåœ¨ä¼šè¯Aä¸­æ˜¾ç¤ºåœ°å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œç„¶åè¯»å–testè¡¨ä¸­çš„idä¸º1çš„æ•°æ®ï¼Œä½†æ˜¯äº‹åŠ¡å¹¶æ²¡æœ‰æäº¤ã€‚ä¸æ­¤åŒæ—¶ï¼Œåœ¨å¼€å¯å¦ä¸€ä¸ªä¼šè¯Bï¼Œå°†testè¡¨ä¸­idä¸º1çš„è®°å½•ä¿®æ”¹ä¸ºid=3ï¼Œä½†æ˜¯äº‹åŠ¡åŒæ ·ä¹Ÿæ²¡æœ‰æäº¤ï¼Œè¿™æ ·id=1çš„è¡Œå…¶å®åŠ äº†ä¸€ä¸ªæ’ä»–é”ã€‚</p><p>ç”±äºInnoDBåœ¨READ COMMITTEDå’ŒREPEATABLE READäº‹åŠ¡éš”ç¦»çº§åˆ«ä¸‹ä½¿ç”¨ä¸€è‡´æ€§éé”å®šè¯»ï¼Œè¿™æ—¶å¦‚æœä¼šè¯Aå†æ¬¡è¯»å–idä¸º1çš„è®°å½•ï¼Œä»ç„¶èƒ½å¤Ÿè¯»å–åˆ°ç›¸åŒçš„æ•°æ®ã€‚æ­¤æ—¶ï¼ŒREAD COMMITTEDå’ŒREPEATABLE READäº‹åŠ¡éš”ç¦»çº§åˆ«æ²¡æœ‰ä»»ä½•åŒºåˆ«ã€‚</p><p>å½“ä¼šè¯Bæäº¤äº‹åŠ¡åï¼Œä¼šè¯Aå†æ¬¡è¿è¡Œ<code>SELECT * FROM test WHERE id = 1</code>çš„SQLè¯­å¥æ—¶ï¼Œä¸¤ä¸ªäº‹åŠ¡éš”ç¦»çº§åˆ«ä¸‹å¾—åˆ°çš„ç»“æœå°±ä¸ä¸€æ ·äº†ï¼š</p><ul><li><strong>å¯¹äºREAD COMMITTEDçš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œå®ƒæ€»æ˜¯è¯»å–è¡Œçš„æœ€æ–°ç‰ˆæœ¬</strong>ï¼Œå¦‚æœè¡Œè¢«é”å®šäº†ï¼Œåˆ™è¯»å–è¯¥è¡Œç‰ˆæœ¬çš„æœ€æ–°ä¸€ä¸ªå¿«ç…§ã€‚å› ä¸ºä¼šè¯Bçš„äº‹åŠ¡å·²ç»æäº¤ï¼Œæ‰€ä»¥åœ¨è¯¥éš”ç¦»çº§åˆ«ä¸‹ä¸Šè¿°SQLè¯­å¥çš„ç»“æœé›†æ˜¯ç©ºçš„ã€‚</li><li><strong>å¯¹äºREPEATABLE READçš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œæ€»æ˜¯è¯»å–äº‹åŠ¡å¼€å§‹æ—¶çš„è¡Œæ•°æ®</strong>ï¼Œå› æ­¤ï¼Œåœ¨è¯¥éš”ç¦»çº§åˆ«ä¸‹ï¼Œä¸Šè¿°SQLè¯­å¥ä»ç„¶ä¼šè·å¾—ç›¸åŒçš„æ•°æ®ã€‚</li></ul><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå³äº‹åŠ¡çš„éš”ç¦»çº§åˆ«æ˜¯repeatable readæ¨¡å¼ä¸‹ï¼ŒInnoDBå­˜å‚¨å¼•æ“çš„SELECTæ“ä½œä½¿ç”¨çš„æ˜¯ä¸€è‡´æ€§éé”å®šè¯»ã€‚ä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç”¨æˆ·éœ€è¦æ˜¾ç¤ºçš„è¯»å–æ•°æ®æ“ä½œè¿›è¡ŒåŠ é”ä¿è¯æ•°æ®é€»è¾‘çš„ä¸€è‡´æ€§ã€‚</p><p>InnoDBæä¾›äº†ä¸¤ç§æ–¹å¼å®ç°ä¸€è‡´æ€§é”å®šè¯»ï¼š</p><ul><li><code>select â€¦ for udpate</code>ï¼Œå¯¹è¯»å–çš„è¡ŒåŠ äº†Xé”</li><li><code>select â€¦ lock in share mode</code>ï¼Œå¯¹è¯»å–çš„è¡ŒåŠ äº†Sé”</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»¥ä¸Šä¸¤ç§è¯­å¥å¿…é¡»åœ¨ä¸€ä¸ªäº‹åŠ¡å½“ä¸­ï¼Œå½“äº‹åŠ¡æäº¤äº†ï¼Œé”ä¹Ÿå°±é‡Šæ”¾äº†ã€‚</p><h1 id="é˜»å¡"><a href="#é˜»å¡" class="headerlink" title="é˜»å¡"></a>é˜»å¡</h1><blockquote><p>å› ä¸ºä¸åŒé”ä¹‹é—´çš„å…¼å®¹æ€§å…³ç³»ï¼Œæœ‰æ—¶å€™ä¸€ä¸ªäº‹åŠ¡ä¸­çš„é”éœ€è¦ç­‰å¾…å¦ä¸€ä¸ªäº‹åŠ¡ä¸­çš„é”é‡Šæ”¾å®ƒæ‰€å ç”¨çš„èµ„æºï¼Œè¿™å°±æ˜¯<strong>é˜»å¡</strong>ã€‚</p></blockquote><p>åœ¨InnoDBï¼Œå‚æ•°<code>innodb_lock_wait_timeout</code>ç”¨æ¥æ§åˆ¶ç­‰å¾…çš„æ—¶é—´ï¼Œ<code>innodb_rollback_on_timeout</code>ç”¨æ¥è®¾å®šæ˜¯å¦åœ¨ç­‰å¾…è¶…æ—¶åå›æ»šã€‚å‰è€…æ˜¯åŠ¨æ€çš„ï¼Œåè€…æ˜¯é™æ€çš„ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show variables like &#x27;innodb_lock_wait_timeout&#x27;\G;</span><br><span class="line">*************************** 1. row</span><br><span class="line">Variable_name: innodb_lock_wait_timeout</span><br><span class="line">Value: 50</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql&gt; show variables like &#x27;innodb_rollback_on_timeout&#x27;\G;</span><br><span class="line">1. row</span><br><span class="line">: innodb_rollback_on_timeout</span><br><span class="line">Value: OFF</span><br></pre></td></tr></table></figure><h1 id="æ­»é”"><a href="#æ­»é”" class="headerlink" title="æ­»é”"></a>æ­»é”</h1><p>æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› äº‰å¤ºèµ„æºè€Œé€ æˆçš„ä¸€ç§ç›¸äº’ç­‰å¾…çš„ç°è±¡ã€‚è‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œäº‹åŠ¡éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚</p><p>è§£å†³æ­»é”åšç®€å•çš„æ–¹æ³•å°±æ˜¯è¶…æ—¶ï¼Œå³å½“ä¸¤ä¸ªäº‹åŠ¡äº’ç›¸ç­‰å¾…æ—¶ï¼Œå½“ä¸€ä¸ªç­‰å¾…æ—¶é—´è¶…è¿‡äº†æŸä¸€é˜ˆå€¼ï¼Œå…¶ä¸­ä¸€ä¸ªäº‹åŠ¡è¿›è¡Œå›æ»šï¼Œå¦ä¸€ä¸ªç­‰å¾…çš„äº‹åŠ¡å°±èƒ½ç»§ç»­è¿›è¡Œã€‚</p><p>ä½†æ˜¯å¦‚æœè¶…æ—¶çš„äº‹åŠ¡æ‰€å æƒé‡æ¯”è¾ƒå¤§ï¼Œå¦‚äº‹åŠ¡æ›´æ–°äº†å¾ˆå¤šè¡Œï¼Œå ç”¨äº†è¾ƒå¤šçš„undo logï¼Œå›æ»šè¿™ä¸ªäº‹åŠ¡çš„æ—¶é—´ç›¸å¯¹äºå¦ä¸€ä¸ªäº‹åŠ¡æ‰€å ç”¨çš„æ—¶é—´å¯èƒ½ä¼šæ›´å¤šï¼Œå°±æ˜¾å¾—ä¸åˆé€‚äº†ã€‚</p><p>å› æ­¤ï¼Œé™¤äº†è¶…æ—¶æœºåˆ¶ï¼Œå½“å‰æ•°æ®åº“éƒ½æ™®éé‡‡ç”¨<strong>ç­‰å¾…å›¾</strong>ï¼ˆwait-for graphï¼‰çš„æ–¹å¼æ¥è¿›è¡Œæ­»é”æ£€æµ‹ã€‚</p><p>wait-for graphè¦æ±‚æ•°æ®åº“ä¿å­˜ä»¥ä¸‹ä¸¤ç§ä¿¡æ¯:</p><ul><li>é”çš„ä¿¡æ¯é“¾è¡¨</li><li>äº‹åŠ¡ç­‰å¾…é“¾è¡¨</li></ul><p>é€šè¿‡ä¸Šè¿°é“¾è¡¨å¯ä»¥æ„é€ å‡ºä¸€å¼ å›¾ï¼Œè€Œåœ¨è¿™ä¸ªå›¾ä¸­è‹¥å­˜åœ¨å›è·¯ï¼Œå°±ä»£è¡¨å­˜åœ¨æ­»é”ï¼Œå› æ­¤èµ„æºé—´ç›¸äº’å‘ç”Ÿç­‰å¾…ã€‚åœ¨ wait-for graphä¸­,äº‹åŠ¡ä¸ºå›¾ä¸­çš„èŠ‚ç‚¹ã€‚è€Œåœ¨å›¾ä¸­,äº‹åŠ¡T1æŒ‡å‘T2è¾¹çš„å®šä¹‰ä¸º:</p><ul><li>äº‹åŠ¡T1ç­‰å¾…äº‹åŠ¡T2æ‰€å ç”¨çš„èµ„æº</li><li>äº‹åŠ¡T1æœ€ç»ˆç­‰å¾…T2æ‰€å ç”¨çš„èµ„æº,ä¹Ÿå°±æ˜¯äº‹åŠ¡ä¹‹é—´åœ¨ç­‰å¾…ç›¸åŒçš„èµ„æº,è€Œäº‹åŠ¡T1å‘ç”Ÿåœ¨äº‹åŠ¡T2çš„åé¢</li></ul><p>æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p><p><a href="https://imgtu.com/i/jJJay6"><img src="https://s1.ax1x.com/2022/07/04/jJJay6.jpg" alt="jJJay6.jpg"></a></p><p>åœ¨ Transaction Wait Listsä¸­å¯ä»¥çœ‹åˆ°å…±æœ‰4ä¸ªäº‹åŠ¡t1ã€t2ã€t3ã€t4,æ•…åœ¨wait-for graphä¸­åº”æœ‰4ä¸ªèŠ‚ç‚¹ã€‚</p><p><a href="https://imgtu.com/i/jJJUQx"><img src="https://s1.ax1x.com/2022/07/04/jJJUQx.jpg" alt="jJJUQx.jpg"></a></p><p>é€šè¿‡ä¸Šå›¾å¯ä»¥å‘ç°å­˜åœ¨å›è·¯(t1,t2)ï¼Œå› æ­¤å­˜åœ¨æ­»é”ã€‚å¯ä»¥å‘ç°wait-for graphæ˜¯ä¸€ç§è¾ƒä¸ºä¸»åŠ¨çš„æ­»é”æ£€æµ‹æœºåˆ¶ï¼Œåœ¨æ¯ä¸ªäº‹åŠ¡è¯·æ±‚é”å¹¶å‘ç”Ÿç­‰å¾…æ—¶éƒ½ä¼šåˆ¤æ–­æ˜¯å¦å­˜åœ¨å›è·¯ï¼Œè‹¥å­˜åœ¨åˆ™æœ‰æ­»é”ï¼Œé€šå¸¸æ¥è¯´InnoDBå­˜å‚¨å¼•æ“é€‰æ‹©å›æ»šundoé‡æœ€å°çš„äº‹åŠ¡ã€‚</p><h1 id="InnoDBé”ç›¸å…³çŠ¶æ€æŸ¥è¯¢"><a href="#InnoDBé”ç›¸å…³çŠ¶æ€æŸ¥è¯¢" class="headerlink" title="InnoDBé”ç›¸å…³çŠ¶æ€æŸ¥è¯¢"></a>InnoDBé”ç›¸å…³çŠ¶æ€æŸ¥è¯¢</h1><p>ç”¨æˆ·å¯ä»¥ä½¿ç”¨<code>INFOMATION_SCHEMA</code>åº“ä¸‹çš„<code>INNODB_TRX</code>ã€<code>INNODB_LOCKS</code>å’Œ<code>INNODB_LOCK_WAITS</code>è¡¨æ¥ç›‘æ§å½“å‰äº‹åŠ¡å¹¶åˆ†æå¯èƒ½å‡ºç°çš„é”é—®é¢˜ã€‚çš„å…³é”®å­—æ®µå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM information_schema.INNODB_TRX\G;</span><br><span class="line">************************************* 1.row *********************************************</span><br><span class="line">trx_id: 7311F4</span><br><span class="line">trx_state: LOCK WAIT</span><br><span class="line">trx_started: 2010-01-04 10:49:33</span><br><span class="line">trx_requested_lock_id: 7311F4:96:3:2</span><br><span class="line">trx_wait_started: 2010-01-04 10:49:33</span><br><span class="line">trx_weight: 2</span><br><span class="line">trx_mysql_thread_id: 471719</span><br><span class="line">trx_query: select * from parent lock in share mode</span><br></pre></td></tr></table></figure><p>è¡¨åªèƒ½æ˜¾ç¤ºå½“å‰è¿è¡Œçš„InnoDBäº‹åŠ¡ï¼Œå¹¶ä¸èƒ½ç›´æ¥åˆ¤æ–­é”çš„ä¸€äº›æƒ…å†µã€‚å¦‚æœéœ€è¦æŸ¥çœ‹é”ï¼Œåˆ™è¿˜éœ€è¦è®¿é—®è¡¨ï¼Œè¯¥è¡¨çš„å…³é”®å­—æ®µç»„æˆå¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM.INNODB_LOCKS\G;</span><br><span class="line">1. row</span><br><span class="line">lock_id: 16219:56:4:5</span><br><span class="line">lock_trx_id: 16219</span><br><span class="line">lock_mode: X,GAP</span><br><span class="line">lock_type: RECORD</span><br><span class="line">lock_table: `test`.`z`</span><br><span class="line">lock_index: b</span><br><span class="line">lock_space: 56</span><br><span class="line">lock_page: 4</span><br><span class="line">lock_rec: 5</span><br><span class="line">lock_data: 6, 7</span><br><span class="line">2. row</span><br><span class="line">lock_id: 16218:56:4:5</span><br><span class="line">: 16218</span><br><span class="line">lock_mode: X,GAP</span><br><span class="line">lock_type: RECORD</span><br><span class="line">lock_table: `test`.`z`</span><br><span class="line">lock_index: b</span><br><span class="line">lock_space: 56</span><br><span class="line">lock_page: 4</span><br><span class="line">lock_rec: 5</span><br><span class="line">lock_data: 6, 7</span><br><span class="line">2 rows in set, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¡¨INNODB_LOCKSæŸ¥çœ‹æ¯å¼ è¡¨ä¸Šé”çš„æƒ…å†µåï¼Œç”¨æˆ·å°±å¯ä»¥æ¥åˆ¤æ–­ç”±æ­¤å¼•å‘çš„ç­‰å¾…æƒ…å†µã€‚å½“æ—¶å½“äº‹åŠ¡é‡éå¸¸å¤§ï¼Œå…¶ä¸­é”å’Œç­‰å¾…ä¹Ÿæ—¶å¸¸å‘ç”Ÿï¼Œè¿™ä¸ªæ—¶å€™å°±ä¸é‚£ä¹ˆå®¹æ˜“åˆ¤æ–­ã€‚ä½†æ˜¯é€šè¿‡è¡¨INNODB_LOCK_WAITSï¼Œå¯ä»¥å¾ˆç›´è§‚çš„ååº”å½“å‰äº‹åŠ¡çš„ç­‰å¾…ã€‚è¡¨INNODB_LOCK_WAITSç”±å››ä¸ªå­—æ®µç»„æˆï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM.INNODB_LOCK_WAITS\G;</span><br><span class="line">*******************************************1.row************************************</span><br><span class="line">requesting_trx_id: 7311F4</span><br><span class="line">requesting_lock_id: 7311F4:96:3:2</span><br><span class="line">blocking_trx_id: 730FEE</span><br><span class="line">blocking_lock_id: 730FEE:96:3:2</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šè¿°çš„SQLè¯­å¥ï¼Œç”¨æˆ·å¯ä»¥æ¸…æ¥šç›´è§‚åœ°çœ‹åˆ°å“ªä¸ªäº‹åŠ¡é˜»å¡äº†å¦ä¸€ä¸ªäº‹åŠ¡ï¼Œç„¶åä½¿ç”¨ä¸Šè¿°çš„äº‹åŠ¡IDå’Œé”IDï¼Œå»INNODB_TRXå’ŒINNDOB_LOCKSè¡¨ä¸­æŸ¥çœ‹æ›´åŠ è¯¦ç»†çš„ä¿¡æ¯ã€‚</p><h1 id="é”çš„åº”ç”¨å®ä¾‹è§£æ"><a href="#é”çš„åº”ç”¨å®ä¾‹è§£æ" class="headerlink" title="é”çš„åº”ç”¨å®ä¾‹è§£æ"></a>é”çš„åº”ç”¨å®ä¾‹è§£æ</h1><p>æœ‰ä¸€ç‚¹éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼ŒMySQLæ€ä¹ˆä½¿ç”¨é”ï¼Œä¸äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€åˆ—ä¸Šçš„ç´¢å¼•çŠ¶å†µç­‰å¯†åˆ‡ç›¸å…³ã€‚å•æ‹å‡ºä¸€æ¡SQLè¯­å¥æ¥è®¨è®ºåŠ é”çš„æ–¹å¼ä»¥åŠèŒƒå›´è€Œä¸è€ƒè™‘ä½¿ç”¨åœºæ™¯ï¼Œéƒ½æ˜¯è€æµæ°“çš„è¡Œä¸ºã€‚</p><p>ä¸‹é¢å°±ä¸åŒåœºæ™¯ä¸‹é”çš„ä½¿ç”¨æƒ…å†µåšä¸€ä¸‹å¯¹æ¯”ï¼Œæ·±å…¥ç†è§£ä¸Šé¢çš„ç†è®ºçŸ¥è¯†ã€‚</p><h2 id="åœºæ™¯1ï¼šRRéš”ç¦»çº§åˆ«-ä¸»é”®ç´¢å¼•"><a href="#åœºæ™¯1ï¼šRRéš”ç¦»çº§åˆ«-ä¸»é”®ç´¢å¼•" class="headerlink" title="åœºæ™¯1ï¼šRRéš”ç¦»çº§åˆ«+ä¸»é”®ç´¢å¼•"></a>åœºæ™¯1ï¼šRRéš”ç¦»çº§åˆ«+ä¸»é”®ç´¢å¼•</h2><p>é¦–å…ˆæ ¹æ®å¦‚ä¸‹ä»£ç åˆ›å»ºæµ‹è¯•è¡¨tï¼Œç„¶åå¼€å¯ä¸¤ä¸ªäº‹åŠ¡è¿›è¡Œæ“ä½œã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table t(a int primary key);</span><br><span class="line">insert into t select 1;</span><br><span class="line">insert into t select 2;</span><br><span class="line">insert into t select 5;</span><br><span class="line">insert into t select 7;</span><br><span class="line">insert into t select 9;</span><br></pre></td></tr></table></figure><p>å¼€å¯äº‹åŠ¡1ï¼Œä¿æŒæœªæäº¤çš„çŠ¶æ€ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">begin;</span><br><span class="line">select * from t where a=5 for update;</span><br></pre></td></tr></table></figure><p>å¼€å¯äº‹åŠ¡2å¹¶æäº¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">begin;</span><br><span class="line">insert into t select 4;</span><br><span class="line">commit;</span><br></pre></td></tr></table></figure><p>è¡¨tå…±æœ‰1ã€2ã€5ã€7ã€9äº”ä¸ªå€¼ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œåœ¨äº‹åŠ¡1ä¸­é¦–å…ˆå¯¹<code>a=5</code>è¿›è¡ŒXé”å®šï¼Œè€Œç”±äºaæ˜¯ä¸»é”®ä¸”å”¯ä¸€ï¼Œå› æ­¤é”å®šçš„ä»…æ˜¯5è¿™ä¸ªå€¼ï¼Œè€Œä¸æ˜¯ï¼ˆ2,5ï¼‰è¿™ä¸ªèŒƒå›´ã€‚è¿™æ ·åœ¨äº‹åŠ¡2ä¸­æ’å…¥å€¼4è€Œä¸ä¼šé˜»å¡ï¼Œå¯ä»¥ç«‹å³æ’å…¥å¹¶è¿”å›ã€‚å³é”å®šç”±Next-key Lockç®—æ³•é™çº§ä¸ºRecord Lockï¼Œä»è€Œæé«˜åº”ç”¨çš„å¹¶å‘æ€§ã€‚</p><p>éœ€è¦æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¯¹äºå”¯ä¸€é”®å€¼çš„é”å®šï¼Œ<strong>Next-Key Locké™çº§ä¸ºRecord Lockä»…å­˜åœ¨äºæŸ¥è¯¢æ‰€æœ‰çš„å”¯ä¸€ç´¢å¼•åˆ—</strong>ã€‚è‹¥å”¯ä¸€ç´¢å¼•ç”±å¤šä¸ªåˆ—ç»„æˆï¼Œè€ŒæŸ¥è¯¢ä»…æ˜¯æŸ¥æ‰¾å¤šä¸ªå”¯ä¸€ç´¢å¼•åˆ—ä¸­çš„å…¶ä¸­ä¸€ä¸ªï¼Œé‚£ä¹ˆæŸ¥è¯¢å…¶å®æ˜¯rangeç±»å‹æŸ¥è¯¢ï¼Œè€Œä¸æ˜¯constç±»å‹æŸ¥è¯¢ï¼Œæ•…InnoDBå­˜å‚¨å¼•æ“ä¾ç„¶ä½¿ç”¨Next-Key Lockè¿›è¡Œé”å®šã€‚</p><p>ä½†å¦‚æœå¯¹ä¸»é”®è¿›æ¥èŒƒå›´æŸ¥è¯¢æ—¶ï¼Œé”çš„èŒƒå›´æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">begin;</span><br><span class="line">select * from t where a&lt;=5 for update;</span><br></pre></td></tr></table></figure><p>é’ˆå¯¹ä¸‹é¢çš„sqlè¯­å¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into test.t select 6;</span><br><span class="line">insert into test.t select 8</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€æ¡ä¼šäº§ç”Ÿé”ç­‰å¾…ï¼Œè€Œç¬¬äºŒæ¡å¯ä»¥æ’å…¥æˆåŠŸã€‚</p><p>è¡¨tå…±æœ‰1ã€2ã€5ã€7ã€9äº”ä¸ªå€¼ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œåœ¨äº‹åŠ¡1ä¸­æ‰§è¡Œ<code>a&lt;=5</code>èŒƒå›´æŸ¥è¯¢æ—¶ï¼Œäº‹åŠ¡1åŠ é”èŒƒå›´æ˜¯<code>(è´Ÿæ— ç©·, 1)ã€(1, 2)ã€(2, 5)ã€(5, 7)</code>ï¼Œä¸”<code>1ã€2ã€5ã€7</code>è¿™å››æ¡è®°å½•ä¹Ÿéƒ½åŠ é”äº†ï¼Œä¹Ÿå°±æ˜¯è¯´å†æ’å…¥<code>&lt;=7</code>çš„è®°å½•éƒ½æ˜¯ä¼šäº§ç”Ÿé”ç­‰å¾…ï¼Œæ’å…¥è®°å½•8æ˜¯æˆåŠŸçš„ã€‚</p><p>é‚£ä¹ˆInnoDBå¦‚ä½•åˆ¤æ–­æ˜¯å¦å…è®¸æ’å…¥æ•°æ®å‘¢ï¼Ÿå¯¹äºæ™®é€šç´¢å¼•ï¼Œinsertçš„åŠ é”ç­–ç•¥æ˜¯ï¼šæŸ¥æ‰¾å°äºç­‰äº insert_rec çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œç„¶åæŸ¥çœ‹ç¬¬ä¸€æ¡è®°å½•çš„ä¸‹ä¸€ä¸ªè®°å½•æ˜¯å¦æœ‰Gapé”ï¼Œæœ‰åˆ™ç­‰å¾…ï¼Œæ²¡æœ‰åˆ™æ’å…¥ã€‚æ¯”å¦‚è¯´æˆ‘ä»¬æ’å…¥6è¿™æ¡è®°å½•ï¼Œé¦–å…ˆå®šä½<code>&lt;=6</code>çš„è®°å½•ï¼Œä¹Ÿå°±æ˜¯5ï¼Œç„¶åç¡®è®¤5çš„ä¸‹ä¸€æ¡è®°å½•æ˜¯å¦é”ä½äº†Gapï¼Œè¿™é‡Œä¹Ÿå°±æ˜¯7ï¼Œå½“7è¿™æ¡è®°å½•æœ‰é”æ˜¯ä»£è¡¨é”ä½çš„æ˜¯<code>(5, 7)</code>è¿™ä¸ªèŒƒå›´ï¼Œå°±ä¸å…è®¸æ’å…¥ï¼ˆä¼šç”³è¯·ä¸€æŠŠæ’å…¥æ„å‘é”ï¼‰ï¼Œä¿è¯äº†å¯é‡å¤è¯»ã€‚è¯æ˜äº†åœ¨RRéš”ç¦»çº§åˆ«ä¸‹ä½¿ç”¨äº†Next-key Lockæ¥ä¿è¯å…¶â€œå¯é‡å¤è¯»â€çš„ç‰¹æ€§ã€‚å¦‚æœæ²¡æœ‰é”å°±ç›´æ¥æ’å…¥å³å¯ã€‚</p><p>ä½†æ˜¯å¦‚æœæ’å…¥çš„è®°å½•æœ‰å”¯ä¸€çº¦æŸæ—¶ï¼Œåªåˆ¤æ–­ä¸‹ä¸€æ¡è®°å½•æ˜¯å¦é”ä½äº†Gapå°±ä¸è¡Œäº†ï¼Œæ˜¾ç„¶ä¼šæ’å…¥é‡å¤æ•°æ®ç ´åå”¯ä¸€æ€§ã€‚è¿™æ—¶è¿˜ä¼šæŠŠæ’å…¥çš„è®°å½•ä¸å‰ä¸€æ¡æ•°æ®è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç›¸åŒåˆ™ç»™æ’å…¥è®°å½•çš„å‰ä¸€æ¡è®°å½•åŠ S Lockï¼ˆlock in share modeï¼‰ï¼ŒåŠ é”æˆåŠŸåˆ™è¿”å›duplicate keyï¼Œå¦åˆ™ç­‰å¾…S Lockã€‚</p><p>è¿™ä¸ªåœ°æ–¹å¯èƒ½æœ‰äººä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼Œä¸ºä»€ä¹ˆMySQLåœ¨åŠ é”æ—¶ï¼Œä¸ç›´æ¥åŠ 5è¿™æ¡è®°å½•æœ¬èº«ä»¥åŠ&lt;5çš„è®°å½•å‘¢ï¼Ÿä¸ºä»€ä¹ˆè¿˜è¦ç»™åŠ é”å‘¢ï¼Ÿå› ä¸º(5, 7)åŠ ä¸åŠ é”å¹¶ä¸ä¼šå½±å“RRçº§åˆ«å¯é‡å¤è¯»çš„ç‰¹æ€§ã€‚å…¶å®è¿™å°±è·ŸB+æ ‘æœ‰å…³ç³»äº†ï¼Œé¦–å…ˆMySQLå®šä½åˆ°1è¿™æ¡è®°å½•å¹¶åŠ é”ï¼Œç„¶åé¡ºç€1å¾€åè¯»å–æ•°æ®å¹¶åŠ é”ï¼Œç›´åˆ°è¯»å–åˆ°ç¬¬ä¸€æ¡ä¸åŒ¹é…æ•°æ®æ‰èƒ½ç¡®å®šæ˜¯å¦åœæ­¢ç»§ç»­è¯»å–æ•°æ®ï¼Œè€Œåœ¨RRéš”ç¦»çº§åˆ«ä¸‹åªè¦è¢«è¯»åˆ°çš„æ•°æ®éƒ½éœ€è¦è¿›è¡ŒåŠ é”ã€‚å¦‚æœæŸ¥è¯¢æ¡ä»¶æ˜¯&lt;5ï¼Œé‚£ä¹ˆåŠ é”åªä¼šåŠ åˆ°5è¿™æ¡è®°å½•ä¸ºæ­¢ã€‚</p><p>å¦‚æœæ˜¯åœ¨RCéš”ç¦»çº§åˆ«ä¸‹ï¼Œåªä¼šå¯¹ç¬¦åˆæ¡ä»¶çš„è®°å½•è¿›è¡ŒåŠ è®°å½•é”ï¼Œä¸ä¼šå¯¹æ»¡è¶³æ¡ä»¶çš„ä¸‹ä¸€æ¡è®°å½•è¿›è¡ŒåŠ é”ã€‚</p><h2 id="åœºæ™¯2ï¼šRRéš”ç¦»çº§åˆ«-æ™®é€šç´¢å¼•"><a href="#åœºæ™¯2ï¼šRRéš”ç¦»çº§åˆ«-æ™®é€šç´¢å¼•" class="headerlink" title="åœºæ™¯2ï¼šRRéš”ç¦»çº§åˆ«+æ™®é€šç´¢å¼•"></a>åœºæ™¯2ï¼šRRéš”ç¦»çº§åˆ«+æ™®é€šç´¢å¼•</h2><p>æ­£å¦‚ä¸Šé¢æ‰€ä»‹ç»çš„ï¼ŒNext-Key Locké™çº§ä¸ºRecord Lockä»…åœ¨æŸ¥è¯¢çš„åˆ—æ˜¯å”¯ä¸€ç´¢å¼•ä¸”æ¡ä»¶ä¸ºç­‰å€¼æŸ¥è¯¢çš„æƒ…å†µä¸‹ã€‚è‹¥æ˜¯è¾…åŠ©ç´¢å¼•ï¼Œåˆ™æƒ…å†µä¼šå®Œå…¨ä¸åŒï¼Œ</p><p>é¦–å…ˆæ ¹æ®å¦‚ä¸‹ä»£ç åˆ›å»ºæµ‹è¯•è¡¨zï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table z(id int primary key,b int,index(b));</span><br><span class="line">insert into z values(1,1);</span><br><span class="line">insert into z values(3,1);</span><br><span class="line">insert into z values(5,3);</span><br><span class="line">insert into z values(7,6);</span><br><span class="line">insert into z values(10,8);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">begin;</span><br><span class="line">select * from z where b=3 for update;</span><br></pre></td></tr></table></figure><p>è¿™æ—¶SQLè¯­å¥é€šè¿‡ç´¢å¼•åˆ—bè¿›è¡ŒæŸ¥è¯¢ï¼Œå› æ­¤å…¶ä½¿ç”¨ä¼ ç»Ÿçš„Next-key LockingæŠ€æœ¯åŠ é”ï¼Œå¹¶ä¸”ç”±äºæœ‰ä¸¤ä¸ªç´¢å¼•ï¼Œå…¶éœ€è¦åˆ†åˆ«è¿›è¡Œé”å®šã€‚å¯¹äºèšé›†ç´¢å¼•ï¼Œå…¶ä»…å¯¹åˆ—idç­‰äº5çš„ç´¢å¼•åŠ ä¸ŠRecord Lockã€‚é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆä¸»é”®ç´¢å¼•ä¸Šçš„è®°å½•ä¹Ÿè¦åŠ é”å‘¢ï¼Ÿå› ä¸ºæœ‰å¯èƒ½å…¶ä»–äº‹åŠ¡ä¼šæ ¹æ®ä¸»é”®å¯¹ z è¡¨è¿›è¡Œæ›´æ–°ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœä¸»é”®ç´¢å¼•æ²¡æœ‰åŠ é”ï¼Œé‚£ä¹ˆæ˜¾ç„¶ä¼šå­˜åœ¨å¹¶å‘é—®é¢˜ã€‚</p><p>è€Œå¯¹äºè¾…åŠ©ç´¢å¼•ï¼Œå…¶åŠ ä¸Šçš„æ˜¯Next-key Lockï¼Œé”å®šçš„èŒƒå›´æ˜¯ï¼ˆ1, 3ï¼‰ï¼Œç‰¹åˆ«éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒInnoDBå­˜å‚¨å¼•æ“è¿˜ä¼šå¯¹è¾…åŠ©ç´¢å¼•ä¸‹ä¸€ä¸ªé”®å€¼åŠ ä¸ŠGap lockï¼Œå³è¿˜æœ‰ä¸€ä¸ªè¾…åŠ©ç´¢å¼•èŒƒå›´ä¸ºï¼ˆ3, 6ï¼‰çš„é”ã€‚</p><p>æ­¤æ—¶ï¼Œè‹¥åœ¨æ–°çš„äº‹åŠ¡2ä¸­è¿è¡Œä¸‹é¢çš„SQLè¯­å¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">select * from z where id=5 lock in share mode;</span><br><span class="line">insert into z select 2,1;</span><br><span class="line">insert into z select 4,2;</span><br><span class="line">insert into z select 6,6;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªSQLè¯­å¥ï¼Œåœ¨äº‹åŠ¡1ä¸­æ‰§è¡Œçš„SQLè¯­å¥å·²ç»å¯¹èšé›†ç´¢å¼•ä¸­çš„åˆ—â€œa=5â€çš„å€¼åŠ ä¸ŠXé”ï¼Œå› æ­¤æ‰§è¡Œä¼šè¢«é˜»å¡ã€‚</p><p>ç¬¬äºŒSQLè¯­å¥ï¼Œä¸»é”®æ’å…¥2ï¼Œæ²¡æœ‰é—®é¢˜ï¼Œæ’å…¥çš„è¾…åŠ©ç´¢å¼•å€¼1ä¹Ÿä¸åœ¨é”å®šçš„èŒƒå›´ï¼ˆ1,3ï¼‰ä¸­ï¼Œå› æ­¤å¯ä»¥æ‰§è¡ŒæˆåŠŸã€‚</p><p>ç¬¬ä¸‰ä¸ªSQLè¯­å¥ï¼Œä¸»é”®æ’å…¥4ï¼Œæ²¡æœ‰é—®é¢˜ï¼Œæ’å…¥çš„è¾…åŠ©ç´¢å¼•å€¼2åœ¨é”å®šçš„èŒƒå›´ï¼ˆ1,3ï¼‰ä¸­ï¼Œå› æ­¤æ‰§è¡Œä¼šè¢«é˜»å¡ã€‚</p><p>ç¬¬å››ä¸ªSQLè¯­å¥ï¼Œæ’å…¥çš„ä¸»é”®6æ²¡æœ‰è¢«é”å®šï¼Œ6ä¹Ÿä¸åœ¨èŒƒå›´ï¼ˆ1,3ï¼‰ä¹‹é—´ã€‚ä½†æ’å…¥çš„å€¼6åœ¨å¦ä¸€ä¸ªé”å®šçš„èŒƒå›´ï¼ˆ3,6ï¼‰ä¸­ï¼Œæ•…åŒæ ·éœ€è¦ç­‰å¾…ã€‚</p><p>åœ¨RRéš”ç¦»çº§åˆ«ä¸‹ï¼Œå¯¹äºINSERTçš„æ“ä½œï¼Œå…¶ä¼šæ£€æŸ¥æ’å…¥è®°å½•çš„ä¸‹ä¸€æ¡è®°å½•æ˜¯å¦è¢«é”å®šï¼Œè‹¥å·²ç»è¢«é”å®šï¼Œåˆ™ä¸å…è®¸æ“ä½œï¼Œä»è€Œé¿å…ä¸å¯é‡å¤è¯»é—®é¢˜ã€‚è€Œä¸‹é¢çš„SQLè¯­å¥ï¼Œä¸ä¼šè¢«é˜»å¡ï¼Œå¯ä»¥ç«‹å³æ‰§è¡Œï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert into z select 8,6;</span><br><span class="line">insert into z select 2,0;</span><br><span class="line">insert into z select 6,7;</span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„ä¾‹å­ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒGap Lockçš„ä½œç”¨æ˜¯ä¸ºäº†é˜»æ­¢å¤šä¸ªäº‹åŠ¡å°†è®°å½•æ’å…¥åˆ°åŒä¸€ä¸ªèŒƒå›´å†…ï¼Œè§£å†³â€œä¸å¯é‡å¤è¯»â€é—®é¢˜çš„äº§ç”Ÿã€‚ä¾‹å¦‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œäº‹åŠ¡1ä¸­ç”¨æˆ·å·²ç»é”å®šäº†b=3çš„è®°å½•ï¼Œè‹¥æ­¤æ—¶æ²¡æœ‰Gap Locké”å®š<code>(3, 6)</code>ï¼Œé‚£ä¹ˆç”¨æˆ·å¯ä»¥æ’å…¥ç´¢å¼•båˆ—ä¸º3çš„è®°å½•ï¼Œè¿™ä¼šå¯¼è‡´äº‹åŠ¡1ä¸­çš„ç”¨æˆ·å†æ¬¡æ‰§è¡ŒåŒæ ·çš„æŸ¥è¯¢æ—¶ä¼šè¿”å›ä¸åŒçš„è®°å½•ï¼Œå³äº§ç”Ÿä¸å¯é‡å¤è¯»é—®é¢˜ã€‚</p><p>è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜å€¼å¾—æ€è€ƒä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆæ’å…¥<code>(6, 6)</code>ä¸å…è®¸ï¼Œè€Œæ’å…¥<code>(8, 6)</code>æ˜¯å…è®¸çš„ã€‚è¿™è·ŸInnoDBç´¢å¼•ç»“æ„æœ‰å…³ç³»ï¼Œæˆ‘ä»¬çŸ¥é“äºŒçº§ç´¢å¼•æ˜¯æŒ‡å‘ä¸»é”®ï¼Œæ‰€ä»¥ç»“æ„å¦‚ï¼š<code>(1, 1), (1, 3), (3, 5), (6, 7), (8, 10)</code>ã€‚çœŸæ­£çš„Gapé”é”ä½çš„ä¹Ÿæ˜¯<code>((1, 1), (1, 3))</code>è¿™æ ·çš„ç»“æ„ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æ’å…¥<code>(6, 6)</code>æ—¶ï¼Œéœ€è¦æ’å…¥åˆ°<code>(3, 5), (6, 7)</code>ä¹‹é—´ï¼Œè¿™åŒºé—´è¢«é”ï¼Œæ‰€ä»¥æ— æ³•æ’å…¥ï¼›è€Œæˆ‘ä»¬æ’å…¥<code>(8, 6)</code>æ˜¯éœ€è¦æ’å…¥åˆ°<code>(6, 7), (8, 10)</code>ä¹‹é—´ï¼Œæ²¡æœ‰é”å­˜åœ¨ï¼Œæ‰€ä»¥å¯ä»¥æ’å…¥æˆåŠŸã€‚</p><p>å¦å¤–ï¼Œåœ¨RRéš”ç¦»çº§åˆ«ä¸‹ï¼Œæˆ‘ä»¬è®¿é—®æ¡ä»¶ä¸ºäºŒçº§ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œå°±ç®—è®¿é—®ä¸€æ¡ä¸å­˜åœ¨çš„è®°å½•åŒæ ·éœ€è¦åŠ Next-key Lokcsï¼Œæ¯”å¦‚æˆ‘ä»¬æŸ¥è¯¢</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from z where b=7 for update;</span><br></pre></td></tr></table></figure><p>InnoDBä¼šå¯¹(6, 8)è¿™ä¸ªåŒºé—´åŠ äº†Gap Lockï¼Œä¹Ÿå°±æ˜¯è¯´æ’å…¥è¿™ä¸ªåŒºé—´çš„æ•°æ®éƒ½ä¼šè¢«é˜»å¡ã€‚</p><p>è™½ç„¶åœ¨RRéš”ç¦»çº§åˆ«é»˜è®¤ä½¿ç”¨Gap Lockï¼Œä½†ç”¨æˆ·å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ¥æ˜¾å¼åœ°å…³é—­Gap Lockï¼š</p><ul><li>å°†äº‹åŠ¡çš„éš”ç¦»çº§åˆ«è®¾ç½®ä¸ºREAD COMMITTEDï¼›</li><li>å°†å‚æ•°<code>innodb_locks_unsafe_for_binlog</code>è®¾ç½®ä¸º1ï¼›</li></ul><p>å½“è®¾ç½®äº†ä¸Šè¿°å‚æ•°æˆ–éš”ç¦»çº§åˆ«è°ƒæ•´åˆ°<strong>READ COMMITTED</strong>æ—¶ï¼Œé™¤äº†å¤–é”®çº¦æŸå’Œå”¯ä¸€æ€§æ£€æŸ¥ï¼ˆduplicate keyï¼‰ä¾ç„¶éœ€è¦Gap Lockï¼Œå…¶ä½™æƒ…å†µä»…ä½¿ç”¨Record Lockè¿›è¡Œé”å®šã€‚ä½†éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œä¸Šè¿°è®¾ç½®ç ´åäº†äº‹åŠ¡çš„éš”ç¦»æ€§ï¼Œå¹¶ä¸”å¯¹äºMySQLå¤åˆ¶æ¥è¯´ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸»ä»æ•°æ®çš„ä¸ä¸€è‡´ã€‚è™½ç„¶MySQLç›®å‰é»˜è®¤éš”ç¦»çº§åˆ«æ˜¯RRï¼Œä½†æ˜¯åŸºæœ¬ç”Ÿäº§ç¯å¢ƒæ ‡é…åŸºæœ¬éƒ½æ˜¯RCéš”ç¦»çº§åˆ«+ROWæ ¼å¼ã€‚</p><h2 id="åœºæ™¯3ï¼šRCéš”ç¦»çº§åˆ«-ä¸»é”®ç´¢å¼•"><a href="#åœºæ™¯3ï¼šRCéš”ç¦»çº§åˆ«-ä¸»é”®ç´¢å¼•" class="headerlink" title="åœºæ™¯3ï¼šRCéš”ç¦»çº§åˆ«+ä¸»é”®ç´¢å¼•"></a>åœºæ™¯3ï¼šRCéš”ç¦»çº§åˆ«+ä¸»é”®ç´¢å¼•</h2><p>å°†äº‹åŠ¡éš”ç¦»çº§åˆ«åˆ‡ä¸ºRCï¼Œå¼€å¯äº‹åŠ¡1ï¼Œä¿æŒæœªæäº¤çš„çŠ¶æ€ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">begin;</span><br><span class="line">select * from z where id&gt;3 for update;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸‹é¢çš„SQLï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into z select 6,6;</span><br></pre></td></tr></table></figure><p>å¯ä»¥æ‰§è¡ŒæˆåŠŸã€‚è¯æ˜åœ¨äº‹åŠ¡1æ‰§è¡Œä¸»é”®èŒƒå›´for updateæ—¶ï¼Œäº‹åŠ¡2å¯¹è¿™ä¸ªèŒƒå›´æ‰”å¯ä»¥ç”³è¯·å†™é”ã€‚è¯æ˜RCéš”ç¦»çº§åˆ«æ²¡æœ‰ä½¿ç”¨NEXT-KEY Lockï¼Œè€Œæ˜¯ä½¿ç”¨è¡Œçº§é”é”ä½å¯¹åº”çš„è®°å½•ã€‚</p><h2 id="åœºæ™¯4ï¼šRCéš”ç¦»çº§åˆ«-æ™®é€šç´¢å¼•"><a href="#åœºæ™¯4ï¼šRCéš”ç¦»çº§åˆ«-æ™®é€šç´¢å¼•" class="headerlink" title="åœºæ™¯4ï¼šRCéš”ç¦»çº§åˆ«+æ™®é€šç´¢å¼•"></a>åœºæ™¯4ï¼šRCéš”ç¦»çº§åˆ«+æ™®é€šç´¢å¼•</h2><p>å°†äº‹åŠ¡éš”ç¦»çº§åˆ«åˆ‡ä¸ºRCï¼Œå¼€å¯äº‹åŠ¡1ï¼Œä¿æŒæœªæäº¤çš„çŠ¶æ€ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">begin;</span><br><span class="line">select * from z where b&gt;3 for update;</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œè‹¥åœ¨æ–°çš„äº‹åŠ¡2ä¸­è¿è¡Œä¸‹é¢çš„SQLè¯­å¥ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert into z select 8,4;</span><br><span class="line">update z set b = 10 where b = 6;</span><br><span class="line">update z set b = 10 where b = 1;</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€ä¸ªSQLè¯­å¥ï¼Œæ’å…¥æ•°æ®åˆ°äº‹åŠ¡1çš„for updateèŒƒå›´å†…æ˜¯å¯ä»¥çš„ï¼Œå› ä¸ºè¿™é‡Œäº‹åŠ¡1åœ¨RCæ¨¡å¼ä¸‹æ²¡æœ‰åŠ NEXT-KEY LOCKé”ï¼Œæ‰€ä»¥å¯ä»¥æ’å…¥æ•°æ®ã€‚</p><p>ç¬¬äºŒä¸ªSQLè¯­å¥ï¼Œä¼šå‡ºç°é”ç­‰å¾…ï¼Œæˆ‘ä»¬é€‰æ‹©æ™®é€šç´¢å¼•ä½œä¸ºæ¡ä»¶ï¼Œæ­¤æ—¶MySQLç»™æ™®é€šç´¢å¼•b&gt;3çš„è®°å½•éƒ½ä¼šåŠ è¡Œé”ã€‚åŒæ—¶ï¼Œè¿™äº›è®°å½•å¯¹åº”ä¸»é”®ç´¢å¼•ä¸Šçš„è®°å½•ä¹Ÿéƒ½åŠ ä¸Šäº†é”</p><p>ç¬¬ä¸‰ä¸ªSQLè¯­å¥ï¼Œæ’å…¥æˆåŠŸï¼Œè¯´æ˜b&lt;3çš„è®°å½•éƒ½æ— é”ã€‚</p><h2 id="åœºæ™¯5ï¼šRR-æ— ç´¢å¼•"><a href="#åœºæ™¯5ï¼šRR-æ— ç´¢å¼•" class="headerlink" title="åœºæ™¯5ï¼šRR + æ— ç´¢å¼•"></a>åœºæ™¯5ï¼šRR + æ— ç´¢å¼•</h2><p><strong>InnoDBè¡Œé”æ˜¯é€šè¿‡ç»™ç´¢å¼•ä¸Šçš„ç´¢å¼•é¡¹åŠ é”æ¥å®ç°çš„</strong>ï¼Œè¿™ä¸€ç‚¹MySQLä¸Oracleä¸åŒï¼Œåè€…æ˜¯é€šè¿‡åœ¨æ•°æ®å—ä¸­å¯¹ç›¸åº”æ•°æ®è¡ŒåŠ é”æ¥å®ç°çš„ã€‚InnoDBè¿™ç§è¡Œé”å®ç°ç‰¹ç‚¹æ„å‘³ç€ï¼š<strong>åªæœ‰é€šè¿‡ç´¢å¼•æ¡ä»¶æ£€ç´¢æ•°æ®ï¼ŒInnoDBæ‰ä½¿ç”¨è¡Œçº§é”ï¼Œå¦åˆ™ï¼ŒInnoDBå°†ä¼šç»™æ‰€æœ‰è®°å½•åŠ é”</strong>ã€‚</p><p>åœ¨RRéš”ç¦»çº§åˆ«ä¸‹ï¼Œç”±äºæŸ¥è¯¢æ¡ä»¶æ²¡æœ‰ç´¢å¼•ï¼Œé‚£ä¹ˆInnoDBéœ€è¦æ‰«ææ‰€æœ‰æ•°æ®æ¥æŸ¥æ‰¾æ•°æ®ï¼Œå¯¹äºæ‰«æè¿‡çš„æ•°æ®InnoDBéƒ½ä¼šåŠ ä¸Šé”ï¼Œå¹¶ä¸”æ˜¯åŠ Next-key lockã€‚</p><p>å»ºç«‹æµ‹è¯•è¡¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create table tab_no_index(id int,b int) engine=innodb;</span><br><span class="line">insert into tab_no_index values(1,1),(2,2),(3,3),(4,4),(100,100);</span><br></pre></td></tr></table></figure><p>å¼€å¯äº‹åŠ¡1ï¼Œä¿æŒæœªæäº¤çš„çŠ¶æ€ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">begin;</span><br><span class="line">select * from tab_no_index where id = 1 for update;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸‹é¢çš„SQLï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into tab_no_index values(5,5);</span><br></pre></td></tr></table></figure><p>è¿™æ—¶å€™ï¼Œå¹¶ä¸èƒ½æ’å…¥æˆåŠŸã€‚çœ‹èµ·æ¥äº‹åŠ¡1åªç»™ä¸€è¡ŒåŠ äº†æ’ä»–é”ï¼Œä½†äº‹åŠ¡2åœ¨è¯·æ±‚å…¶ä»–è¡Œçš„æ’ä»–é”æ—¶ï¼Œå´å‡ºç°äº†é”ç­‰å¾…ã€‚åŸå› å°±åœ¨äºæ²¡æœ‰ç´¢å¼•çš„æƒ…å†µä¸‹ï¼ŒInnoDBåªèƒ½æ‰«ææ‰€æœ‰è®°å½•ï¼ˆé”ä½æ‰€æœ‰è®°å½•ï¼‰ã€‚å½“æˆ‘ä»¬ç»™å…¶å¢åŠ ä¸€ä¸ªå”¯ä¸€ç´¢å¼•åï¼ŒInnoDBå°±åªé”å®šäº†ç¬¦åˆæ¡ä»¶çš„è¡Œã€‚</p><p>å½“æˆ‘ä»¬ç»™å…¶å¢åŠ ä¸€ä¸ªå”¯ä¸€ç´¢å¼•åï¼ŒInnoDBå°±åªé”å®šäº†ç¬¦åˆæ¡ä»¶çš„è¡Œã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create table tab_with_index(id int,b int,primary key(id));</span><br><span class="line">insert into tab_with_index values(1,1),(2,2),(3,3),(4,4),(100,100);</span><br></pre></td></tr></table></figure><p>å¼€å¯äº‹åŠ¡1ï¼Œä¿æŒæœªæäº¤çš„çŠ¶æ€ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">begin;</span><br><span class="line">select * from tab_with_index where id = 1 for update;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸‹é¢çš„SQLï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from tab_with_index where id = 2 for update;</span><br></pre></td></tr></table></figure><p>ç”±è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œå¯¹äºidæ˜¯ä¸»é”®ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œåªé”äº†id=1è¿™ä¸€è¡Œè®°å½•ã€‚å…¶ä½™çš„è¡Œéƒ½æ˜¯å¯ä»¥è¿›è¡ŒDMLæ“ä½œçš„ï¼Œä½†å‰ææ¡ä»¶æ˜¯ä»¥idä¸ºæ¡ä»¶ã€‚å¦‚æœæ˜¯ä»¥bå­—æ®µä¸ºæ¡ä»¶ï¼Œé‚£ä¹ˆè¿˜æ˜¯ä¼šé”çš„ã€‚</p><h2 id="åœºæ™¯6ï¼šRC-æ— ç´¢å¼•"><a href="#åœºæ™¯6ï¼šRC-æ— ç´¢å¼•" class="headerlink" title="åœºæ™¯6ï¼šRC + æ— ç´¢å¼•"></a>åœºæ™¯6ï¼šRC + æ— ç´¢å¼•</h2><p>ä¸Šé¢æ¼”ç¤ºäº†åœ¨RRéš”ç¦»çº§åˆ«ä¸‹ï¼Œå¯¹äºwhereæ¡ä»¶æ— ç´¢å¼•çš„æƒ…å†µä¸‹ï¼ŒInnoDBæ˜¯å¯¹æ‰€æœ‰è®°å½•åŠ Next-key Locksã€‚</p><p>ä½†æ˜¯åœ¨RCéš”ç¦»çº§åˆ«ä¸‹ï¼Œå¯¹äºwhereæ¡ä»¶æ— ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œåˆ™ä¸ä¼šå¯¹æ‰€æœ‰è®°å½•åŠ é”ï¼Œè€Œæ˜¯åªå¯¹å‘½ä¸­çš„æ•°æ®çš„èšç°‡ç´¢å¼•åŠ Xé”ã€‚</p><p>åŒæ ·é’ˆå¯¹tab_no_index``è¡¨ï¼Œå¼€å¯äº‹åŠ¡1ï¼Œä¿æŒæœªæäº¤çš„çŠ¶æ€ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">begin;</span><br><span class="line">delete from tab_no_index where id = 1;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œä¸‹é¢çš„SQLï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">delete from tab_no_index where id = 99;</span><br><span class="line">update tab_no_index set id=2 where id=100;</span><br><span class="line">insert into tab_no_index select 99,99;</span><br></pre></td></tr></table></figure><p>éƒ½å¯ä»¥æ‰§è¡ŒæˆåŠŸã€‚</p><h2 id="æ²™åœºç»ƒå…µ"><a href="#æ²™åœºç»ƒå…µ" class="headerlink" title="æ²™åœºç»ƒå…µ"></a>æ²™åœºç»ƒå…µ</h2><p>æœ‰äº†ä¸Šé¢çš„åˆ†åœºæ™¯æ¼”ä¹ ï¼Œä¸‹é¢å°±ä¸¤æ¡ç®€å•SQLè¿›è¡Œä¸€åœºåŠ é”åˆ†æçš„å®æˆ˜ã€‚</p><p>ä¸‹é¢ä¸¤æ¡ç®€å•çš„SQLï¼ŒåŠ ä»€ä¹ˆé”ï¼Ÿ</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from t1 where id = 10;</span><br><span class="line">delete from t1 where id = 10;</span><br></pre></td></tr></table></figure><p>ä¸€çœ¼çœ‹å»ï¼Œä¸ç»å¤§è„‘çš„å›ç­”æ˜¯ï¼š</p><ul><li>SQL1ï¼šä¸åŠ é”ã€‚å› ä¸ºMySQLæ˜¯ä½¿ç”¨å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶çš„ï¼Œè¯»ä¸åŠ é”</li><li>SQL2ï¼šå¯¹id = 10çš„è®°å½•åŠ å†™é” (èµ°ä¸»é”®ç´¢å¼•)</li></ul><p>å¯èƒ½æ˜¯æ­£ç¡®çš„ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯é”™è¯¯çš„ï¼Œå·²çŸ¥æ¡ä»¶ä¸è¶³ï¼Œè¦å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œè¿˜ç¼ºå°‘å‡ ä¸ªå‰ææ¡ä»¶ï¼š</p><ul><li>idåˆ—æ˜¯ä¸æ˜¯ä¸»é”®ï¼Ÿ</li><li>å½“å‰ç³»ç»Ÿçš„éš”ç¦»çº§åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</li><li>idåˆ—å¦‚æœä¸æ˜¯ä¸»é”®ï¼Œé‚£ä¹ˆidåˆ—ä¸Šæœ‰ç´¢å¼•å—ï¼Ÿ</li><li>idåˆ—ä¸Šå¦‚æœæœ‰äºŒçº§ç´¢å¼•ï¼Œé‚£ä¹ˆè¿™ä¸ªç´¢å¼•æ˜¯å”¯ä¸€ç´¢å¼•å—ï¼Ÿ</li></ul><p><strong>ç»„åˆä¸€ï¼šidåˆ—æ˜¯ä¸»é”®ï¼ŒRCéš”ç¦»çº§åˆ«</strong></p><p>è¿™ä¸ªç»„åˆï¼Œæ˜¯æœ€ç®€å•ï¼Œæœ€å®¹æ˜“åˆ†æçš„ç»„åˆã€‚idæ˜¯ä¸»é”®ï¼ŒRead Committedéš”ç¦»çº§åˆ«ï¼Œç»™å®šSQLï¼š<code>delete from t1 where id = 10;</code> åªéœ€è¦å°†ä¸»é”®ä¸Šï¼Œid = 10çš„è®°å½•åŠ ä¸ŠXé”å³å¯ã€‚</p><p><a href="https://imgtu.com/i/jJJTYj"><img src="https://s1.ax1x.com/2022/07/04/jJJTYj.jpg" alt="jJJTYj.jpg"></a></p><p><strong>ç»„åˆäºŒï¼šidå”¯ä¸€ç´¢å¼•+RC</strong></p><p>idæ˜¯uniqueç´¢å¼•ï¼Œè€Œä¸»é”®æ˜¯nameåˆ—ã€‚ç”±äºidæ˜¯uniqueç´¢å¼•ï¼Œå› æ­¤deleteè¯­å¥ä¼šé€‰æ‹©idåˆ—çš„ç´¢å¼•è¿›è¡Œwhereæ¡ä»¶çš„è¿‡æ»¤ï¼Œåœ¨æ‰¾åˆ°id=10çš„è®°å½•åï¼Œé¦–å…ˆä¼šå°†uniqueç´¢å¼•ä¸Šçš„id=10ç´¢å¼•è®°å½•åŠ ä¸ŠXé”ï¼ŒåŒæ—¶ï¼Œä¼šæ ¹æ®è¯»å–åˆ°çš„nameåˆ—ï¼Œå›ä¸»é”®ç´¢å¼•(èšç°‡ç´¢å¼•)ï¼Œç„¶åå°†èšç°‡ç´¢å¼•ä¸Šçš„name = â€˜dâ€™ å¯¹åº”çš„ä¸»é”®ç´¢å¼•é¡¹åŠ Xé”ã€‚</p><p>ä¸ºä»€ä¹ˆèšç°‡ç´¢å¼•ä¸Šçš„è®°å½•ä¹Ÿè¦åŠ é”ï¼Ÿå¦‚æœå¹¶å‘çš„ä¸€ä¸ªSQLï¼Œæ˜¯é€šè¿‡ä¸»é”®ç´¢å¼•æ¥æ›´æ–°ï¼š<code>update t1 set id = 100 where name = â€˜dâ€™;</code> æ­¤æ—¶ï¼Œå¦‚æœdeleteè¯­å¥æ²¡æœ‰å°†ä¸»é”®ç´¢å¼•ä¸Šçš„è®°å½•åŠ é”ï¼Œé‚£ä¹ˆå¹¶å‘çš„updateå°±ä¼šæ„ŸçŸ¥ä¸åˆ°deleteè¯­å¥çš„å­˜åœ¨ï¼Œè¿èƒŒäº†åŒä¸€è®°å½•ä¸Šçš„æ›´æ–°/åˆ é™¤éœ€è¦ä¸²è¡Œæ‰§è¡Œçš„çº¦æŸã€‚</p><p>è‹¥idåˆ—æ˜¯uniqueåˆ—ï¼Œå…¶ä¸Šæœ‰uniqueç´¢å¼•ã€‚é‚£ä¹ˆSQLéœ€è¦åŠ ä¸¤ä¸ªXé”ï¼Œä¸€ä¸ªå¯¹åº”äºid uniqueç´¢å¼•ä¸Šçš„id = 10çš„è®°å½•ï¼Œå¦ä¸€æŠŠé”å¯¹åº”äºèšç°‡ç´¢å¼•ä¸Šçš„[name=â€™dâ€™,id=10]çš„è®°å½•ã€‚</p><p><a href="https://imgtu.com/i/jJJL60"><img src="https://s1.ax1x.com/2022/07/04/jJJL60.jpg" alt="jJJL60.jpg"></a></p><p><strong>ç»„åˆä¸‰ï¼šidéå”¯ä¸€ç´¢å¼•+RC</strong></p><p>ç›¸å¯¹äºç»„åˆä¸€ã€äºŒï¼Œidåˆ—ä¸å†å”¯ä¸€ï¼Œåªæœ‰ä¸€ä¸ªæ™®é€šçš„ç´¢å¼•ã€‚</p><p>æ»¡è¶³id = 10æŸ¥è¯¢æ¡ä»¶çš„è®°å½•ï¼Œå‡å·²åŠ é”ã€‚åŒæ—¶ï¼Œè¿™äº›è®°å½•å¯¹åº”çš„ä¸»é”®ç´¢å¼•ä¸Šçš„è®°å½•ä¹Ÿéƒ½åŠ ä¸Šäº†é”ã€‚ä¸ç»„åˆäºŒå”¯ä¸€çš„åŒºåˆ«åœ¨äºï¼Œç»„åˆäºŒæœ€å¤šåªæœ‰ä¸€ä¸ªæ»¡è¶³ç­‰å€¼æŸ¥è¯¢çš„è®°å½•ï¼Œè€Œç»„åˆä¸‰ä¼šå°†æ‰€æœ‰æ»¡è¶³æŸ¥è¯¢æ¡ä»¶çš„è®°å½•éƒ½åŠ é”ã€‚</p><p><a href="https://imgtu.com/i/jJJbpn"><img src="https://s1.ax1x.com/2022/07/04/jJJbpn.jpg" alt="jJJbpn.jpg"></a></p><p><strong>ç»„åˆå››ï¼šidæ— ç´¢å¼•+RC</strong></p><p>è¿™ä¸ªè¿‡æ»¤æ¡ä»¶ï¼Œæ²¡æ³•é€šè¿‡ç´¢å¼•è¿›è¡Œè¿‡æ»¤ï¼Œé‚£ä¹ˆåªèƒ½èµ°å…¨è¡¨æ‰«æåšè¿‡æ»¤ã€‚å¯¹åº”äºè¿™ä¸ªç»„åˆï¼ŒSQLä¼šåŠ ä»€ä¹ˆé”ï¼Ÿæ¢å¥è¯è¯´ï¼Œå…¨è¡¨æ‰«ææ—¶ï¼Œä¼šåŠ ä»€ä¹ˆé”ï¼Ÿ</p><p>ç”±äºidåˆ—ä¸Šæ²¡æœ‰ç´¢å¼•ï¼Œå› æ­¤åªèƒ½èµ°èšç°‡ç´¢å¼•ï¼Œè¿›è¡Œå…¨éƒ¨æ‰«æã€‚èšç°‡ç´¢å¼•ä¸Šæ‰€æœ‰çš„è®°å½•ï¼Œéƒ½è¢«åŠ ä¸Šäº†Xé”ã€‚æ— è®ºè®°å½•æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œå…¨éƒ¨è¢«åŠ ä¸ŠXé”ã€‚æ—¢ä¸æ˜¯åŠ è¡¨é”ï¼Œä¹Ÿä¸æ˜¯åœ¨æ»¡è¶³æ¡ä»¶çš„è®°å½•ä¸ŠåŠ è¡Œé”ã€‚</p><p><a href="https://imgtu.com/i/jJJqlq"><img src="https://s1.ax1x.com/2022/07/04/jJJqlq.jpg" alt="jJJqlq.jpg"></a></p><p>ä¸ºä»€ä¹ˆä¸æ˜¯åªåœ¨æ»¡è¶³æ¡ä»¶çš„è®°å½•ä¸ŠåŠ é”å‘¢ï¼Ÿè¿™æ˜¯ç”±äºMySQLçš„å®ç°å†³å®šçš„ã€‚å¦‚æœä¸€ä¸ªæ¡ä»¶æ— æ³•é€šè¿‡ç´¢å¼•å¿«é€Ÿè¿‡æ»¤ï¼Œé‚£ä¹ˆå­˜å‚¨å¼•æ“å±‚é¢å°±ä¼šå°†æ‰€æœ‰è®°å½•åŠ é”åè¿”å›ï¼Œç„¶åç”±MySQL Serverå±‚è¿›è¡Œè¿‡æ»¤ã€‚å› æ­¤ä¹Ÿå°±æŠŠæ‰€æœ‰çš„è®°å½•éƒ½é”ä¸Šäº†ã€‚</p><p>åœ¨å®é™…çš„å®ç°ä¸­ï¼ŒMySQLæœ‰ä¸€äº›æ”¹è¿›ï¼Œåœ¨MySQL Serverè¿‡æ»¤æ¡ä»¶ï¼Œå‘ç°ä¸æ»¡è¶³åï¼Œä¼šè°ƒç”¨unlock_rowæ–¹æ³•ï¼ŒæŠŠä¸æ»¡è¶³æ¡ä»¶çš„è®°å½•æ”¾é” (è¿èƒŒäº†2PLçš„çº¦æŸ)ã€‚è¿™æ ·åšï¼Œä¿è¯äº†æœ€ååªä¼šæŒæœ‰æ»¡è¶³æ¡ä»¶è®°å½•ä¸Šçš„é”ï¼Œä½†æ˜¯æ¯æ¡è®°å½•çš„åŠ é”æ“ä½œè¿˜æ˜¯ä¸èƒ½çœç•¥çš„ã€‚</p><p><strong>ç»„åˆäº”ï¼šidä¸»é”®+RR</strong></p><p>ä¸Šé¢çš„å››ä¸ªç»„åˆï¼Œéƒ½æ˜¯åœ¨Read Committedéš”ç¦»çº§åˆ«ä¸‹çš„åŠ é”è¡Œä¸ºï¼Œæ¥ä¸‹æ¥çš„å››ä¸ªç»„åˆï¼Œæ˜¯åœ¨Repeatable Readéš”ç¦»çº§åˆ«ä¸‹çš„åŠ é”è¡Œä¸ºã€‚</p><p>idåˆ—æ˜¯ä¸»é”®åˆ—ï¼ŒRepeatable Readéš”ç¦»çº§åˆ«ï¼Œé’ˆå¯¹<code>delete from t1 where id = 10;</code> è¿™æ¡SQLï¼ŒåŠ é”ä¸ç»„åˆä¸€ï¼š[idä¸»é”®ï¼ŒRead Committed]ä¸€è‡´ã€‚</p><p><strong>ç»„åˆå…­ï¼šidå”¯ä¸€ç´¢å¼•+RR</strong></p><p>ä¸ç»„åˆäºŒï¼š[idå”¯ä¸€ç´¢å¼•ï¼ŒRead Committed]ä¸€è‡´ã€‚ä¸¤ä¸ªXé”ï¼Œidå”¯ä¸€ç´¢å¼•æ»¡è¶³æ¡ä»¶çš„è®°å½•ä¸Šä¸€ä¸ªï¼Œå¯¹åº”çš„èšç°‡ç´¢å¼•ä¸Šçš„è®°å½•ä¸€ä¸ªã€‚</p><p><strong>ç»„åˆä¸ƒï¼šidéå”¯ä¸€ç´¢å¼•+RR</strong></p><p>RCéš”ç¦»çº§åˆ«å…è®¸å¹»è¯»ï¼Œè€ŒRRéš”ç¦»çº§åˆ«ï¼Œä¸å…è®¸å­˜åœ¨å¹»è¯»ã€‚é‚£ä¹ˆRRéš”ç¦»çº§åˆ«ä¸‹ï¼Œå¦‚ä½•é˜²æ­¢å¹»è¯»å‘¢ï¼Ÿ</p><p>ç»„åˆä¸ƒï¼ŒRepeatable Readéš”ç¦»çº§åˆ«ï¼Œidä¸Šæœ‰ä¸€ä¸ªéå”¯ä¸€ç´¢å¼•ï¼Œæ‰§è¡Œ<code>delete from t1 where id = 10;</code> å‡è®¾é€‰æ‹©idåˆ—ä¸Šçš„ç´¢å¼•è¿›è¡Œæ¡ä»¶è¿‡æ»¤ï¼Œæœ€åçš„åŠ é”è¡Œä¸ºï¼Œæ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ</p><p><a href="https://imgtu.com/i/jJJ7fs"><img src="https://s1.ax1x.com/2022/07/04/jJJ7fs.jpg" alt="jJJ7fs.jpg"></a></p><p>ç›¸å¯¹äºç»„åˆä¸‰ï¼š[idåˆ—ä¸Šéå”¯ä¸€é”ï¼ŒRead Committed]çœ‹ä¼¼ç›¸åŒï¼Œå…¶å®å´æœ‰å¾ˆå¤§çš„åŒºåˆ«ã€‚</p><p>æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼Œå¤šäº†ä¸€ä¸ªGAPé”ï¼Œè€Œä¸”GAPé”çœ‹èµ·æ¥ä¹Ÿä¸æ˜¯åŠ åœ¨è®°å½•ä¸Šçš„ï¼Œæ˜¯åŠ è½½ä¸¤æ¡è®°å½•ä¹‹é—´çš„ä½ç½®ï¼ŒGAPé”æœ‰ä½•ç”¨ï¼Ÿ</p><p><strong>è¿™ä¸ªå¤šå‡ºæ¥çš„GAPé”ï¼Œå°±æ˜¯RRéš”ç¦»çº§åˆ«ï¼Œç›¸å¯¹äºRCéš”ç¦»çº§åˆ«ï¼Œä¸ä¼šå‡ºç°å¹»è¯»çš„å…³é”®</strong>ã€‚</p><p>GAPé”é”ä½çš„ä½ç½®ï¼Œä¸æ˜¯è®°å½•æœ¬èº«ï¼Œè€Œæ˜¯ä¸¤æ¡è®°å½•ä¹‹é—´çš„GAPã€‚æ‰€è°“å¹»è¯»ï¼Œå°±æ˜¯åŒä¸€ä¸ªäº‹åŠ¡ï¼Œè¿ç»­åšä¸¤æ¬¡å½“å‰è¯»(ä¾‹å¦‚ï¼š<code>select * from t1 where id = 10 for update;</code>)ï¼Œé‚£ä¹ˆè¿™ä¸¤æ¬¡å½“å‰è¯»è¿”å›çš„æ˜¯å®Œå…¨ç›¸åŒçš„è®°å½• (è®°å½•æ•°é‡ä¸€è‡´ï¼Œè®°å½•æœ¬èº«ä¹Ÿä¸€è‡´)ï¼Œç¬¬äºŒæ¬¡çš„å½“å‰è¯»ï¼Œä¸ä¼šæ¯”ç¬¬ä¸€æ¬¡è¿”å›æ›´å¤šçš„è®°å½• (å¹»è±¡)ã€‚</p><p>å¦‚ä½•ä¿è¯ä¸¤æ¬¡å½“å‰è¯»è¿”å›ä¸€è‡´çš„è®°å½•ï¼Œé‚£å°±éœ€è¦åœ¨ç¬¬ä¸€æ¬¡å½“å‰è¯»ä¸ç¬¬äºŒæ¬¡å½“å‰è¯»ä¹‹é—´ï¼Œå…¶ä»–çš„äº‹åŠ¡ä¸ä¼šæ’å…¥æ–°çš„æ»¡è¶³æ¡ä»¶çš„è®°å½•å¹¶æäº¤ã€‚ä¸ºäº†å®ç°è¿™ä¸ªåŠŸèƒ½ï¼ŒGAPé”åº”è¿è€Œç”Ÿã€‚</p><p>å¦‚å›¾ä¸­æ‰€ç¤ºï¼Œæœ‰å“ªäº›ä½ç½®å¯ä»¥æ’å…¥æ–°çš„æ»¡è¶³æ¡ä»¶çš„é¡¹ (id = 10)ï¼Œè€ƒè™‘åˆ°B+æ ‘ç´¢å¼•çš„æœ‰åºæ€§ï¼Œæ»¡è¶³æ¡ä»¶çš„é¡¹ä¸€å®šæ˜¯è¿ç»­å­˜æ”¾çš„ã€‚è®°å½•[6,c]ä¹‹å‰ï¼Œä¸ä¼šæ’å…¥id=10çš„è®°å½•ï¼›[6,c]ä¸[10,b]é—´ã€[10,b]ä¸[10,d]é—´ã€[10,d]ä¸[11,f]é—´å¯ä»¥æ’å…¥æ»¡è¶³æ¡ä»¶çš„[10,e],[10,z]ç­‰ï¼›è€Œ[11,f]ä¹‹åä¹Ÿä¸ä¼šæ’å…¥æ»¡è¶³æ¡ä»¶çš„è®°å½•ã€‚</p><p>å› æ­¤ï¼Œä¸ºäº†ä¿è¯[6,c]ä¸[10,b]é—´ï¼Œ[10,b]ä¸[10,d]é—´ï¼Œ[10,d]ä¸[11,f]ä¸ä¼šæ’å…¥æ–°çš„æ»¡è¶³æ¡ä»¶çš„è®°å½•ï¼ŒMySQLé€‰æ‹©äº†ç”¨GAPé”ï¼Œå°†è¿™ä¸‰ä¸ªGAPç»™é”èµ·æ¥ã€‚</p><p>Insertæ“ä½œï¼Œå¦‚insert [10,a]ï¼Œé¦–å…ˆä¼šå®šä½åˆ°[6,c]ä¸[10,b]é—´ï¼Œç„¶ååœ¨æ’å…¥å‰ï¼Œä¼šæ£€æŸ¥è¿™ä¸ªGAPæ˜¯å¦å·²ç»è¢«é”ä¸Šï¼Œå¦‚æœè¢«é”ä¸Šï¼Œåˆ™Insertä¸èƒ½æ’å…¥è®°å½•ã€‚å› æ­¤ï¼Œé€šè¿‡ç¬¬ä¸€éçš„å½“å‰è¯»ï¼Œä¸ä»…å°†æ»¡è¶³æ¡ä»¶çš„è®°å½•é”ä¸Š (Xé”)ï¼Œä¸ç»„åˆä¸‰ç±»ä¼¼ã€‚åŒæ—¶è¿˜æ˜¯å¢åŠ 3æŠŠGAPé”ï¼Œå°†å¯èƒ½æ’å…¥æ»¡è¶³æ¡ä»¶è®°å½•çš„3ä¸ªGAPç»™é”ä¸Šï¼Œä¿è¯åç»­çš„Insertä¸èƒ½æ’å…¥æ–°çš„id=10çš„è®°å½•ï¼Œä¹Ÿå°±æœç»äº†åŒä¸€äº‹åŠ¡çš„ç¬¬äºŒæ¬¡å½“å‰è¯»ï¼Œå‡ºç°å¹»è±¡çš„æƒ…å†µã€‚</p><p>æ—¢ç„¶é˜²æ­¢å¹»è¯»ï¼Œéœ€è¦é GAPé”çš„ä¿æŠ¤ï¼Œä¸ºä»€ä¹ˆç»„åˆäº”ã€ç»„åˆå…­ï¼Œä¹Ÿæ˜¯RRéš”ç¦»çº§åˆ«ï¼Œå´ä¸éœ€è¦åŠ GAPé”å‘¢ï¼Ÿ GAPé”çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢åŒä¸€äº‹åŠ¡çš„ä¸¤æ¬¡å½“å‰è¯»ï¼Œå‡ºç°å¹»è¯»çš„æƒ…å†µã€‚è€Œç»„åˆäº”ï¼Œidæ˜¯ä¸»é”®ï¼›ç»„åˆå…­ï¼Œidæ˜¯uniqueé”®ï¼Œéƒ½èƒ½å¤Ÿä¿è¯å”¯ä¸€æ€§ã€‚ä¸€ä¸ªç­‰å€¼æŸ¥è¯¢ï¼Œæœ€å¤šåªèƒ½è¿”å›ä¸€æ¡è®°å½•ï¼Œè€Œä¸”æ–°çš„ç›¸åŒå–å€¼çš„è®°å½•ï¼Œä¸€å®šä¸ä¼šåœ¨æ–°æ’å…¥è¿›æ¥ï¼Œå› æ­¤ä¹Ÿå°±é¿å…äº†GAPé”çš„ä½¿ç”¨ã€‚</p><p>ç»“è®ºï¼šRepeatable Readéš”ç¦»çº§åˆ«ä¸‹ï¼Œidåˆ—ä¸Šæœ‰ä¸€ä¸ªéå”¯ä¸€ç´¢å¼•ï¼Œå¯¹åº”SQLï¼š<code>delete from t1 where id = 10;</code>é¦–å…ˆï¼Œé€šè¿‡idç´¢å¼•å®šä½åˆ°ç¬¬ä¸€æ¡æ»¡è¶³æŸ¥è¯¢æ¡ä»¶çš„è®°å½•ï¼ŒåŠ è®°å½•ä¸Šçš„Xé”ï¼ŒåŠ GAPä¸Šçš„GAPé”ï¼Œç„¶ååŠ ä¸»é”®èšç°‡ç´¢å¼•ä¸Šçš„è®°å½•Xé”ï¼Œç„¶åè¿”å›ï¼›ç„¶åè¯»å–ä¸‹ä¸€æ¡ï¼Œé‡å¤è¿›è¡Œã€‚ç›´è‡³è¿›è¡Œåˆ°ç¬¬ä¸€æ¡ä¸æ»¡è¶³æ¡ä»¶çš„è®°å½•[11,f]ï¼Œæ­¤æ—¶ï¼Œä¸éœ€è¦åŠ è®°å½•Xé”ï¼Œä½†æ˜¯ä»æ—§éœ€è¦åŠ GAPé”ï¼Œæœ€åè¿”å›ç»“æŸã€‚</p><p><strong>ç»„åˆå…«ï¼šidæ— ç´¢å¼•+RR</strong></p><p>idåˆ—ä¸Šæ²¡æœ‰ç´¢å¼•ã€‚æ­¤æ—¶SQLï¼š<code>delete from t1 where id = 10;</code>æ²¡æœ‰å…¶ä»–çš„è·¯å¾„å¯ä»¥é€‰æ‹©ï¼Œåªèƒ½è¿›è¡Œå…¨è¡¨æ‰«æã€‚æœ€ç»ˆçš„åŠ é”æƒ…å†µï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><a href="https://imgtu.com/i/jJJOXV"><img src="https://s1.ax1x.com/2022/07/04/jJJOXV.jpg" alt="jJJOXV.jpg"></a></p><p>è¿™æ˜¯ä¸€ä¸ªå¾ˆææ€–çš„ç°è±¡ã€‚é¦–å…ˆï¼Œèšç°‡ç´¢å¼•ä¸Šçš„æ‰€æœ‰è®°å½•ï¼Œéƒ½è¢«åŠ ä¸Šäº†Xé”ã€‚å…¶æ¬¡ï¼Œèšç°‡ç´¢å¼•æ¯æ¡è®°å½•é—´çš„é—´éš™(GAP)ï¼Œä¹ŸåŒæ—¶è¢«åŠ ä¸Šäº†GAPé”ã€‚è¿™ä¸ªç¤ºä¾‹è¡¨ï¼Œåªæœ‰6æ¡è®°å½•ï¼Œä¸€å…±éœ€è¦6ä¸ªè®°å½•é”ï¼Œ7ä¸ªGAPé”ã€‚è¯•æƒ³ï¼Œå¦‚æœè¡¨ä¸Šæœ‰1000ä¸‡æ¡è®°å½•å‘¢ï¼Ÿ</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè¡¨ä¸Šï¼Œé™¤äº†ä¸åŠ é”çš„å¿«ç…§åº¦ï¼Œå…¶ä»–ä»»ä½•åŠ é”çš„å¹¶å‘SQLï¼Œå‡ä¸èƒ½æ‰§è¡Œï¼Œä¸èƒ½æ›´æ–°ï¼Œä¸èƒ½åˆ é™¤ï¼Œä¸èƒ½æ’å…¥ï¼Œå…¨è¡¨è¢«é”æ­»ã€‚</p><p>å½“ç„¶ï¼Œè·Ÿç»„åˆå››ï¼š[idæ— ç´¢å¼•, Read Committed]ç±»ä¼¼ï¼Œè¿™ä¸ªæƒ…å†µä¸‹ï¼ŒMySQLä¹Ÿåšäº†ä¸€äº›ä¼˜åŒ–ï¼Œå°±æ˜¯æ‰€è°“çš„<code>semi-consistent read</code>ã€‚<code>semi-consistent read</code>å¼€å¯çš„æƒ…å†µä¸‹ï¼Œå¯¹äºä¸æ»¡è¶³æŸ¥è¯¢æ¡ä»¶çš„è®°å½•ï¼ŒMySQLä¼šæå‰æ”¾é”ã€‚</p><p>ç»“è®ºï¼šåœ¨Repeatable Readéš”ç¦»çº§åˆ«ä¸‹ï¼Œå¦‚æœè¿›è¡Œå…¨è¡¨æ‰«æçš„å½“å‰è¯»ï¼Œé‚£ä¹ˆä¼šé”ä¸Šè¡¨ä¸­çš„æ‰€æœ‰è®°å½•ï¼ŒåŒæ—¶ä¼šé”ä¸Šèšç°‡ç´¢å¼•å†…çš„æ‰€æœ‰GAPï¼Œæœç»æ‰€æœ‰çš„å¹¶å‘ æ›´æ–°/åˆ é™¤/æ’å…¥ æ“ä½œã€‚å½“ç„¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è§¦å‘<code>semi-consistent read</code>ï¼Œæ¥ç¼“è§£åŠ é”å¼€é”€ä¸å¹¶å‘å½±å“ï¼Œä½†æ˜¯<code>semi-consistent read</code>æœ¬èº«å¯èƒ½ä¼šå¸¦æ¥å…¶ä»–é—®é¢˜ã€‚</p><p><strong>ç»„åˆä¹ï¼šSerializable</strong></p><p>Serializableéš”ç¦»çº§åˆ«ã€‚å¯¹äºSQL2ï¼š<code>delete from t1 where id = 10;</code> æ¥è¯´ï¼ŒSerializableéš”ç¦»çº§åˆ«ä¸Repeatable Readéš”ç¦»çº§åˆ«å®Œå…¨ä¸€è‡´</p><p>Serializableéš”ç¦»çº§åˆ«ï¼Œå½±å“çš„æ˜¯SQL1ï¼š<code>select * from t1 where id = 10;</code>è¿™æ¡SQLï¼Œåœ¨RCï¼ŒRRéš”ç¦»çº§åˆ«ä¸‹ï¼Œéƒ½æ˜¯å¿«ç…§è¯»ï¼Œä¸åŠ é”ã€‚ä½†æ˜¯åœ¨Serializableéš”ç¦»çº§åˆ«ï¼ŒSQL1ä¼šåŠ è¯»é”ï¼Œä¹Ÿå°±æ˜¯è¯´å¿«ç…§è¯»ä¸å¤å­˜åœ¨ï¼ŒMVCCå¹¶å‘æ§åˆ¶é™çº§ä¸ºLock-Based CCã€‚</p><p>MVCC æœ€å¤§çš„å¥½å¤„ï¼šè¯»ä¸åŠ é”ï¼Œè¯»å†™ä¸å†²çªã€‚åœ¨è¯»å¤šå†™å°‘çš„OLTPåº”ç”¨ä¸­ï¼Œè¯»å†™ä¸å†²çªæ˜¯éå¸¸é‡è¦çš„ï¼Œæå¤§çš„å¢åŠ äº†ç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç°é˜¶æ®µï¼Œå‡ ä¹æ‰€æœ‰çš„RDBMSï¼Œéƒ½æ”¯æŒäº†MVCC</p><p>åœ¨MySQL/InnoDBä¸­ï¼Œæ‰€è°“çš„è¯»ä¸åŠ é”ï¼Œå¹¶ä¸é€‚ç”¨äºæ‰€æœ‰çš„æƒ…å†µï¼Œè€Œæ˜¯éš”ç¦»çº§åˆ«ç›¸å…³çš„ã€‚Serializableéš”ç¦»çº§åˆ«ï¼Œè¯»ä¸åŠ é”å°±ä¸å†æˆç«‹ï¼Œæ‰€æœ‰çš„è¯»æ“ä½œï¼Œéƒ½æ˜¯å½“å‰è¯»ã€‚</p><hr><p>æœ¬æ–‡ä¸ºç™¾åº¦æ–‡ç« é«˜çº§äº’è”ç½‘ä¸“å®¶çš„åŸåˆ›æ–‡ç« ï¼Œæœ¬ç¯‡ä»…ä¾›å­¦ä¹ ä½¿ç”¨ï¼Œå°Šé‡åŸåˆ›</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://baijiahao.baidu.com/s?id=1709427910908845097&amp;wfr=spider&amp;for=pc">https://baijiahao.baidu.com/s?id=1709427910908845097&amp;wfr=spider&amp;for=pc</a></p>]]></content>
      
      
      <categories>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
            <tag> MySQLé”è¿›é˜¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœåŠ¡ç½‘æ ¼æ€»ç»“</title>
      <link href="/article/1690b38e.html"/>
      <url>/article/1690b38e.html</url>
      
        <content type="html"><![CDATA[<p>å‰è¨€ï¼š<br>æœåŠ¡ç½‘æ ¼ï¼ˆServiceMeshï¼‰æ˜¯ä¸€ä¸ªä¸“é—¨å¤„ç†æœåŠ¡é€šè®¯çš„åŸºç¡€è®¾æ–½å±‚ã€‚å®ƒçš„èŒè´£æ˜¯åœ¨ç”±äº‘åŸç”Ÿåº”ç”¨ç»„æˆæœåŠ¡çš„å¤æ‚æ‹“æ‰‘ç»“æ„ä¸‹è¿›è¡Œå¯é çš„è¯·æ±‚ä¼ é€ã€‚åœ¨å®è·µä¸­ï¼Œå®ƒæ˜¯ä¸€ç»„å’Œåº”ç”¨æœåŠ¡éƒ¨ç½²åœ¨ä¸€èµ·çš„è½»é‡çº§çš„ç½‘ç»œä»£ç†ï¼Œå¹¶ä¸”å¯¹åº”ç”¨æœåŠ¡é€æ˜ã€‚</p><hr><h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>æœåŠ¡ç½‘æ ¼ï¼ˆService <a href="https://so.csdn.net/so/search?q=Mesh&amp;spm=1001.2101.3001.7020">Mesh</a>ï¼‰æ˜¯ä¸€ä¸ªä¸“é—¨å¤„ç†æœåŠ¡é€šè®¯çš„åŸºç¡€è®¾æ–½å±‚ã€‚å®ƒçš„èŒè´£æ˜¯åœ¨ç”±äº‘åŸç”Ÿåº”ç”¨ç»„æˆæœåŠ¡çš„å¤æ‚æ‹“æ‰‘ç»“æ„ä¸‹è¿›è¡Œå¯é çš„è¯·æ±‚ä¼ é€ã€‚<strong>åœ¨å®è·µä¸­ï¼Œå®ƒæ˜¯ä¸€ç»„å’Œåº”ç”¨æœåŠ¡éƒ¨ç½²åœ¨ä¸€èµ·çš„è½»é‡çº§çš„ç½‘ç»œä»£ç†</strong>ï¼Œå¹¶ä¸”å¯¹åº”ç”¨æœåŠ¡é€æ˜ã€‚</p><p>æœåŠ¡ç½‘æ ¼ä»æ€»ä½“<a href="https://so.csdn.net/so/search?q=%E6%9E%B6%E6%9E%84&amp;spm=1001.2101.3001.7020">æ¶æ„</a>ä¸Šæ¥è®²æ¯”è¾ƒç®€å•ï¼Œä¸è¿‡æ˜¯ä¸€å †ç´§æŒ¨ç€å„é¡¹æœåŠ¡çš„<strong>ç”¨æˆ·ä»£ç†</strong>ï¼Œå¤–åŠ ä¸€ç»„<strong>ä»»åŠ¡ç®¡ç†ç»„ä»¶</strong>ç»„æˆã€‚</p><p>ç®¡ç†ç»„ä»¶è¢«ç§°ä¸ºæ§åˆ¶å±‚æˆ–<strong>æ§åˆ¶å¹³é¢</strong>ï¼ˆcontrol planeï¼‰ï¼Œè´Ÿè´£ä¸æ§åˆ¶å¹³é¢ä¸­çš„ä»£ç†é€šä¿¡ï¼Œä¸‹å‘ç­–ç•¥å’Œé…ç½®ã€‚</p><p>ä»£ç†åœ¨æœåŠ¡ç½‘æ ¼ä¸­è¢«ç§°ä¸ºæ•°æ®å±‚æˆ–æ•°æ®å¹³é¢ï¼ˆdata planeï¼‰ï¼Œç›´æ¥å¤„ç†å…¥ç«™å’Œå‡ºç«™æ•°æ®åŒ…ï¼Œè½¬å‘ã€è·¯ç”±ã€å¥åº·æ£€æŸ¥ã€è´Ÿè½½å‡è¡¡ã€è®¤è¯ã€é‰´æƒã€äº§ç”Ÿç›‘æ§æ•°æ®ç­‰ã€‚</p><p>ä¸€ä¸ªå…¸å‹çš„æœåŠ¡ç½‘æ ¼éƒ¨ç½²ç½‘ç»œç»“æ„å›¾å¦‚ä¸‹ï¼š</p><p><a href="https://imgtu.com/i/jYhAaD"><img src="https://s1.ax1x.com/2022/07/05/jYhAaD.jpg" alt="jYhAaD.jpg"></a></p><p>å…¶ä¸­ç»¿è‰²æ–¹å—ä¸ºåº”ç”¨æœåŠ¡ï¼Œè“è‰²æ–¹å—ä¸º Sidecar Proxyï¼Œåº”ç”¨æœåŠ¡ä¹‹é—´é€šè¿‡ Sidecar Proxy è¿›è¡Œé€šä¿¡ï¼Œæ•´ä¸ªæœåŠ¡é€šä¿¡å½¢æˆå›¾ä¸­çš„è“è‰²ç½‘ç»œè¿çº¿ï¼Œå›¾ä¸­æ‰€æœ‰è“è‰²éƒ¨åˆ†å°±å½¢æˆäº† Service Meshã€‚</p><h1 id="æœåŠ¡ç½‘æ ¼å¸¦æ¥äº†ä»€ä¹ˆå˜åŒ–ï¼Ÿ"><a href="#æœåŠ¡ç½‘æ ¼å¸¦æ¥äº†ä»€ä¹ˆå˜åŒ–ï¼Ÿ" class="headerlink" title="æœåŠ¡ç½‘æ ¼å¸¦æ¥äº†ä»€ä¹ˆå˜åŒ–ï¼Ÿ"></a>æœåŠ¡ç½‘æ ¼å¸¦æ¥äº†ä»€ä¹ˆå˜åŒ–ï¼Ÿ</h1><ul><li><strong>ç¬¬ä¸€ï¼Œå¾®æœåŠ¡æ²»ç†ä¸ä¸šåŠ¡é€»è¾‘çš„è§£è€¦ã€‚</strong>æœåŠ¡ç½‘æ ¼æŠŠ SDK ä¸­çš„å¤§éƒ¨åˆ†èƒ½åŠ›ä»åº”ç”¨ä¸­å‰¥ç¦»å‡ºæ¥ï¼Œæ‹†è§£ä¸ºç‹¬ç«‹è¿›ç¨‹ï¼Œä»¥ sidecar çš„æ¨¡å¼è¿›è¡Œéƒ¨ç½²ã€‚æœåŠ¡ç½‘æ ¼é€šè¿‡å°†æœåŠ¡é€šä¿¡åŠç›¸å…³ç®¡æ§åŠŸèƒ½ä»ä¸šåŠ¡ç¨‹åºä¸­åˆ†ç¦»å¹¶ä¸‹æ²‰åˆ°åŸºç¡€è®¾æ–½å±‚ï¼Œä½¿å…¶å’Œä¸šåŠ¡ç³»ç»Ÿå®Œå…¨è§£è€¦ï¼Œä½¿å¼€å‘äººå‘˜æ›´åŠ ä¸“æ³¨äºä¸šåŠ¡æœ¬èº«ã€‚</li><li><strong>ç¬¬äºŒï¼Œå¼‚æ„ç³»ç»Ÿçš„ç»Ÿä¸€æ²»ç†ã€‚</strong>éšç€æ–°æŠ€æœ¯çš„å‘å±•å’Œäººå‘˜æ›´æ›¿ï¼Œåœ¨åŒä¸€å®¶å…¬å¸ä¸­å¾€å¾€ä¼šå‡ºç°ä¸åŒè¯­è¨€ã€ä¸åŒæ¡†æ¶çš„åº”ç”¨å’ŒæœåŠ¡ï¼Œä¸ºäº†èƒ½å¤Ÿç»Ÿä¸€ç®¡æ§è¿™äº›æœåŠ¡ï¼Œä»¥å¾€çš„åšæ³•æ˜¯ä¸ºæ¯ç§è¯­è¨€ã€æ¯ç§æ¡†æ¶éƒ½å¼€å‘ä¸€å¥—å®Œæ•´çš„ SDKï¼Œç»´æŠ¤æˆæœ¬éå¸¸ä¹‹é«˜ï¼Œè€Œä¸”ç»™å…¬å¸çš„ä¸­é—´ä»¶å›¢é˜Ÿå¸¦æ¥äº†å¾ˆå¤§çš„æŒ‘æˆ˜ã€‚æœ‰äº†æœåŠ¡ç½‘æ ¼ä¹‹åï¼Œé€šè¿‡å°†ä¸»ä½“çš„æœåŠ¡æ²»ç†èƒ½åŠ›ä¸‹æ²‰åˆ°åŸºç¡€è®¾æ–½ï¼Œå¤šè¯­è¨€çš„æ”¯æŒå°±è½»æ¾å¾ˆå¤šäº†ã€‚åªéœ€è¦æä¾›ä¸€ä¸ªéå¸¸è½»é‡çº§çš„ SDKï¼Œç”šè‡³å¾ˆå¤šæƒ…å†µä¸‹éƒ½ä¸éœ€è¦ä¸€ä¸ªå•ç‹¬çš„ SDKï¼Œå°±å¯ä»¥æ–¹ä¾¿åœ°å®ç°å¤šè¯­è¨€ã€å¤šåè®®çš„ç»Ÿä¸€æµé‡ç®¡æ§ã€ç›‘æ§ç­‰éœ€æ±‚ã€‚</li></ul><h1 id="Istioä»‹ç»"><a href="#Istioä»‹ç»" class="headerlink" title="Istioä»‹ç»"></a>Istioä»‹ç»</h1><p>Istio - æœåŠ¡ç½‘æ ¼çš„å…¸å‹å®ç°ã€‚</p><p>Istio æ˜¯ä¸€ä¸ªç”±Googleå’ŒIBMç­‰å…¬å¸å¼€æºçš„ï¼ŒåŠŸèƒ½ååˆ†ä¸°å¯Œçš„æœåŠ¡ç½‘æ ¼å…·ä½“å®ç°ï¼Œä¹Ÿæ˜¯ç›®å‰ä¸šç•Œæœ€ä¸ºæµè¡Œçš„å®ç°ã€‚å®ƒåŒ…æ‹¬å¦‚ä¸‹åŠŸèƒ½ï¼š</p><ul><li>æµé‡ç®¡ç†ï¼šæä¾›ç»Ÿä¸€çš„æµé‡æ²»ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¤±è´¥é‡è¯•ã€è¶…æ—¶ã€ç†”æ–­/é™æµã€è·¯ç”±ç®¡ç†ã€ç°åº¦å‘å¸ƒã€ç½‘å…³ç­‰åŠŸèƒ½ã€‚</li><li>å¯è§‚æµ‹æ€§ï¼šé€æ˜åŒ–åœ°å®ç°æŒ‡æ ‡ç›‘æ§ã€æ—¥å¿—ã€é“¾è·¯è¿½è¸ªç­‰åŠŸèƒ½ã€‚</li><li>ç­–ç•¥æ§åˆ¶ï¼šå®ç°è®¿é—®æ§åˆ¶ç³»ç»Ÿã€é¥æµ‹æ•è·ã€é…é¢ç®¡ç†å’Œè®¡è´¹ç­‰ã€‚</li><li>å®‰å…¨è®¤è¯ï¼šæ— ä¾µå…¥å¼åœ°ä¸ºæœåŠ¡å¢åŠ è®¤è¯ã€é‰´æƒå’ŒåŠ å¯†é€šä¿¡çš„èƒ½åŠ›ã€‚</li><li>æ•…éšœæ³¨å…¥ï¼šæ”¯æŒéšæœºå‘æœåŠ¡é€šä¿¡ä¸­æ³¨å…¥æ•…éšœï¼ˆå¦‚æ¨¡æ‹Ÿå»¶æ—¶/ç½‘ç»œä¸­æ–­ï¼‰ï¼Œæ£€æµ‹æœåŠ¡çš„å¯é æ€§</li></ul><h1 id="Istioæ¶æ„"><a href="#Istioæ¶æ„" class="headerlink" title="Istioæ¶æ„"></a>Istioæ¶æ„</h1><p>Istio çš„æ¶æ„ä»é€»è¾‘ä¸Šåˆ†æˆæ•°æ®å¹³é¢ï¼ˆData Planeï¼‰å’Œæ§åˆ¶å¹³é¢ï¼ˆControl Planeï¼‰ã€‚</p><p>æ˜¯å¦è§‰å¾—ä¼¼æ›¾ç›¸è¯†ï¼Ÿæ²¡é”™ï¼ŒKubernetes çš„æ¶æ„ä¹Ÿå…·æœ‰ç›¸ä¼¼çš„ç»“æ„ï¼Œåˆ†ä¸ºæ§åˆ¶èŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹ã€‚æ¯«æ— ç–‘é—®ï¼Œè¿™æ ·çš„è®¾è®¡å¯ä»¥å¾ˆå¥½åœ°è§£è€¦å„ä¸ªåŠŸèƒ½ç»„ä»¶ã€‚</p><ul><li>æ•°æ®å¹³é¢ï¼šç”±ä¸€ç»„å’Œä¸šåŠ¡æœåŠ¡æˆå¯¹å‡ºç°çš„ Sidecar ä»£ç†ï¼ˆEnvoyï¼‰æ„æˆï¼Œå®ƒçš„ä¸»è¦åŠŸèƒ½æ˜¯æ¥ç®¡æœåŠ¡çš„è¿›å‡ºæµé‡ï¼Œä¼ é€’å¹¶æ§åˆ¶æœåŠ¡å’Œ Mixer ç»„ä»¶çš„æ‰€æœ‰ç½‘ç»œé€šä¿¡ï¼ˆMixer æ˜¯ä¸€ä¸ªç­–ç•¥å’Œé¥æµ‹æ•°æ®çš„æ”¶é›†å™¨ï¼Œç¨åä¼šä»‹ç»ï¼‰ã€‚</li><li>æ§åˆ¶å¹³é¢ï¼šä¸»è¦åŒ…æ‹¬äº† Pilotã€Mixerã€Citadel å’Œ Galley å…± 4 ä¸ªç»„ä»¶ï¼Œä¸»è¦åŠŸèƒ½æ˜¯é€šè¿‡é…ç½®å’Œç®¡ç† Sidecar ä»£ç†æ¥è¿›è¡Œæµé‡æ§åˆ¶ï¼Œå¹¶é…ç½® Mixer å»æ‰§è¡Œç­–ç•¥å’Œæ”¶é›†é¥æµ‹æ•°æ®ï¼ˆTelemetryï¼‰ã€‚</li></ul><p>Istioçš„æ¶æ„å›¾å¦‚ä¸‹ï¼š</p><p><a href="https://imgtu.com/i/jYhZPH"><img src="https://s1.ax1x.com/2022/07/05/jYhZPH.jpg" alt="jYhZPH.jpg"></a></p><p>æ¶æ„è¡¥å……ï¼š</p><p><a href="https://imgtu.com/i/jYhEIe"><img src="https://s1.ax1x.com/2022/07/05/jYhEIe.jpg" alt="jYhEIe.jpg"></a></p><h1 id="Istioæ¨¡å—ä»‹ç»"><a href="#Istioæ¨¡å—ä»‹ç»" class="headerlink" title="Istioæ¨¡å—ä»‹ç»"></a>Istioæ¨¡å—ä»‹ç»</h1><h2 id="Istio-çš„æ ¸å¿ƒæ§ä»¶Envoy"><a href="#Istio-çš„æ ¸å¿ƒæ§ä»¶Envoy" class="headerlink" title="Istio çš„æ ¸å¿ƒæ§ä»¶Envoy"></a>Istio çš„æ ¸å¿ƒæ§ä»¶Envoy</h2><p>ä»ä¸Šé¢çš„æ¶æ„å›¾å¯ä»¥çœ‹å‡ºï¼ŒIstio çš„æ•°æ®å¹³é¢å°±æ˜¯æŒ‡ä»£ç†ã€‚Istio é€‰æ‹© Envoy ä½œä¸º Sidecar ä»£ç†ï¼ŒEnvoy æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªä¸ºé¢å‘æœåŠ¡çš„æ¶æ„è€Œè®¾è®¡çš„ 7 å±‚ä»£ç†å’Œé€šä¿¡æ€»çº¿ã€‚Envoy åŸºäº C++ 11 å¼€å‘è€Œæˆï¼Œæ€§èƒ½å‡ºè‰²ã€‚é™¤äº†å…·æœ‰å¼ºå¤§çš„ç½‘ç»œæ§åˆ¶èƒ½åŠ›å¤–ï¼ŒEnvoy è¿˜å¯ä»¥å°†æµé‡è¡Œä¸ºå’Œæ•°æ®æå–å‡ºæ¥å‘é€ç»™ Mixer ç»„ä»¶ï¼Œç”¨ä»¥è¿›è¡Œç›‘æ§ã€‚</p><p>Envoy åœ¨ç½‘ç»œæ§åˆ¶æ–¹é¢çš„ä¸»è¦åŠŸèƒ½å¦‚ä¸‹ï¼š</p><ul><li>HTTP 7 å±‚è·¯ç”±</li><li>æ”¯æŒ gRPCã€HTTP/2</li><li>æœåŠ¡å‘ç°å’ŒåŠ¨æ€é…ç½®</li><li>å¥åº·æ£€æŸ¥</li><li>é«˜çº§è´Ÿè½½å‡è¡¡</li></ul><p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨Kubernetesç¯å¢ƒä¸­ï¼ŒåŒä¸€ä¸ªPodå†…çš„ä¸åŒå®¹å™¨é—´å…±äº«ç½‘ç»œæ ˆï¼Œè¿™ä¸€ç‰¹æ€§ä½¿å¾—Sidecarå¯ä»¥æ¥ç®¡è¿›å‡ºè¿™äº›å®¹å™¨çš„ç½‘ç»œæµé‡ï¼Œè¿™å°±æ˜¯Sidecaræ¨¡å¼çš„å®ç°åŸºç¡€ã€‚Envoyæ˜¯ç›®å‰Istioé»˜è®¤çš„æ•°æ®å¹³é¢ï¼Œå®é™…ä¸Šå› ä¸ºIstioçµæ´»çš„æ¶æ„ï¼Œå®Œå…¨å¯ä»¥é€‰æ‹©å…¶ä»–å…¼å®¹çš„äº§å“ä½œä¸ºSidecarã€‚ç›®å‰å¾ˆå¤šæœåŠ¡ç½‘æ ¼äº§å“éƒ½å¯ä»¥ä½œä¸ºIstioçš„æ•°æ®å¹³é¢å¹¶æä¾›é›†æˆã€‚</p><h2 id="Pilot"><a href="#Pilot" class="headerlink" title="Pilot"></a>Pilot</h2><p>Pilot æ˜¯ Istio å®ç°æµé‡ç®¡ç†çš„æ ¸å¿ƒç»„ä»¶ï¼Œå®ƒä¸»è¦çš„ä½œç”¨æ˜¯é…ç½®å’Œç®¡ç† Envoy ä»£ç†ã€‚æ¯”å¦‚ï¼šå¯ä»¥ä¸ºä»£ç†ä¹‹é—´è®¾ç½®ç‰¹å®šçš„æµé‡è§„åˆ™ï¼Œæˆ–è€…é…ç½®è¶…æ—¶ã€é‡è¯•ã€ç†”æ–­è¿™æ ·çš„å¼¹æ€§èƒ½åŠ›ã€‚Pilot ä¼šå°†æ§åˆ¶æµé‡è¡Œä¸ºçš„è·¯ç”±è§„åˆ™è½¬æ¢ä¸º Envoy çš„é…ç½®ï¼Œå¹¶åœ¨è¿è¡Œæ—¶å°†å®ƒä»¬å¹¿æ’­åˆ° Envoyã€‚å¦å¤–ï¼ŒPilot è¿˜èƒ½å¤ŸæŠŠæœåŠ¡å‘ç°æœºåˆ¶æŠ½è±¡å‡ºæ¥å¹¶è½¬æ¢æˆ API åˆ†å‘ç»™ Envoyï¼Œä½¿å¾—åè€…å…·æœ‰æœåŠ¡å‘ç°çš„èƒ½åŠ›ã€‚</p><p>ç®€å•æ¥è¯´ï¼ŒPilot çš„ä¸»è¦ä»»åŠ¡æœ‰ä¸¤ä¸ªï¼š</p><ul><li>ä»å¹³å°ï¼ˆå¦‚ï¼šKubernetesï¼‰è·å–æœåŠ¡ä¿¡æ¯ï¼Œå®ŒæˆæœåŠ¡å‘ç°</li><li><strong>è·å– Istio çš„å„é¡¹é…ç½®ï¼Œè½¬æ¢æˆ Envoy ä»£ç†å¯è¯»çš„æ ¼å¼å¹¶åˆ†å‘</strong><ul><li><strong>æ³¨æ„ï¼šè¿™å—æ˜¯ç»å…¸çš„è§£è€¦è®¾è®¡ï¼Œè¿™æ ·æœ‰ä¸ªå¥½å¤„ï¼Œå³ä»¥åå¦‚æœæœ‰å…¶ä»–ç±»å‹çš„é…ç½®æ ¼å¼ï¼Œä¹Ÿå¯ä»¥è½¬æ¢ä¸ºEnvoyå¯è¯»çš„é…ç½®ã€‚è¯•æƒ³ä¸‹ï¼Œå¦‚æœç”±Envoyç›´æ¥è¯»å–é…ç½®ï¼ŒåæœŸæ¥å…¥å…¶ä»–æ ¼å¼çš„é…ç½®åˆ™éœ€è¦ä¿®æ”¹Envoyä»£ç ï¼Œè€ŒPilotçš„å‡ºç°ï¼Œåˆ™åªè¦ä¿®æ”¹Pilotç«¯ä»£ç å°±å¯ä»¥äº†ã€‚Pilotå±‚ä¸æ¶‰åŠåˆ°ä¸šåŠ¡é€»è¾‘å±‚ï¼Œè€Œæ˜¯ä½œä¸ºä¸€ä¸ªå¹³å°é€‚é…å™¨ï¼Œä¿éšœäº†å…¶ä»–æ ¸å¿ƒç»„ä»¶é…ç½®è§„åˆ™çš„ä¸€è‡´æ€§ï¼Œä»è€Œé¿å…å…¶å®ƒä»£ç çš„åå¤ä¿®æ”¹ã€‚</strong></li></ul></li></ul><p><a href="https://imgtu.com/i/jYhiqK"><img src="https://s1.ax1x.com/2022/07/05/jYhiqK.jpg" alt="jYhiqK.jpg"></a></p><h2 id="Mixer"><a href="#Mixer" class="headerlink" title="Mixer"></a>Mixer</h2><p>Mixer çš„ä¸»è¦åŠŸèƒ½æ˜¯æä¾›ç­–ç•¥æ§åˆ¶ï¼Œå¹¶ä» Envoy ä»£ç†æ”¶é›†é¥æµ‹æ•°æ®ã€‚</p><p>æ¯æ¬¡ç½‘ç»œé€šä¿¡æ—¶ Envoy ä»£ç†éƒ½ä¼šå‘ Mixer å‘å‡ºé¢„æ£€è¦æ±‚ï¼Œç”¨æ¥æ£€æµ‹è°ƒç”¨è€…çš„åˆæ³•æ€§ã€‚è°ƒç”¨ä¹‹å Envoy ä»£ç†ä¼šå‘é€é¥æµ‹æ•°æ®ä¾› Mixer æ”¶é›†ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ Sidecar ä»£ç†å¯ä»¥ç¼“å­˜è¿™äº›æ•°æ®ï¼Œä¸éœ€è¦é¢‘ç¹åœ°è°ƒç”¨ Mixerã€‚</p><p>é€‚é…å™¨æ˜¯ Mixer çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ’ä»¶æ¨¡å‹ï¼Œæ¯ä¸ªæ’ä»¶å«ä½œé€‚é…å™¨ã€‚è¿™é¡¹ç‰¹æ€§ä½¿å¾— Mixer å¯ä»¥æ¥å…¥å‡ ä¹ä»»æ„çš„ï¼ˆåªè¦å®šä¹‰å¥½æ¥å£ï¼‰åç«¯åŸºç¡€è®¾æ–½ã€‚æ¯”å¦‚å¯ä»¥é€‰æ‹©æ¥å…¥ä¸åŒçš„æ—¥å¿—æ”¶é›†å™¨ã€ç›‘æ§å·¥å…·å’Œæˆæƒå·¥å…·ç­‰ï¼›å¯ä»¥åœ¨è¿è¡Œæ—¶åˆ‡æ¢ä¸åŒçš„é€‚é…å™¨æˆ–è€…æ˜¯æ‰“å¼€ï¼ˆå…³é—­ï¼‰å®ƒä»¬ï¼›è¿˜å¯ä»¥è‡ªå®šä¹‰é€‚é…å™¨ä»¥æ»¡è¶³ç‰¹å®šéœ€æ±‚ã€‚é€‚é…å™¨æå¤§åœ°æé«˜äº† Mixer çš„æ‰©å±•æ€§ï¼Œå®ƒè®© Istio çš„åŠŸèƒ½æ‹¥æœ‰äº†æ›´å¤šå¯èƒ½æ€§ã€‚ä¸‹å›¾å±•ç¤ºäº† Mixer çš„æ¶æ„å›¾å¹¶å±•ç¤ºäº†å®ƒå’Œ Envoy çš„äº¤äº’æ–¹å¼ã€‚</p><p><a href="https://imgtu.com/i/jYhkVO"><img src="https://s1.ax1x.com/2022/07/05/jYhkVO.jpg" alt="jYhkVO.jpg"></a></p><h2 id="Citadel"><a href="#Citadel" class="headerlink" title="Citadel"></a>Citadel</h2><p>Citadel æ˜¯ä¸å®‰å…¨ç›¸å…³çš„ç»„ä»¶ï¼Œä¸»è¦è´Ÿè´£å¯†é’¥å’Œè¯ä¹¦çš„ç®¡ç†ã€‚å®ƒå¯ä»¥æä¾›æœåŠ¡é—´å’Œç»ˆç«¯ç”¨æˆ·çš„èº«ä»½è®¤è¯ï¼Œè¿˜å¯ä»¥åŠ å¯†æœåŠ¡ç½‘æ ¼ä¸­çš„æµé‡ã€‚</p><h2 id="Galley"><a href="#Galley" class="headerlink" title="Galley"></a>Galley</h2><p>åœ¨ 2019 å¹´ 3 æœˆä»½å‘å¸ƒçš„ 1.1 ç‰ˆæœ¬ä¸­ï¼ŒGalley ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ç»„ä»¶è¢«æ·»åŠ åˆ°äº†æ¶æ„å½“ä¸­ï¼ˆåœ¨æ­¤ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ Galley å¹¶æœªç‹¬ç«‹å‡ºç°ï¼‰ï¼Œå®ƒç°åœ¨æ˜¯ Istio ä¸»è¦çš„é…ç½®ç®¡ç†ç»„ä»¶ï¼Œè´Ÿè´£é…ç½®çš„è·å–ã€å¤„ç†å’Œåˆ†å‘ã€‚Galley ä½¿ç”¨äº†ä¸€ç§å«ä½œ MCPï¼ˆMesh Configuration Protocolï¼Œç½‘æ ¼é…ç½®åè®®ï¼‰çš„åè®®ä¸å…¶ä»–ç»„ä»¶è¿›è¡Œé€šä¿¡ã€‚</p><h1 id="Istioä¹‹æµé‡ç®¡ç†"><a href="#Istioä¹‹æµé‡ç®¡ç†" class="headerlink" title="Istioä¹‹æµé‡ç®¡ç†"></a>Istioä¹‹æµé‡ç®¡ç†</h1><p>å¾®æœåŠ¡åº”ç”¨æœ€å¤§çš„ç—›ç‚¹å°±æ˜¯å¤„ç†æœåŠ¡é—´çš„é€šä¿¡ï¼Œè€Œè¿™ä¸€é—®é¢˜çš„æ ¸å¿ƒå…¶å®å°±æ˜¯æµé‡ç®¡ç†ã€‚é¦–å…ˆæ¥çœ‹ä¸€çœ‹ä¼ ç»Ÿçš„å¾®æœåŠ¡åº”ç”¨åœ¨æ²¡æœ‰æœåŠ¡ç½‘æ ¼ä»‹å…¥çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•å®Œæˆè¯¸å¦‚é‡‘ä¸é›€å‘å¸ƒè¿™æ ·çš„åŠ¨æ€è·¯ç”±ã€‚å‡è®¾ä¸å€ŸåŠ©ä»»ä½•ç°æˆçš„ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œä¸€ä¸ªç®€å•çš„å®ç°æ–¹æ³•æ˜¯ï¼Œåœ¨æœåŠ¡é—´æ·»åŠ ä¸€ä¸ªè´Ÿè½½å‡è¡¡ï¼ˆå¦‚Nginxï¼‰åšä»£ç†ï¼Œé€šè¿‡ä¿®æ”¹é…ç½®çš„æƒé‡æ¥åˆ†é…æµé‡ã€‚è¿™ç§æ–¹å¼å°†å¯¹æµé‡çš„ç®¡ç†å’ŒåŸºç¡€è®¾æ–½ï¼ˆäº‘æœåŠ¡å™¨ã€è™šæ‹Ÿæœºã€å®ä½“æœºç­‰ï¼‰ç»‘å®šåœ¨äº†ä¸€èµ·ï¼Œéš¾ä»¥ç»´æŠ¤ã€‚</p><p>è€Œä½¿ç”¨ Istio å°±å¯ä»¥è½»æ¾åœ°å®ç°å„ç§ç»´åº¦çš„æµé‡æ§åˆ¶ã€‚</p><p>ä¸‹å›¾å±•ç¤ºäº†ä¸¤ç§ä¸åŒçš„é‡‘ä¸é›€å‘å¸ƒç­–ç•¥ï¼ˆæ–°ç‰ˆæœ¬åªå¯¹å°‘æ•°ç»ˆç«¯ç”¨æˆ·å¯ç”¨ï¼‰ã€‚</p><p>ç¬¬ä¸€ç§æ˜¯æ ¹æ®æƒé‡æŠŠ 5% çš„æµé‡è·¯ç”±ç»™æ–°ç‰ˆæœ¬ï¼›</p><p>ç¬¬äºŒç§æ˜¯æ ¹æ®è¯·æ±‚çš„å¤´ä¿¡æ¯ User-Agent æŠŠä½¿ç”¨ iPhone çš„ç”¨æˆ·æµé‡è·¯ç”±åˆ°æ–°ç‰ˆæœ¬ã€‚</p><p>æ’æ›²ï¼šä»€ä¹ˆæ˜¯é‡‘ä¸é›€ç‰ˆæœ¬?é‡‘ä¸é›€canaryç‰ˆæœ¬æ˜¯ä¸€ç§è½¯ä»¶æŠ€æœ¯ç‰ˆæœ¬ï¼Œé€šè¿‡ä½¿æ–°ç‰ˆæœ¬åªå¯¹å°‘æ•°ç»ˆç«¯ç”¨æˆ·å¯ç”¨ï¼Œè¿™æ ·å¯é™ä½å‘æ¯ä¸ªäººæ¨å‡ºæ–°ä»£ç å’ŒåŠŸèƒ½çš„é£é™©ã€‚ç”±äºç”¨æˆ·ç»„çš„è§„æ¨¡è¾ƒå°ï¼Œæ–°ç‰ˆæœ¬çš„å½±å“ç›¸å¯¹è¾ƒå°ã€‚å¦‚æœç¡®å®šbugå­˜åœ¨ï¼Œæˆ–è€…æ–°çš„åŠŸèƒ½æˆ–æ–°çš„è®¾è®¡æ²¡æœ‰è¢«å¾ˆå¥½åœ°æ¥å—ï¼Œé‚£ä¹ˆå¾ˆå®¹æ˜“å›æ»šã€‚</p><p><a href="https://imgtu.com/i/jYheGd"><img src="https://s1.ax1x.com/2022/07/05/jYheGd.jpg" alt="jYheGd.jpg"></a></p><p>Istio çš„æµé‡ç®¡ç†æ˜¯é€šè¿‡ Pilot å’Œ Envoy è¿™ä¸¤ä¸ªç»„ä»¶å®ç°çš„ï¼Œå°†æµé‡å’ŒåŸºç¡€è®¾æ–½è¿›è¡Œäº†è§£è€¦ã€‚Pilot è´Ÿè´£é…ç½®è§„åˆ™ï¼Œå¹¶æŠŠè§„åˆ™åˆ†å‘åˆ° Envoy ä»£ç†å»å®æ–½ï¼›è€Œ Envoy æŒ‰ç…§è§„åˆ™æ‰§è¡Œå„ç§æµé‡ç®¡ç†çš„åŠŸèƒ½ï¼Œæ¯”å¦‚åŠ¨æ€è¯·æ±‚è·¯ç”±ï¼Œè¶…æ—¶ã€é‡è¯•å’Œç†”æ–­ï¼Œè¿˜å¯ä»¥é€šè¿‡æ•…éšœæ³¨å…¥æ¥æµ‹è¯•æœåŠ¡ä¹‹é—´çš„å®¹é”™èƒ½åŠ›ã€‚ä¸‹é¢å¯¹è¿™äº›å…·ä½“çš„åŠŸèƒ½è¿›è¡Œé€ä¸€ä»‹ç»ã€‚</p><h2 id="1ã€è¯·æ±‚è·¯ç”±"><a href="#1ã€è¯·æ±‚è·¯ç”±" class="headerlink" title="1ã€è¯·æ±‚è·¯ç”±"></a>1ã€è¯·æ±‚è·¯ç”±</h2><p>Istio ä¸ºäº†æ§åˆ¶æœåŠ¡è¯·æ±‚ï¼Œå¼•å…¥äº†æœåŠ¡ç‰ˆæœ¬ï¼ˆVersionï¼‰çš„æ¦‚å¿µï¼Œå¯ä»¥é€šè¿‡ç‰ˆæœ¬è¿™ä¸€æ ‡ç­¾å°†æœåŠ¡è¿›è¡ŒåŒºåˆ†ã€‚ç‰ˆæœ¬çš„è®¾ç½®æ˜¯éå¸¸çµæ´»çš„ï¼Œå¯ä»¥æ ¹æ®æœåŠ¡çš„è¿­ä»£ç¼–å·è¿›è¡Œå®šä¹‰ï¼ˆå¦‚ v1ã€v2 ç‰ˆæœ¬ï¼‰ï¼›ä¹Ÿå¯ä»¥æ ¹æ®éƒ¨ç½²ç¯å¢ƒè¿›è¡Œå®šä¹‰ï¼ˆå¦‚ Devã€Staging å’Œ Productionï¼‰ï¼›æˆ–è€…æ˜¯è‡ªå®šä¹‰ä»»ä½•ç”¨äºåŒºåˆ†æœåŠ¡çš„æ ‡è®°ã€‚é€šè¿‡ç‰ˆæœ¬æ ‡ç­¾ï¼ŒIstio å°±å¯ä»¥å®šä¹‰çµæ´»çš„è·¯ç”±è§„åˆ™ä»¥æ§åˆ¶æµé‡ï¼Œä¸Šé¢æåˆ°çš„é‡‘ä¸é›€å‘å¸ƒè¿™ç±»åº”ç”¨åœºæ™¯å°±å¾ˆå®¹æ˜“å®ç°äº†ã€‚</p><p>ä¸‹å›¾å±•ç¤ºäº†ä½¿ç”¨æœåŠ¡ç‰ˆæœ¬å®ç°è·¯ç”±åˆ†é…çš„ä¾‹å­ã€‚æœåŠ¡ç‰ˆæœ¬å®šä¹‰äº†ç‰ˆæœ¬å·ï¼ˆv1.5ã€v2.0-alphaï¼‰å’Œç¯å¢ƒï¼ˆus-prodã€us-stagingï¼‰ä¸¤ç§ä¿¡æ¯ã€‚æœåŠ¡ B åŒ…å«äº† 4 ä¸ªPodï¼Œå…¶ä¸­ 3 ä¸ªæ˜¯éƒ¨ç½²åœ¨ç”Ÿäº§ç¯å¢ƒçš„ v1.5 ç‰ˆæœ¬ï¼Œè€Œ Pod4 æ˜¯éƒ¨ç½²åœ¨é¢„ç”Ÿäº§ç¯å¢ƒçš„ v2.0-alpha ç‰ˆæœ¬ã€‚è¿ç»´äººå‘˜æ ¹æ®æœåŠ¡ç‰ˆæœ¬æŒ‡å®šè·¯ç”±è§„åˆ™ï¼Œé€šè¿‡ Pilot åŒæ­¥ç»™ Envoy ä»£ç†ï¼Œä½¿å¾— 99% çš„æµé‡æµå‘ v1.5 ç‰ˆæœ¬çš„ç”Ÿäº§ç¯å¢ƒï¼Œè€Œ 1% çš„æµé‡è¿›å…¥ v2.0-alpha ç‰ˆæœ¬çš„é¢„ç”Ÿäº§ç¯å¢ƒã€‚</p><p><a href="https://imgtu.com/i/jYhmRA"><img src="https://s1.ax1x.com/2022/07/05/jYhmRA.jpg" alt="jYhmRA.jpg"></a></p><h2 id="2ã€å…¥å£ç½‘å…³ï¼ˆIngressï¼‰å’Œå‡ºå£ç½‘å…³ï¼ˆEgressï¼‰"><a href="#2ã€å…¥å£ç½‘å…³ï¼ˆIngressï¼‰å’Œå‡ºå£ç½‘å…³ï¼ˆEgressï¼‰" class="headerlink" title="2ã€å…¥å£ç½‘å…³ï¼ˆIngressï¼‰å’Œå‡ºå£ç½‘å…³ï¼ˆEgressï¼‰"></a>2ã€å…¥å£ç½‘å…³ï¼ˆIngressï¼‰å’Œå‡ºå£ç½‘å…³ï¼ˆEgressï¼‰</h2><p>æœåŠ¡é—´é€šä¿¡æ˜¯é€šè¿‡ Envoy ä»£ç†è¿›è¡Œçš„ã€‚åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æ•´ä¸ªç³»ç»Ÿçš„å…¥å£å’Œå‡ºå£å¤„éƒ¨ç½²ä»£ç†ï¼Œä½¿å¾—æ‰€æœ‰æµå…¥å’Œæµå‡ºçš„æµé‡éƒ½ç”±ä»£ç†è¿›è¡Œè½¬å‘ï¼Œè€Œè¿™ä¸¤ä¸ªè´Ÿè´£å…¥å£å’Œå‡ºå£çš„ä»£ç†å°±å«ä½œå…¥å£ç½‘å…³å’Œå‡ºå£ç½‘å…³ã€‚å®ƒä»¬ç›¸å½“äºæ•´ä¸ªå¾®æœåŠ¡åº”ç”¨çš„è¾¹ç•Œä»£ç†ï¼ŒæŠŠå®ˆç€è¿›å…¥å’Œæµå‡ºæœåŠ¡ç½‘æ ¼çš„æµé‡ã€‚ä¸‹å›¾å±•ç¤ºäº† Ingress å’Œ Egress åœ¨è¯·æ±‚æµä¸­çš„ä½ç½®ï¼Œé€šè¿‡è®¾ç½® Envoy ä»£ç†ï¼Œå‡ºå…¥æœåŠ¡ç½‘æ ¼çš„æµé‡ä¹Ÿå¾—åˆ°äº†æ§åˆ¶ã€‚</p><p><a href="https://imgtu.com/i/jYhnxI"><img src="https://s1.ax1x.com/2022/07/05/jYhnxI.jpg" alt="jYhnxI.jpg"></a></p><h2 id="3ã€æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡"><a href="#3ã€æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡" class="headerlink" title="3ã€æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡"></a>3ã€æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡</h2><p>æœåŠ¡å‘ç°çš„å‰ææ¡ä»¶æ˜¯å…·æœ‰æœåŠ¡æ³¨å†Œçš„èƒ½åŠ›ã€‚ç›®å‰ Kubernetes è¿™ç±»å®¹å™¨ç¼–æ’å¹³å°ä¹Ÿæä¾›äº†æœåŠ¡æ³¨å†Œçš„èƒ½åŠ›ã€‚Istio åŸºäºå¹³å°å®ç°æœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡æ—¶ï¼Œéœ€è¦é€šè¿‡ Pilot å’Œ Envoy åä½œå®Œæˆï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚Pilot ç»„ä»¶ä¼šä»å¹³å°è·å–æœåŠ¡çš„æ³¨å†Œä¿¡æ¯ï¼Œå¹¶æä¾›æœåŠ¡å‘ç°çš„æ¥å£ï¼ŒEnvoy è·å¾—è¿™äº›ä¿¡æ¯å¹¶æ›´æ–°åˆ°è‡ªå·±çš„è´Ÿè½½å‡è¡¡æ± ã€‚Envoy ä¼šå®šæœŸåœ°å¯¹æ± ä¸­çš„å®ä¾‹è¿›è¡Œå¥åº·æ£€æŸ¥ï¼Œå‰”é™¤ç¦»çº¿çš„å®ä¾‹ï¼Œä¿è¯æœåŠ¡ä¿¡æ¯çš„å®æ—¶æ€§ã€‚</p><p><a href="https://imgtu.com/i/jYhKMt"><img src="https://s1.ax1x.com/2022/07/05/jYhKMt.jpg" alt="jYhKMt.jpg"></a></p><h1 id="Istioä¹‹æ•…éšœå¤„ç†"><a href="#Istioä¹‹æ•…éšœå¤„ç†" class="headerlink" title="Istioä¹‹æ•…éšœå¤„ç†"></a>Istioä¹‹æ•…éšœå¤„ç†</h1><p>Istio çš„æ•…éšœå¤„ç†éƒ½ç”± Envoy ä»£ç†å®Œæˆã€‚Envoy æä¾›äº†ä¸€æ•´å¥—ç°æˆçš„æ•…éšœå¤„ç†æœºåˆ¶ï¼Œæ¯”å¦‚è¶…æ—¶ã€é‡è¯•ã€é™æµå’Œç†”æ–­ç­‰ã€‚è¿™äº›åŠŸèƒ½éƒ½èƒ½å¤Ÿä»¥è§„åˆ™çš„å½¢å¼è¿›è¡ŒåŠ¨æ€é…ç½®ï¼Œå¹¶ä¸”æ‰§è¡Œè¿è¡Œæ—¶ä¿®æ”¹ã€‚è¿™ä½¿å¾—æœåŠ¡å…·æœ‰æ›´å¥½çš„å®¹é”™èƒ½åŠ›å’Œå¼¹æ€§ï¼Œå¹¶ä¿è¯æœåŠ¡çš„ç¨³å®šæ€§ã€‚</p><h1 id="Istioä¹‹æ•…éšœæ³¨å…¥"><a href="#Istioä¹‹æ•…éšœæ³¨å…¥" class="headerlink" title="Istioä¹‹æ•…éšœæ³¨å…¥"></a>Istioä¹‹æ•…éšœæ³¨å…¥</h1><p>ç®€å•æ¥è¯´ï¼Œæ•…éšœæ³¨å…¥å°±æ˜¯åœ¨ç³»ç»Ÿä¸­äººä¸ºåœ°è®¾ç½®ä¸€äº›æ•…éšœï¼Œæ¥æµ‹è¯•ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œç³»ç»Ÿæ¢å¤çš„èƒ½åŠ›ã€‚</p><p>æ¯”å¦‚ä¸ºæŸæœåŠ¡è®¾ç½®ä¸€ä¸ªå»¶è¿Ÿï¼Œä½¿å…¶é•¿æ—¶é—´æ— å“åº”ï¼Œç„¶åæ£€æµ‹è°ƒç”¨æ–¹æ˜¯å¦èƒ½å¤„ç†è¿™ç§è¶…æ—¶é—®é¢˜è€Œè‡ªèº«ä¸å—å½±å“ï¼ˆå¦‚åŠæ—¶ç»ˆæ­¢å¯¹æ•…éšœå‘ç”Ÿæ–¹çš„è°ƒç”¨ï¼Œé¿å…è‡ªå·±å—åˆ°å½±å“ä¸”ä½¿æ•…éšœæ‰©å±•ï¼‰ã€‚</p><p>æ•…éšœæ³¨å…¥æ€ä¹ˆå®ç°çš„ï¼Ÿä¹Ÿå¾ˆç®€å•ï¼Œæ¯”å¦‚å»¶è¿Ÿï¼Œä¸æ˜¯çœŸçš„å»è®©æœåŠ¡ç»„ä»¶æ•…éšœå»¶è¿Ÿï¼Œè€Œæ˜¯åœ¨è·å–åˆ°æœåŠ¡ç»„ä»¶çš„æ•°æ®ä¹‹åï¼Œåœ¨Envoyç«¯è¿›è¡Œå»¶è¿Ÿã€‚</p><p>Isito æ”¯æŒæ³¨å…¥ä¸¤ç§ç±»å‹çš„æ•…éšœï¼š<strong>å»¶è¿Ÿå’Œä¸­æ–­ã€‚</strong></p><p>å»¶è¿Ÿæ˜¯æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿæˆ–æœåŠ¡è¿‡è½½çš„æƒ…å†µï¼›</p><p>ä¸­æ–­æ˜¯æ¨¡æ‹Ÿä¸Šæ¸¸æœåŠ¡å´©æºƒçš„æƒ…å†µï¼Œè¡¨ç°ä¸º HTTP çš„é”™è¯¯ç å’Œ TCP è¿æ¥å¤±è´¥ã€‚</p><h1 id="ç­–ç•¥å’Œé¥æµ‹"><a href="#ç­–ç•¥å’Œé¥æµ‹" class="headerlink" title="ç­–ç•¥å’Œé¥æµ‹"></a>ç­–ç•¥å’Œé¥æµ‹</h1><h2 id="ç­–ç•¥"><a href="#ç­–ç•¥" class="headerlink" title="ç­–ç•¥"></a>ç­–ç•¥</h2><p>åœ¨å¾®æœåŠ¡åº”ç”¨ä¸­ï¼Œé™¤äº†æµé‡ç®¡ç†ä»¥å¤–ï¼Œå¸¸å¸¸è¿˜éœ€è¦è¿›è¡Œä¸€äº›é¢å¤–çš„æ§åˆ¶ï¼Œæ¯”å¦‚é™æµï¼ˆå¯¹è°ƒç”¨é¢‘ç‡ã€é€Ÿç‡è¿›è¡Œé™åˆ¶ï¼‰ã€è®¾ç½®ç™½åå•å’Œé»‘åå•ç­‰ã€‚</p><p>Istio ä¸­çš„ç­–ç•¥æ§åˆ¶æ˜¯ä¾é  Mixer å®Œæˆçš„ã€‚Envoy ä»£ç†åœ¨æ¯æ¬¡ç½‘ç»œè¯·æ±‚æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨ Mixer è¿›è¡Œé¢„å…ˆæ£€æŸ¥ï¼Œç¡®å®šæ˜¯å¦æ»¡è¶³å¯¹åº”çš„ç­–ç•¥ã€‚åŒæ—¶ï¼ŒMixer åˆå¯ä»¥æ ¹æ®è¿™äº›æ¥è‡ªæµé‡çš„æ•°æ®ï¼Œè¿›è¡ŒæŒ‡æ ‡æ•°æ®çš„é‡‡é›†å’Œæ±‡æ€»ï¼Œè¿™å°±æ˜¯é¥æµ‹åŠŸèƒ½ã€‚</p><h2 id="é¥æµ‹ï¼ˆTelemetryï¼‰"><a href="#é¥æµ‹ï¼ˆTelemetryï¼‰" class="headerlink" title="é¥æµ‹ï¼ˆTelemetryï¼‰"></a>é¥æµ‹ï¼ˆTelemetryï¼‰</h2><p>é¥æµ‹æ˜¯å·¥ä¸šä¸Šå¸¸ç”¨çš„ä¸€ç§æŠ€æœ¯ï¼Œå®ƒæ˜¯æŒ‡ä»è¿œç¨‹è®¾å¤‡ä¸­æ”¶é›†æ•°æ®ï¼Œå¹¶ä¼ è¾“åˆ°æ¥æ”¶è®¾å¤‡è¿›è¡Œç›‘æµ‹ã€‚åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œé¥æµ‹çš„å«ä¹‰å¼•ç”³ä¸ºå¯¹å„ç§æŒ‡æ ‡ï¼ˆmetricï¼‰æ•°æ®è¿›è¡Œæ”¶é›†ï¼Œå¹¶ç›‘æ§ã€åˆ†æè¿™äº›æŒ‡æ ‡ï¼Œæ¯”å¦‚æˆ‘ä»¬ç»å¸¸å¬åˆ°çš„ BI æ•°æ®åˆ†æã€‚</p><p>Mixer çš„ä¸€å¤§ä¸»è¦åŠŸèƒ½å°±æ˜¯é¥æµ‹ã€‚å‰é¢å·²ç»è¯´è¿‡ï¼ŒEnvoy ä»£ç†ä¼šå‘é€æ•°æ®ç»™ Mixerï¼Œè¿™å°±ä½¿å¾— Mixer å…·æœ‰äº†æ•°æ®æ”¶é›†çš„èƒ½åŠ›ã€‚åœ¨å¯¹ Mixer çš„ä»‹ç»ä¸­è¯»è€…å·²ç»äº†è§£åˆ° Mixer çš„æ’ä»¶æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯é€‚é…å™¨ã€‚Mixer å¯ä»¥æ¥å…¥ä¸åŒçš„åç«¯è®¾æ–½ä½œä¸ºé€‚é…å™¨ï¼Œæ¥å¤„ç†æ”¶é›†åˆ°çš„æŒ‡æ ‡æ•°æ®ï¼Œæ¯”å¦‚ï¼šæ—¥å¿—åˆ†æç³»ç»Ÿã€ç›‘æ§ç³»ç»Ÿç­‰ã€‚</p><h1 id="å¯è§†åŒ–"><a href="#å¯è§†åŒ–" class="headerlink" title="å¯è§†åŒ–"></a>å¯è§†åŒ–</h1><p>åœ¨å¾®æœåŠ¡åº”ç”¨è¶Šæ¥è¶Šå¤æ‚çš„æƒ…å†µä¸‹ï¼Œå¯¹æ•´ä¸ªç³»ç»Ÿçš„çŠ¶æ€è¿›è¡Œç›‘æ§å’Œè¿½è¸ªå˜å¾—å°¤ä¸ºé‡è¦ã€‚è¯•æƒ³å¦‚æœä¸€ä¸ªåŒ…å«ä¸Šç™¾ä¸ªæœåŠ¡çš„ç³»ç»Ÿå‘ç”Ÿäº†æ•…éšœå´æ— æ³•å‡†ç¡®å®šä½é—®é¢˜çš„æ ¹æºï¼Œæˆ–è€…ç³»ç»Ÿå‹åŠ›å·²ç»åˆ°äº†æ‰¿å—çš„ä¸´ç•Œå€¼è€Œè¿ç»´äººå‘˜å´æµ‘ç„¶ä¸çŸ¥ï¼Œè¿™æ˜¯å¤šä¹ˆå¯æ€•çš„äº‹æƒ…ã€‚æ²¡æœ‰å®Œå¤‡çš„ã€å¯è§‚å¯Ÿçš„ç›‘æ§ç³»ç»Ÿå°±æ— æ³•ä¿éšœç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚</p><p>Istio å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å’Œå„ç§ç›‘æ§ã€è¿½è¸ªå·¥å…·é›†æˆï¼Œä»¥ä¾¿æˆ‘ä»¬ä»¥å¯è§†åŒ–çš„æ–¹å¼ï¼ˆç½‘é¡µï¼‰ç›´è§‚åœ°æŸ¥çœ‹æ•´ä¸ªç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€ã€‚æ¯”å¦‚ï¼šå¯ä»¥é›†æˆ Prometheus æ¥è¿›è¡ŒæŒ‡æ ‡æ•°æ®çš„æ”¶é›†ï¼Œç„¶åå°†æ”¶é›†çš„æ•°æ®æ”¾åœ¨ Grafana ç›‘æ§å·¥å…·ä¸­å±•ç¤ºï¼›è¿˜å¯ä»¥é›†æˆ Jaeger ä½œä¸ºè¿½è¸ªç³»ç»Ÿï¼Œå¸®åŠ©æˆ‘ä»¬å¯¹è¯·æ±‚çš„è°ƒç”¨é“¾è¿›è¡Œè·Ÿè¸ªï¼Œåœ¨æ•…éšœå‘ç”Ÿæ—¶åˆ†æå‡ºç°é—®é¢˜çš„æ ¹æºï¼›æˆ–è€…å°†è¯·æ±‚æ—¥å¿—è®°å½•åˆ° Kibana ç³»ç»Ÿï¼Œä»¥å›¾è¡¨çš„æ–¹å¼è¿›è¡Œæ•°æ®åˆ†æã€‚</p><p>ä»¥ä¸Šæåˆ°çš„è¿™äº›å¯è§†åŒ–å·¥å…·éƒ½ä¼šåœ¨é›†æˆåˆ° Istio ä¸­å¾—åˆ°è¯¦ç»†çš„ä»‹ç»ã€‚</p><h1 id="VirtualServiceè·¯ç”±è§„åˆ™é…ç½®"><a href="#VirtualServiceè·¯ç”±è§„åˆ™é…ç½®" class="headerlink" title="VirtualServiceè·¯ç”±è§„åˆ™é…ç½®"></a>VirtualServiceè·¯ç”±è§„åˆ™é…ç½®</h1><p>virtualServiceæ˜¯istioæœ€ä¸»è¦æœ€å¤æ‚çš„æ ¸å¿ƒé…ç½®ï¼Œä¸»è¦è´Ÿè´£é…ç½®æœåŠ¡çš„è°ƒç”¨è§„åˆ™ï¼Œåˆ†å‘è§„åˆ™ç­‰ç­‰ï¼Œåœ¨è¯¦ç»†ä»‹ç»vsåŠŸèƒ½ä¹‹å‰ï¼Œå¯ä»¥å…ˆæŸ¥çœ‹ä»¥ä¸‹çš„ç®€åŒ–é…ç½®å†…å®¹</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">VirtualService</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">reviews</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">reviews</span></span><br><span class="line">  <span class="attr">http:</span></span><br><span class="line"></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">match:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">headers:</span></span><br><span class="line">      <span class="attr">end-user:</span></span><br><span class="line">        <span class="attr">exact:</span> <span class="string">jason</span></span><br><span class="line">      <span class="attr">route:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">destination:</span></span><br><span class="line">      <span class="attr">host:</span> <span class="string">reviews</span></span><br><span class="line">      <span class="attr">subset:</span> <span class="string">v2</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">route:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">destination:</span></span><br><span class="line">      <span class="attr">host:</span> <span class="string">reviews</span></span><br><span class="line">      <span class="attr">subset:</span> <span class="string">v1</span></span><br></pre></td></tr></table></figure><p>metadata_nameï¼š vsçš„åç§°</p><p>spec_hostsï¼šå¯¹åº”æœåŠ¡çš„serviceåç§°</p><p>spec_http_matchï¼šè·¯ç”±è§„åˆ™<br>ä¸Šé¢è¡¨è¾¾å¼çš„å†…å®¹è§£è¯´è¿‡æ¥ä¸ºï¼šå¯¹reviewsæœåŠ¡çš„è®¿é—®è¯·æ±‚ä¸­ï¼Œå¦‚æœè¯·æ±‚å¤´çš„end-userçš„å€¼ä¸ºjasonï¼Œåˆ™å°†æµé‡è·¯ç”±åˆ°reviewsæœåŠ¡çš„v2ç‰ˆæœ¬ä¸Šï¼Œå…¶ä»–æµé‡è·¯ç”±åœ¨v1ç‰ˆ</p><h2 id="vsé…ç½®ä¸­çš„å…³é”®é…ç½®é¡¹"><a href="#vsé…ç½®ä¸­çš„å…³é”®é…ç½®é¡¹" class="headerlink" title="vsé…ç½®ä¸­çš„å…³é”®é…ç½®é¡¹:"></a>vsé…ç½®ä¸­çš„å…³é”®é…ç½®é¡¹:</h2><ol><li><p>hostsï¼šè¡¨ç¤ºæµé‡å‘é€çš„ç›®æ ‡ï¼ˆå¯ä»¥ç†è§£ä¸ºæ‹¦æˆªç›®æ ‡ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºé…ç½®çš„è·¯ç”±è§„åˆ™å½’å±å“ªä¸€ä¸ªSidecarï¼‰ï¼Œåœ¨k8sä¸­hostséœ€è¦é…ç½®ä¸ºæœåŠ¡çš„serviceåŸŸåï¼ŒåŒnamesapceä¸‹å¯ä»¥é…ç½® <strong>çŸ­åŸŸå</strong>ï¼ˆå› ä¸ºå¯ä»¥è·¨namespaceé…ç½®è·¯ç”±è§„åˆ™ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ä¸ä¾¿äºç®¡ç†çš„ï¼Œå¦‚æœé‡æ–°å¼€å‘istioé…ç½®ç®¡ç†dashboardå¯ä»¥è€ƒè™‘ä¸ºåŸŸååˆ†é…å¢åŠ æƒé™ï¼‰</p></li><li><p>http: æ˜¯ä¸€ä¸ªç±»ä¼¼httpRouteçš„è·¯ç”±é›†åˆï¼Œç”¨äºå¤„ç†httpçš„æµé‡ï¼Œæ˜¯istioæœ€ä¸°å¯Œçš„çš„æµé‡è§„åˆ™</p></li><li><p>tlsï¼šæ˜¯ä¸€ä¸ªtlsRouteç±»å‹çš„è·¯ç”±é›†åˆï¼Œç”¨äºå¤„ç†éç»ˆç»“çš„tlså’Œhttpsæµé‡</p></li><li><p>tcpï¼šæ˜¯ä¸€ä¸ªtcpRouteç±»å‹çš„è·¯ç”±é›†åˆï¼Œç”¨äºå¤„ç†tcpæµé‡ï¼Œåº”ç”¨äºæ‰€æœ‰éhttpå’Œtlsç«¯å£çš„æµé‡</p></li><li><p>exportToï¼šæ˜¯istioåœ¨1.1ç‰ˆæœ¬åçš„æ–°å¢ç‰¹æ€§ï¼Œç”¨äºæ§åˆ¶VSè·¨namespaceçš„å¯è§æ€§ã€‚å¯ä»¥æ§åˆ¶åœ¨ä¸€ä¸ªå‘½åç©ºé—´ä¸‹å®šä¹‰çš„vsæ˜¯å¦å¯ä»¥è¢«å…¶ä»–å‘½åç©ºé—´çš„Sidecarå’ŒGatewayä½¿ç”¨ã€‚ä¸å¡«å†™ä»£è¡¨å…¨å±€å¯è§ï¼Œâ€.â€œä»£è¡¨ä»…å½“å‰namespaceå¯è§ï¼Œâ€* â€œä»£è¡¨æ‰€æœ‰namespaceå¯è§ã€‚</p></li></ol><h2 id="HttpRoute"><a href="#HttpRoute" class="headerlink" title="HttpRoute"></a>HttpRoute</h2><p>åœ¨æ­£å¸¸ä½¿ç”¨æ—¶ï¼Œhttpåè®®çš„è·¯ç”±åº”ç”¨åœºæ™¯æœ€å¤šï¼Œä¸»è¦ä»‹ç»ä¸€ä¸‹httpè·¯ç”±çš„ä½¿ç”¨åœºæ™¯å’Œä½¿ç”¨æ–¹æ³•</p><p><a href="https://imgtu.com/i/jUMKPA"><img src="https://s1.ax1x.com/2022/07/06/jUMKPA.jpg" alt="jUMKPA.jpg"></a></p><p>å¦‚ä¸Šå›¾ï¼Œhttprouteå¯ä»¥é€šè¿‡è¯·æ±‚ä¸­çš„å†…å®¹ä¸ºæ¡ä»¶ï¼Œå¯¹è¯·æ±‚è¿›è¡Œé‡å®šå‘ã€é‡å†™ã€é‡è¯•ã€æ•…éšœæ³¨å…¥ã€æµé‡å¤åˆ¶ç­‰æ“ä½œ<br>æˆ‘ä»¬æŠŠè¿™äº›æ­¥éª¤æ‹†åˆ†ä¸€ä¸‹ï¼Œä¸»è¦åˆ†ä¸ºåŒ¹é…è§„åˆ™ï¼Œé‡å®šå‘ï¼Œé‡å†™ï¼Œé‡è¯•ï¼Œæ•…éšœæ³¨å…¥ï¼Œæµé‡å¤åˆ¶è¿™å‡ ä¸ªæ–¹é¢æ¥è¯¦è¿°ã€‚</p><h2 id="HTTPRouteçš„åŒ¹é…è§„åˆ™"><a href="#HTTPRouteçš„åŒ¹é…è§„åˆ™" class="headerlink" title="HTTPRouteçš„åŒ¹é…è§„åˆ™"></a>HTTPRouteçš„åŒ¹é…è§„åˆ™</h2><p>ç®€è¿°ï¼šåŒ¹é…è§„åˆ™æ˜¯åˆ†å‘æµé‡çš„é‡è¦æ¡ä»¶ï¼Œå…³é”®å­—æ®µæ˜¯matchå­—æ®µï¼Œåœ¨matchå­—æ®µä¸‹å°±æ˜¯å¯¹è¯·æ±‚è·¯ç”±çš„åŒ¹é…æ–¹å¼ã€‚</p><p><a href="https://imgtu.com/i/jUMn5d"><img src="https://s1.ax1x.com/2022/07/06/jUMn5d.jpg" alt="jUMn5d.jpg"></a></p><p>uriã€schemeã€methodã€authorityï¼šè¿™4ä¸ªå­—æ®µéƒ½æ˜¯StringMatchç±»å‹ï¼Œè¯·æ±‚è§„åˆ™ä¸­éƒ½æ”¯æŒexactï¼ˆå®Œå…¨åŒ¹é…ï¼‰ï¼Œprefixï¼ˆå‰ç¼€åŒ¹é…ï¼‰ã€regexï¼ˆæ­£åˆ™åŒ¹é…ï¼‰ä¸‰ç§åŒ¹é…æ–¹å¼<br>headersï¼šåŒ¹é…è¯·æ±‚ä¸­çš„headerï¼Œæ˜¯ä¸€ä¸ªmapç±»å‹ï¼Œæ‰€ä»¥åŒ¹é…æ—¶ä»¥k-vçš„å½¢å¼æ¯”å¯¹ï¼Œå¯¹æ¯ä¸€ä¸ªheaderçš„å€¼éƒ½å¯ä»¥ä½¿ç”¨exactï¼Œprefixã€regexä¸‰ç§åŒ¹é…æ–¹å¼ã€‚<br>ä¾‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">match:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">headers:</span> </span><br><span class="line">        <span class="attr">end-user:</span> </span><br><span class="line">            <span class="attr">exact:</span> <span class="string">jason</span></span><br><span class="line">      <span class="attr">uri:</span></span><br><span class="line">        <span class="attr">prefix:</span> <span class="string">&quot;/testPipeline&quot;</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šè§„åˆ™ä¸­åŒ…å«äº†1å’Œ2çš„ä½¿ç”¨æ–¹å¼ï¼Œä»£è¡¨åŒ¹é…è¯·æ±‚å¤´ä¸­çš„end-userçš„å€¼ä¸ºjasonä¸”uriä»¥/testPipelineå¼€å¤´çš„è¯·æ±‚ã€‚</p><p>æ³¨æ„ï¼Œæ¡ä»¶æˆ–æ€ä¹ˆå†™ï¼Ÿå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">match:</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="attr">headers:</span> </span><br><span class="line">        <span class="attr">end-user:</span> </span><br><span class="line">            <span class="attr">exact:</span> <span class="string">jason</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">uri:</span></span><br><span class="line">        <span class="attr">prefix:</span> <span class="string">&quot;/testPipeline&quot;</span></span><br></pre></td></tr></table></figure><p>portï¼šè¡¨ç¤ºè¯·æ±‚çš„ç«¯å£ï¼Œåœ¨ä½¿ç”¨æ—¶å¤§éƒ¨åˆ†çš„æœåŠ¡éƒ½åªå¼€æ”¾äº†ä¸€ä¸ªç«¯å£ï¼Œåœ¨è¿™ç§åœºæ™¯ä¸‹å¯ä»¥ä¸ç”¨æŒ‡å®šç«¯å£ï¼ˆportåœ¨å®é™…ä½¿ç”¨ä¸­ä½¿ç”¨ç‡ä¼šå°äº›ï¼‰<br><strong>sourceLabelsï¼šè¡¨ç¤ºè¯·æ±‚æ¥æºæœåŠ¡çš„æ ‡ç­¾ï¼Œåœ¨k8sä¸­è¿™ä¸ªæ ‡ç­¾å°±æ˜¯æŒ‡podçš„æ ‡ç­¾ã€‚</strong><br>ä¾‹ï¼š<br>http:</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">http:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">match:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">sourceLabels:</span></span><br><span class="line">        <span class="attr">app:</span> <span class="string">cicdfront</span></span><br><span class="line">        <span class="attr">version:</span> <span class="string">v1.0.10</span></span><br><span class="line">    <span class="attr">route:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">destination:</span></span><br><span class="line">        <span class="attr">host:</span> <span class="string">cicdapi</span></span><br><span class="line">        <span class="attr">subset:</span> <span class="string">v1.0.10</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">route:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">destination:</span></span><br><span class="line">        <span class="attr">host:</span> <span class="string">cicdapi</span></span><br><span class="line">        <span class="attr">subset:</span> <span class="string">v1.0.9</span></span><br></pre></td></tr></table></figure><p><strong>å½“è¯·æ±‚æœåŠ¡æ¥æºä¸ºcicdfrontä¸”å…¶podç‰ˆæœ¬ä¸ºv1.0.10æ—¶ä¼šå°†æµé‡è½¬å‘åˆ°cicdapiçš„v1.0.10ä¸Šï¼Œå…¶ä»–çš„è¯·æ±‚ä¼šå‘é€åˆ°cicdapiçš„v1.0.9ç‰ˆæœ¬ä¸Š</strong></p><h2 id="HttpRouteçš„è·¯ç”±ç›®æ ‡"><a href="#HttpRouteçš„è·¯ç”±ç›®æ ‡" class="headerlink" title="HttpRouteçš„è·¯ç”±ç›®æ ‡"></a>HttpRouteçš„è·¯ç”±ç›®æ ‡</h2><p>ç®€è¿°ï¼šè·¯ç”±ç›®æ ‡ä»£è¡¨è¯·æ±‚æµé‡å‘é€åˆ°çš„ç›®æ ‡æœåŠ¡ï¼Œ<strong>å…³é”®å­—æ®µæ˜¯route</strong>ï¼Œåœ¨matchï¼ˆåŒ¹é…è§„åˆ™ï¼‰ä¸‹æ—¶å¸¸ä»£è¡¨åŒ¹é…è§„åˆ™åçš„å‘é€è¯·æ±‚çš„ç›®æ ‡æœåŠ¡ã€‚<br>å½“è¯·æ±‚å®ŒæˆåŒ¹é…è§„åˆ™åï¼Œæˆ‘ä»¬éœ€è¦å¯¹åŒ¹é…åˆ°çš„è¯·æ±‚è¿›è¡Œè½¬å‘ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä»¥å¼€å§‹çš„é…ç½®ä¸¾ä¾‹(ç¨å¾®æ”¹åŠ¨ä¸€ä¸‹)ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">http:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">match:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">headers:</span></span><br><span class="line">        <span class="attr">end-user:</span></span><br><span class="line">          <span class="attr">exact:</span> <span class="string">jason</span></span><br><span class="line">    <span class="attr">route:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">destination:</span></span><br><span class="line">        <span class="attr">host:</span> <span class="string">reviews</span></span><br><span class="line">        <span class="attr">subset:</span> <span class="string">v2</span></span><br><span class="line">     <span class="attr">weight:</span> <span class="number">30</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">destination:</span></span><br><span class="line">        <span class="attr">host:</span> <span class="string">reviews</span></span><br><span class="line">        <span class="attr">subset:</span> <span class="string">v3</span></span><br><span class="line">     <span class="attr">weight:</span> <span class="number">70</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">route:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">destination:</span></span><br><span class="line">        <span class="attr">host:</span> <span class="string">reviews</span></span><br><span class="line">        <span class="attr">subset:</span> <span class="string">v1</span></span><br></pre></td></tr></table></figure><p><strong>é€šè¿‡ä¸ŠèŠ‚çš„åŒ¹é…è§„åˆ™æˆ‘ä»¬å¯ä»¥ç†è§£matchä¸­çš„åŒ¹é…è§„åˆ™ä¸ºè¯·æ±‚å¤´ä¸­çš„end-userçš„å€¼ä¸ºjasonã€‚å½“åŒ¹é…è¿™ä¸€æ¡ä»¶æ—¶routeè·¯ç”±ç”Ÿæ•ˆï¼Œå°†è¯·æ±‚çš„30%å‘é€åˆ°reviewsæœåŠ¡çš„v2ç‰ˆæœ¬ä¸Šï¼Œå¦å¤–70%å‘é€åˆ°reviewsæœåŠ¡çš„v3ç‰ˆæœ¬ä¸Šã€‚å¯¹æœªèƒ½åŒ¹é…çš„è¯·æ±‚è·¯ç”±åˆ°v1ç‰ˆæœ¬ä¸Šã€‚</strong></p><p>è¿™ä¸€è½¬å‘éœ€è¦æ­é…istioçš„å¦ä¸€ä¸ªé‡è¦é…ç½®DRï¼ˆDestinationRuleï¼‰ä½¿ç”¨ï¼ŒDRä¸­é€šè¿‡æ ‡ç­¾å®šä¹‰ä¸åŒçš„podæœåŠ¡ã€‚é€šè¿‡subsetå­é›†æ¥å®Œæˆè¯·æ±‚çš„è°ƒç”¨ï¼Œè¿™é‡ŒæŒ‰reviewsæœåŠ¡çš„v1 v2ä¸¤ä¸ªpodç†è§£å°±å¥½:</p><ul><li><strong>destinationä¸­çš„hostä¸httpä¸­çš„hostä¸€è‡´ï¼Œåœ¨k8sä¸­ä¹Ÿæ˜¯æŒ‡å‘çš„serviceçš„åŸŸå</strong>ï¼Œå¯ä»¥çœç•¥éƒ¨åˆ†å†…å®¹åšçŸ­åŸŸåï¼ˆåœ¨åŒnamespaceä¸‹çš„æ—¶å€™ï¼‰ã€‚subsetä»£è¡¨å¯¹åº”çš„drå­é›†ã€‚</li><li><strong>weightï¼šé™¤äº†destinationä¹‹å¤–çš„å¦ä¸€ä¸ªé‡è¦å±æ€§ä¸»è¦ç”¨äºæµé‡åˆ†é…çš„æ¯”ä¾‹ï¼Œåœ¨ä¸€ä¸ªrouteä¸‹å¤šä¸ªdrä¸‹æµé‡æƒé‡ä¹‹å’Œå¿…é¡»ä¸º100</strong></li></ul><h2 id="HTTPRedirecté‡å®šå‘"><a href="#HTTPRedirecté‡å®šå‘" class="headerlink" title="HTTPRedirecté‡å®šå‘"></a>HTTPRedirecté‡å®šå‘</h2><p>ç®€è¿°ï¼šistioå¯ä»¥äººå·¥æ³¨å…¥ä¸€äº›ä¸å¯è§çš„é‡å®šå‘è§„åˆ™ï¼Œ<strong>è‡ªå®šä¹‰çš„é‡å®šå‘è§„åˆ™åœ¨redirectå…³é”®å­—ä¸‹ã€‚</strong><br>ç†è§£äº†istioçš„vså·¥ä½œæ¨¡å¼é‚£ä¹ˆæˆ‘ä»¬æ¥ä¸‹æ¥ç»§ç»­çœ‹istioçš„é‡å®šå‘åŠŸèƒ½ã€‚</p><p>æ¯”è¾ƒå¸¸è§çš„ä½¿ç”¨åœºæ™¯ï¼šç½‘ç«™ç³»ç»Ÿçš„ç½‘ç«™åœ°å€å‘ç”Ÿäº†å˜åŒ–ï¼ˆå¹¶éæœåŠ¡å™¨å˜åŒ–ï¼Œåªæ˜¯è®¿é—®åœ°å€çš„è¯·æ±‚åç¼€å˜åŒ–ï¼‰ï¼Œ<strong>è¦æ±‚ä½¿ç”¨ä¹‹å‰çš„è®¿é—®åœ°å€ä¹Ÿèƒ½å¤Ÿè¿›å…¥ç½‘ç«™ï¼Œä¸å½±å“æ—§ç”¨æˆ·çš„æ“ä½œ</strong>ã€‚è¿™ç§æƒ…å†µä¸‹å°±å¾ˆé€‚åˆä½¿ç”¨istioçš„é‡å®šå‘åŠŸèƒ½</p><ul><li>uriï¼šæ›¿æ¢urlä¸­çš„pathéƒ¨åˆ†</li><li>authorityï¼šæ›¿æ¢urlä¸­çš„authorityéƒ¨åˆ†</li></ul><p>ä¾‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">VirtualService</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">cicdapi</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">cicdapi</span></span><br><span class="line">  <span class="attr">http:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">match:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uri:</span></span><br><span class="line">        <span class="attr">prefix:</span> <span class="string">/pipeline</span></span><br><span class="line">      <span class="attr">redirect:</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">/cicd/pipeline</span></span><br><span class="line">        <span class="attr">authority:</span> <span class="string">newcicd</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šçš„è¯·æ±‚å¯¹cicdapiæœåŠ¡çš„/pipelineè¯·æ±‚éƒ½ä¼šè¢«é‡å®šå‘åˆ°newcicdæœåŠ¡çš„/cicd/pipelineä¸Š</p><h2 id="HTTPRewriteé‡å†™"><a href="#HTTPRewriteé‡å†™" class="headerlink" title="HTTPRewriteé‡å†™"></a>HTTPRewriteé‡å†™</h2><p>ç®€è¿°ï¼šistioå¯ä»¥åœ¨è¯·æ±‚å‘é€ç»™ç›®æ ‡æœåŠ¡ä¹‹å‰å¯¹è¯·æ±‚ä¿¡æ¯è¿›è¡Œæ”¹å†™ï¼Œè¿™ä¸ªæ”¹å†™è¿‡ç¨‹æ˜¯å¯¹å®¢æˆ·ç«¯åŠæœåŠ¡ç«¯éƒ½ä¸å¯è§çš„ã€‚é‡å†™ä¸é‡å®šå‘å¾ˆåƒã€‚<br>å…³é”®å­—ï¼šrewrite</p><ol><li>uri: é‡å†™urlä¸­çš„pathéƒ¨åˆ†</li><li>authority: é‡å†™urlä¸­çš„authorityéƒ¨åˆ†</li></ol><p>ä¾‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">VirtualService</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">cicdapi</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">cicdapi</span></span><br><span class="line">  <span class="attr">http:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">match:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uri:</span></span><br><span class="line">        <span class="attr">prefix:</span> <span class="string">/pipeline</span></span><br><span class="line">      <span class="attr">rewrite:</span></span><br><span class="line">        <span class="attr">uri:</span> <span class="string">/cicd/pipeline</span></span><br></pre></td></tr></table></figure><h2 id="HTTPRertyé‡è¯•"><a href="#HTTPRertyé‡è¯•" class="headerlink" title="HTTPRertyé‡è¯•"></a>HTTPRertyé‡è¯•</h2><p>ç®€è¿°ï¼šå¾ˆå¤šæ—¶å€™httpè¯·æ±‚å‘ç”Ÿå¼‚å¸¸ï¼Œé‡è¯•éƒ½æ˜¯è§£å†³å¼‚å¸¸çš„æœ€ç›´æ¥ï¼Œæœ€ç®€å•çš„åŠæ³•ï¼Œå°¤å…¶æ˜¯ç¯å¢ƒæ¯”è¾ƒå¤æ‚çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æé«˜æ€»ä½“çš„æœåŠ¡è´¨é‡ï¼Œ<strong>ä½†æ˜¯è¿™ä¸ªé‡è¯•é€»è¾‘å¦‚æœæ”¾åœ¨å®¢æˆ·ç«¯è¿›è¡Œè°ƒåº¦å°±è¿‡äºä¸è§„èŒƒï¼Œä¸ä¾¿äºç®¡ç†</strong>ã€‚istioå¯ä»¥æ”¯æŒè¿™ç§é‡è¯•çš„è‡ªåŠ¨è°ƒåº¦ã€‚<br>å…³é”®å­—ï¼šretry</p><ol><li>attemptsï¼šå¿…å¡«å­—æ®µï¼Œå®šä¹‰é‡è¯•çš„æ¬¡æ•°</li><li>perTryTimeoutï¼šæ¯æ¬¡é‡è¯•çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½å¯ä»¥æ˜¯æ¯«ç§’(ms)ï¼Œç§’(s)ï¼Œåˆ†é’Ÿ(m)å’Œå°æ—¶(h)</li><li>retryOn: é‡è¯•çš„æ¡ä»¶ï¼Œå¯ä»¥æ˜¯å¤šä¸ªæ¡ä»¶ä»¥é€—å·åˆ†éš”ã€‚å¯ç”¨æ¡ä»¶æœ‰ä»¥ä¸‹å†…å®¹</li></ol><ul><li>ï¼ˆ1ï¼‰5xxï¼šåœ¨ä¸Šæ¸¸æœåŠ¡è¿”å›5xxçš„è¿”å›ç ï¼Œæˆ–åœ¨æ²¡æœ‰å“åº”çš„æ—¶å€™è¿›è¡Œé‡è¯•</li><li>ï¼ˆ2ï¼‰gateway-errorï¼šç±»ä¼¼5xxå¼‚å¸¸ï¼Œåªå¯¹502,503,504çš„è·¯ç”±å¼‚å¸¸è¿›è¡Œé‡è¯•</li><li>ï¼ˆ3ï¼‰connect-failureï¼šåœ¨è¿æ¥ä¸Šæ¸¸æœåŠ¡å¤±è´¥æ—¶é‡è¯•</li><li>ï¼ˆ4ï¼‰retriable-4xxï¼šåœ¨ä¸Šæ¸¸æœåŠ¡è¿”å›4xxè¿”å›ç æ—¶è¿›è¡Œé‡è¯•ï¼ˆè¿™é‡Œå¯èƒ½ä¸åŒ…æ‹¬éƒ¨åˆ†è¿”å›ç ï¼Œå¦‚404,405ï¼‰</li><li>ï¼ˆ5ï¼‰refused-streamï¼šåœ¨ä¸Šæ¸¸æœåŠ¡ä½¿ç”¨REFUSED_STREAMé”™è¯¯ç é‡ç½®æ—¶é‡è¯•</li><li>ï¼ˆ6ï¼‰cancelledï¼šåœ¨gRPCåº”ç­”çš„Headerä¸­çŠ¶æ€ç æ˜¯cancelledæ—¶é‡è¯•</li><li>ï¼ˆ7ï¼‰deadline-exceededï¼šåœ¨gRPCåº”ç­”çš„Headerä¸­çš„çŠ¶æ€ç æ˜¯deadline-exceededæ—¶é‡è¯•</li><li>ï¼ˆ8ï¼‰internalï¼šåœ¨gRPCåº”ç­”çš„Headerä¸­çš„çŠ¶æ€ç æ˜¯internalæ—¶é‡è¯•</li><li>ï¼ˆ9ï¼‰resource-exhaustedï¼šåœ¨gRPCåº”ç­”çš„Headerä¸­çš„çŠ¶æ€ç æ˜¯resource-exhaustedæ—¶é‡è¯•</li><li>ï¼ˆ10ï¼‰unavailableï¼šåœ¨gRPCåº”ç­”çš„Headerä¸­çš„çŠ¶æ€ç æ˜¯unavailableæ—¶é‡è¯•</li></ul><p>ä¾‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">VirtualService</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">cicdapi</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">cicdapi</span></span><br><span class="line">  <span class="attr">http:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">route:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">destination:</span></span><br><span class="line">          <span class="attr">host:</span> <span class="string">cicdapi</span></span><br><span class="line">     <span class="attr">retries:</span></span><br><span class="line">       <span class="attr">attempts:</span> <span class="number">5</span></span><br><span class="line">       <span class="attr">perTryTimeout:</span> <span class="string">3s</span></span><br><span class="line">       <span class="attr">retryOn:</span> <span class="string">5xx,connect-failure</span></span><br></pre></td></tr></table></figure><h2 id="Mirroræµé‡å¤åˆ¶"><a href="#Mirroræµé‡å¤åˆ¶" class="headerlink" title="Mirroræµé‡å¤åˆ¶"></a>Mirroræµé‡å¤åˆ¶</h2><p>ç®€è¿°ï¼š<strong>æµé‡å¤åˆ¶æ˜¯æŒ‡åœ¨æµé‡éœ€è¦å‘é€åˆ°æŸä¸ªæœåŠ¡æ—¶ï¼Œå°†è¿™ä¸ªè¯·æ±‚æµé‡å¤åˆ¶ä¸€ä»½åˆ°ä¸€ä¸ªæŒ‡å®šçš„æœåŠ¡ä¸Š</strong>ï¼Œå¦‚ä¸‹å›¾ã€‚å¯ä»¥å°†ç”Ÿäº§ç³»ç»Ÿçš„æµé‡å¤åˆ¶åˆ°ä¸€ä¸ªéœ€è¦æ›´æ–°çš„æ–°ç‰ˆæœ¬æœåŠ¡ä¸Šï¼Œè¿™æ ·å®Œå…¨ä¸ä¼šå¯¹ç”Ÿäº§ç³»ç»Ÿäº§ç”Ÿå½±å“ï¼Œè¿™é‡Œåªå¤åˆ¶äº†ä¸€ä»½æµé‡ï¼Œæ•°æ®é¢ä»£ç†åªéœ€è¦ä½åŸæ¥çš„æµé‡å°±å¯ä»¥äº†ã€‚<br>å…³é”®å­—ï¼šmirror</p><p><a href="https://imgtu.com/i/jUMM8I"><img src="https://s1.ax1x.com/2022/07/06/jUMM8I.jpg" alt="jUMM8I.jpg"></a></p><p>ä¾‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">VirtualService</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">portal-web</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">portal-web</span></span><br><span class="line">  <span class="attr">http:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">route:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">destination:</span></span><br><span class="line">          <span class="attr">host:</span> <span class="string">portal-web</span></span><br><span class="line">          <span class="attr">subset:</span> <span class="string">v1.0.15</span></span><br><span class="line">      <span class="attr">mirror:</span></span><br><span class="line">        <span class="attr">host:</span> <span class="string">portal-web</span></span><br><span class="line">        <span class="attr">subset:</span> <span class="string">v1.0.16</span></span><br></pre></td></tr></table></figure><h2 id="HttpFaultInjectionæ•…éšœæ³¨å…¥"><a href="#HttpFaultInjectionæ•…éšœæ³¨å…¥" class="headerlink" title="HttpFaultInjectionæ•…éšœæ³¨å…¥"></a>HttpFaultInjectionæ•…éšœæ³¨å…¥</h2><p>ç®€è¿°ï¼šé™¤äº†è½¬å‘é‡è¯•è¿™äº›å¸¸ç”¨çš„httpè¯·æ±‚æ“ä½œï¼Œistioè¿˜æ”¯æŒæ•…éšœæ³¨å…¥ã€‚ä¸»è¦ç”¨äºæµ‹è¯•æ—¶<strong>ä¸»åŠ¨æ¨¡æ‹Ÿä¸€äº›å¼‚å¸¸åœºæ™¯</strong>ï¼Œæ¯”å¦‚è·¨æœåŠ¡è¯·æ±‚è¶…æ—¶ï¼Œè®¿é—®ä¸­å‘ç”Ÿé”™è¯¯ç­‰æƒ…å†µã€‚</p><p><strong>è¿™ä¸ªä½œç”¨ä¸»è¦æ˜¯è§‚å¯Ÿå¾®æœåŠ¡ä¸­ï¼ŒæŸä¸ªæœåŠ¡å¤„æ•…éšœæ—¶ï¼Œæ•´ä½“æœåŠ¡çš„å¥åº·çŠ¶å†µï¼Œè§‚å¯Ÿæ˜¯å¦ä¼šå‡ºç°çº§è”å½±å“çš„æƒ…å†µã€‚</strong></p><p>åœ¨istioä¸­æ•…éšœæ³¨å…¥ä¸»è¦åˆ†ä¸ºä¸¤ç§</p><p>å»¶è¿Ÿæ•…éšœæ³¨å…¥</p><p>å»¶è¿Ÿæ•…éšœæ³¨å…¥ç”¨æ¥æ¨¡æ‹Ÿè¶…æ—¶çš„åœºæ™¯ï¼Œæ¨¡æ‹Ÿç½‘ç»œè´Ÿè½½ç­‰åŸå› å¯¼è‡´çš„è¯·æ±‚å¤±è´¥</p><p>é…ç½®å‚æ•°å¦‚ä¸‹ï¼š<br>ï¼ˆ1ï¼‰fixedDelayï¼šå¿…é€‰å­—æ®µï¼Œè¡¨ç¤ºå»¶è¿Ÿçš„æ—¶é—´ï¼Œå•ä½å¯ä»¥æ˜¯æ¯«ç§’ï¼Œç§’ï¼Œåˆ†é’Ÿï¼Œå°æ—¶ã€‚è¦æ±‚æ—¶é—´å¿…é¡»å¤§äº1æ¯«ç§’</p><p>ï¼ˆ2ï¼‰percentageï¼šé€‰å¡«å­—æ®µï¼Œé…ç½®æ•…éšœå‘ç”Ÿçš„æ¯”ä¾‹ï¼Œé€šè¿‡è¿™ä¸ªé…ç½®å¯ä»¥é…ç½®æ•…éšœå‘ç”Ÿçš„æ¯”ä¾‹ï¼ˆæ— å•ä½ï¼Œæ”¯æŒå°æ•°ï¼Œè¡¨ç¤ºç™¾åˆ†æ¯”ã€‚å¦‚æœä¸å¡«é»˜è®¤ä¸º100ï¼Œæ³¨å…¥æ‰€æœ‰è¯·æ±‚ï¼‰ã€‚</p><p>ä¾‹ï¼š<br>â€¦â€¦<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">â€¦â€¦</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">route:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">destination:</span></span><br><span class="line">          <span class="attr">host:</span> <span class="string">portal-web</span></span><br><span class="line">          <span class="attr">subset:</span> <span class="string">v1.0.15</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">faultï¼š</span></span><br><span class="line">    <span class="string">delayï¼š</span></span><br><span class="line">       <span class="string">percentageï¼š</span></span><br><span class="line">         <span class="attr">value:</span> <span class="number">1.5</span></span><br><span class="line">       <span class="attr">fixedDelay:</span> <span class="string">10s</span></span><br></pre></td></tr></table></figure></p><p>è¡¨ç¤ºå¯¹portal-webæœåŠ¡çš„è¯·æ±‚çš„ç™¾åˆ†ä¹‹1.5ä¼šè¢«æ³¨å…¥10sçš„å»¶è¿Ÿ</p><p>è¯·æ±‚ä¸­æ­¢æ•…éšœæ³¨å…¥</p><p>è¯·æ±‚ä¸­æ­¢æ•…éšœæ³¨å…¥ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ¨¡æ‹ŸæœåŠ¡ç«¯æ•…éšœçš„æƒ…å†µï¼Œå¯ä»¥æ³¨å…¥æŒ‡å®šçš„è¿”å›ç å’Œè¿”å›ä¿¡æ¯</p><p>é…ç½®å‚æ•°å¦‚ä¸‹ï¼š<br>ï¼ˆ1ï¼‰httpStatusï¼šæ˜¯ä¸€ä¸ªå¿…é€‰å­—æ®µï¼Œè¡¨ç¤ºä¸­æ­¢çš„HTTPçŠ¶æ€ç </p><p>ï¼ˆ2ï¼‰percentageï¼šé…ç½®çš„ä¸­æ­¢æ•…éšœä½œç”¨åœ¨å¤šå°‘æ¯”ä¾‹çš„è¯·æ±‚ä¸Šï¼Œé…ç½®æ–¹å¼ä¸å»¶è¿Ÿæ•…éšœçš„ä¸€è‡´ã€‚<br>ä¾‹ï¼š<br>â€¦â€¦</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">â€¦â€¦</span></span><br><span class="line"><span class="bullet">-</span> <span class="attr">route:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">destination:</span></span><br><span class="line">          <span class="attr">host:</span> <span class="string">portal-web</span></span><br><span class="line">          <span class="attr">subset:</span> <span class="string">v1.0.15</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">faultï¼š</span></span><br><span class="line">    <span class="string">delayï¼š</span></span><br><span class="line">       <span class="string">percentageï¼š</span></span><br><span class="line">         <span class="attr">value:</span> <span class="number">1.5</span></span><br><span class="line">       <span class="attr">httpStatus:</span> <span class="number">500</span></span><br></pre></td></tr></table></figure><p>å¯¹portal-webæœåŠ¡çš„è¯·æ±‚çš„ç™¾åˆ†ä¹‹1.5ä¼šè¢«æ¨¡æ‹Ÿè¿”å›500çš„å¼‚å¸¸ã€‚</p><p>å…¶å®å½“äº†è§£äº†vsçš„å¤§éƒ¨åˆ†åŠŸèƒ½ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°vsçš„ä½œç”¨å…¶å®ä¸k8sçš„serviceçš„ä½œç”¨åŸºæœ¬æ˜¯ä¸€è‡´çš„ï¼Œåªæ˜¯vsæ˜¯ç”¨æ¥ä¿®é¥°serviceçš„æœåŠ¡ï¼Œå¯ä»¥è°ƒæ•´ã€ç»„åˆã€æ‹¼æ¥serviceï¼Œå°†å¤šä¸ªserviceæ‹¼è£…æˆä¸€ä¸ªå¤§çš„ï¼Œå¯Œæœ‰è§„åˆ™çš„serviceã€‚</p><h1 id="DestinationRuleç›®æ ‡è§„åˆ™"><a href="#DestinationRuleç›®æ ‡è§„åˆ™" class="headerlink" title="DestinationRuleç›®æ ‡è§„åˆ™"></a>DestinationRuleç›®æ ‡è§„åˆ™</h1><p>åœ¨æˆ‘ä»¬åˆšåˆšæŸ¥çœ‹VirtualServiceæ—¶å€™ç»å¸¸èƒ½çœ‹åˆ°è¿™æ ·ä¸€æ®µé…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">route:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">destination:</span></span><br><span class="line">          <span class="attr">host:</span> <span class="string">portal-web</span></span><br><span class="line">          <span class="attr">subset:</span> <span class="string">v1.0.15</span></span><br></pre></td></tr></table></figure><p>ä¹‹å‰è¯´è¿™æ®µé…ç½®æŒ‡çš„æ˜¯å°†æµé‡å‘é€ç»™portal-webçš„v1.0.15çš„ç‰ˆæœ¬ï¼Œè¿™æ ·è¯´æ˜¯ä¸ºäº†æ–¹ä¾¿ç†è§£ã€‚å®é™…ä¸Šè¿™ç§è¯´æ³•æ˜¯ä¸ä¸¥è°¨çš„ï¼Œ<strong>è¿™æ®µé…ç½®çœŸå®ä»£è¡¨çš„å«ä¹‰æ˜¯å°†è¯·æ±‚è½¬å‘ç»™portal-webæœåŠ¡çš„destinationRuleçš„v1.0.15çš„å­é›†ã€‚</strong></p><p>DestinationRuleé…ç½®æ ·ä¾‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">DestinationRule</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">cicdpai</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">cicdapi</span></span><br><span class="line">  <span class="attr">subsets:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">v1</span></span><br><span class="line">    <span class="attr">labels:</span></span><br><span class="line">      <span class="attr">version:</span> <span class="string">v1</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">v2</span></span><br><span class="line">    <span class="attr">labels:</span></span><br><span class="line">      <span class="attr">version:</span> <span class="string">v2</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">v3</span></span><br><span class="line">    <span class="attr">labels:</span></span><br><span class="line">      <span class="attr">version:</span> <span class="string">v3</span></span><br></pre></td></tr></table></figure><h2 id="DestinationRuleè§„åˆ™å®šä¹‰"><a href="#DestinationRuleè§„åˆ™å®šä¹‰" class="headerlink" title="DestinationRuleè§„åˆ™å®šä¹‰"></a>DestinationRuleè§„åˆ™å®šä¹‰</h2><p><strong>destinationRuleç»å¸¸ä¸virtualServiceä¸€èµ·ä½¿ç”¨</strong>ï¼ˆdræ˜¯é…åˆvsä¸€èµ·ä½¿ç”¨çš„ï¼Œä½†æ˜¯vså¹¶ä¸è¦æ±‚ä¸€å®šéœ€è¦ä½¿ç”¨drï¼Œå¦‚æœä¸ä½¿ç”¨drï¼Œvsä¼šç›´æ¥ä½¿ç”¨serviceæ¥è´Ÿè½½è°ƒç”¨å¯¹åº”çš„podï¼‰ï¼ŒvirtualServiceç”¨æ¥ä¿®é¥°æ»¡è¶³ä»€ä¹ˆæ¡ä»¶åè¢«å“ªä¸ªåç«¯å¤„ç†ã€‚è€ŒdestinationRuleæè¿°çš„æ˜¯è¿™ä¸ªè¯·æ±‚åˆ°è¾¾æŸä¸ªåç«¯åè¯¥æ€ä¹ˆå»å¤„ç†ã€‚</p><p>ç®€è¿°ï¼švsè®¾ç½®æœåŠ¡çš„è®¿é—®è§„åˆ™ï¼Œå…·ä½“è¯·æ±‚æœåŠ¡æ—¶çš„è§„åˆ™ç”±dræ¥å†³å®šã€‚</p><p>å…³é”®å±æ€§ï¼š</p><p>ï¼ˆ1ï¼‰hostï¼šå¿…é€‰å­—æ®µï¼Œè¡¨ç¤ºè§„åˆ™çš„ä½¿ç”¨å¯¹è±¡ï¼Œå¯¹åº”çš„ä¹Ÿæ˜¯k8sä¸­çš„serviceã€‚åŸŸåè§£ææ–¹å¼ä¸ä¹‹å‰çš„hosté…ç½®ä¸€è‡´ã€‚</p><p>ï¼ˆ2ï¼‰trafficPolicyï¼šè§„åˆ™çš„å†…å®¹å®šä¹‰ï¼ŒåŒ…æ‹¬è´Ÿè½½å‡è¡¡ï¼Œè¿æ¥æ± ç­–ç•¥ï¼Œå¼‚å¸¸ç‚¹æ£€æŸ¥ç­‰å†…å®¹ã€‚</p><p>ï¼ˆ3ï¼‰exportToï¼šIstio 1.1ç‰ˆæœ¬åæ–°å¢çš„ç‰¹æ€§ï¼Œç”¨äºæ§åˆ¶DestinationRuleè·¨å‘½åç©ºé—´çš„å¯è§æ€§ï¼Œè¿™æ ·å°±èƒ½æ§åˆ¶åœ¨ä¸€ä¸ªå‘½åç©ºé—´ä¸‹å®šä¹‰çš„èµ„æºå¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å…¶ä»–å‘½åç©ºé—´ä¸‹çš„Sidecaræ‰§è¡Œã€‚å¦‚æœä¸åšèµ‹å€¼ä»£è¡¨å…¨å‘½åç©ºé—´éƒ½å¯è§ã€‚æ”¯æŒâ€œ.â€ ä»£è¡¨å½“å‰å‘½åç©ºé—´å¯è§ã€‚â€*â€ ä»£è¡¨å…¨å‘½åç©ºé—´å¯è§ã€‚</p><p>ï¼ˆ4ï¼‰subsetsï¼šä»£è¡¨ä¸€ä¸ªæœåŠ¡çš„å­é›†ï¼Œä¸€èˆ¬ä»£è¡¨ä¸€ä¸ªæœåŠ¡çš„ç‰ˆæœ¬ï¼Œä¸vsç»“åˆä½¿ç”¨ã€‚æ¯ä¸ªå­é›†éƒ½æ˜¯é€šè¿‡labelæ¥åŒ¹é…å¯¹åº”çš„podï¼Œåœ¨istioçš„ä½¿ç”¨è¦æ±‚ä¸­å»ºè®®ç”¨æˆ·ä¸ºæ¯ä¸ªpodåˆ†é…appã€versionä¸¤ä¸ªæ ‡ç­¾ã€‚æ‰€ä»¥subsetä¸€èˆ¬ä»¥versionæ¥åˆ’åˆ†ï¼Œä½†è¿™å¹¶ä¸æ˜¯ç¡¬æ€§é™åˆ¶ã€‚</p><h3 id="1-è´Ÿè½½å‡è¡¡è®¾ç½®"><a href="#1-è´Ÿè½½å‡è¡¡è®¾ç½®" class="headerlink" title="1.è´Ÿè½½å‡è¡¡è®¾ç½®"></a>1.è´Ÿè½½å‡è¡¡è®¾ç½®</h3><p>ç®€è¿°ï¼šå½“subsetä¸­å¯ä»¥åŒ¹é…åˆ°å¤šä¸ªpodæ—¶å¯ä»¥é€šè¿‡istioè‡ªèº«çš„è´Ÿè½½å‡è¡¡ç­–ç•¥å°†è¯·æ±‚åˆ†é…ã€‚</p><ol><li>ROUND_ROBINï¼šè½®å¾ªç®—æ³•ï¼Œå¦‚æœè®¾ç½®äº†drä½†æ²¡æœ‰ä¸ºsubsetè®¾ç½®è´Ÿè½½ç­–ç•¥ï¼Œé‚£ä¹ˆä¼šé»˜è®¤ä½¿ç”¨è¿™ä¸ªç­–ç•¥</li><li>LEAST_CONNï¼šæœ€å°‘è¿æ¥ç®—æ³•ï¼Œç®—æ³•å®ç°çš„æ˜¯ä»ä¸¤ä¸ªéšæœºé€‰æ‹©çš„åç«¯æœåŠ¡ä¸­é€‰æ‹©ä¸€ä¸ªé“¾æ¥æ•°æœ€å°‘çš„é“¾æ¥</li><li>RANDOMï¼šå®Œå…¨éšæœºç­–ç•¥ï¼Œä»ç°æœ‰çš„å¥åº·å¯ç”¨çš„åç«¯æœåŠ¡ä¸­éšæœºæŠ½å–ä¸€ä¸ªåœ°å€</li><li>PASSTHROUGHï¼šç›´æ¥è½¬å‘åˆ°å®¢æˆ·ç«¯é“¾æ¥çš„ç›®æ ‡åœ°å€ï¼Œä¸åšè½¬å‘ï¼ˆè¿™æ ·ä¼šæœ‰k8sçš„serviceè¿›è¡Œè´Ÿè½½ï¼‰</li></ol><h3 id="2-è¿æ¥æ± è®¾ç½®"><a href="#2-è¿æ¥æ± è®¾ç½®" class="headerlink" title="2.è¿æ¥æ± è®¾ç½®"></a>2.è¿æ¥æ± è®¾ç½®</h3><p>ç®€è¿°ï¼šé€šè¿‡è¿æ¥æ± ç®¡ç†å¯ä»¥é…ç½®é˜ˆå€¼æ¥æ”¾ç½®ä¸€ä¸ªæœåŠ¡çš„å¤±è´¥å½±å“åˆ°æ•´ä¸ªåº”ç”¨ã€‚istioçš„è¿æ¥æ± å¯ä»¥é…ç½®tcpæµé‡ã€httpæµé‡æ²»ç†</p><p>tcpè¿æ¥æ± é…ç½®ï¼ˆTCPSettingï¼‰ï¼š</p><p>ï¼ˆ1ï¼‰maxConnectionsï¼šè¡¨ç¤ºä¸ºä¸Šæœ‰æœåŠ¡çš„æ‰€æœ‰å®ä¾‹çš„æœ€å¤§è¿æ¥æ•°ï¼Œé»˜è®¤ä¸º1024.å¯¹äºHTTPåªé€‚ç”¨äºHTTP/1.1å› ä¸ºHTTP/2å¯¹æ¯ä¸ªä¸»æœºéƒ½ä½¿ç”¨å•ä¸ªè¿æ¥ã€‚</p><p>ï¼ˆ2ï¼‰connectTimeoutï¼šTCPè¿æ¥è¶…æ—¶æ—¶é—´ã€‚</p><p>ï¼ˆ3ï¼‰tcpKeepliveï¼šæ˜¯Istio1.1ç‰ˆæœ¬åæ–°å¢çš„ç‰¹æ€§ï¼Œå®šæœŸç»™å¯¹ç«¯å‘é€ä¸€ä¸ªkeepaliveçš„æ¢æµ‹åŒ…ï¼Œåˆ¤æ–­è¿æ¥æ˜¯å¦å¯ç”¨ã€‚åŒ…å«ä¸‰ä¸ªå±æ€§â€“probesï¼ˆæ ‡è¯†æœ‰å¤šå°‘æ¬¡æ¢æµ‹æ²¡æœ‰ååº”å°±åˆ¤æ–­è¿æ¥æ–­å¼€ï¼Œé»˜è®¤ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„é»˜è®¤é…ç½®ï¼Œlinuxé»˜è®¤ä¸º9ï¼‰ï¼Œtimeï¼ˆæ ‡è¯†å‘é€æ¢æµ‹å‰è¿æ¥ç©ºé—²äº†å¤šå°‘æ—¶é—´ï¼Œä¹Ÿæ˜¯ç”¨æ“ä½œç³»ç»Ÿçš„é»˜è®¤é…ç½®ï¼Œlinuxé»˜è®¤ä¸º2å°æ—¶ï¼‰ï¼Œintervalï¼ˆæ¢æµ‹é—´éš”ï¼Œä¹Ÿæ˜¯ç”¨æ“ä½œç³»ç»Ÿçš„é»˜è®¤é…ç½®ï¼Œlinuxé»˜è®¤ä¸º75ç§’ï¼‰ã€‚</p><p>httpè¿æ¥æ± é…ç½®ï¼ˆHTTPSettingï¼‰ï¼š</p><p>ï¼ˆ1ï¼‰http1MaxPendingRequestsï¼šæœ€å¤§ç­‰å¾…HTTPè¯·æ±‚æ•°ï¼Œé»˜è®¤å€¼ä¸º1024ï¼Œåªé€‚ç”¨äºHTTP/1.1ï¼Œå› ä¸ºHTTP/2åè®®çš„è¯·æ±‚åœ¨åˆ°æ¥æ—¶ä¼šç«‹å³å¤ç”¨è¿æ¥ï¼Œä¸ä¼šå†è¿æ¥æ± ç­‰å¾…</p><p>ï¼ˆ2ï¼‰http2MaxRequestsï¼šæœ€å¤§è¯·æ±‚æ•°ï¼Œé»˜è®¤1024ã€‚åªé€‚ç”¨äºHTTP/2æœåŠ¡ï¼Œå› ä¸ºHTTP/1.1é€‚ç”¨æœ€å¤§è¿æ¥æ•°é…ç½®maxConnectionså³å¯ã€‚</p><p>ï¼ˆ3ï¼‰maxRequestsPerConnectionï¼šæ¯ä¸ªè¿æ¥çš„æœ€å¤§è¯·æ±‚æ•°ã€‚å¦‚æœä¸é…ç½®åˆ™ä¸ä½œé™åˆ¶</p><p>ï¼ˆ4ï¼‰maxRetriesï¼šæœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œé»˜è®¤ä¸º3ï¼Œè¡¨ç¤ºæœåŠ¡å¯ä»¥æ‰§è¡Œçš„æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚å¦‚æœè°ƒç”¨åç«¯å› ç½‘ç»œæŠ–åŠ¨å¯¼è‡´è°ƒç”¨å¤±è´¥ï¼Œå¯èƒ½ä¼šå¸¦æ¥ä¸šåŠ¡æŸå¤±ï¼Œä¸€èˆ¬å»ºè®®é…ç½®é‡è¯•ï¼Œè‹¥é‡è¯•æˆåŠŸåˆ™å¯ä»¥æ­£å¸¸é…ç½®è¿”å›æ•°æ®ï¼Œåªä¸è¿‡æ¯”åŸæ¥å“åº”çš„æ—¶é—´ç¨æ…¢ä¸€ç‚¹ã€‚ä½†é‡è¯•æ¬¡æ•°è¿‡å¤šä¼šå¯¹æ€§èƒ½äº§ç”Ÿå½±å“ï¼Œå°½é‡ä¸è¦å¯¹æ¶ˆè€—å¤§çš„æœåŠ¡è¿›è¡Œé‡è¯•ã€‚</p><p>ï¼ˆ5ï¼‰idleTimeoutï¼šç©ºé—²è¶…æ—¶ï¼Œå®šä¹‰åœ¨å¤šé•¿æ—¶é—´å†…æ²¡æœ‰æ´»åŠ¨è¯·æ±‚åˆ™å…³é—­è¿æ¥ã€‚</p><h3 id="3-å¼‚å¸¸å®ä¾‹æ£€æµ‹è®¾ç½®"><a href="#3-å¼‚å¸¸å®ä¾‹æ£€æµ‹è®¾ç½®" class="headerlink" title="3.å¼‚å¸¸å®ä¾‹æ£€æµ‹è®¾ç½®"></a>3.å¼‚å¸¸å®ä¾‹æ£€æµ‹è®¾ç½®</h3><p>ç®€è¿°ï¼šå¼‚å¸¸ç‚¹æ£€æŸ¥å°±æ˜¯å®šæœŸè€ƒå¯Ÿè¢«è®¿é—®çš„æœåŠ¡å®ä¾‹çš„å·¥ä½œæƒ…å†µï¼Œå¦‚æœè¿ç»­å‡ºç°è®¿é—®å¼‚å¸¸ï¼Œåˆ™å°†æœåŠ¡å®ä¾‹æ ‡è®°ä¸ºå¼‚å¸¸å¹¶è¿›è¡Œéš”ç¦»ï¼Œåœ¨ä¸€æ®µæ—¶é—´å†…ä¸ä¸ºå…¶åˆ†é…æµé‡ï¼Œè¿‡ä¸€æ®µæ—¶é—´è¢«ç§»é™¤çš„å®ä¾‹ä¼šè¢«è§£é™¤ç§»é™¤ï¼Œå°è¯•è¯·æ±‚ï¼Œå¦‚æœè®¿é—®å¤±è´¥ä¼šè¿›è¡Œæ›´é•¿å®é™…èƒºçš„éš”ç¦»ï¼Œè¿™ä¹Ÿæ˜¯istioçš„ç†”æ–­åŠŸèƒ½ã€‚<br>å‚æ•°é…ç½®ï¼š</p><ol><li>consecutiveErrorsï¼šå®ä¾‹è¢«é©±é€å‰çš„è¿ç»­é”™è¯¯æ¬¡æ•°ï¼Œé»˜è®¤ä¸º5ï¼Œå¯¹äºhttpæœåŠ¡è¿”å›502,503,504çš„è¿”å›ç ä¼šè®¤ä¸ºæœåŠ¡å¼‚å¸¸ã€‚</li><li>intervalï¼šé©±é€æ£€æŸ¥çš„æ—¶é—´é—´éš”ï¼ˆé©±é€æ£€æµ‹çš„ç»Ÿè®¡æ—¶é—´ï¼‰ï¼Œé»˜è®¤ä¸º10ç§’ï¼Œè¦æ±‚å¤§äº1æ¯«ç§’ï¼Œå•ä½å¯ä»¥æ˜¯æ—¶ã€åˆ†ã€æ¯«ç§’</li><li>baseEjectionTimeï¼šæœ€å°é©±é€æ—¶é—´ã€‚ä¸€ä¸ªæœåŠ¡è¢«é©±é€çš„æ—¶é—´ç­‰äºé©±é€æ¬¡æ•°ä¹˜ä»¥æœ€å°é©±é€æ—¶é—´ã€‚æ‰€ä»¥è¢«é©±é€çš„å®ä¾‹å†è¢«å†æ¬¡é©±é€æ—¶ä¼šå˜å¾—è¶Šæ¥è¶Šé•¿ã€‚æ—¶é—´é»˜è®¤ä¸º30ç§’ï¼Œè¦æ±‚å¤§äº1æ¯«ç§’ï¼Œå•ä½å¯ä»¥æ˜¯æ—¶ã€åˆ†ã€æ¯«ç§’ã€‚</li><li>maxEjectionPercentï¼šæœåŠ¡çš„å¯é©±é€æ•…éšœå®ä¾‹çš„æœ€å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º10%ã€‚å®˜æ–¹ä¸å»ºè®®é…ç½®è¿‡é«˜ï¼Œè¿‡åˆ†çš„é©±é€ä¼šå½±å“æœåŠ¡çš„æœåŠ¡èƒ½åŠ›</li><li>minHealthPercentï¼šæœ€å°å¥åº·æ¯”ä¾‹ï¼Œæ˜¯istio 1.1ç‰ˆæœ¬åæ–°å¢çš„ç‰¹æ€§ï¼Œå½“è´Ÿè½½çš„å®ä¾‹ä¸­ï¼Œå¦‚æœå¥åº·çš„å®ä¾‹æ•°é‡ä½äºè¿™ä¸ªæ¯”ä¾‹ï¼Œistioä¼šè¿›å…¥ææ…Œæ¨¡å¼ï¼Œå¼‚å¸¸æ£€æŸ¥åŠŸèƒ½ä¼šè¢«ç¦ç”¨ï¼Œæ‰€æœ‰çš„æœåŠ¡ä¸è®ºæ˜¯å¦æ˜¯æ•…éšœå®ä¾‹éƒ½å¯ä»¥æ¥å—è¯·æ±‚ã€‚</li></ol><p>ä¾‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">DestinationRule</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"> <span class="attr">name:</span> <span class="string">cicdapi</span></span><br><span class="line"> <span class="attr">namespace:</span> <span class="string">paas</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"> <span class="attr">host:</span> <span class="string">cicdapi</span></span><br><span class="line"> <span class="attr">trafficPolicy:</span></span><br><span class="line">   <span class="attr">connectionPool:</span></span><br><span class="line">     <span class="attr">tcp:</span></span><br><span class="line">       <span class="attr">maxConnections:</span> <span class="number">80</span></span><br><span class="line">       <span class="attr">connectTimeout:</span> <span class="string">25ms</span></span><br><span class="line">     <span class="attr">http:</span></span><br><span class="line">       <span class="attr">http2MaxRequest:</span> <span class="number">800</span></span><br><span class="line">       <span class="attr">maxRequestsPerConnection:</span> <span class="number">10</span></span><br><span class="line">   <span class="attr">outlierDetection:</span></span><br><span class="line">     <span class="attr">consecutiveErrors:</span> <span class="number">5</span></span><br><span class="line">     <span class="attr">interval:</span> <span class="string">4m</span></span><br><span class="line">     <span class="attr">baseEjectionTime:</span> <span class="string">10m</span></span><br><span class="line">     <span class="attr">maxEjectionPercent:</span> <span class="number">30</span></span><br></pre></td></tr></table></figure><p>æ£€æŸ¥4åˆ†é’Ÿå†…cicdapiæœåŠ¡çš„å¼‚å¸¸æƒ…å†µï¼Œè¿ç»­å‡ºç°5æ¬¡è¿æ¥å¼‚å¸¸çš„æœåŠ¡å®ä¾‹ä¼šè¢«éš”ç¦»10åˆ†é’Ÿï¼Œè¢«éš”ç¦»çš„æœåŠ¡æ•°é‡ä¸èƒ½è¶…è¿‡30%ã€‚è¾¾åˆ°ååˆ†é’Ÿåå®ä¾‹ä¼šé‡æ–°æ¥å—è¯·æ±‚ï¼Œå¦‚æœä¾ç„¶ä¸èƒ½æ­£å¸¸å·¥ä½œä¼šè¢«éš”ç¦»20åˆ†é’Ÿ</p><h3 id="4-ç«¯å£ç­–ç•¥"><a href="#4-ç«¯å£ç­–ç•¥" class="headerlink" title="4.ç«¯å£ç­–ç•¥"></a>4.ç«¯å£ç­–ç•¥</h3><p>ç®€è¿°ï¼šå½“æˆ‘ä»¬ç†Ÿæ‚‰ä»¥ä¸Šçš„è¿æ¥æ± é…ç½®åï¼Œå®é™…ç«¯å£é…ç½®ä¹Ÿæ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„åœ°æ–¹ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸ºäº†æŸäº›ç«¯å£é…ç½®ä¸€äº›ç‰¹æ®Šè§„åˆ™ï¼Œæ¯”å¦‚æœ€å¤§è¿æ¥æ•°ç­‰</p><p>ä¾‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">DestinationRule</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line"> <span class="attr">name:</span> <span class="string">cicdapi</span></span><br><span class="line"> <span class="attr">namespace:</span> <span class="string">paas</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line"> <span class="attr">host:</span> <span class="string">cicdapi</span></span><br><span class="line"> <span class="attr">trafficPolicy:</span></span><br><span class="line">   <span class="attr">connectionPool:</span></span><br><span class="line">     <span class="attr">tcp:</span></span><br><span class="line">       <span class="attr">maxConnections:</span> <span class="number">80</span></span><br><span class="line">   <span class="attr">portLevelSettings:</span></span><br><span class="line">   <span class="bullet">-</span> <span class="attr">port:</span> </span><br><span class="line">       <span class="attr">number:</span> <span class="number">8081</span></span><br><span class="line">     <span class="attr">connectionPool:</span></span><br><span class="line">       <span class="attr">tcp:</span></span><br><span class="line">         <span class="attr">maxConnections:</span> <span class="number">100</span></span><br></pre></td></tr></table></figure><p>cicdæœåŠ¡çš„æœ€å¤§è¿æ¥æ•°ä¸º80ï¼Œä½†8081ç«¯å£å•ç‹¬é…ç½®äº†æœ€å¤§è¿æ¥æ•°ä¸º100</p><h3 id="5-æœåŠ¡å­é›†"><a href="#5-æœåŠ¡å­é›†" class="headerlink" title="5.æœåŠ¡å­é›†"></a>5.æœåŠ¡å­é›†</h3><p>ç®€è¿°ï¼šsubsetä¸»è¦ä½œç”¨å°±æ˜¯é€šè¿‡labelæ ‡ç­¾é…ç½®çœŸå®çš„åç«¯æœåŠ¡ã€‚virtualServiceä¸­é€šè¿‡åˆ¶å®šsubsetçš„nameæ¥å¼•ç”¨å¯¹åº”çš„æœåŠ¡ã€‚</p><p>nameï¼šå¿…é€‰å­—æ®µï¼Œsubsetçš„åå­—ï¼Œé€šè¿‡virtualServiceå¼•ç”¨subsetçš„æ—¶å€™å°±æ˜¯é€šè¿‡nameæ¥å¼•ç”¨çš„</p><p>labelsï¼šæœåŠ¡æ ‡ç­¾ï¼Œé€šè¿‡æ ‡ç­¾æ¥å¼•ç”¨çœŸå®çš„åç«¯æœåŠ¡ï¼Œæœ€å¸¸ç”¨çš„æ ‡ç­¾ä¸ºversionæ ‡ç­¾</p><p>trafficPolicyï¼šåº”ç”¨åˆ°è¿™ä¸ªsubsetçš„æµé‡ç­–ç•¥</p><p>ä¾‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">DestinationRule</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">cicdapi</span></span><br><span class="line">  <span class="attr">namespace:</span> <span class="string">paas</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">host:</span> <span class="string">cicdapi</span></span><br><span class="line">  <span class="attr">subset:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">v2</span></span><br><span class="line">    <span class="attr">labels:</span></span><br><span class="line">      <span class="attr">version:</span> <span class="string">v2</span></span><br><span class="line">  <span class="attr">trafficPolicy:</span></span><br><span class="line">    <span class="attr">connectionPool:</span></span><br><span class="line">      <span class="attr">tcp:</span></span><br><span class="line">        <span class="attr">maxConnections:</span> <span class="number">80</span></span><br></pre></td></tr></table></figure><p>drçš„ä½œç”¨ä¸»è¦å°±æ˜¯é…ç½®ç›®æ ‡æœåŠ¡çš„åŒ¹é…æ–¹å¼å’Œè´Ÿè½½å‡è¡¡ã€ç†”æ–­çš„æœåŠ¡æ²»ç†æ–¹å¼ã€‚</p><h1 id="GatewayæœåŠ¡ç½‘å…³"><a href="#GatewayæœåŠ¡ç½‘å…³" class="headerlink" title="GatewayæœåŠ¡ç½‘å…³"></a>GatewayæœåŠ¡ç½‘å…³</h1><p>ä¹‹å‰çš„é…ç½®ä¸è®ºæ˜¯vsè¿˜æ˜¯drçš„é…ç½®éƒ½æ˜¯é’ˆå¯¹æœåŠ¡é—´çš„è®¿é—®åšçš„æ ·ä¾‹ï¼Œæ²¡æœ‰é’ˆå¯¹è¿‡å¤–éƒ¨è¯·æ±‚è®¿é—®å®¹å™¨æœåŠ¡çš„æ ·ä¾‹ã€‚è¿™ç§è¯·æ±‚éƒ½éœ€è¦é€šè¿‡istioçš„æœåŠ¡ç½‘å…³æ¥é…ç½®ã€‚</p><p>æ ·ä¾‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">Gateway</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">cicdfront-gateway</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">selector:</span></span><br><span class="line">    <span class="attr">istio:</span> <span class="string">ingressgateway</span> <span class="comment"># use istio default controller</span></span><br><span class="line">  <span class="attr">servers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port:</span></span><br><span class="line">      <span class="attr">number:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">HTTP</span></span><br><span class="line">    <span class="attr">hosts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;cicdfront.com&quot;</span></span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">VirtualService</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">cicd-front</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="attr">hosts:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">frontend</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cicdfront.com</span></span><br><span class="line">  <span class="attr">gateways:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cicdfront-gateway</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">mesh</span></span><br><span class="line">  <span class="attr">http:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">route:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">destination:</span></span><br><span class="line">        <span class="attr">host:</span> <span class="string">cicd-front</span></span><br><span class="line">        <span class="attr">port:</span></span><br><span class="line">          <span class="attr">number:</span> <span class="number">8080</span></span><br></pre></td></tr></table></figure><h2 id="Gatewayè§„åˆ™å®šä¹‰"><a href="#Gatewayè§„åˆ™å®šä¹‰" class="headerlink" title="Gatewayè§„åˆ™å®šä¹‰"></a>Gatewayè§„åˆ™å®šä¹‰</h2><p>Gatewayä¸€èˆ¬éœ€è¦ä¸virtualServiceç»“åˆä½¿ç”¨ï¼ŒGatewayå®šä¹‰äº†æœåŠ¡ä»å¤–é¢æ€ä¹ˆè®¿é—®ï¼ŒvirtualServiceå®šä¹‰äº†åŒ¹é…åˆ°å†…éƒ¨æœåŠ¡æ€ä¹ˆæµè½¬ã€‚<br>å…³é”®é…ç½®ï¼š</p><p>selectorï¼šå¿…é€‰å­—æ®µï¼Œè¡¨ç¤ºGatewayè´Ÿè½½ï¼Œä¸ºå…¥å£å¤„çš„Envoyè¿è¡Œçš„podæ ‡ç­¾</p><p>serverï¼šå¿…é€‰å­—æ®µï¼Œè¡¨ç¤ºå¼€æ”¾çš„æœåŠ¡åˆ—è¡¨</p><h2 id="åç«¯æœåŠ¡Server"><a href="#åç«¯æœåŠ¡Server" class="headerlink" title="åç«¯æœåŠ¡Server"></a>åç«¯æœåŠ¡Server</h2><p>ç®€è¿°ï¼šserverå®šä¹‰äº†æœåŠ¡çš„è®¿é—®å…¥å£</p><ol><li>portï¼šå¿…é€‰å­—æ®µï¼Œæè¿°äº†æœåŠ¡åœ¨å“ªä¸ªç«¯å£å¯¹å¤–å¼€æ”¾ï¼Œæ˜¯å¯¹å¤–ç›‘å¬ç«¯å£ã€‚</li><li>hostsï¼šå¿…é€‰å­—æ®µï¼Œä¸ºGatewayå‘å¸ƒçš„æœåŠ¡åœ°å€ï¼Œæ˜¯ä¸€ä¸ªåŸŸåï¼Œç”¨æ¥åŒ¹é…virtualServiceçš„hostsï¼Œä¼šåŒ¹é…åˆ°è®¾ç½®äº†åŒæ ·hostsçš„vsã€‚</li></ol><p>ä¾‹ï¼š</p><p>servers:<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">servers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">port:</span></span><br><span class="line">      <span class="attr">number:</span> <span class="number">80</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">      <span class="attr">protocol:</span> <span class="string">HTTP</span></span><br><span class="line">    <span class="attr">hosts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;cicdfront.com&quot;</span></span><br></pre></td></tr></table></figure></p><h1 id="ServiceEntry"><a href="#ServiceEntry" class="headerlink" title="ServiceEntry"></a>ServiceEntry</h1><h2 id="ServiceEntryæ˜¯ç”¨ä½œå¤–éƒ¨æœåŠ¡é…ç½®ã€‚"><a href="#ServiceEntryæ˜¯ç”¨ä½œå¤–éƒ¨æœåŠ¡é…ç½®ã€‚" class="headerlink" title="ServiceEntryæ˜¯ç”¨ä½œå¤–éƒ¨æœåŠ¡é…ç½®ã€‚"></a>ServiceEntryæ˜¯ç”¨ä½œå¤–éƒ¨æœåŠ¡é…ç½®ã€‚</h2><p>ç®€è¿°ï¼šå°†ç½‘æ ¼å¤–çš„æœåŠ¡åŠ å…¥ç½‘ç»œä¸­ï¼Œåƒç½‘æ ¼å†…çš„æœåŠ¡ä¸€æ ·ç®¡ç†ï¼Œå®é™…ä¸Šå°±æ˜¯å°†ä¸å½’å±istioè‡ªåŠ¨æ³¨å…¥çš„æœåŠ¡åŠ å…¥åˆ°istioçš„æœåŠ¡å‘ç°ã€‚</p><p>é…ç½®ç¤ºä¾‹</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">networking.istio.io/v1alpha3</span></span><br><span class="line"><span class="attr">kind:</span> <span class="string">ServiceEntry</span></span><br><span class="line"><span class="attr">metadata:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">cicdfront-entry</span></span><br><span class="line"><span class="attr">spec:</span></span><br><span class="line">  <span class="string">hostsï¼š</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">www.cicddb.com</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">number:</span> <span class="number">80</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">http</span></span><br><span class="line">    <span class="attr">protocol:</span> <span class="string">HTTP</span></span><br><span class="line">  <span class="attr">resolution:</span> <span class="string">DNS</span></span><br><span class="line">  <span class="attr">location:</span> <span class="string">MESH_EXTERNAL</span></span><br></pre></td></tr></table></figure><h2 id="ServiceEntryè§„åˆ™å®šä¹‰"><a href="#ServiceEntryè§„åˆ™å®šä¹‰" class="headerlink" title="ServiceEntryè§„åˆ™å®šä¹‰"></a>ServiceEntryè§„åˆ™å®šä¹‰</h2><p>é‡è¦å‚æ•°ï¼š</p><ol><li><p>hostsï¼šå¿…é€‰å­—æ®µï¼Œè¡¨ç¤ºServiceEntryç›¸å…³çš„ä¸»æœºåï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªDNSåŸŸåï¼Œå¯ä»¥ä½¿ç”¨å‰ç¼€æ¨¡ç³ŠåŒ¹é…</p></li><li><p>addressesï¼šè¡¨ç¤ºä¸æœåŠ¡å…³è”çš„è™šæ‹ŸIPåœ°å€ã€‚</p></li><li><p>portï¼šè¡¨ç¤ºä¸å¤–éƒ¨æœåŠ¡å…³è”çš„ç«¯å£ã€‚</p></li><li><p>locationï¼šè®¾ç½®æœåŠ¡æ—¶åœ¨ç½‘æ ¼å†…è¿˜æ˜¯ç½‘æ ¼å¤–ï¼Œæ”¯æŒä»¥ä¸‹ä¸¤ç§æ¨¡å¼</p><p>ï¼ˆ1ï¼‰MESH_EXTERNALï¼šè¡¨ç¤ºåœ¨ç½‘æ ¼å¤–éƒ¨ï¼Œé€šè¿‡apiè®¿é—®çš„å¤–éƒ¨æœåŠ¡ã€‚<br>ï¼ˆ2ï¼‰MESH_INTERNALï¼šè¡¨ç¤ºåœ¨ç½‘æ ¼å†…éƒ¨ï¼Œä¸€äº›ä¸èƒ½ç›´æ¥æ³¨å†Œåˆ°æœåŠ¡ç½‘æ ¼æ³¨å†Œä¸­å¿ƒçš„æœåŠ¡ã€‚</p></li><li><p>resolutionï¼š è¡¨ç¤ºæœåŠ¡çš„å‘ç°æ¨¡å¼ï¼Œå°†æœåŠ¡åè§£æåˆ°ä¸€ä¸ªåç«¯çš„IPä¸Šã€‚å¯ä»¥è®¾ç½®NONEã€STATICã€DNSä¸‰ç§æ¨¡å¼<br>ï¼ˆ1ï¼‰NONEï¼šç”¨äºè¿æ¥çš„ç›®æ ‡åœ°å€å·²ç»æ˜¯ä¸€ä¸ªæ˜ç¡®çš„IPåœºæ™¯æ˜¯ä½¿ç”¨ã€‚<br>ï¼ˆ2ï¼‰STATICï¼šç”¨åœ¨å·²ç»ä½¿ç”¨endpointè®¾ç½®äº†æœåŠ¡ç¤ºä¾‹çš„åœ°å€åœºæ™¯ä¸­ï¼Œ ä¹Ÿä¸éœ€è¦è§£æã€‚<br>ï¼ˆ3ï¼‰DNSï¼šè¡¨ç¤ºç”¨æŸ¥è¯¢ç¯å¢ƒä¸­çš„DNSè¿›è¡Œè§£æï¼Œå‰ææ˜¯æ²¡æœ‰åœ¨hostsä¸­ä½¿ç”¨é€šé…ç¬¦ã€‚</p></li><li><p>subjectAltNamesï¼š è¡¨ç¤ºè¿™ä¸ªæœåŠ¡è´Ÿè½½çš„SANåˆ—è¡¨</p></li><li><p>endpointsï¼šè¡¨ç¤ºä¸ç½‘æ ¼æœåŠ¡å…³è”çš„ç½‘ç»œåœ°å€ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªIPï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªä¸»æœºåã€‚endpointsé€šè¿‡å¾ˆå¤šå­—æ®µä¸€åŒç”Ÿæˆ<br>ï¼ˆ1ï¼‰addressï¼š å¿…é€‰å­—æ®µï¼Œè¡¨ç¤ºç½‘ç»œåç«¯çš„æœåŠ¡åœ°å€<br>ï¼ˆ2ï¼‰portsï¼šç«¯å£åˆ—è¡¨<br>ï¼ˆ3ï¼‰labelsï¼šåç«¯çš„æ ‡ç­¾<br>ï¼ˆ4ï¼‰localityï¼šåç«¯çš„localityï¼Œç”¨äºäº²å’Œæ€§è·¯ç”±<br>ï¼ˆ5ï¼‰weightï¼šè¡¨ç¤ºè´Ÿè½½å‡è¡¡çš„æƒé‡ã€‚</p></li></ol><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æˆ‘ä»¬åœ¨æ­£å¸¸ä½¿ç”¨ä¸­ï¼Œå¤šä½¿ç”¨çš„ä¸€èˆ¬åªæœ‰virtualServiceï¼ŒdestinationRuleã€Gatewayè¿™ä¸‰ç§åŠŸèƒ½ã€‚vsè´Ÿè´£é…ç½®è®¿é—®è§„åˆ™ã€drè´Ÿè´£é…ç½®ç›®æ ‡å®ä¾‹å’Œè´Ÿè½½è§„åˆ™ï¼ŒGatewayè´Ÿè´£é…ç½®å…¥å£è§„åˆ™ã€‚é…ç½®å¥½è¿™ä¸‰ç§é…ç½®å°±å¯ä»¥æ»¡è¶³æˆ‘ä»¬å¤§éƒ¨åˆ†çš„ä½¿ç”¨åœºæ™¯ã€‚</p><blockquote><p>ä½†åœ¨ä½¿ç”¨ä¸­ä¼šå‘ç°è¿™å‡ ç§é—®é¢˜</p></blockquote><p>istioåŸºæœ¬æ‰€æœ‰çš„åŠŸèƒ½é…ç½®æ—¶éƒ½è¦æ±‚ä¸€ä¸ªå¿…å¡«å­—æ®µhosts,åœ¨k8sé›†ç¾¤ä¸­ ï¼Œè¿™ä¸ªhostsæ˜¯æˆ‘ä»¬æœåŠ¡çš„é•¿çŸ­åŸŸåï¼Œä¹Ÿå°±æ˜¯serviceçš„åç§°ã€‚æ‰€ä»¥åœ¨å¾ˆå¤§ç¨‹åº¦æ¥è®²ï¼Œistioéƒ½æ˜¯åŸºäºserviceåœ¨å·¥ä½œã€‚ä½†æ˜¯istioæ²¡æœ‰å›¾å½¢ç•Œé¢æä¾›åŠŸèƒ½é…ç½®ï¼Œä¸è®ºæ˜¯vs,dr,gwéƒ½æ˜¯éœ€è¦é€šè¿‡yamlé…ç½®çš„ã€‚è¿™ç§é…ç½®å°±ä¸èƒ½é™åˆ¶ç”¨æˆ·çš„ä¸€äº›è¯¯æ“ä½œï¼Œæ¯”å¦‚å¯¹ä¸€ä¸ªæœåŠ¡é…ç½®è¯¯é…ç½®äº†ä¸¤ä¸ªvsï¼Œé‚£ä¹ˆå“ªä¸ªä¼šæ˜¯æœ‰æ•ˆçš„vsï¼Ÿå¯¹ä¸€ä¸ªæœåŠ¡é…ç½®äº†ä¸¤ä¸ªdrï¼Œé‚£ä¹ˆå“ªä¸ªä¼šæ˜¯æœ‰æ•ˆçš„drï¼Ÿå‰é¢æè¿‡istioåœ¨1.1ç‰ˆæœ¬ä¹‹åæ–°å¢äº†exportToå±æ€§ï¼Œä»£è¡¨å½“å‰é…ç½®èƒ½å¦æ”¯æŒè·¨namespaceï¼Œé»˜è®¤éƒ½æ˜¯å…è®¸è·¨namespaceç”Ÿæ•ˆçš„ï¼Œè¿™æ ·ä¼šä¸ä¼šå‡ºç°è¯¯å¼•ç”¨çš„æƒ…å†µï¼Ÿ</p><blockquote><p>æ‰€ä»¥åœ¨ä½¿ç”¨æ—¶è¿˜æ˜¯å»ºè®®å°è£…istioçš„yamlæ‹¼è£…åŠŸèƒ½ï¼Œé€šè¿‡é¡µé¢è¿›è¡Œæ§åˆ¶ï¼Œé˜²æ­¢è¯¯é…ç½®yamlã€‚</p></blockquote><ol><li><p>istioä¼šè¿›è¡ŒæœåŠ¡é—´çš„æµé‡æ²»ç†ï¼Œå®ç°æ–¹å¼æ˜¯é€šè¿‡iptablesè¿›è¡Œæµé‡æ‹¦æˆªï¼Œè¿™æ ·ä½¿ç”¨æ—¶ä¸ºäº†è®©å…¥å£æœåŠ¡ä¹Ÿèƒ½è¢«istioæ²»ç†å°±å¿…é¡»ä½¿ç”¨istioçš„å…¥å£ç½‘å…³Gatewayã€‚è¿™æ ·å¹³å°ä½¿ç”¨æ—¶å°±ä¸èƒ½ç›´æ¥ä¸ºç”¨æˆ·æä¾›routeçš„æ–¹å¼è®¿é—®å¹³å°ã€‚éœ€è¦ä½¿ç”¨gatewayè¿›è¡ŒåŒ…è£…æ‰è¡Œã€‚ä½†å¹¶ä¸æ˜¯æ‰€æœ‰æœåŠ¡éƒ½éœ€è¦è¿›è¡ŒåŒ…è£…ï¼Œåªæœ‰éœ€è¦åœ¨é›†ç¾¤å¤–ç›´æ¥è®¿é—®çš„æœåŠ¡éœ€è¦è¿›è¡Œè¿™ä¸ªåŒ…è£…ã€‚ï¼ˆå¤§éƒ¨åˆ†éƒ½æ˜¯å‰å°æœåŠ¡æ‰éœ€è¦è¿›è¡Œè¿™ä¸ªæ­¥éª¤ï¼šæµè§ˆå™¨ â€”&gt; cicd-front â€”&gt; cicd-apiï¼Œè¿™ç§æƒ…å†µä¸‹å°±éœ€è¦ä¸ºcicdfrontç”Ÿæˆå…¥å£ç½‘å…³ï¼Œç”¨æˆ·éœ€è¦é€šè¿‡å…¥å£ç½‘å…³è®¿é—®cicdfrontæ‰èƒ½æ²»ç†è¿™éƒ¨åˆ†æµé‡ï¼‰</p></li><li><p>é›†ç¾¤å†…ä¸èƒ½ç›´æ¥è®¿é—®é›†ç¾¤å¤–çš„url</p></li></ol><hr><p>æœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œå°é­çš„åšå®¢ã€çš„åŸåˆ›æ–‡ç« ï¼Œæœ¬ç¯‡ä»…ä¾›å­¦ä¹ ä½¿ç”¨ï¼Œå°Šé‡åŸåˆ›</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/w2009211777/article/details/123840631">https://blog.csdn.net/w2009211777/article/details/123840631</a></p>]]></content>
      
      
      <categories>
          
          <category> æœåŠ¡ç½‘æ ¼ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æœåŠ¡ç½‘æ ¼ </tag>
            
            <tag> æœªæ¥è¶‹åŠ¿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MybatisPluså¿«é€Ÿå…¥é—¨</title>
      <link href="/article/efc815e8.html"/>
      <url>/article/efc815e8.html</url>
      
        <content type="html"><![CDATA[<p>å‰è¨€ï¼š<br>MybatisPlusï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿï¼</p><hr><h1 id="MybatisPlus"><a href="#MybatisPlus" class="headerlink" title="MybatisPlus"></a>MybatisPlus</h1><h2 id="MyBatisPlusæ¦‚è¿°"><a href="#MyBatisPlusæ¦‚è¿°" class="headerlink" title="MyBatisPlusæ¦‚è¿°"></a>MyBatisPlusæ¦‚è¿°</h2><p> éœ€è¦çš„åŸºç¡€ï¼šMyBatisã€Springã€SpringMVC </p><p>ä¸ºä»€ä¹ˆè¦å­¦ä¹ å®ƒå‘¢ï¼Ÿ</p><ul><li>MyBatisPluså¯ä»¥èŠ‚çœæˆ‘ä»¬å¤§é‡å·¥ä½œæ—¶é—´ï¼Œæ‰€æœ‰çš„CRUDä»£ç å®ƒéƒ½å¯ä»¥è‡ªåŠ¨åŒ–å®Œæˆï¼ </li></ul><p>å¸‚é¢ä¸Šä¸»æµçš„ä¸€äº›æ¡†æ¶ï¼š</p><ul><li>JPAï¼šå›½å¤–ä½¿ç”¨çš„è¾ƒå¤šï¼Œé›†æˆspringbootæ—¶ä½¿ç”¨è¾ƒå¤š</li><li>tk-mapperï¼šå¼€æºé¡¹ç›®ä½¿ç”¨è¾ƒå¤š</li><li>MyBatisPlusï¼šå›½å†…è¾ƒä¸ºä¸»æµçš„æ¡†æ¶</li></ul><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p><a href="https://github.com/baomidou/mybatis-plus">MyBatis-Plus (opens new window)</a>ï¼ˆç®€ç§° MPï¼‰æ˜¯ä¸€ä¸ª <a href="https://www.mybatis.org/mybatis-3/">MyBatis (opens new window)</a>çš„å¢å¼ºå·¥å…·ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿã€‚</p><p>å®˜ç½‘ï¼š<a href="https://baomidou.com/">https://baomidou.com/</a> MyBatis Plusï¼Œç®€åŒ– MyBatis ï¼</p><p><a href="https://imgtu.com/i/jYWy0U"><img src="https://s1.ax1x.com/2022/07/05/jYWy0U.png" alt="jYWy0U.png"></a></p><p><a href="https://imgtu.com/i/jYWB60"><img src="https://s1.ax1x.com/2022/07/05/jYWB60.png" alt="jYWB60.png"></a></p><h3 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h3><ul><li><strong>æ— ä¾µå…¥</strong>ï¼šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œå¼•å…¥å®ƒä¸ä¼šå¯¹ç°æœ‰å·¥ç¨‹äº§ç”Ÿå½±å“ï¼Œå¦‚ä¸èˆ¬é¡ºæ»‘</li><li><strong>æŸè€—å°</strong>ï¼šå¯åŠ¨å³ä¼šè‡ªåŠ¨æ³¨å…¥åŸºæœ¬ CURDï¼Œæ€§èƒ½åŸºæœ¬æ— æŸè€—ï¼Œç›´æ¥é¢å‘å¯¹è±¡æ“ä½œ</li><li><strong>å¼ºå¤§çš„ CRUD æ“ä½œ</strong>ï¼šå†…ç½®é€šç”¨ Mapperã€é€šç”¨ Serviceï¼Œä»…ä»…é€šè¿‡å°‘é‡é…ç½®å³å¯å®ç°å•è¡¨å¤§éƒ¨åˆ† CRUD æ“ä½œï¼Œæ›´æœ‰å¼ºå¤§çš„æ¡ä»¶æ„é€ å™¨ï¼Œæ»¡è¶³å„ç±»ä½¿ç”¨éœ€æ±‚ï¼Œä»¥åç®€å•çš„CRUDæ“ä½œï¼Œéƒ½ä¸ç”¨è‡ªå·±ç¼–å†™ äº†ï¼</li><li><strong>æ”¯æŒ Lambda å½¢å¼è°ƒç”¨</strong>ï¼šé€šè¿‡ Lambda è¡¨è¾¾å¼ï¼Œæ–¹ä¾¿çš„ç¼–å†™å„ç±»æŸ¥è¯¢æ¡ä»¶ï¼Œæ— éœ€å†æ‹…å¿ƒå­—æ®µå†™é”™</li><li><strong>æ”¯æŒä¸»é”®è‡ªåŠ¨ç”Ÿæˆ</strong>ï¼šæ”¯æŒå¤šè¾¾ 4 ç§ä¸»é”®ç­–ç•¥ï¼ˆå†…å«åˆ†å¸ƒå¼å”¯ä¸€ ID ç”Ÿæˆå™¨ - Sequenceï¼‰ï¼Œå¯è‡ªç”±é…ç½®ï¼Œå®Œç¾è§£å†³ä¸»é”®é—®é¢˜</li><li><strong>æ”¯æŒ ActiveRecord æ¨¡å¼</strong>ï¼šæ”¯æŒ ActiveRecord å½¢å¼è°ƒç”¨ï¼Œå®ä½“ç±»åªéœ€ç»§æ‰¿ Model ç±»å³å¯è¿›è¡Œå¼ºå¤§çš„ CRUD æ“ä½œ</li><li><strong>æ”¯æŒè‡ªå®šä¹‰å…¨å±€é€šç”¨æ“ä½œ</strong>ï¼šæ”¯æŒå…¨å±€é€šç”¨æ–¹æ³•æ³¨å…¥ï¼ˆ Write once, use anywhere ï¼‰</li><li><strong>å†…ç½®ä»£ç ç”Ÿæˆå™¨</strong>ï¼šé‡‡ç”¨ä»£ç æˆ–è€… Maven æ’ä»¶å¯å¿«é€Ÿç”Ÿæˆ Mapper ã€ Model ã€ Service ã€ Controller å±‚ä»£ç ï¼Œæ”¯æŒæ¨¡æ¿å¼•æ“ï¼Œæ›´æœ‰è¶…å¤šè‡ªå®šä¹‰é…ç½®ç­‰æ‚¨æ¥ä½¿ç”¨</li><li><strong>å†…ç½®åˆ†é¡µæ’ä»¶</strong>ï¼šåŸºäº MyBatis ç‰©ç†åˆ†é¡µï¼Œå¼€å‘è€…æ— éœ€å…³å¿ƒå…·ä½“æ“ä½œï¼Œé…ç½®å¥½æ’ä»¶ä¹‹åï¼Œå†™åˆ†é¡µç­‰åŒäºæ™®é€š List æŸ¥è¯¢</li><li><strong>åˆ†é¡µæ’ä»¶æ”¯æŒå¤šç§æ•°æ®åº“</strong>ï¼šæ”¯æŒ MySQLã€MariaDBã€Oracleã€DB2ã€H2ã€HSQLã€SQLiteã€Postgreã€SQLServer ç­‰å¤šç§æ•°æ®åº“</li><li><strong>å†…ç½®æ€§èƒ½åˆ†ææ’ä»¶</strong>ï¼šå¯è¾“å‡º SQL è¯­å¥ä»¥åŠå…¶æ‰§è¡Œæ—¶é—´ï¼Œå»ºè®®å¼€å‘æµ‹è¯•æ—¶å¯ç”¨è¯¥åŠŸèƒ½ï¼Œèƒ½å¿«é€Ÿæªå‡ºæ…¢æŸ¥è¯¢</li><li><strong>å†…ç½®å…¨å±€æ‹¦æˆªæ’ä»¶</strong>ï¼šæä¾›å…¨è¡¨ delete ã€ update æ“ä½œæ™ºèƒ½åˆ†æé˜»æ–­ï¼Œä¹Ÿå¯è‡ªå®šä¹‰æ‹¦æˆªè§„åˆ™ï¼Œé¢„é˜²è¯¯æ“ä½œ</li></ul><h2 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h2><p>å®˜æ–¹åœ°å€ï¼š<a href="https://baomidou.com/pages/226c21/#%E5%88%9D%E5%A7%8B%E5%8C%96%E5%B7%A5%E7%A8%8B">https://baomidou.com/pages/226c21/#%E5%88%9D%E5%A7%8B%E5%8C%96%E5%B7%A5%E7%A8%8B</a></p><p>ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶çš„å››æ­¥æ›²ï¼š</p><ol><li>å¯¼å…¥å¯¹åº”çš„ä¾èµ–</li><li>ç ”ç©¶ä¾èµ–å¦‚ä½•é…ç½®</li><li>ä»£ç å¦‚ä½•ç¼–å†™</li><li>æé«˜æ‰©å±•æŠ€æœ¯èƒ½åŠ›ï¼</li></ol><h3 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><ol><li><p>åˆ›å»ºåä¸ºmybaits_plusæ•°æ®åº“</p></li><li><p>æ ¹æ®å®˜ç½‘æä¾›çš„æ•°æ®åˆ›å»ºuserè¡¨</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">user</span></span><br><span class="line">(</span><br><span class="line">id <span class="type">BIGINT</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¸»é”®ID&#x27;</span>,</span><br><span class="line">name <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å§“å&#x27;</span>,</span><br><span class="line">age <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;å¹´é¾„&#x27;</span>,</span><br><span class="line">email <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;é‚®ç®±&#x27;</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (id)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">user</span> (id, name, age, email) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>, <span class="string">&#x27;Jone&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;test1@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>, <span class="string">&#x27;Jack&#x27;</span>, <span class="number">20</span>, <span class="string">&#x27;test2@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>, <span class="string">&#x27;Tom&#x27;</span>, <span class="number">28</span>, <span class="string">&#x27;test3@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">4</span>, <span class="string">&#x27;Sandy&#x27;</span>, <span class="number">21</span>, <span class="string">&#x27;test4@baomidou.com&#x27;</span>),</span><br><span class="line">(<span class="number">5</span>, <span class="string">&#x27;Billie&#x27;</span>, <span class="number">24</span>, <span class="string">&#x27;test5@baomidou.com&#x27;</span>);</span><br><span class="line"><span class="comment">-- çœŸå®å¼€å‘ä¸­ï¼Œversionï¼ˆä¹è§‚é”ï¼‰ã€deletedï¼ˆé€»è¾‘åˆ é™¤ï¼‰ã€gmt_createã€gmt_modified</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ›å»ºä¸€ä¸ªspringbooté¡¹ç›®</p></li><li><p>å¯¼å…¥ç›¸å…³ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mysql--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mybatis_plus,å¯¼äº†å°±ä¸éœ€è¦å¯¼å…¥mybatisäº†--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span><span class="comment">&lt;!--è¿™ä¸ªç‰ˆæœ¬åŸç”Ÿè¾ƒå¤šï¼Œæœ€æ–°ç‰ˆæŸ¥çœ‹å®˜æ–¹æ–‡æ¡£å³å¯--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼šæˆ‘ä»¬ä½¿ç”¨ mybatis-plus å¯ä»¥èŠ‚çœæˆ‘ä»¬å¤§é‡çš„ä»£ç </p><p>æ³¨æ„ï¼šå°½é‡ä¸è¦åŒæ—¶å¯¼å…¥ mybatis å’Œ mybatis-plusï¼å®¹æ˜“äº§ç”Ÿç‰ˆæœ¬å·®å¼‚</p></li><li><p>è¿æ¥æ•°æ®åº“ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨yamlæ–‡ä»¶é…ç½®</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysql 5 é©±åŠ¨ï¼šcom.mysql.jdbc.Driver</span></span><br><span class="line"><span class="comment"># mysql 8 é©±åŠ¨ï¼šcom.mysql.cj.jdbc.Driverã€éœ€è¦å¢åŠ æ—¶åŒºçš„é…ç½®ï¼šserverTimezone=GMT%2B8</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">Apathy99977</span></span><br><span class="line">    <span class="comment"># å‡å¦‚æ—¶åŒºæŠ¥é”™äº†ï¼Œå°±å¢åŠ ä¸€ä¸ªæ—¶åŒºçš„é…ç½®å°±okï¼šserverTimezone=UTC</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/è¿æ¥çš„æ•°æ®åº“?serverTimezone=UTC&amp;useUnicode=true&amp;characterEncoding=utf-8</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨mybatis-plus</p><ol><li><p>ç¼–å†™pojo</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™mapper</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atapathy.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atapathy.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Apathy</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2022-06-08 9:53:06</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// åœ¨å¯¹åº”çš„Mapperä¸Šé¢ç»§æ‰¿åŸºæœ¬çš„ç±» BaseMapper&lt;è¦ç¼–å†™sqlè¯­å¥çš„ç±»&gt;</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">    <span class="comment">// æ‰€æœ‰çš„CRUDæ“ä½œéƒ½å·²ç»ç¼–å†™å®Œæˆäº†</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•ä½¿ç”¨</p><ul><li><p>æ³¨æ„æˆ‘ä»¬éœ€è¦åœ¨ä¸»å¯åŠ¨ç±»ä¸Šå»æ‰«ææˆ‘ä»¬çš„mapperåŒ…ä¸‹çš„æ‰€æœ‰æ¥å£</p><p><a href="https://imgtu.com/i/jYWsmT"><img src="https://s1.ax1x.com/2022/07/05/jYWsmT.png" alt="jYWsmT.png"></a></p></li><li><p>æµ‹è¯•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MybatisPlusApplicationTests</span> &#123;</span><br><span class="line">    <span class="comment">// ç»§æ‰¿äº†BaseMapperï¼Œæ‰€æœ‰çš„æ–¹æ³•éƒ½æ¥è‡ªå·±çˆ¶ç±»</span></span><br><span class="line">    <span class="comment">// æˆ‘ä»¬ä¹Ÿå¯ä»¥ç¼–å†™è‡ªå·±çš„æ‰©å±•æ–¹æ³•ï¼</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// å‚æ•°æ˜¯ä¸€ä¸ª Wrapper ï¼Œæ¡ä»¶æ„é€ å™¨ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆä¸ç”¨ null</span></span><br><span class="line">        <span class="comment">// æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·</span></span><br><span class="line">        List&lt;User&gt; userList = userMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">        userList.forEach(System.out::println);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç»“æœï¼š</p><p><a href="https://imgtu.com/i/jYW67F"><img src="https://s1.ax1x.com/2022/07/05/jYW67F.png" alt="jYW67F.png"></a></p></li></ul></li></ol></li></ol><h3 id="æ€è€ƒé—®é¢˜ï¼Ÿ"><a href="#æ€è€ƒé—®é¢˜ï¼Ÿ" class="headerlink" title="æ€è€ƒé—®é¢˜ï¼Ÿ"></a>æ€è€ƒé—®é¢˜ï¼Ÿ</h3><ol><li>SQLè°å¸®æˆ‘ä»¬å†™çš„ ?         æ˜¯MyBatis-Plus å†™å¥½äº†çš„</li><li>æ–¹æ³•å“ªé‡Œæ¥çš„ï¼Ÿ    MyBatis-Plus ç¼–å†™çš„</li></ol><h3 id="æ—¥å¿—é…ç½®"><a href="#æ—¥å¿—é…ç½®" class="headerlink" title="æ—¥å¿—é…ç½®"></a>æ—¥å¿—é…ç½®</h3><p><a href="https://imgtu.com/i/jYWDXV"><img src="https://s1.ax1x.com/2022/07/05/jYWDXV.png" alt="jYWDXV.png"></a></p><p>åœ¨yamlæ–‡ä»¶é…ç½®çš„æ—¶å€™å¯ä»¥å‘ç°å¯ä»¥é…ç½®å¾ˆå¤šæ—¥å¿—ç±»ï¼Œ<strong>StdOutImpl</strong>ä¸ºé»˜è®¤æ§åˆ¶å°è¾“å‡ºï¼Œä½¿ç”¨å…¶ä»–ç±»å¯¼å…¥ç›¸å…³ä¾èµ–å³å¯</p><h2 id="CRUDæ‰©å±•"><a href="#CRUDæ‰©å±•" class="headerlink" title="CRUDæ‰©å±•"></a>CRUDæ‰©å±•</h2><h3 id="Insertæ’å…¥"><a href="#Insertæ’å…¥" class="headerlink" title="Insertæ’å…¥"></a>Insertæ’å…¥</h3><p><a href="https://imgtu.com/i/jYWh11"><img src="https://s1.ax1x.com/2022/07/05/jYWh11.png" alt="jYWh11.png"></a></p><p>æ•°æ®åº“æ’å…¥çš„idçš„é»˜è®¤å€¼ä¸ºï¼šå…¨å±€çš„å”¯ä¸€id</p><h4 id="ä¸»é”®ç”Ÿæˆç­–ç•¥"><a href="#ä¸»é”®ç”Ÿæˆç­–ç•¥" class="headerlink" title="ä¸»é”®ç”Ÿæˆç­–ç•¥"></a>ä¸»é”®ç”Ÿæˆç­–ç•¥</h4><p>é»˜è®¤ <strong>ID_WORKER</strong> å…¨å±€å”¯ä¸€id</p><p>åˆ†å¸ƒå¼ç³»ç»Ÿå”¯ä¸€idç”Ÿæˆï¼š<a href="https://www.cnblogs.com/haoxinyue/p/5208136.html">https://www.cnblogs.com/haoxinyue/p/5208136.html</a></p><h5 id="é›ªèŠ±ç®—æ³•ï¼š"><a href="#é›ªèŠ±ç®—æ³•ï¼š" class="headerlink" title="é›ªèŠ±ç®—æ³•ï¼š"></a>é›ªèŠ±ç®—æ³•ï¼š</h5><ul><li>snowflakeæ˜¯<strong>Twitter</strong>å¼€æºçš„åˆ†å¸ƒå¼IDç”Ÿæˆç®—æ³•ï¼Œç»“æœæ˜¯ä¸€ä¸ª<strong>longå‹</strong>çš„IDã€‚</li><li>å…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šä½¿ç”¨41bitä½œä¸º æ¯«ç§’æ•°ï¼Œ10bitä½œä¸ºæœºå™¨çš„IDï¼ˆ5ä¸ªbitæ˜¯æ•°æ®ä¸­å¿ƒï¼Œ5ä¸ªbitçš„æœºå™¨IDï¼‰ï¼Œ12bitä½œä¸ºæ¯«ç§’å†…çš„æµæ°´å·ï¼ˆæ„å‘³ ç€æ¯ä¸ªèŠ‚ç‚¹åœ¨æ¯æ¯«ç§’å¯ä»¥äº§ç”Ÿ 4096 ä¸ª IDï¼‰</li><li>æœ€åè¿˜æœ‰ä¸€ä¸ªç¬¦å·ä½ï¼Œæ°¸è¿œæ˜¯0ï¼Œå¯ä»¥ä¿è¯å‡ ä¹å…¨çƒå”¯ ä¸€ï¼</li></ul><h5 id="æ³¨è§£è‡ªå¢ï¼š"><a href="#æ³¨è§£è‡ªå¢ï¼š" class="headerlink" title="æ³¨è§£è‡ªå¢ï¼š"></a>æ³¨è§£è‡ªå¢ï¼š</h5><p>é…ç½®ä¸»é”®è‡ªå¢ï¼š</p><ol><li><p>å®ä½“ç±»å­—æ®µä¸ŠåŠ @TableId(type = IdType.AUTO)zhujie</p></li><li><p>æ•°æ®åº“è®¾ç½®æ—¶å­—æ®µä¸€å®šä¹Ÿè¦æ˜¯è‡ªå¢</p><p><a href="https://imgtu.com/i/jYWgk4"><img src="https://s1.ax1x.com/2022/07/05/jYWgk4.png" alt="jYWgk4.png"></a></p></li></ol><h5 id="ä¸åŒçš„ä¸»é”®ç­–ç•¥ï¼š"><a href="#ä¸åŒçš„ä¸»é”®ç­–ç•¥ï¼š" class="headerlink" title="ä¸åŒçš„ä¸»é”®ç­–ç•¥ï¼š"></a>ä¸åŒçš„ä¸»é”®ç­–ç•¥ï¼š</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">IdType</span> &#123;</span><br><span class="line">    AUTO(<span class="number">0</span>), <span class="comment">// æ•°æ®åº“idè‡ªå¢</span></span><br><span class="line">    NONE(<span class="number">1</span>), <span class="comment">// æœªè®¾ç½®ä¸»é”®</span></span><br><span class="line">    INPUT(<span class="number">2</span>), <span class="comment">// æ‰‹åŠ¨è¾“å…¥,ä¸€æ—¦æ‰‹åŠ¨è¾“å…¥idä¹‹åï¼Œå°±éœ€è¦è‡ªå·±é…ç½®id äº†</span></span><br><span class="line">    ID_WORKER(<span class="number">3</span>), <span class="comment">// é»˜è®¤çš„å…¨å±€å”¯ä¸€id</span></span><br><span class="line">    UUID(<span class="number">4</span>), <span class="comment">// å…¨å±€å”¯ä¸€id uuid</span></span><br><span class="line">    ID_WORKER_STR(<span class="number">5</span>); <span class="comment">//ID_WORKER å­—ç¬¦ä¸²è¡¨ç¤ºæ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°æ“ä½œ"><a href="#æ›´æ–°æ“ä½œ" class="headerlink" title="æ›´æ–°æ“ä½œ"></a>æ›´æ–°æ“ä½œ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateTest</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    <span class="comment">// é€šè¿‡æ¡ä»¶è‡ªåŠ¨æ‹¼æ¥åŠ¨æ€sql</span></span><br><span class="line">    user.setId(<span class="number">1534360852678524929L</span>);</span><br><span class="line">    user.setName(<span class="string">&quot;æå››&quot;</span>);</span><br><span class="line">    user.setAge(<span class="number">18</span>);</span><br><span class="line">    <span class="comment">// æ³¨æ„ï¼šupdateById çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> userMapper.updateById(user);</span><br><span class="line">    System.out.println(result);<span class="comment">//å—å½±å“çš„è¡Œæ•°</span></span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://imgtu.com/i/jYW5X6"><img src="https://s1.ax1x.com/2022/07/05/jYW5X6.png" alt="jYW5X6.png"></a></p><p>æ‰€æœ‰çš„sqléƒ½æ˜¯è‡ªåŠ¨å¸®ä½ åŠ¨æ€é…ç½®çš„ï¼</p><h4 id="è‡ªåŠ¨å¡«å……"><a href="#è‡ªåŠ¨å¡«å……" class="headerlink" title="è‡ªåŠ¨å¡«å……"></a>è‡ªåŠ¨å¡«å……</h4><p>åˆ›å»ºæ—¶é—´ã€ä¿®æ”¹æ—¶é—´ï¼è¿™äº›ä¸ªæ“ä½œä¸€ééƒ½æ˜¯è‡ªåŠ¨åŒ–å®Œæˆçš„ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æ‰‹åŠ¨æ›´æ–°ï¼ </p><p>é˜¿é‡Œå·´å·´å¼€å‘æ‰‹å†Œï¼šæ‰€æœ‰çš„æ•°æ®åº“è¡¨ï¼šgmt_createã€gmt_modifiedå‡ ä¹æ‰€æœ‰çš„è¡¨éƒ½è¦é…ç½®ä¸Šï¼è€Œä¸”éœ€ è¦è‡ªåŠ¨åŒ–ï¼</p><h5 id="æ–¹å¼ä¸€ï¼šæ•°æ®åº“çº§åˆ«"><a href="#æ–¹å¼ä¸€ï¼šæ•°æ®åº“çº§åˆ«" class="headerlink" title="æ–¹å¼ä¸€ï¼šæ•°æ®åº“çº§åˆ«"></a>æ–¹å¼ä¸€ï¼šæ•°æ®åº“çº§åˆ«</h5><p>å‰è¨€ï¼šå®é™…å·¥ä½œä¸­ä¸€èˆ¬ä¸å…è®¸ä½ ä¿®æ”¹æ•°æ®åº“</p><p>ä½¿ç”¨æ–¹å¼ï¼š</p><ol><li><p>åœ¨è¡¨ä¸­æ–°å¢å­—æ®µ create_time, update_time</p><p><a href="https://imgtu.com/i/jYWRh9"><img src="https://s1.ax1x.com/2022/07/05/jYWRh9.png" alt="jYWRh9.png"></a></p></li><li><p>å†æ¬¡æµ‹è¯•æ’å…¥æ–¹æ³•ï¼Œæ³¨æ„éœ€è¦å…ˆæŠŠå®ä½“ç±»åŒæ­¥ï¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Date createTime;</span><br><span class="line"><span class="keyword">private</span> Date updateTime;</span><br></pre></td></tr></table></figure></li><li><p>å†æ¬¡æ›´æ–°æŸ¥çœ‹ç»“æœå³å¯</p><p><a href="https://imgtu.com/i/jYWfpR"><img src="https://s1.ax1x.com/2022/07/05/jYWfpR.png" alt="jYWfpR.png"></a></p></li></ol><h5 id="æ–¹å¼äºŒï¼šä»£ç çº§åˆ«"><a href="#æ–¹å¼äºŒï¼šä»£ç çº§åˆ«" class="headerlink" title="æ–¹å¼äºŒï¼šä»£ç çº§åˆ«"></a>æ–¹å¼äºŒï¼šä»£ç çº§åˆ«</h5><ol><li><p>åˆ é™¤æ•°æ®åº“çš„é»˜è®¤å€¼ã€æ›´æ–°æ“ä½œï¼</p><p><a href="https://imgtu.com/i/jYW46x"><img src="https://s1.ax1x.com/2022/07/05/jYW46x.png" alt="jYW46x.png"></a></p></li><li><p>å®ä½“ç±»å­—æ®µå±æ€§ä¸Šéœ€è¦å¢åŠ æ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­—æ®µæ·»åŠ å¡«å……å†…å®¹</span></span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line"><span class="keyword">private</span> Date createTime;</span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line"><span class="keyword">private</span> Date updateTime;</span><br></pre></td></tr></table></figure></li><li><p>ç¼–å†™å¤„ç†å™¨æ¥å¤„ç†è¿™ä¸ªæ³¨è§£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atapathy.handler;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.log4j.Log4j;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.reflection.MetaObject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Log4j</span></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">// ä¸€å®šä¸è¦å¿˜è®°æŠŠå¤„ç†å™¨åŠ åˆ°IOCå®¹å™¨ä¸­ï¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line">    <span class="comment">// æ’å…¥æ—¶çš„å¡«å……ç­–ç•¥</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;start insert fill.....&quot;</span>);</span><br><span class="line">        <span class="comment">// setFieldValByName(String fieldName, Object fieldVal, MetaObject metaObject</span></span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;createTime&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(), metaObject);</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ›´æ–°æ—¶çš„å¡«å……ç­–ç•¥</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;start update fill.....&quot;</span>);</span><br><span class="line">        <span class="built_in">this</span>.setFieldValByName(<span class="string">&quot;updateTime&quot;</span>, <span class="keyword">new</span> <span class="title class_">Date</span>(), metaObject);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•æ·»åŠ å’Œæ›´æ–°ç„¶åè§‚å¯Ÿæ—¶é—´</p><p><a href="https://imgtu.com/i/jYWonK"><img src="https://s1.ax1x.com/2022/07/05/jYWonK.png" alt="jYWonK.png"></a></p></li></ol><h3 id="ä¹è§‚é”"><a href="#ä¹è§‚é”" class="headerlink" title="ä¹è§‚é”"></a>ä¹è§‚é”</h3><p>åœ¨é¢è¯•è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šè¢«é—®é“ä¹è§‚é”ï¼Œæ‚²è§‚é”ï¼è¿™ä¸ªå…¶å®éå¸¸ç®€å•ï¼</p><blockquote><p>ä¹è§‚é” : æ•…åæ€æ„ååˆ†ä¹è§‚ï¼Œå®ƒæ€»æ˜¯è®¤ä¸ºä¸ä¼šå‡ºç°é—®é¢˜ï¼Œæ— è®ºå¹²ä»€ä¹ˆä¸å»ä¸Šé”ï¼å¦‚æœå‡ºç°äº†é—®é¢˜ï¼Œ å†æ¬¡æ›´æ–°å€¼æµ‹è¯• </p><p>æ‚²è§‚é”ï¼šæ•…åæ€æ„ååˆ†æ‚²è§‚ï¼Œå®ƒæ€»æ˜¯è®¤ä¸ºæ€»æ˜¯å‡ºç°é—®é¢˜ï¼Œæ— è®ºå¹²ä»€ä¹ˆéƒ½ä¼šä¸Šé”ï¼å†å»æ“ä½œï¼</p></blockquote><p>å½“è¦æ›´æ–°ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼Œå¸Œæœ›è¿™æ¡è®°å½•æ²¡æœ‰è¢«åˆ«äººæ›´æ–°<br>ä¹è§‚é”å®ç°æ–¹å¼:</p><blockquote><ul><li>å–å‡ºè®°å½•æ—¶ï¼Œè·å–å½“å‰ version</li><li>æ›´æ–°æ—¶ï¼Œå¸¦ä¸Šè¿™ä¸ª version</li><li>æ‰§è¡Œæ›´æ–°æ—¶ï¼Œ set version = newVersion where version = oldVersion</li><li>å¦‚æœ version ä¸å¯¹ï¼Œå°±æ›´æ–°å¤±è´¥</li></ul></blockquote><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ä¹è§‚é”ï¼š<span class="number">1</span>ã€å…ˆæŸ¥è¯¢ï¼Œè·å¾—ç‰ˆæœ¬å· version <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"><span class="comment">-- Açº¿ç¨‹</span></span><br><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> name <span class="operator">=</span> &quot;Gods&quot;, version <span class="operator">=</span> version <span class="operator">+</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">where</span> id <span class="operator">=</span> <span class="number">2</span> <span class="keyword">and</span> version <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"><span class="comment">-- B çº¿ç¨‹æŠ¢å…ˆå®Œæˆï¼Œè¿™ä¸ªæ—¶å€™ version = 2ï¼Œä¼šå¯¼è‡´ A ä¿®æ”¹å¤±è´¥ï¼</span></span><br><span class="line"><span class="keyword">update</span> <span class="keyword">user</span> <span class="keyword">set</span> name <span class="operator">=</span> &quot;Gods&quot;, version <span class="operator">=</span> version <span class="operator">+</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">where</span> id <span class="operator">=</span> <span class="number">2</span> <span class="keyword">and</span> version <span class="operator">=</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><h4 id="æµ‹è¯•ä¸€ä¸‹MybatisPlusçš„ä¹è§‚é”æ’ä»¶ï¼š"><a href="#æµ‹è¯•ä¸€ä¸‹MybatisPlusçš„ä¹è§‚é”æ’ä»¶ï¼š" class="headerlink" title="æµ‹è¯•ä¸€ä¸‹MybatisPlusçš„ä¹è§‚é”æ’ä»¶ï¼š"></a>æµ‹è¯•ä¸€ä¸‹MybatisPlusçš„ä¹è§‚é”æ’ä»¶ï¼š</h4><ol><li><p>ç»™æ•°æ®åº“ä¸­å¢åŠ versionå­—æ®µï¼</p><p><a href="https://imgtu.com/i/jYWT0O"><img src="https://s1.ax1x.com/2022/07/05/jYWT0O.png" alt="jYWT0O.png"></a></p></li><li><p>å®ä½“ç±»æ·»åŠ å¯¹åº”çš„å­—æ®µ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Version</span> <span class="comment">//ä¹è§‚é”Versionæ³¨è§£</span></span><br><span class="line"><span class="keyword">private</span> Integer version;</span><br></pre></td></tr></table></figure></li><li><p>æ³¨å†Œç»„ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atapathy.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.OptimisticLockerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.EnableTransactionManagement;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰«ææˆ‘ä»¬çš„ mapper æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="meta">@MapperScan(&quot;com.atapathy.mapper&quot;)</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span></span><br><span class="line"><span class="meta">@Configuration</span> <span class="comment">// é…ç½®ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisPlusConfig</span> &#123;</span><br><span class="line">    <span class="comment">// æ³¨å†Œä¹è§‚é”æ’ä»¶</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> OptimisticLockerInterceptor <span class="title function_">optimisticLockerInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">OptimisticLockerInterceptor</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    æœ€æ–°ç‰ˆMybatisPlusæ³¨å†Œä¹è§‚é”æ’ä»¶ï¼Œå› ä¸ºä¹è§‚é”é…ç½®(OptimisticLockerInterceptorå·²ç»å¼ƒç”¨)</span></span><br><span class="line"><span class="comment">    @Bean</span></span><br><span class="line"><span class="comment">    public MybatisPlusInterceptor mybatisPlusInterceptor() &#123;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.MYSQL));</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        interceptor.addInnerInterceptor(new OptimisticLockerInnerInterceptor());</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        return interceptor;</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æµ‹è¯•ä¹è§‚é”æˆåŠŸï¼</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testOptimisticLocker</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1ã€æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    <span class="comment">// 2ã€ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    user.setName(<span class="string">&quot;Gods&quot;</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;gods@qq.com&quot;</span>);</span><br><span class="line">    <span class="comment">// 3ã€æ‰§è¡Œæ›´æ–°æ“ä½œ</span></span><br><span class="line">    userMapper.updateById(user);</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ä¿®æ”¹åçš„å€¼</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> userMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    System.out.println(user1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼šå‘ç°æŸ¥è¯¢è¯­å¥çš„whereæ¡ä»¶è‡ªåŠ¨å¸®æˆ‘ä»¬æ·»åŠ äº†versionåˆ¤æ–­</p><p><a href="https://imgtu.com/i/jYW77D"><img src="https://s1.ax1x.com/2022/07/05/jYW77D.png" alt="jYW77D.png"></a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æµ‹è¯•ä¹è§‚é”å¤±è´¥ï¼å¤šçº¿ç¨‹ä¸‹</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testOptimisticLocker2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// çº¿ç¨‹ 1</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    user.setName(<span class="string">&quot;Gods1&quot;</span>);</span><br><span class="line">    user.setEmail(<span class="string">&quot;gods@qq.com&quot;</span>);</span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿå¦å¤–ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œäº†æ’é˜Ÿæ“ä½œ</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> userMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    user2.setName(<span class="string">&quot;Gods2&quot;</span>);</span><br><span class="line">    user2.setEmail(<span class="string">&quot;gods@qq.com&quot;</span>);</span><br><span class="line">    userMapper.updateById(user2);</span><br><span class="line">    <span class="comment">// è‡ªæ—‹é”æ¥å¤šæ¬¡å°è¯•æäº¤ï¼</span></span><br><span class="line">    userMapper.updateById(user); <span class="comment">// å¦‚æœæ²¡æœ‰ä¹è§‚é”å°±ä¼šè¦†ç›–æ’é˜Ÿçº¿ç¨‹çš„å€¼ï¼</span></span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ä¿®æ”¹åçš„å€¼</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user3</span> <span class="operator">=</span> userMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    System.out.println(user3);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>ç»“æœï¼šå¯ä»¥å‘ç°ç»“æœä¸ºGods2</p><p><a href="https://imgtu.com/i/jYWbAe"><img src="https://s1.ax1x.com/2022/07/05/jYWbAe.png" alt="jYWbAe.png"></a></p></li></ul></li></ol><h3 id="æŸ¥è¯¢æ“ä½œ"><a href="#æŸ¥è¯¢æ“ä½œ" class="headerlink" title="æŸ¥è¯¢æ“ä½œ"></a>æŸ¥è¯¢æ“ä½œ</h3><h4 id="æµ‹è¯•IdæŸ¥è¯¢"><a href="#æµ‹è¯•IdæŸ¥è¯¢" class="headerlink" title="æµ‹è¯•IdæŸ¥è¯¢"></a>æµ‹è¯•IdæŸ¥è¯¢</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectById</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.selectById(<span class="number">1L</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><p><a href="https://imgtu.com/i/jYWqtH"><img src="https://s1.ax1x.com/2022/07/05/jYWqtH.png" alt="jYWqtH.png"></a></p><h4 id="æµ‹è¯•æ‰¹é‡æŸ¥è¯¢"><a href="#æµ‹è¯•æ‰¹é‡æŸ¥è¯¢" class="headerlink" title="æµ‹è¯•æ‰¹é‡æŸ¥è¯¢"></a>æµ‹è¯•æ‰¹é‡æŸ¥è¯¢</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByBatchId</span><span class="params">()</span>&#123;</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectBatchIds(Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>));</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼šæ³¨æ„æŸ¥çœ‹sqlè¯­å¥</p><p><a href="https://imgtu.com/i/jYWLhd"><img src="https://s1.ax1x.com/2022/07/05/jYWLhd.png" alt="jYWLhd.png"></a></p><h4 id="æŒ‰æ¡ä»¶æŸ¥è¯¢ï¼šä½¿ç”¨mapæ“ä½œ"><a href="#æŒ‰æ¡ä»¶æŸ¥è¯¢ï¼šä½¿ç”¨mapæ“ä½œ" class="headerlink" title="æŒ‰æ¡ä»¶æŸ¥è¯¢ï¼šä½¿ç”¨mapæ“ä½œ"></a>æŒ‰æ¡ä»¶æŸ¥è¯¢ï¼šä½¿ç”¨mapæ“ä½œ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectByBatchIds</span><span class="params">()</span>&#123;</span><br><span class="line">    HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰æŸ¥è¯¢</span></span><br><span class="line">    map.put(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;age&quot;</span>,<span class="number">17</span>);</span><br><span class="line">    List&lt;User&gt; users = userMapper.selectByMap(map);</span><br><span class="line">    users.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼šæ³¨æ„æŸ¥çœ‹SQLè¯­å¥</p><p><a href="https://imgtu.com/i/jYWX9A"><img src="https://s1.ax1x.com/2022/07/05/jYWX9A.png" alt="jYWX9A.png"></a></p><h3 id="åˆ†é¡µæŸ¥è¯¢"><a href="#åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="åˆ†é¡µæŸ¥è¯¢"></a>åˆ†é¡µæŸ¥è¯¢</h3><p>åˆ†é¡µåœ¨ç½‘ç«™ä½¿ç”¨çš„é¢‘ç‡ååˆ†ä¹‹å¤šï¼</p><p>ä½¿ç”¨åˆ†é¡µçš„å‡ ç§æ–¹æ³•</p><ol><li>åŸå§‹çš„ limit è¿›è¡Œåˆ†é¡µ </li><li>pageHelper ç¬¬ä¸‰æ–¹æ’ä»¶ </li><li>MybatisPluså†…ç½®çš„åˆ†é¡µæ’ä»¶ï¼</li></ol><h4 id="ä½¿ç”¨æ–¹å¼"><a href="#ä½¿ç”¨æ–¹å¼" class="headerlink" title="ä½¿ç”¨æ–¹å¼"></a>ä½¿ç”¨æ–¹å¼</h4><ol><li><p>é…ç½®æ‹¦æˆªå™¨ç»„ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ†é¡µæ’ä»¶</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> PaginationInterceptor <span class="title function_">paginationInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PaginationInterceptor</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–°ç‰ˆMybatisPlusåˆ†é¡µæ’ä»¶</span></span><br><span class="line"><span class="comment">// åˆ†é¡µæ’ä»¶</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li><li><p>ç›´æ¥ä½¿ç”¨Pageå¯¹è±¡å³å¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æµ‹è¯•åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testPage</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// å‚æ•°ä¸€ï¼šå½“å‰é¡µ</span></span><br><span class="line">    <span class="comment">// å‚æ•°äºŒï¼šé¡µé¢å¤§å°</span></span><br><span class="line">    <span class="comment">// ä½¿ç”¨äº†åˆ†é¡µæ’ä»¶ä¹‹åï¼Œæ‰€æœ‰çš„åˆ†é¡µæ“ä½œä¹Ÿå˜å¾—ç®€å•çš„ï¼</span></span><br><span class="line">    Page&lt;User&gt; page = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(<span class="number">2</span>,<span class="number">5</span>);</span><br><span class="line">    userMapper.selectPage(page,<span class="literal">null</span>);</span><br><span class="line">    List&lt;User&gt; records = page.getRecords();</span><br><span class="line">    records.forEach(System.out::println);</span><br><span class="line">    <span class="comment">//è·å–æ€»æ•°</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">total</span> <span class="operator">=</span> page.getTotal();</span><br><span class="line">    System.out.println(<span class="string">&quot;é¡µé¢æ€»æ•°ï¼š&quot;</span>+total);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼šæ³¨æ„æŸ¥çœ‹SQLè¯­å¥</p><p><a href="https://imgtu.com/i/jYWvct"><img src="https://s1.ax1x.com/2022/07/05/jYWvct.png" alt="jYWvct.png"></a></p></li></ol><h3 id="åˆ é™¤æ“ä½œ"><a href="#åˆ é™¤æ“ä½œ" class="headerlink" title="åˆ é™¤æ“ä½œ"></a>åˆ é™¤æ“ä½œ</h3><p>å’ŒæŸ¥è¯¢æ“ä½œç±»ä¼¼ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€æ¼”ç¤ºäº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æµ‹è¯•Idåˆ é™¤</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteById</span><span class="params">()</span> &#123;</span><br><span class="line">    userMapper.deleteById(<span class="number">1L</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡idæ‰¹é‡åˆ é™¤</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteBatchId</span><span class="params">()</span> &#123;</span><br><span class="line">    userMapper.deleteBatchIds(Arrays.asList(<span class="number">1L</span>, <span class="number">2L</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡mapåˆ é™¤</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteMap</span><span class="params">()</span> &#123;</span><br><span class="line">    HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;è€å…­&quot;</span>);</span><br><span class="line">    userMapper.deleteByMap(map);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="é€»è¾‘åˆ é™¤"><a href="#é€»è¾‘åˆ é™¤" class="headerlink" title="é€»è¾‘åˆ é™¤"></a>é€»è¾‘åˆ é™¤</h3><blockquote><p>ç‰©ç†åˆ é™¤ ï¼šä»æ•°æ®åº“ä¸­ç›´æ¥ç§»é™¤  </p><p>é€»è¾‘åˆ é™¤ ï¼šå†æ•°æ®åº“ä¸­æ²¡æœ‰è¢«ç§»é™¤ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªå˜é‡æ¥è®©ä»–å¤±æ•ˆï¼ deleted = 0 =&gt; deleted = 1</p></blockquote><p>ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹è¢«åˆ é™¤çš„è®°å½•ï¼é˜²æ­¢æ•°æ®çš„ä¸¢å¤±ï¼Œç±»ä¼¼äºå›æ”¶ç«™ï¼</p><h4 id="ä½¿ç”¨æ­¥éª¤"><a href="#ä½¿ç”¨æ­¥éª¤" class="headerlink" title="ä½¿ç”¨æ­¥éª¤"></a>ä½¿ç”¨æ­¥éª¤</h4><ol><li><p>åœ¨æ•°æ®è¡¨ä¸­å¢åŠ ä¸€ä¸ª deleted å­—æ®µ</p><p><a href="https://imgtu.com/i/jYWj1I"><img src="https://s1.ax1x.com/2022/07/05/jYWj1I.png" alt="jYWj1I.png"></a></p></li><li><p>å®ä½“ç±»ä¸­å¢åŠ å±æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableLogic</span> <span class="comment">//é€»è¾‘åˆ é™¤</span></span><br><span class="line"><span class="keyword">private</span> Integer deleted;</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®åˆ°ç»„ä»¶ç±»é‡Œ(ç›®å‰æœ€æ–°ç‰ˆæœ¬çš„å·²ç»å‰”é™¤ï¼Œé»˜è®¤é›†æˆå¥½äº†ï¼Œåªéœ€æ·»åŠ äº†æ³¨è§£å³å¯)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€»è¾‘åˆ é™¤ç»„ä»¶ï¼</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> ISqlInjector <span class="title function_">sqlInjector</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LogicSqlInjector</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>é…ç½®yamlæ–‡ä»¶</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span>  <span class="comment">#é€»è¾‘åˆ é™¤</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span> <span class="comment"># é€»è¾‘å·²åˆ é™¤å€¼(é»˜è®¤ä¸º 1)</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span> <span class="comment"># é€»è¾‘æœªåˆ é™¤å€¼(é»˜è®¤ä¸º 0)</span></span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•</p><p><a href="https://imgtu.com/i/jYfpB8"><img src="https://s1.ax1x.com/2022/07/05/jYfpB8.png" alt="jYfpB8.png"></a></p><p>è®°å½•ä¾æ—§åœ¨æ•°æ®åº“ï¼Œä½†æ˜¯å€¼ç¡®å·²ç»å˜åŒ–äº†ï¼</p><p>æˆ‘ä»¬å†æµ‹è¯•ä¸€ä¸‹æŸ¥è¯¢</p><p><a href="https://imgtu.com/i/jYWxjP"><img src="https://s1.ax1x.com/2022/07/05/jYWxjP.png" alt="jYWxjP.png"></a></p></li></ol><h2 id="æ€§èƒ½åˆ†ææ’ä»¶"><a href="#æ€§èƒ½åˆ†ææ’ä»¶" class="headerlink" title="æ€§èƒ½åˆ†ææ’ä»¶"></a>æ€§èƒ½åˆ†ææ’ä»¶</h2><ul><li>æˆ‘ä»¬åœ¨å¹³æ—¶çš„å¼€å‘ä¸­ï¼Œä¼šé‡åˆ°ä¸€äº›æ…¢sqlã€‚</li><li>æµ‹è¯•å·¥å…·ï¼š druidï¼ŒMybatisPlusæä¾›çš„æ€§èƒ½åˆ†ææ’ä»¶</li><li>MybatisPlusæä¾›çš„æ€§èƒ½åˆ†ææ’ä»¶çš„ä½œç”¨ï¼šæ€§èƒ½åˆ†ææ‹¦æˆªå™¨ï¼Œç”¨äºè¾“å‡ºæ¯æ¡ SQL è¯­å¥åŠå…¶æ‰§è¡Œæ—¶é—´ ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´å°±åœæ­¢è¿è¡Œï¼</li></ul><p>ä½¿ç”¨æ–¹å¼ï¼šæœ€æ–°ç‰ˆå·²æ”¹ä¸ºæ‰§è¡ŒSQLåˆ†ææ‰“å°,æŸ¥é˜…å®˜ç½‘å³å¯ï¼š<a href="https://baomidou.com/pages/833fab/">https://baomidou.com/pages/833fab/</a></p><ol><li><p>å¯¼å…¥æ’ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * SQLæ‰§è¡Œæ•ˆç‡æ’ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@Profile(&#123;&quot;dev&quot;,&quot;test&quot;&#125;)</span><span class="comment">// è®¾ç½® dev test ç¯å¢ƒå¼€å¯ï¼Œä¿è¯æˆ‘ä»¬çš„æ•ˆç‡</span></span><br><span class="line"><span class="keyword">public</span> PerformanceInterceptor <span class="title function_">performanceInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">PerformanceInterceptor</span> <span class="variable">performanceInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span></span><br><span class="line">            <span class="title class_">PerformanceInterceptor</span>();</span><br><span class="line">    performanceInterceptor.setMaxTime(<span class="number">100</span>); <span class="comment">// msè®¾ç½®sqlæ‰§è¡Œçš„æœ€å¤§æ—¶é—´ï¼Œå¦‚æœè¶…è¿‡äº†åˆ™ä¸æ‰§è¡Œ</span></span><br><span class="line">    performanceInterceptor.setFormat(<span class="literal">true</span>); <span class="comment">// æ˜¯å¦æ ¼å¼åŒ–ä»£ç </span></span><br><span class="line">    <span class="keyword">return</span> performanceInterceptor;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®°ä½ï¼Œè¦åœ¨SpringBootä¸­é…ç½®ç¯å¢ƒä¸ºdevæˆ–è€… test ç¯å¢ƒï¼</p></li><li><p>æµ‹è¯•æŸ¥è¯¢å…¨éƒ¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// å‚æ•°æ˜¯ä¸€ä¸ª Wrapper ï¼Œæ¡ä»¶æ„é€ å™¨ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆä¸ç”¨ null</span></span><br><span class="line">    <span class="comment">// æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·</span></span><br><span class="line">    List&lt;User&gt; userList = userMapper.selectList(<span class="literal">null</span>);</span><br><span class="line">    userList.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><p><a href="https://imgtu.com/i/jYfSnf"><img src="https://s1.ax1x.com/2022/07/05/jYfSnf.png" alt="jYfSnf.png"></a></p></li></ol><h2 id="æ¡ä»¶æ„é€ å™¨ï¼šWrapper"><a href="#æ¡ä»¶æ„é€ å™¨ï¼šWrapper" class="headerlink" title="æ¡ä»¶æ„é€ å™¨ï¼šWrapper"></a>æ¡ä»¶æ„é€ å™¨ï¼šWrapper</h2><p>æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ä½¿ç”¨å³å¯ï¼š<a href="https://baomidou.com/pages/10c804/#abstractwrapper">https://baomidou.com/pages/10c804/#abstractwrapper</a></p><p>è­¦å‘Š:</p><p>å®˜æ–¹ä¸æ”¯æŒä»¥åŠä¸èµæˆåœ¨ <strong>RPC</strong> è°ƒç”¨ä¸­æŠŠ Wrapper è¿›è¡Œä¼ è¾“</p><h3 id="ä»€ä¹ˆæ˜¯RPC"><a href="#ä»€ä¹ˆæ˜¯RPC" class="headerlink" title="ä»€ä¹ˆæ˜¯RPC?"></a>ä»€ä¹ˆæ˜¯RPC?</h3><p><a href="https://blog.csdn.net/lgxzzz/article/details/120921461">https://blog.csdn.net/lgxzzz/article/details/120921461</a></p><p>Wrapperçš„åæœŸå¯ç»´æŠ¤æ€§ä¸é«˜ï¼Œå¤æ‚SQLè¿˜æ˜¯æ¨èä½¿ç”¨xmlæ ¼å¼ç¼–å†™</p><h2 id="ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨"><a href="#ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨" class="headerlink" title="ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨"></a>ä»£ç è‡ªåŠ¨ç”Ÿæˆå™¨</h2><p>å®˜æ–¹ä½¿ç”¨çš„æ˜¯é€†å‘å·¥ç¨‹å®ç°ï¼š<a href="https://baomidou.com/pages/779a6e/">https://baomidou.com/pages/779a6e/</a></p><p>æˆ‘æ¨èä½¿ç”¨ideaè‡ªå¸¦æ’ä»¶<strong><a href="https://blog.csdn.net/weixin_43982359/article/details/121799836">EasyCode</a></strong></p><h3 id="æˆ‘è‡ªå®šä¹‰çš„EasyCodeæ¨¡æ¿"><a href="#æˆ‘è‡ªå®šä¹‰çš„EasyCodeæ¨¡æ¿" class="headerlink" title="æˆ‘è‡ªå®šä¹‰çš„EasyCodeæ¨¡æ¿"></a>æˆ‘è‡ªå®šä¹‰çš„EasyCodeæ¨¡æ¿</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;author&quot;</span><span class="punctuation">:</span><span class="string">&quot;makejava&quot;</span><span class="punctuation">,</span><span class="attr">&quot;version&quot;</span><span class="punctuation">:</span><span class="string">&quot;1.2.4&quot;</span><span class="punctuation">,</span><span class="attr">&quot;userSecure&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span><span class="attr">&quot;currTypeMapperGroupName&quot;</span><span class="punctuation">:</span><span class="string">&quot;Default&quot;</span><span class="punctuation">,</span><span class="attr">&quot;currTemplateGroupName&quot;</span><span class="punctuation">:</span><span class="string">&quot;GodsTemplate&quot;</span><span class="punctuation">,</span><span class="attr">&quot;currColumnConfigGroupName&quot;</span><span class="punctuation">:</span><span class="string">&quot;Default&quot;</span><span class="punctuation">,</span><span class="attr">&quot;currGlobalConfigGroupName&quot;</span><span class="punctuation">:</span><span class="string">&quot;Default&quot;</span><span class="punctuation">,</span><span class="attr">&quot;typeMapper&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="attr">&quot;template&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;GodsTemplate&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;GodsTemplate&quot;</span><span class="punctuation">,</span><span class="attr">&quot;elementList&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;controller.java.vm&quot;</span><span class="punctuation">,</span><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="string">&quot;##å®šä¹‰åˆå§‹å˜é‡\n#set($tableName = $tool.append($tableInfo.name, \&quot;Controller\&quot;))\n##è®¾ç½®å›è°ƒ\n$!callback.setFileName($tool.append($tableName, \&quot;.java\&quot;))\n$!callback.setSavePath($tool.append($tableInfo.savePath, \&quot;/controller\&quot;))\n##æ‹¿åˆ°ä¸»é”®\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n \n#if($tableInfo.savePackageName)package $!&#123;tableInfo.savePackageName&#125;.#&#123;end&#125;controller;\n \nimport $!&#123;tableInfo.savePackageName&#125;.pojo.$!&#123;tableInfo.name&#125;;\nimport $!&#123;tableInfo.savePackageName&#125;.service.$!&#123;tableInfo.name&#125;Service;\nimport org.springframework.web.bind.annotation.*;\nimport io.swagger.annotations.*;\nimport com.baomidou.mybatisplus.plugins.Page;\nimport com.rambler.core.door.Response;\nimport java.util.List;\n \nimport javax.annotation.Resource;\n \n/**\n * @author $!author\n * @since $!time.currTime()\n */\n@Api(tags = \&quot;$!&#123;tableInfo.comment&#125;($!&#123;tableInfo.name&#125;)æ§åˆ¶å±‚\&quot;)\n@RestController\n@RequestMapping(\&quot;/$!tool.firstLowerCase($tableInfo.name)\&quot;)\npublic class $!&#123;tableName&#125; &#123;\n    /**\n     * æœåŠ¡å¯¹è±¡\n     */\n    @Resource\n    private $!&#123;tableInfo.name&#125;Service $!tool.firstLowerCase($tableInfo.name)Service;\n \n    @ApiOperation(value = \&quot;é€šè¿‡ä¸»é”®æŸ¥è¯¢å•æ¡æ•°æ®\&quot;)\n    @ApiImplicitParam(name = \&quot;id\&quot;, value = \&quot;å®ä½“id\&quot;, required = true, paramType = \&quot;query\&quot;)\n    @RequestMapping(value = \&quot;selectOne\&quot;, method = RequestMethod.GET)\n    public Response&lt;$tableInfo.name&gt; selectOne($!pk.shortType $!pk.name) &#123;\n        if (id == null) &#123;\n            return Response.createErrorResponse(\&quot;å‚æ•°é”™è¯¯\&quot;);\n        &#125;\n        $tableInfo.name result = $!&#123;tool.firstLowerCase($tableInfo.name)&#125;Service.selectById($!pk.name);\n        if(result != null)&#123;\n            return Response.createSuccessResponse(\&quot;æŸ¥è¯¢æˆåŠŸ\&quot;, result);\n        &#125;\n        return Response.createErrorResponse(\&quot;æŸ¥è¯¢å¤±è´¥\&quot;);\n    &#125;\n    \n    @ApiOperation(value = \&quot;å‘å¸ƒæ–°å¢å®ä½“ç±»\&quot;)\n    @RequestMapping(value = \&quot;insert\&quot;, method = RequestMethod.POST)\n    public Response&lt;$tableInfo.name&gt; insert(@RequestBody @ApiParam(name = \&quot;æ–‡ç« å¯¹è±¡\&quot;, value = \&quot;jsonæ ¼å¼\&quot;, required = true) $tableInfo.name $!tool.firstLowerCase($tableInfo.name)) &#123;\n        int result = $!&#123;tool.firstLowerCase($tableInfo.name)&#125;Service.insert($!tool.firstLowerCase($tableInfo.name));\n        if (result &gt; 0) &#123;\n            return Response.createSuccessResponse(\&quot;æ–°å¢æˆåŠŸ\&quot;, $!tool.firstLowerCase($tableInfo.name));\n        &#125;\n        return Response.createErrorResponse(\&quot;æ–°å¢å¤±è´¥\&quot;);\n    &#125;\n \n    @ApiOperation(value = \&quot;æ›´æ–°å®ä½“\&quot;)\n    @RequestMapping(value = \&quot;update\&quot;, method = RequestMethod.PUT)\n    public Response&lt;$tableInfo.name&gt; update(@RequestBody @ApiParam(name = \&quot;æ–‡ç« å¯¹è±¡\&quot;, value = \&quot;jsonæ ¼å¼\&quot;, required = true) $tableInfo.name $!tool.firstLowerCase($tableInfo.name)) &#123;\n        int result = $!&#123;tool.firstLowerCase($tableInfo.name)&#125;Service.update($!tool.firstLowerCase($tableInfo.name));\n        if (result != -1) &#123;\n            return Response.createSuccessResponse(\&quot;ä¿®æ”¹æˆåŠŸ\&quot;, null);\n        &#125;\n        return Response.createErrorResponse(\&quot;ä¿®æ”¹å¤±è´¥\&quot;);\n    &#125;\n \n    @ApiOperation(value = \&quot;é€šè¿‡idåˆ é™¤\&quot;)\n    @ApiImplicitParam(name = \&quot;id\&quot;, value = \&quot;å®ä½“id\&quot;, required = true, paramType = \&quot;query\&quot;)\n    @RequestMapping(value = \&quot;delete\&quot;, method = RequestMethod.DELETE)\n    public Response&lt;$tableInfo.name&gt; delete($!pk.shortType $!pk.name) &#123;\n        if (id == null) &#123;\n            return Response.createErrorResponse(\&quot;å‚æ•°é”™è¯¯\&quot;);\n        &#125;\n        int result = $!&#123;tool.firstLowerCase($tableInfo.name)&#125;Service.deleteById($!pk.name);\n        if (result &gt; 0) &#123;\n            return Response.createSuccessResponse(\&quot;åˆ é™¤æˆåŠŸ\&quot;, null);\n        &#125;\n        return Response.createErrorResponse(\&quot;åˆ é™¤å¤±è´¥\&quot;);\n    &#125;\n \n    @ApiOperation(value = \&quot;æŸ¥è¯¢æ‰€æœ‰\&quot;, notes = \&quot;ä¸éœ€è¦å‚æ•°\&quot;)\n    @RequestMapping(value = \&quot;selectAll\&quot;, method = RequestMethod.GET)\n    public Response&lt;List&lt;$tableInfo.name&gt;&gt; selectAll() &#123;\n        List&lt;$tableInfo.name&gt; $!tool.firstLowerCase($tableInfo.name)List = $!&#123;tool.firstLowerCase($tableInfo.name)&#125;Service.selectAll();\n        if ($!tool.firstLowerCase($tableInfo.name)List != null) &#123;\n            return Response.createSuccessResponse(\&quot;æŸ¥è¯¢æˆåŠŸ\&quot;, $!tool.firstLowerCase($tableInfo.name)List);\n        &#125;\n        return Response.createErrorResponse(\&quot;æŸ¥è¯¢å¤±è´¥\&quot;);\n    &#125;\n \n    @ApiOperation(value = \&quot;åˆ†é¡µæŸ¥è¯¢\&quot;)\n    @ApiImplicitParams(&#123;\n            @ApiImplicitParam(name = \&quot;start\&quot;, value = \&quot;å¼€å§‹ä½ç½®,æ­£æ•´æ•°\&quot;, required = true, paramType = \&quot;query\&quot;),\n            @ApiImplicitParam(name = \&quot;limit\&quot;, value = \&quot;é¡µé¢å¤§å°,æ­£æ•´æ•°\&quot;, required = true, paramType = \&quot;query\&quot;)\n    &#125;)\n    @RequestMapping(value = \&quot;selectPage\&quot;, method = RequestMethod.GET)\n    public Response&lt;Page&lt;$tableInfo.name&gt;&gt; selectPage(Integer start, Integer limit) &#123;\n        if(start &lt; 0 || limit &lt;= 0)&#123;\n            return Response.createErrorResponse(\&quot;åˆ†é¡µå‚æ•°é”™è¯¯\&quot;);\n        &#125;\n        List&lt;$tableInfo.name&gt; $!tool.firstLowerCase($tableInfo.name)List = $!&#123;tool.firstLowerCase($tableInfo.name)&#125;Service.selectPage(start, limit);\n        Page&lt;$tableInfo.name&gt; page = new Page&lt;&gt;((start/limit)+1,limit);\n        page.setRecords($!tool.firstLowerCase($tableInfo.name)List);\n        page.setTotal($!&#123;tool.firstLowerCase($tableInfo.name)&#125;Service.count());\n        if ($!tool.firstLowerCase($tableInfo.name)List != null) &#123;\n            return Response.createSuccessResponse(\&quot;æŸ¥è¯¢æˆåŠŸ\&quot;, page);\n        &#125;\n        return Response.createErrorResponse(\&quot;æŸ¥è¯¢å¤±è´¥\&quot;);\n    &#125;\n&#125;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;debug.json.vm&quot;</span><span class="punctuation">,</span><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="string">&quot;// ç¦æ­¢å°†ç”Ÿæˆç»“æœå†™å…¥åˆ°æ–‡ä»¶\n$!callback.setWriteFile(false)\n\n//è°ƒè¯•è¡¨åŸå§‹å¯¹è±¡\n$!tool.debug($tableInfo.obj)\n\n//è°ƒè¯•åˆ—åŸå§‹å¯¹è±¡\n$!tool.debug($tableInfo.fullColumn.get(0).obj)\n\n//è°ƒè¯•åˆ—åŸå§‹åˆ—ç±»å‹\n$!tool.debug($tableInfo.fullColumn.get(0).obj.dataType)\n\n//è·å–åŸå§‹åˆ—ç±»å‹ä¸­çš„å­—æ®µ\nsqlType = $!tool.getField($tableInfo.fullColumn.get(0).obj.dataType, \&quot;typeName\&quot;)\n\n//æ‰§è¡ŒåŸå§‹åˆ—ç±»å‹ä¸­çš„æ–¹æ³•\nsqlTypeLen = $!tableInfo.fullColumn.get(0).obj.dataType.getLength()\n&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;mapper.xml.vm&quot;</span><span class="punctuation">,</span><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="string">&quot;##å¼•å…¥mybatisæ”¯æŒ\n$!mybatisSupport\n \n##è®¾ç½®ä¿å­˜åç§°ä¸ä¿å­˜ä½ç½®\n$!callback.setFileName($tool.append($!&#123;tableInfo.name&#125;, \&quot;Mapper.xml\&quot;))\n$!callback.setSavePath($tool.append($modulePath, \&quot;/src/main/resources/mybatis/mapper\&quot;))\n \n##æ‹¿åˆ°ä¸»é”®\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n \n&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&lt;!DOCTYPE mapper PUBLIC \&quot;-//mybatis.org//DTD Mapper 3.0//EN\&quot; \&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd\&quot;&gt;\n&lt;mapper namespace=\&quot;$!&#123;tableInfo.savePackageName&#125;.mapper.$!&#123;tableInfo.name&#125;Mapper\&quot;&gt;\n    &lt;!-- ç»“æœé›† --&gt;\n    &lt;resultMap type=\&quot;$!&#123;tableInfo.savePackageName&#125;.pojo.$!&#123;tableInfo.name&#125;\&quot; id=\&quot;$!&#123;tableInfo.name&#125;Map\&quot;&gt;\n#foreach($column in $tableInfo.fullColumn)\n        &lt;result property=\&quot;$!column.name\&quot; column=\&quot;$!column.obj.name\&quot; jdbcType=\&quot;$!column.ext.jdbcType\&quot;/&gt;\n#end\n    &lt;/resultMap&gt;\n    \n    &lt;!-- åŸºæœ¬å­—æ®µ --&gt;\n    &lt;sql id=\&quot;Base_Column_List\&quot;&gt;\n        #allSqlColumn()\n    &lt;/sql&gt;\n    \n    &lt;!-- æŸ¥è¯¢å•ä¸ª --&gt;\n    &lt;select id=\&quot;selectById\&quot; resultMap=\&quot;$!&#123;tableInfo.name&#125;Map\&quot;&gt;\n        select\n          &lt;include refid=\&quot;Base_Column_List\&quot; /&gt;\n        from $!tableInfo.obj.name\n        where $!pk.obj.name = #&#123;$!pk.name&#125;\n    &lt;/select&gt;\n \n    &lt;!-- åˆ†é¡µæŸ¥è¯¢ --&gt;\n    &lt;select id=\&quot;selectPage\&quot; resultMap=\&quot;$!&#123;tableInfo.name&#125;Map\&quot;&gt;\n        select\n        &lt;include refid=\&quot;Base_Column_List\&quot; /&gt;\n        from $!tableInfo.obj.name\n        limit #&#123;start&#125;,#&#123;limit&#125;\n    &lt;/select&gt;\n \n    &lt;!-- æŸ¥è¯¢å…¨éƒ¨ --&gt;\n    &lt;select id=\&quot;selectAll\&quot; resultMap=\&quot;$!&#123;tableInfo.name&#125;Map\&quot;&gt;\n        select\n        &lt;include refid=\&quot;Base_Column_List\&quot; /&gt;\n        from $!tableInfo.obj.name\n    &lt;/select&gt;\n \n    &lt;!--é€šè¿‡å®ä½“ä½œä¸ºç­›é€‰æ¡ä»¶æŸ¥è¯¢--&gt;\n    &lt;select id=\&quot;selectList\&quot; resultMap=\&quot;$!&#123;tableInfo.name&#125;Map\&quot;&gt;\n        select\n        &lt;include refid=\&quot;Base_Column_List\&quot; /&gt;\n        from $!tableInfo.obj.name\n        &lt;where&gt;\n        #foreach($column in $tableInfo.fullColumn)\n            &lt;if test=\&quot;$!column.name != null#if($column.type.equals(\&quot;java.lang.String\&quot;)) and $!column.name != &#x27;&#x27;#end\&quot;&gt;\n                and $!column.obj.name = #&#123;$!column.name&#125;\n            &lt;/if&gt;\n        #end\n        &lt;/where&gt;\n    &lt;/select&gt;\n \n    &lt;!-- æ–°å¢æ‰€æœ‰åˆ— --&gt;\n    &lt;insert id=\&quot;insert\&quot; keyProperty=\&quot;$!pk.name\&quot; useGeneratedKeys=\&quot;true\&quot;&gt;\n        insert into $!&#123;tableInfo.obj.name&#125;(#foreach($column in $tableInfo.fullColumn)$!column.obj.name#if($velocityHasNext), #end#end)\n        values ( #foreach($column in $tableInfo.fullColumn)#&#123;$!&#123;column.name&#125;&#125;#if($velocityHasNext), #end#end)\n    &lt;/insert&gt;\n    \n    &lt;!-- æ‰¹é‡æ–°å¢ --&gt;\n    &lt;insert id=\&quot;batchInsert\&quot;&gt;\n        insert into $!&#123;tableInfo.obj.name&#125;(#foreach($column in $tableInfo.fullColumn)$!column.obj.name#if($velocityHasNext), #end#end)\n        values \n        &lt;foreach collection=\&quot;$!tool.firstLowerCase($!&#123;tableInfo.name&#125;)s\&quot; item=\&quot;item\&quot; index=\&quot;index\&quot; separator=\&quot;,\&quot;&gt;\n        (\n            #foreach($column in $tableInfo.fullColumn)\n            #&#123;item.$!&#123;column.name&#125;&#125;#if($velocityHasNext), #end\n#end\n         )\n         &lt;/foreach&gt;\n    &lt;/insert&gt;\n \n    &lt;!-- é€šè¿‡ä¸»é”®ä¿®æ”¹æ•°æ® --&gt;\n    &lt;update id=\&quot;update\&quot;&gt;\n        update $!&#123;tableInfo.obj.parent.name&#125;.$!&#123;tableInfo.obj.name&#125;\n        &lt;set&gt;\n        #foreach($column in $tableInfo.otherColumn)\n            &lt;if test=\&quot;$!column.name != null#if($column.type.equals(\&quot;java.lang.String\&quot;)) and $!column.name != &#x27;&#x27;#end\&quot;&gt;\n                $!column.obj.name = #&#123;$!column.name&#125;,\n            &lt;/if&gt;\n        #end\n        &lt;/set&gt;\n        where $!pk.obj.name = #&#123;$!pk.name&#125;\n    &lt;/update&gt;\n \n    &lt;!--é€šè¿‡ä¸»é”®åˆ é™¤--&gt;\n    &lt;delete id=\&quot;deleteById\&quot;&gt;\n        delete from $!&#123;tableInfo.obj.name&#125; where $!pk.obj.name = #&#123;$!pk.name&#125;\n    &lt;/delete&gt;\n    \n    &lt;!-- æ€»æ•° --&gt;\n    &lt;select id=\&quot;count\&quot; resultType=\&quot;int\&quot;&gt;\n        select count(*) from $!&#123;tableInfo.obj.name&#125;\n    &lt;/select&gt;\n&lt;/mapper&gt;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;service.java.vm&quot;</span><span class="punctuation">,</span><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="string">&quot;##å®šä¹‰åˆå§‹å˜é‡\n#set($tableName = $tool.append($tableInfo.name, \&quot;Service\&quot;))\n##è®¾ç½®å›è°ƒ\n$!callback.setFileName($tool.append($tableName, \&quot;.java\&quot;))\n$!callback.setSavePath($tool.append($tableInfo.savePath, \&quot;/service\&quot;))\n \n##æ‹¿åˆ°ä¸»é”®\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n \n#if($tableInfo.savePackageName)package $!&#123;tableInfo.savePackageName&#125;.#&#123;end&#125;service;\n \nimport $!&#123;tableInfo.savePackageName&#125;.pojo.$!&#123;tableInfo.name&#125;;\nimport java.util.List;\nimport java.util.Map;\n \n/**\n * $!&#123;tableInfo.comment&#125;($!&#123;tableInfo.name&#125;)è¡¨æœåŠ¡æ¥å£\n *\n * @author $!author\n * @since $!time.currTime()\n */\npublic interface $!&#123;tableName&#125; &#123;\n \n    /**\n     * é€šè¿‡IDæŸ¥è¯¢å•æ¡æ•°æ®\n     */\n    $!&#123;tableInfo.name&#125; selectById($!pk.shortType $!pk.name);\n \n    /**\n     * åˆ†é¡µæŸ¥è¯¢\n     */\n    List&lt;$!&#123;tableInfo.name&#125;&gt; selectPage(int start, int limit);\n \n    /**\n     * æŸ¥è¯¢å…¨éƒ¨\n     */\n    List&lt;$!&#123;tableInfo.name&#125;&gt; selectAll();\n    \n    /**\n     * é€šè¿‡å®ä½“ä½œä¸ºç­›é€‰æ¡ä»¶æŸ¥è¯¢\n     */\n    List&lt;$!&#123;tableInfo.name&#125;&gt; selectList($!&#123;tableInfo.name&#125; $!tool.firstLowerCase($!&#123;tableInfo.name&#125;));\n \n    /**\n     * æ–°å¢æ•°æ®\n     */\n    int insert($!&#123;tableInfo.name&#125; $!tool.firstLowerCase($!&#123;tableInfo.name&#125;));\n\t\n\t/**\n     * æ‰¹é‡æ–°å¢\n     */\n    int batchInsert(List&lt;$!&#123;tableInfo.name&#125;&gt; $!tool.firstLowerCase($!&#123;tableInfo.name&#125;)s);\n\t\n    /**\n     * ä¿®æ”¹æ•°æ®\n     */\n    int update($!&#123;tableInfo.name&#125; $!tool.firstLowerCase($!&#123;tableInfo.name&#125;));\n \n    /**\n     * é€šè¿‡ä¸»é”®åˆ é™¤æ•°æ®\n     */\n    int deleteById($!pk.shortType $!pk.name);\n    \n    /**\n     * æŸ¥è¯¢æ€»æ•°æ®æ•°\n     */\n    int count();\n&#125;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;serviceImpl.java.vm&quot;</span><span class="punctuation">,</span><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="string">&quot;##å®šä¹‰åˆå§‹å˜é‡\n#set($tableName = $tool.append($tableInfo.name, \&quot;ServiceImpl\&quot;))\n##è®¾ç½®å›è°ƒ\n$!callback.setFileName($tool.append($tableName, \&quot;.java\&quot;))\n$!callback.setSavePath($tool.append($tableInfo.savePath, \&quot;/service/impl\&quot;))\n \n##æ‹¿åˆ°ä¸»é”®\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n \n#if($tableInfo.savePackageName)package $!&#123;tableInfo.savePackageName&#125;.#&#123;end&#125;service.impl;\n \nimport $!&#123;tableInfo.savePackageName&#125;.pojo.$!&#123;tableInfo.name&#125;;\nimport $!&#123;tableInfo.savePackageName&#125;.mapper.$!&#123;tableInfo.name&#125;Mapper;\nimport $!&#123;tableInfo.savePackageName&#125;.service.$!&#123;tableInfo.name&#125;Service;\nimport org.springframework.stereotype.Service;\n \nimport javax.annotation.Resource;\nimport java.util.List;\n \n/**\n * $!&#123;tableInfo.comment&#125;($!&#123;tableInfo.name&#125;)è¡¨æœåŠ¡å®ç°ç±»\n *\n * @author $!author\n * @since $!time.currTime()\n */\n@Service(\&quot;$!tool.firstLowerCase($!&#123;tableInfo.name&#125;)Service\&quot;)\npublic class $!&#123;tableName&#125; implements $!&#123;tableInfo.name&#125;Service &#123;\n    @Resource\n    private $!&#123;tableInfo.name&#125;Mapper $!tool.firstLowerCase($!&#123;tableInfo.name&#125;)Mapper;\n \n    /**\n     * é€šè¿‡IDæŸ¥è¯¢å•æ¡æ•°æ®\n     *\n     * @param $!pk.name ä¸»é”®\n     * @return å®ä¾‹å¯¹è±¡\n     */\n    @Override\n    public $!&#123;tableInfo.name&#125; selectById($!pk.shortType $!pk.name) &#123;\n        return this.$!&#123;tool.firstLowerCase($!&#123;tableInfo.name&#125;)&#125;Mapper.selectById($!pk.name);\n    &#125;\n \n    /**\n     * åˆ†é¡µæŸ¥è¯¢\n     *\n     * @param start æŸ¥è¯¢èµ·å§‹ä½ç½®\n     * @param limit æŸ¥è¯¢æ¡æ•°\n     * @return å¯¹è±¡åˆ—è¡¨\n     */\n    @Override\n    public List&lt;$!&#123;tableInfo.name&#125;&gt; selectPage(int start, int limit) &#123;\n        return this.$!&#123;tool.firstLowerCase($!&#123;tableInfo.name&#125;)&#125;Mapper.selectPage(start, limit);\n    &#125;\n    \n    /**\n     * æŸ¥è¯¢å…¨éƒ¨\n     *\n     * @return å¯¹è±¡åˆ—è¡¨\n     */\n    @Override\n    public List&lt;$!&#123;tableInfo.name&#125;&gt; selectAll() &#123;\n        return this.$!&#123;tool.firstLowerCase($!&#123;tableInfo.name&#125;)&#125;Mapper.selectAll();\n    &#125;\n \n    /**\n     * æ ¹æ®å®ä½“ç±»è¿›è¡Œç­›é€‰\n     \n     * @param $!tool.firstLowerCase($!&#123;tableInfo.name&#125;) å®ä¾‹å¯¹è±¡\n     * @return å¯¹è±¡åˆ—è¡¨\n     */\n    @Override\n    public List&lt;$!&#123;tableInfo.name&#125;&gt; selectList($!&#123;tableInfo.name&#125; $!tool.firstLowerCase($!&#123;tableInfo.name&#125;)) &#123;\n        return this.$!&#123;tool.firstLowerCase($!&#123;tableInfo.name&#125;)&#125;Mapper.selectList($!tool.firstLowerCase($!&#123;tableInfo.name&#125;));\n    &#125;\n    \n    /**\n     * æ–°å¢æ•°æ®\n     *\n     * @param $!tool.firstLowerCase($!&#123;tableInfo.name&#125;) å®ä¾‹å¯¹è±¡\n     * @return ç”Ÿæ•ˆæ¡æ•°\n     */\n    @Override\n    public int insert($!&#123;tableInfo.name&#125; $!tool.firstLowerCase($!&#123;tableInfo.name&#125;)) &#123;\n        return this.$!&#123;tool.firstLowerCase($!&#123;tableInfo.name&#125;)&#125;Mapper.insert($!tool.firstLowerCase($!&#123;tableInfo.name&#125;));\n    &#125;\n    \n    /**\n     * æ‰¹é‡æ–°å¢\n     *\n     * @param $!tool.firstLowerCase($!&#123;tableInfo.name&#125;)List å®ä¾‹å¯¹è±¡\n     * @return ç”Ÿæ•ˆæ¡æ•°\n     */\n    @Override\n    public int batchInsert(List&lt;$!&#123;tableInfo.name&#125;&gt; $!tool.firstLowerCase($!&#123;tableInfo.name&#125;)List) &#123;\n        return this.$!&#123;tool.firstLowerCase($!&#123;tableInfo.name&#125;)&#125;Mapper.batchInsert($!tool.firstLowerCase($!&#123;tableInfo.name&#125;)List);\n    &#125;\n    \n \n    /**\n     * ä¿®æ”¹æ•°æ®\n     *\n     * @param $!tool.firstLowerCase($!&#123;tableInfo.name&#125;) å®ä¾‹å¯¹è±¡\n     * @return å®ä¾‹å¯¹è±¡\n     */\n    @Override\n    public int update($!&#123;tableInfo.name&#125; $!tool.firstLowerCase($!&#123;tableInfo.name&#125;)) &#123;\n        return this.$!&#123;tool.firstLowerCase($!&#123;tableInfo.name&#125;)&#125;Mapper.update($!tool.firstLowerCase($!&#123;tableInfo.name&#125;));\n    &#125;\n \n    /**\n     * é€šè¿‡ä¸»é”®åˆ é™¤æ•°æ®\n     *\n     * @param $!pk.name ä¸»é”®\n     * @return æ˜¯å¦æˆåŠŸ\n     */\n    @Override\n    public int deleteById($!pk.shortType $!pk.name) &#123;\n        return this.$!&#123;tool.firstLowerCase($!&#123;tableInfo.name&#125;)&#125;Mapper.deleteById($!pk.name);\n    &#125;\n    \n    /**\n     * æŸ¥è¯¢æ€»æ•°æ®æ•°\n     *\n     * @return æ•°æ®æ€»æ•°\n     */\n    @Override\n    public int count() &#123;\n        return this.$!&#123;tool.firstLowerCase($!&#123;tableInfo.name&#125;)&#125;Mapper.count();\n    &#125;\n    \n&#125;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;mapper.java.vm&quot;</span><span class="punctuation">,</span><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="string">&quot;##å®šä¹‰åˆå§‹å˜é‡\n#set($tableName = $tool.append($tableInfo.name, \&quot;Mapper\&quot;))\n##è®¾ç½®å›è°ƒ\n$!callback.setFileName($tool.append($tableName, \&quot;.java\&quot;))\n$!callback.setSavePath($tool.append($tableInfo.savePath, \&quot;/mapper\&quot;))\n \n##æ‹¿åˆ°ä¸»é”®\n#if(!$tableInfo.pkColumn.isEmpty())\n    #set($pk = $tableInfo.pkColumn.get(0))\n#end\n \n#if($tableInfo.savePackageName)package $!&#123;tableInfo.savePackageName&#125;.#&#123;end&#125;mapper;\n \nimport $!&#123;tableInfo.savePackageName&#125;.pojo.$!&#123;tableInfo.name&#125;;\nimport org.apache.ibatis.annotations.Param;\nimport java.util.List;\nimport java.util.Map;\n \n/**\n * $!&#123;tableInfo.comment&#125;($!&#123;tableInfo.name&#125;)è¡¨æ•°æ®åº“è®¿é—®å±‚\n *\n * @author $!author\n * @since $!time.currTime()\n */\npublic interface $!&#123;tableName&#125; &#123;\n \n    /**\n     * é€šè¿‡IDæŸ¥è¯¢å•æ¡æ•°æ®\n     *\n     * @param $!pk.name ä¸»é”®\n     * @return å®ä¾‹å¯¹è±¡\n     */\n    $!&#123;tableInfo.name&#125; selectById($!pk.shortType $!pk.name);\n\t\n    /**\n     * åˆ†é¡µæŸ¥è¯¢\n     *\n     * @param start æŸ¥è¯¢èµ·å§‹ä½ç½®\n     * @param limit æŸ¥è¯¢æ¡æ•°\n     * @return å¯¹è±¡åˆ—è¡¨\n     */\n    List&lt;$!&#123;tableInfo.name&#125;&gt; selectPage(@Param(\&quot;start\&quot;) int start, @Param(\&quot;limit\&quot;) int limit);\n \n    /**\n     * æŸ¥è¯¢å…¨éƒ¨\n     *\n     * @return å¯¹è±¡åˆ—è¡¨\n     */\n    List&lt;$!&#123;tableInfo.name&#125;&gt; selectAll();\n    \n    /**\n     * é€šè¿‡å®ä½“ä½œä¸ºç­›é€‰æ¡ä»¶æŸ¥è¯¢\n     *\n     * @param $!tool.firstLowerCase($!&#123;tableInfo.name&#125;) å®ä¾‹å¯¹è±¡\n     * @return å¯¹è±¡åˆ—è¡¨\n     */\n    List&lt;$!&#123;tableInfo.name&#125;&gt; selectList($!&#123;tableInfo.name&#125; $!tool.firstLowerCase($!&#123;tableInfo.name&#125;));\n \n    /**\n     * æ–°å¢æ•°æ®\n     *\n     * @param $!tool.firstLowerCase($!&#123;tableInfo.name&#125;) å®ä¾‹å¯¹è±¡\n     * @return å½±å“è¡Œæ•°\n     */\n    int insert($!&#123;tableInfo.name&#125; $!tool.firstLowerCase($!&#123;tableInfo.name&#125;));\n\t\n\t/**\n     * æ‰¹é‡æ–°å¢\n     *\n     * @param $!tool.firstLowerCase($!&#123;tableInfo.name&#125;)List å®ä¾‹å¯¹è±¡çš„é›†åˆ\n     * @return å½±å“è¡Œæ•°\n     */\n     int batchInsert(List&lt;$!&#123;tableInfo.name&#125;&gt; $!tool.firstLowerCase($!&#123;tableInfo.name&#125;)List);\n\t\n    /**\n     * ä¿®æ”¹æ•°æ®\n     *\n     * @param $!tool.firstLowerCase($!&#123;tableInfo.name&#125;) å®ä¾‹å¯¹è±¡\n     * @return å½±å“è¡Œæ•°\n     */\n    int update($!&#123;tableInfo.name&#125; $!tool.firstLowerCase($!&#123;tableInfo.name&#125;));\n \n    /**\n     * é€šè¿‡ä¸»é”®åˆ é™¤æ•°æ®\n     *\n     * @param $!pk.name ä¸»é”®\n     * @return å½±å“è¡Œæ•°\n     */\n    int deleteById($!pk.shortType $!pk.name);\n \n    /**\n     * æŸ¥è¯¢æ€»æ•°æ®æ•°\n     *\n     * @return æ•°æ®æ€»æ•°\n     */\n    int count();\n&#125;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;pojo.java.vm&quot;</span><span class="punctuation">,</span><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="string">&quot;##å¼•å…¥å®å®šä¹‰\n$!define\n \n##ä½¿ç”¨å®å®šä¹‰è®¾ç½®å›è°ƒ(ä¿å­˜ä½ç½®ä¸æ–‡ä»¶åç¼€)\n#save(\&quot;/pojo\&quot;, \&quot;.java\&quot;)\n \n##ä½¿ç”¨å®å®šä¹‰è®¾ç½®åŒ…åç¼€\n#setPackageSuffix(\&quot;pojo\&quot;)\n \n##ä½¿ç”¨å…¨å±€å˜é‡å®ç°é»˜è®¤åŒ…å¯¼å…¥\n$!autoImport\nimport java.io.Serializable;\n \n##ä½¿ç”¨å®å®šä¹‰å®ç°ç±»æ³¨é‡Šä¿¡æ¯\n#tableComment(\&quot;å®ä½“ç±»\&quot;)\npublic class $!&#123;tableInfo.name&#125; implements Serializable &#123;\n    private static final long serialVersionUID = $!tool.serial();\n#foreach($column in $tableInfo.fullColumn)\n    #if($&#123;column.comment&#125;)/**\n    * $&#123;column.comment&#125;\n    */#end\n \n    private $!&#123;tool.getClsNameByFullName($column.type)&#125; $!&#123;column.name&#125;;\n#end\n \n#foreach($column in $tableInfo.fullColumn)\n    ##ä½¿ç”¨å®å®šä¹‰å®ç°get,setæ–¹æ³•\n    #getSetMethod($column)\n#end\n&#125;&quot;</span><span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="attr">&quot;columnConfig&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="attr">&quot;globalConfig&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><hr><p>æœ¬æ•™ç¨‹æ˜¯æ ¹æ®Bç«™Upä¸»ç‹‚ç¥è¯´è®°å¾—ç¬”è®°ï¼Œæœ‰éœ€è¦æŸ¥çœ‹è§†é¢‘çš„å°ä¼™ä¼´å¯ä»¥å»çœ‹çœ‹ç‹‚ç¥çš„è§†é¢‘ï¼ŒçœŸçš„éå¸¸å¥½ï¼</p><p>ç‹‚ç¥è¯´MybatisPlusè§†é¢‘åœ°å€ï¼š<a href="https://www.bilibili.com/video/BV187411y7hF?vd_source=ac95d1e4dae5cfd66da910c649ab5384">https://www.bilibili.com/video/BV187411y7hF?vd_source=ac95d1e4dae5cfd66da910c649ab5384</a></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•™ç¨‹ </tag>
            
            <tag> java </tag>
            
            <tag> MybatisPlus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaç»å…¸é¢è¯•é¢˜æ€»ç»“(å«ç­”æ¡ˆ)</title>
      <link href="/article/fc097869.html"/>
      <url>/article/fc097869.html</url>
      
        <content type="html"><![CDATA[<p>å‰è¨€ï¼š<br>208é“Javaç»å…¸é¢è¯•é¢˜æ€»ç»“ï¼ŒèƒŒå®Œå³å¯å†²åˆºå¤§å‚ï¼</p><hr><h3 id="1ã€JDK-å’Œ-JRE-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#1ã€JDK-å’Œ-JRE-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="1ã€JDK å’Œ JRE æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>1ã€JDK å’Œ JRE æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>JDKï¼ˆJava Development Kitï¼‰ï¼ŒJavaå¼€å‘å·¥å…·åŒ…</p><p>JREï¼ˆJava Runtime Environmentï¼‰ï¼ŒJavaè¿è¡Œç¯å¢ƒ</p><p>JDKä¸­åŒ…å«JREï¼ŒJDKä¸­æœ‰ä¸€ä¸ªåä¸ºjreçš„ç›®å½•ï¼Œé‡Œé¢åŒ…å«ä¸¤ä¸ªæ–‡ä»¶å¤¹binå’Œlibï¼Œbinå°±æ˜¯JVMï¼Œlibå°±æ˜¯JVMå·¥ä½œæ‰€éœ€è¦çš„ç±»åº“ã€‚</p><h3 id="2ã€-å’Œ-equals-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2ã€-å’Œ-equals-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2ã€== å’Œ equals çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>2ã€== å’Œ equals çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>å¯¹äºåŸºæœ¬ç±»å‹ï¼Œ==æ¯”è¾ƒçš„æ˜¯å€¼ï¼›<br>å¯¹äºå¼•ç”¨ç±»å‹ï¼Œ==æ¯”è¾ƒçš„æ˜¯åœ°å€ï¼›<br>equalsä¸èƒ½ç”¨äºåŸºæœ¬ç±»å‹çš„æ¯”è¾ƒï¼›<br>å¦‚æœæ²¡æœ‰é‡å†™equalsï¼Œequalså°±ç›¸å½“äº==ï¼›<br>å¦‚æœé‡å†™äº†equalsæ–¹æ³•ï¼Œequalsæ¯”è¾ƒçš„æ˜¯å¯¹è±¡çš„å†…å®¹ï¼›</p><h3 id="3ã€final-åœ¨-java-ä¸­æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"><a href="#3ã€final-åœ¨-java-ä¸­æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ" class="headerlink" title="3ã€final åœ¨ java ä¸­æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"></a>3ã€final åœ¨ java ä¸­æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3><h4 id="ï¼ˆ1ï¼‰ç”¨æ¥ä¿®é¥°ä¸€ä¸ªå¼•ç”¨"><a href="#ï¼ˆ1ï¼‰ç”¨æ¥ä¿®é¥°ä¸€ä¸ªå¼•ç”¨" class="headerlink" title="ï¼ˆ1ï¼‰ç”¨æ¥ä¿®é¥°ä¸€ä¸ªå¼•ç”¨"></a>ï¼ˆ1ï¼‰ç”¨æ¥ä¿®é¥°ä¸€ä¸ªå¼•ç”¨</h4><p> å¦‚æœå¼•ç”¨ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œåˆ™è¯¥å¼•ç”¨ä¸ºå¸¸é‡ï¼Œè¯¥å€¼æ— æ³•ä¿®æ”¹ï¼›<br> å¦‚æœå¼•ç”¨ä¸ºå¼•ç”¨æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚å¯¹è±¡ã€æ•°ç»„ï¼Œåˆ™è¯¥å¯¹è±¡ã€æ•°ç»„æœ¬èº«å¯ä»¥ä¿®æ”¹ï¼Œä½†æŒ‡å‘è¯¥å¯¹è±¡æˆ–æ•°ç»„çš„åœ°å€çš„å¼•ç”¨ä¸èƒ½ä¿®æ”¹ã€‚<br> å¦‚æœå¼•ç”¨æ—¶ç±»çš„æˆå‘˜å˜é‡ï¼Œåˆ™å¿…é¡»å½“åœºèµ‹å€¼ï¼Œå¦åˆ™ç¼–è¯‘ä¼šæŠ¥é”™ã€‚</p><h4 id="ï¼ˆ2ï¼‰ç”¨æ¥ä¿®é¥°ä¸€ä¸ªæ–¹æ³•"><a href="#ï¼ˆ2ï¼‰ç”¨æ¥ä¿®é¥°ä¸€ä¸ªæ–¹æ³•" class="headerlink" title="ï¼ˆ2ï¼‰ç”¨æ¥ä¿®é¥°ä¸€ä¸ªæ–¹æ³•"></a>ï¼ˆ2ï¼‰ç”¨æ¥ä¿®é¥°ä¸€ä¸ªæ–¹æ³•</h4><p>å½“ä½¿ç”¨finalä¿®é¥°æ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•å°†æˆä¸ºæœ€ç»ˆæ–¹æ³•ï¼Œæ— æ³•è¢«å­ç±»é‡å†™ã€‚ä½†æ˜¯ï¼Œè¯¥æ–¹æ³•ä»ç„¶å¯ä»¥è¢«ç»§æ‰¿ã€‚</p><h4 id="ï¼ˆ3ï¼‰ç”¨æ¥ä¿®é¥°ç±»"><a href="#ï¼ˆ3ï¼‰ç”¨æ¥ä¿®é¥°ç±»" class="headerlink" title="ï¼ˆ3ï¼‰ç”¨æ¥ä¿®é¥°ç±»"></a>ï¼ˆ3ï¼‰ç”¨æ¥ä¿®é¥°ç±»</h4><p>å½“ç”¨finalä¿®æ”¹ç±»æ—¶ï¼Œè¯¥ç±»æˆä¸ºæœ€ç»ˆç±»ï¼Œæ— æ³•è¢«ç»§æ‰¿ã€‚</p><p>æ¯”å¦‚å¸¸ç”¨çš„Stringç±»å°±æ˜¯æœ€ç»ˆç±»ã€‚</p><h3 id="4ã€java-ä¸­çš„-Math-round-1-5-ç­‰äºå¤šå°‘ï¼Ÿ"><a href="#4ã€java-ä¸­çš„-Math-round-1-5-ç­‰äºå¤šå°‘ï¼Ÿ" class="headerlink" title="4ã€java ä¸­çš„ Math.round(-1.5) ç­‰äºå¤šå°‘ï¼Ÿ"></a>4ã€java ä¸­çš„ Math.round(-1.5) ç­‰äºå¤šå°‘ï¼Ÿ</h3><p>Mathæä¾›äº†ä¸‰ä¸ªä¸å–æ•´æœ‰å…³çš„æ–¹æ³•ï¼šceilã€floorã€round</p><h4 id="ï¼ˆ1ï¼‰ceilï¼šå‘ä¸Šå–æ•´ï¼›"><a href="#ï¼ˆ1ï¼‰ceilï¼šå‘ä¸Šå–æ•´ï¼›" class="headerlink" title="ï¼ˆ1ï¼‰ceilï¼šå‘ä¸Šå–æ•´ï¼›"></a>ï¼ˆ1ï¼‰ceilï¼šå‘ä¸Šå–æ•´ï¼›</h4><p>Math.ceil(11.3) = 12;</p><p>Math.ceil(-11.3) = 11;</p><h4 id="ï¼ˆ2ï¼‰floorï¼šå‘ä¸‹å–æ•´ï¼›"><a href="#ï¼ˆ2ï¼‰floorï¼šå‘ä¸‹å–æ•´ï¼›" class="headerlink" title="ï¼ˆ2ï¼‰floorï¼šå‘ä¸‹å–æ•´ï¼›"></a>ï¼ˆ2ï¼‰floorï¼šå‘ä¸‹å–æ•´ï¼›</h4><p>Math.floor(11.3) = 11;</p><p>Math.floor(-11.3) = -12;</p><h4 id="ï¼ˆ3ï¼‰roundï¼šå››èˆäº”å…¥ï¼›"><a href="#ï¼ˆ3ï¼‰roundï¼šå››èˆäº”å…¥ï¼›" class="headerlink" title="ï¼ˆ3ï¼‰roundï¼šå››èˆäº”å…¥ï¼›"></a>ï¼ˆ3ï¼‰roundï¼šå››èˆäº”å…¥ï¼›</h4><p>åŠ 0.5ç„¶åå‘ä¸‹å–æ•´ã€‚</p><p>Math.round(11.3) = 11;</p><p>Math.round(11.8) = 12;</p><p>Math.round(-11.3) = -11;</p><p>Math.round(-11.8) = -12;</p><h3 id="5ã€String-å±äºåŸºç¡€çš„æ•°æ®ç±»å‹å—ï¼Ÿ"><a href="#5ã€String-å±äºåŸºç¡€çš„æ•°æ®ç±»å‹å—ï¼Ÿ" class="headerlink" title="5ã€String å±äºåŸºç¡€çš„æ•°æ®ç±»å‹å—ï¼Ÿ"></a>5ã€String å±äºåŸºç¡€çš„æ•°æ®ç±»å‹å—ï¼Ÿ</h3><p>ä¸å±äºã€‚</p><p>å…«ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼šbyteã€shortã€charã€intã€longã€doubleã€floatã€booleanã€‚</p><h3 id="6ã€String-str-â€iâ€ä¸-String-str-new-String-â€œiâ€-ä¸€æ ·å—ï¼Ÿ"><a href="#6ã€String-str-â€iâ€ä¸-String-str-new-String-â€œiâ€-ä¸€æ ·å—ï¼Ÿ" class="headerlink" title="6ã€String str=â€iâ€ä¸ String str=new String(â€œiâ€)ä¸€æ ·å—ï¼Ÿ"></a>6ã€String str=â€iâ€ä¸ String str=new String(â€œiâ€)ä¸€æ ·å—ï¼Ÿ</h3><p>String str=â€iâ€ä¼šå°†èµ·åˆ†é…åˆ°å¸¸é‡æ± ä¸­ï¼Œå¸¸é‡æ± ä¸­æ²¡æœ‰é‡å¤çš„å…ƒç´ ï¼Œå¦‚æœå¸¸é‡æ± ä¸­å­˜ä¸­iï¼Œå°±å°†içš„åœ°å€èµ‹ç»™å˜é‡ï¼Œå¦‚æœæ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ªå†èµ‹ç»™å˜é‡ã€‚</p><p>String str=new String(â€œiâ€)ä¼šå°†å¯¹è±¡åˆ†é…åˆ°å †ä¸­ï¼Œå³ä½¿å†…å­˜ä¸€æ ·ï¼Œè¿˜æ˜¯ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</p><h3 id="7ã€å¦‚ä½•å°†å­—ç¬¦ä¸²åè½¬ï¼Ÿ"><a href="#7ã€å¦‚ä½•å°†å­—ç¬¦ä¸²åè½¬ï¼Ÿ" class="headerlink" title="7ã€å¦‚ä½•å°†å­—ç¬¦ä¸²åè½¬ï¼Ÿ"></a>7ã€å¦‚ä½•å°†å­—ç¬¦ä¸²åè½¬ï¼Ÿ</h3><p>å°†å¯¹è±¡å°è£…åˆ°stringBuilderä¸­ï¼Œè°ƒç”¨reverseæ–¹æ³•åè½¬ã€‚</p><h3 id="8ã€String-ç±»çš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰é‚£äº›ï¼Ÿ"><a href="#8ã€String-ç±»çš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰é‚£äº›ï¼Ÿ" class="headerlink" title="8ã€String ç±»çš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰é‚£äº›ï¼Ÿ"></a>8ã€String ç±»çš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰é‚£äº›ï¼Ÿ</h3><h4 id="ï¼ˆ1ï¼‰å¸¸è§Stringç±»çš„è·å–åŠŸèƒ½"><a href="#ï¼ˆ1ï¼‰å¸¸è§Stringç±»çš„è·å–åŠŸèƒ½" class="headerlink" title="ï¼ˆ1ï¼‰å¸¸è§Stringç±»çš„è·å–åŠŸèƒ½"></a>ï¼ˆ1ï¼‰å¸¸è§Stringç±»çš„è·å–åŠŸèƒ½</h4><p>lengthï¼šè·å–å­—ç¬¦ä¸²é•¿åº¦ï¼›<br>charAt(int index)ï¼šè·å–æŒ‡å®šç´¢å¼•ä½ç½®çš„å­—ç¬¦ï¼›<br>indexOf(int ch)ï¼šè¿”å›æŒ‡å®šå­—ç¬¦åœ¨æ­¤å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼›<br>substring(int start)ï¼šä»æŒ‡å®šä½ç½®å¼€å§‹æˆªå–å­—ç¬¦ä¸²,é»˜è®¤åˆ°æœ«å°¾ï¼›<br>substring(int start,int end)ï¼šä»æŒ‡å®šä½ç½®å¼€å§‹åˆ°æŒ‡å®šä½ç½®ç»“æŸæˆªå–å­—ç¬¦ä¸²ï¼›</p><h4 id="ï¼ˆ2ï¼‰å¸¸è§Stringç±»çš„åˆ¤æ–­åŠŸèƒ½"><a href="#ï¼ˆ2ï¼‰å¸¸è§Stringç±»çš„åˆ¤æ–­åŠŸèƒ½" class="headerlink" title="ï¼ˆ2ï¼‰å¸¸è§Stringç±»çš„åˆ¤æ–­åŠŸèƒ½"></a>ï¼ˆ2ï¼‰å¸¸è§Stringç±»çš„åˆ¤æ–­åŠŸèƒ½</h4><p>equals(Object obj)ï¼š æ¯”è¾ƒå­—ç¬¦ä¸²çš„å†…å®¹æ˜¯å¦ç›¸åŒ,åŒºåˆ†å¤§å°å†™ï¼›<br>contains(String str): åˆ¤æ–­å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«ä¼ é€’è¿›æ¥çš„å­—ç¬¦ä¸²ï¼›<br>startsWith(String str): åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥ä¼ é€’è¿›æ¥çš„å­—ç¬¦ä¸²å¼€å¤´ï¼›<br>endsWith(String str): åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥ä¼ é€’è¿›æ¥çš„å­—ç¬¦ä¸²ç»“å°¾ï¼›<br>isEmpty(): åˆ¤æ–­å­—ç¬¦ä¸²çš„å†…å®¹æ˜¯å¦ä¸ºç©ºä¸²â€â€ï¼›</p><h4 id="ï¼ˆ3ï¼‰å¸¸è§Stringç±»çš„è½¬æ¢åŠŸèƒ½"><a href="#ï¼ˆ3ï¼‰å¸¸è§Stringç±»çš„è½¬æ¢åŠŸèƒ½" class="headerlink" title="ï¼ˆ3ï¼‰å¸¸è§Stringç±»çš„è½¬æ¢åŠŸèƒ½"></a>ï¼ˆ3ï¼‰å¸¸è§Stringç±»çš„è½¬æ¢åŠŸèƒ½</h4><p>byte[] getBytes(): æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ï¼›<br>char[] toCharArray(): æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—ç¬¦æ•°ç»„ï¼›<br>String valueOf(char[] chs): æŠŠå­—ç¬¦æ•°ç»„è½¬æˆå­—ç¬¦ä¸²ã€‚valueOfå¯ä»¥å°†ä»»æ„ç±»å‹è½¬ä¸ºå­—ç¬¦ä¸²ï¼›<br>toLowerCase(): æŠŠå­—ç¬¦ä¸²è½¬æˆå°å†™ï¼›<br>toUpperCase(): æŠŠå­—ç¬¦ä¸²è½¬æˆå¤§å†™ï¼›<br>concat(String str): æŠŠå­—ç¬¦ä¸²æ‹¼æ¥ï¼›</p><h4 id="ï¼ˆ4ï¼‰å¸¸è§Stringç±»çš„å…¶ä»–å¸¸ç”¨åŠŸèƒ½"><a href="#ï¼ˆ4ï¼‰å¸¸è§Stringç±»çš„å…¶ä»–å¸¸ç”¨åŠŸèƒ½" class="headerlink" title="ï¼ˆ4ï¼‰å¸¸è§Stringç±»çš„å…¶ä»–å¸¸ç”¨åŠŸèƒ½"></a>ï¼ˆ4ï¼‰å¸¸è§Stringç±»çš„å…¶ä»–å¸¸ç”¨åŠŸèƒ½</h4><p>replace(char old,char new) å°†æŒ‡å®šå­—ç¬¦è¿›è¡Œäº’æ¢<br>replace(String old,String new) å°†æŒ‡å®šå­—ç¬¦ä¸²è¿›è¡Œäº’æ¢<br>trim() å»é™¤ä¸¤ç«¯ç©ºæ ¼<br>int compareTo(String str) ä¼šå¯¹ç…§ASCII ç è¡¨ ä»ç¬¬ä¸€ä¸ªå­—æ¯è¿›è¡Œå‡æ³•è¿ç®— è¿”å›çš„å°±æ˜¯è¿™ä¸ªå‡æ³•çš„ç»“æœï¼Œå¦‚æœå‰é¢å‡ ä¸ªå­—æ¯ä¸€æ ·ä¼šæ ¹æ®ä¸¤ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦è¿›è¡Œå‡æ³•è¿ç®—è¿”å›çš„å°±æ˜¯è¿™ä¸ªå‡æ³•çš„ç»“æœï¼Œå¦‚æœè¿ä¸ªå­—ç¬¦ä¸²ä¸€æ‘¸ä¸€æ · è¿”å›çš„å°±æ˜¯0ã€‚</p><h3 id="9ã€new-String-â€œaâ€-new-String-â€œbâ€-ä¼šåˆ›å»ºå‡ ä¸ªå¯¹è±¡ï¼Ÿ"><a href="#9ã€new-String-â€œaâ€-new-String-â€œbâ€-ä¼šåˆ›å»ºå‡ ä¸ªå¯¹è±¡ï¼Ÿ" class="headerlink" title="9ã€new String(â€œaâ€) + new String(â€œbâ€) ä¼šåˆ›å»ºå‡ ä¸ªå¯¹è±¡ï¼Ÿ"></a>9ã€new String(â€œaâ€) + new String(â€œbâ€) ä¼šåˆ›å»ºå‡ ä¸ªå¯¹è±¡ï¼Ÿ</h3><p>å¯¹è±¡1ï¼šnew StringBuilder()</p><p>å¯¹è±¡2ï¼šnew String(â€œaâ€)</p><p>å¯¹è±¡3ï¼šå¸¸é‡æ± ä¸­çš„â€aâ€</p><p>å¯¹è±¡4ï¼šnew String(â€œbâ€)</p><p>å¯¹è±¡5ï¼šå¸¸é‡æ± ä¸­çš„â€bâ€</p><p>æ·±å…¥å‰–æï¼šStringBuilderä¸­çš„toString()ï¼š</p><p>å¯¹è±¡6ï¼šnew String(â€œabâ€)</p><p>å¼ºè°ƒä¸€ä¸‹ï¼ŒtoString()çš„è°ƒç”¨ï¼Œåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ï¼Œæ²¡æœ‰ç”Ÿæˆâ€abâ€</p><p>é™„åŠ é¢˜</p><p>String s1 = new String(â€œ1â€) + new String(â€œ1â€);//s1å˜é‡è®°å½•çš„åœ°å€ä¸ºï¼šnew String<br>s1.intern();//åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­ç”Ÿæˆâ€11â€ã€‚å¦‚ä½•ç†è§£ï¼šjdk6ï¼šåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡â€11â€ï¼Œä¹Ÿå°±æœ‰æ–°çš„åœ°å€ï¼›jdk7ï¼šæ­¤æ—¶å¸¸é‡æ± ä¸­å¹¶æ²¡æœ‰åˆ›å»ºâ€11â€ï¼Œè€Œæ˜¯åˆ›å»ºäº†ä¸€ä¸ªæŒ‡å‘å †ç©ºé—´ä¸­new String(â€œ11â€)çš„åœ°å€ï¼›<br>String s2 = â€œ11â€;<br>System.out.println(s1 == s2);//jdk6:false;jdk7:true</p><h3 id="10ã€å¦‚ä½•å°†å­—ç¬¦ä¸²åè½¬ï¼Ÿ"><a href="#10ã€å¦‚ä½•å°†å­—ç¬¦ä¸²åè½¬ï¼Ÿ" class="headerlink" title="10ã€å¦‚ä½•å°†å­—ç¬¦ä¸²åè½¬ï¼Ÿ"></a>10ã€å¦‚ä½•å°†å­—ç¬¦ä¸²åè½¬ï¼Ÿ</h3><p>æ·»åŠ åˆ°StringBuilderä¸­ï¼Œç„¶åè°ƒç”¨reverse()ã€‚</p><h3 id="11ã€String-ç±»çš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰é‚£äº›ï¼Ÿ"><a href="#11ã€String-ç±»çš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰é‚£äº›ï¼Ÿ" class="headerlink" title="11ã€String ç±»çš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰é‚£äº›ï¼Ÿ"></a>11ã€String ç±»çš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰é‚£äº›ï¼Ÿ</h3><p>equalsã€lengthã€containsã€replaceã€splitã€hashcodeã€indexofã€substringã€trimã€toUpperCaseã€toLowerCaseã€isEmptyç­‰ç­‰ã€‚</p><h3 id="12ã€æ™®é€šç±»å’ŒæŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ"><a href="#12ã€æ™®é€šç±»å’ŒæŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ" class="headerlink" title="12ã€æ™®é€šç±»å’ŒæŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ"></a>12ã€æ™®é€šç±»å’ŒæŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ</h3><p>æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼›<br>æŠ½è±¡ç±»å¯ä»¥æœ‰æŠ½è±¡æ–¹æ³•ï¼Œåªéœ€ç”³æ˜ï¼Œæ— é¡»å®ç°ï¼›<br>æœ‰æŠ½è±¡æ–¹æ³•çš„ç±»ä¸€å®šæ˜¯æŠ½è±¡ç±»ï¼›<br>æŠ½è±¡ç±»çš„å­ç±»å¿…é¡»å®ç°æŠ½è±¡ç±»ä¸­çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œå¦åˆ™å­ç±»ä»ç„¶æ˜¯æŠ½è±¡ç±»ï¼›<br>æŠ½è±¡æ–¹æ³•ä¸èƒ½å£°æ˜ä¸ºé™æ€ã€ä¸èƒ½è¢«staticã€finalä¿®é¥°ã€‚</p><h3 id="13ã€æ¥å£å’ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#13ã€æ¥å£å’ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="13ã€æ¥å£å’ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>13ã€æ¥å£å’ŒæŠ½è±¡ç±»æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><h4 id="ï¼ˆ1ï¼‰æ¥å£"><a href="#ï¼ˆ1ï¼‰æ¥å£" class="headerlink" title="ï¼ˆ1ï¼‰æ¥å£"></a>ï¼ˆ1ï¼‰æ¥å£</h4><p>æ¥å£ä½¿ç”¨interfaceä¿®é¥°ï¼›<br>æ¥å£ä¸èƒ½å®ä¾‹åŒ–ï¼›<br>ç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼›</p><p>java8ä¹‹å‰ï¼Œæ¥å£ä¸­çš„æ–¹æ³•éƒ½æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œçœç•¥äº†public abstractã€‚â‘¡java8ä¹‹åï¼›æ¥å£ä¸­å¯ä»¥å®šä¹‰é™æ€æ–¹æ³•ï¼Œé™æ€æ–¹æ³•å¿…é¡»æœ‰æ–¹æ³•ä½“ï¼Œæ™®é€šæ–¹æ³•æ²¡æœ‰æ–¹æ³•ä½“ï¼Œéœ€è¦è¢«å®ç°ï¼›</p><h4 id="ï¼ˆ2ï¼‰æŠ½è±¡ç±»"><a href="#ï¼ˆ2ï¼‰æŠ½è±¡ç±»" class="headerlink" title="ï¼ˆ2ï¼‰æŠ½è±¡ç±»"></a>ï¼ˆ2ï¼‰æŠ½è±¡ç±»</h4><p>æŠ½è±¡ç±»ä½¿ç”¨abstractä¿®é¥°ï¼›<br>æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼›<br>æŠ½è±¡ç±»åªèƒ½å•ç»§æ‰¿ï¼›<br>æŠ½è±¡ç±»ä¸­å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•å’ŒéæŠ½è±¡æ–¹æ³•ï¼ŒéæŠ½è±¡æ–¹æ³•éœ€è¦æœ‰æ–¹æ³•ä½“ï¼›<br>å¦‚æœä¸€ä¸ªç±»ç»§æ‰¿äº†æŠ½è±¡ç±»ï¼Œâ‘ å¦‚æœå®ç°äº†æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•ï¼Œå­ç±»å¯ä»¥ä¸æ˜¯æŠ½è±¡ç±»ï¼›â‘¡å¦‚æœæ²¡æœ‰å®ç°æ‰€æœ‰çš„æŠ½è±¡æ–¹æ³•ï¼Œå­ç±»ä»ç„¶æ˜¯æŠ½è±¡ç±»ã€‚</p><h3 id="14ã€java-ä¸­-IO-æµåˆ†ä¸ºå‡ ç§ï¼Ÿ"><a href="#14ã€java-ä¸­-IO-æµåˆ†ä¸ºå‡ ç§ï¼Ÿ" class="headerlink" title="14ã€java ä¸­ IO æµåˆ†ä¸ºå‡ ç§ï¼Ÿ"></a>14ã€java ä¸­ IO æµåˆ†ä¸ºå‡ ç§ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰æŒ‰æµåˆ’åˆ†ï¼Œå¯ä»¥åˆ†ä¸ºè¾“å…¥æµå’Œè¾“å‡ºæµï¼›</p><p>ï¼ˆ2ï¼‰æŒ‰å•ä½åˆ’åˆ†ï¼Œå¯ä»¥åˆ†ä¸ºå­—èŠ‚æµå’Œå­—ç¬¦æµï¼›</p><p>å­—èŠ‚æµï¼šinputStreamã€outputStreamï¼›</p><p>å­—ç¬¦æµï¼šreaderã€writerï¼›</p><h3 id="15ã€BIOã€NIOã€AIO-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#15ã€BIOã€NIOã€AIO-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="15ã€BIOã€NIOã€AIO æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>15ã€BIOã€NIOã€AIO æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><h4 id="ï¼ˆ1ï¼‰åŒæ­¥é˜»å¡BIO"><a href="#ï¼ˆ1ï¼‰åŒæ­¥é˜»å¡BIO" class="headerlink" title="ï¼ˆ1ï¼‰åŒæ­¥é˜»å¡BIO"></a>ï¼ˆ1ï¼‰åŒæ­¥é˜»å¡BIO</h4><p>ä¸€ä¸ªè¿æ¥ä¸€ä¸ªçº¿ç¨‹ã€‚</p><p>JDK1.4ä¹‹å‰ï¼Œå»ºç«‹ç½‘ç»œè¿æ¥çš„æ—¶å€™é‡‡ç”¨BIOæ¨¡å¼ï¼Œå…ˆåœ¨å¯åŠ¨æœåŠ¡ç«¯socketï¼Œç„¶åå¯åŠ¨å®¢æˆ·ç«¯socketï¼Œå¯¹æœåŠ¡ç«¯é€šä¿¡ï¼Œå®¢æˆ·ç«¯å‘é€è¯·æ±‚åï¼Œå…ˆåˆ¤æ–­æœåŠ¡ç«¯æ˜¯å¦æœ‰çº¿ç¨‹å“åº”ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä¼šä¸€ç›´ç­‰å¾…æˆ–è€…é­åˆ°æ‹’ç»è¯·æ±‚ï¼Œå¦‚æœæœ‰çš„è¯ä¼šç­‰å¾…è¯·æ±‚ç»“æŸåæ‰ç»§ç»­æ‰§è¡Œã€‚</p><h4 id="ï¼ˆ2ï¼‰åŒæ­¥éé˜»å¡NIO"><a href="#ï¼ˆ2ï¼‰åŒæ­¥éé˜»å¡NIO" class="headerlink" title="ï¼ˆ2ï¼‰åŒæ­¥éé˜»å¡NIO"></a>ï¼ˆ2ï¼‰åŒæ­¥éé˜»å¡NIO</h4><p>NIOä¸»è¦æ˜¯æƒ³è§£å†³BIOçš„å¤§å¹¶å‘é—®é¢˜ï¼ŒBIOæ˜¯æ¯ä¸€ä¸ªè¯·æ±‚åˆ†é…ä¸€ä¸ªçº¿ç¨‹ï¼Œå½“è¯·æ±‚è¿‡å¤šæ—¶ï¼Œæ¯ä¸ªçº¿ç¨‹å ç”¨ä¸€å®šçš„å†…å­˜ç©ºé—´ï¼ŒæœåŠ¡å™¨ç˜«ç—ªäº†ã€‚</p><p>JDK1.4å¼€å§‹æ”¯æŒNIOï¼Œé€‚ç”¨äºè¿æ¥æ•°ç›®å¤šä¸”è¿æ¥æ¯”è¾ƒçŸ­çš„æ¶æ„ï¼Œæ¯”å¦‚èŠå¤©æœåŠ¡å™¨ï¼Œå¹¶å‘å±€é™äºåº”ç”¨ä¸­ã€‚</p><p>ä¸€ä¸ªè¯·æ±‚ä¸€ä¸ªçº¿ç¨‹ã€‚</p><h4 id="ï¼ˆ3ï¼‰å¼‚æ­¥éé˜»å¡AIO"><a href="#ï¼ˆ3ï¼‰å¼‚æ­¥éé˜»å¡AIO" class="headerlink" title="ï¼ˆ3ï¼‰å¼‚æ­¥éé˜»å¡AIO"></a>ï¼ˆ3ï¼‰å¼‚æ­¥éé˜»å¡AIO</h4><p>ä¸€ä¸ªæœ‰æ•ˆè¯·æ±‚ä¸€ä¸ªçº¿ç¨‹ã€‚</p><p>JDK1.7å¼€å§‹æ”¯æŒAIOï¼Œé€‚ç”¨äºè¿æ¥æ•°ç›®å¤šä¸”è¿æ¥æ¯”è¾ƒé•¿çš„ç»“æ„ï¼Œæ¯”å¦‚ç›¸å†ŒæœåŠ¡å™¨ï¼Œå……åˆ†è°ƒç”¨OSå‚ä¸å¹¶å‘æ“ä½œã€‚</p><h3 id="16ã€Filesçš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰å“ªäº›ï¼Ÿ"><a href="#16ã€Filesçš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="16ã€Filesçš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰å“ªäº›ï¼Ÿ"></a>16ã€Filesçš„å¸¸ç”¨æ–¹æ³•éƒ½æœ‰å“ªäº›ï¼Ÿ</h3><p>exist<br>createFile<br>createDirectory<br>write<br>read<br>copy<br>size<br>delete<br>move</p><h3 id="17ã€ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ"><a href="#17ã€ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ" class="headerlink" title="17ã€ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ"></a>17ã€ä»€ä¹ˆæ˜¯åå°„ï¼Ÿ</h3><p>æ‰€è°“åå°„ï¼Œæ˜¯javaåœ¨è¿è¡Œæ—¶è¿›è¡Œè‡ªæˆ‘è§‚å¯Ÿçš„èƒ½åŠ›ï¼Œé€šè¿‡classã€constructorã€fieldã€methodå››ä¸ªæ–¹æ³•è·å–ä¸€ä¸ªç±»çš„å„ä¸ªç»„æˆéƒ¨åˆ†ã€‚</p><p>åœ¨Javaè¿è¡Œæ—¶ç¯å¢ƒä¸­ï¼Œå¯¹ä»»æ„ä¸€ä¸ªç±»ï¼Œå¯ä»¥çŸ¥é“ç±»æœ‰å“ªäº›å±æ€§å’Œæ–¹æ³•ã€‚è¿™ç§åŠ¨æ€è·å–ç±»çš„ä¿¡æ¯ä»¥åŠåŠ¨æ€è°ƒç”¨å¯¹è±¡çš„æ–¹æ³•çš„åŠŸèƒ½æ¥è‡ªäºåå°„æœºåˆ¶ã€‚</p><h3 id="18ã€ä»€ä¹ˆæ˜¯-java-åºåˆ—åŒ–ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦åºåˆ—åŒ–ï¼Ÿ"><a href="#18ã€ä»€ä¹ˆæ˜¯-java-åºåˆ—åŒ–ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦åºåˆ—åŒ–ï¼Ÿ" class="headerlink" title="18ã€ä»€ä¹ˆæ˜¯ java åºåˆ—åŒ–ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦åºåˆ—åŒ–ï¼Ÿ"></a>18ã€ä»€ä¹ˆæ˜¯ java åºåˆ—åŒ–ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦åºåˆ—åŒ–ï¼Ÿ</h3><p>åºåˆ—åŒ–å°±æ˜¯ä¸€ç§ç”¨æ¥å¤„ç†å¯¹è±¡æµçš„æœºåˆ¶ã€‚å°†å¯¹è±¡çš„å†…å®¹æµåŒ–ï¼Œå°†æµåŒ–åçš„å¯¹è±¡ä¼ è¾“äºç½‘ç»œä¹‹é—´ã€‚</p><p>åºåˆ—åŒ–æ˜¯é€šè¿‡å®ç°serializableæ¥å£ï¼Œè¯¥æ¥å£æ²¡æœ‰éœ€è¦å®ç°çš„æ–¹æ³•ï¼Œimplement Serializableåªæ˜¯ä¸ºäº†æ ‡æ³¨è¯¥å¯¹è±¡æ˜¯å¯è¢«åºåˆ—åŒ–çš„ï¼Œä½¿ç”¨ä¸€ä¸ªè¾“å‡ºæµï¼ˆFileOutputStreamï¼‰æ¥æ„é€ ä¸€ä¸ªObjectOutputStreamå¯¹è±¡ï¼Œæ¥ç€ä½¿ç”¨ObjectOutputStreamå¯¹è±¡çš„writeObejctï¼ˆObject objectï¼‰æ–¹æ³•å°±å¯ä»¥å°†å‚æ•°çš„objå¯¹è±¡åˆ°ç£ç›˜ï¼Œéœ€è¦æ¢å¤çš„æ—¶å€™ä½¿ç”¨è¾“å…¥æµã€‚</p><p>åºåˆ—åŒ–æ˜¯å°†å¯¹è±¡è½¬æ¢ä¸ºå®¹æ˜“ä¼ è¾“çš„æ ¼å¼çš„è¿‡ç¨‹ã€‚</p><p>ä¾‹å¦‚ï¼Œå¯ä»¥åºåˆ—åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åé€šè¿‡HTTPé€šè¿‡Internetåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´ä¼ è¾“è¯¥å¯¹è±¡ã€‚åœ¨å¦ä¸€ç«¯ï¼Œååºåˆ—åŒ–å°†ä»æµä¸­å¿ƒæ„é€ æˆå¯¹è±¡ã€‚</p><p>ä¸€èˆ¬ç¨‹åºåœ¨è¿è¡Œæ—¶ï¼Œäº§ç”Ÿå¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡éšç€ç¨‹åºçš„åœæ­¢è€Œæ¶ˆå¤±ï¼Œä½†æˆ‘ä»¬æƒ³å°†æŸäº›å¯¹è±¡ä¿å­˜ä¸‹æ¥ï¼Œè¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡åºåˆ—åŒ–å°†å¯¹è±¡ä¿å­˜åœ¨ç£ç›˜ï¼Œéœ€è¦ä½¿ç”¨çš„æ—¶å€™é€šè¿‡ååºåˆ—åŒ–è·å–åˆ°ã€‚</p><p>å¯¹è±¡åºåˆ—åŒ–çš„æœ€ä¸»è¦ç›®çš„å°±æ˜¯ä¼ é€’å’Œä¿å­˜å¯¹è±¡ï¼Œä¿å­˜å¯¹è±¡çš„å®Œæ•´æ€§å’Œå¯ä¼ é€’æ€§ã€‚</p><p>è­¬å¦‚é€šè¿‡ç½‘ç»œä¼ è¾“æˆ–è€…æŠŠä¸€ä¸ªå¯¹è±¡ä¿å­˜æˆæœ¬åœ°ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨åºåˆ—åŒ–ã€‚</p><h3 id="19ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å…‹éš†ï¼Ÿå¦‚ä½•å®ç°å¯¹è±¡å…‹éš†ï¼Ÿæ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#19ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å…‹éš†ï¼Ÿå¦‚ä½•å®ç°å¯¹è±¡å…‹éš†ï¼Ÿæ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="19ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å…‹éš†ï¼Ÿå¦‚ä½•å®ç°å¯¹è±¡å…‹éš†ï¼Ÿæ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>19ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å…‹éš†ï¼Ÿå¦‚ä½•å®ç°å¯¹è±¡å…‹éš†ï¼Ÿæ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><h4 id="ï¼ˆ1ï¼‰ä»€ä¹ˆè¦ä½¿ç”¨å…‹éš†ï¼Ÿ"><a href="#ï¼ˆ1ï¼‰ä»€ä¹ˆè¦ä½¿ç”¨å…‹éš†ï¼Ÿ" class="headerlink" title="ï¼ˆ1ï¼‰ä»€ä¹ˆè¦ä½¿ç”¨å…‹éš†ï¼Ÿ"></a>ï¼ˆ1ï¼‰ä»€ä¹ˆè¦ä½¿ç”¨å…‹éš†ï¼Ÿ</h4><p>æƒ³å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œå¤åˆ¶ï¼Œåˆæƒ³ä¿ç•™åŸæœ‰çš„å¯¹è±¡è¿›è¡Œæ¥ä¸‹æ¥çš„æ“ä½œï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦å…‹éš†äº†ã€‚</p><h4 id="ï¼ˆ2ï¼‰å¦‚ä½•å®ç°å¯¹è±¡å…‹éš†ï¼Ÿ"><a href="#ï¼ˆ2ï¼‰å¦‚ä½•å®ç°å¯¹è±¡å…‹éš†ï¼Ÿ" class="headerlink" title="ï¼ˆ2ï¼‰å¦‚ä½•å®ç°å¯¹è±¡å…‹éš†ï¼Ÿ"></a>ï¼ˆ2ï¼‰å¦‚ä½•å®ç°å¯¹è±¡å…‹éš†ï¼Ÿ</h4><p>å®ç°Cloneableæ¥å£ï¼Œé‡å†™cloneæ–¹æ³•ï¼›<br>å®ç°Serializableæ¥å£ï¼Œé€šè¿‡å¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–å®ç°å…‹éš†ï¼Œå¯ä»¥å®ç°çœŸæ­£çš„æ·±å…‹éš†ã€‚<br>BeanUtilsï¼Œapacheå’ŒSpringéƒ½æä¾›äº†beanå·¥å…·ï¼Œåªæ˜¯è¿™éƒ½æ˜¯æµ…å…‹éš†ã€‚</p><h4 id="ï¼ˆ3ï¼‰æ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ï¼ˆ3ï¼‰æ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ï¼ˆ3ï¼‰æ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ï¼ˆ3ï¼‰æ·±æ‹·è´å’Œæµ…æ‹·è´åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>æµ…æ‹·è´ï¼šä»…ä»…å…‹éš†åŸºæœ¬ç±»å‹å˜é‡ï¼Œä¸å…‹éš†å¼•ç”¨ç±»å‹å˜é‡ï¼›<br>æ·±å…‹éš†ï¼šæ—¢å…‹éš†åŸºæœ¬ç±»å‹å˜é‡ï¼Œåˆå…‹éš†å¼•ç”¨ç±»å‹å˜é‡ï¼›</p><h4 id="ï¼ˆ4ï¼‰ä»£ç å®ä¾‹"><a href="#ï¼ˆ4ï¼‰ä»£ç å®ä¾‹" class="headerlink" title="ï¼ˆ4ï¼‰ä»£ç å®ä¾‹"></a>ï¼ˆ4ï¼‰ä»£ç å®ä¾‹</h4><p><a href="https://imgtu.com/i/jkNEwQ"><img src="https://s1.ax1x.com/2022/06/25/jkNEwQ.png" alt="jkNEwQ.png"></a><br><a href="https://imgtu.com/i/jkNFOS"><img src="https://s1.ax1x.com/2022/06/25/jkNFOS.png" alt="jkNFOS.png"></a></p><h3 id="20ã€throw-å’Œ-throws-çš„åŒºåˆ«ï¼Ÿ"><a href="#20ã€throw-å’Œ-throws-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="20ã€throw å’Œ throws çš„åŒºåˆ«ï¼Ÿ"></a>20ã€throw å’Œ throws çš„åŒºåˆ«ï¼Ÿ</h3><h4 id="ï¼ˆ1ï¼‰throw"><a href="#ï¼ˆ1ï¼‰throw" class="headerlink" title="ï¼ˆ1ï¼‰throw"></a>ï¼ˆ1ï¼‰throw</h4><p>ä½œç”¨åœ¨æ–¹æ³•å†…ï¼Œè¡¨ç¤ºæŠ›å‡ºå…·ä½“å¼‚å¸¸ï¼Œç”±æ–¹æ³•ä½“å†…çš„è¯­å¥å¤„ç†ï¼›<br>ä¸€å®šæŠ›å‡ºäº†å¼‚å¸¸ï¼›</p><h4 id="ï¼ˆ2ï¼‰throws"><a href="#ï¼ˆ2ï¼‰throws" class="headerlink" title="ï¼ˆ2ï¼‰throws"></a>ï¼ˆ2ï¼‰throws</h4><p>ä½œç”¨åœ¨æ–¹æ³•çš„å£°æ˜ä¸Šï¼Œè¡¨ç¤ºæŠ›å‡ºå¼‚å¸¸ï¼Œç”±è°ƒç”¨è€…æ¥è¿›è¡Œå¼‚å¸¸å¤„ç†ï¼›<br>å¯èƒ½å‡ºç°å¼‚å¸¸ï¼Œä¸ä¸€å®šä¼šå‘ç”Ÿå¼‚å¸¸ï¼›</p><h3 id="21ã€finalã€finallyã€finalize-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#21ã€finalã€finallyã€finalize-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="21ã€finalã€finallyã€finalize æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>21ã€finalã€finallyã€finalize æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>finalå¯ä»¥ä¿®é¥°ç±»ï¼Œå˜é‡ï¼Œæ–¹æ³•ï¼Œä¿®é¥°çš„ç±»ä¸èƒ½è¢«ç»§æ‰¿ï¼Œä¿®é¥°çš„å˜é‡ä¸èƒ½é‡æ–°èµ‹å€¼ï¼Œä¿®é¥°çš„æ–¹æ³•ä¸èƒ½è¢«é‡å†™</p><p>finallyç”¨äºæŠ›å¼‚å¸¸ï¼Œfinallyä»£ç å—å†…è¯­å¥æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œéƒ½ä¼šåœ¨æ‰§è¡Œfinallyï¼Œå¸¸ç”¨äºä¸€äº›æµçš„å…³é—­ã€‚</p><p>finalizeæ–¹æ³•ç”¨äºåƒåœ¾å›æ”¶ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦æˆ‘ä»¬å®ç°finalizeï¼Œå½“å¯¹è±¡è¢«å›æ”¶çš„æ—¶å€™éœ€è¦é‡Šæ”¾ä¸€äº›èµ„æºï¼Œæ¯”å¦‚socketé“¾æ¥ï¼Œåœ¨å¯¹è±¡åˆå§‹åŒ–æ—¶åˆ›å»ºï¼Œæ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…æœ‰æ•ˆï¼Œé‚£ä¹ˆéœ€è¦å®ç°finalizeæ–¹æ³•ï¼Œå…³é—­è¿™ä¸ªé“¾æ¥ã€‚</p><p>ä½†æ˜¯å½“è°ƒç”¨finalizeæ–¹æ³•åï¼Œå¹¶ä¸æ„å‘³ç€gcä¼šç«‹å³å›æ”¶è¯¥å¯¹è±¡ï¼Œæ‰€ä»¥æœ‰å¯èƒ½çœŸæ­£è°ƒç”¨çš„æ—¶å€™ï¼Œå¯¹è±¡åˆä¸éœ€è¦å›æ”¶äº†ï¼Œç„¶ååˆ°äº†çœŸæ­£è¦å›æ”¶çš„æ—¶å€™ï¼Œå› ä¸ºä¹‹å‰è°ƒç”¨è¿‡ä¸€æ¬¡ï¼Œè¿™æ¬¡åˆä¸ä¼šè°ƒç”¨äº†ï¼Œäº§ç”Ÿé—®é¢˜ã€‚æ‰€ä»¥ï¼Œä¸æ¨èä½¿ç”¨finalizeæ–¹æ³•ã€‚</p><h3 id="22ã€try-catch-finally-ä¸­ï¼Œå¦‚æœ-catch-ä¸­-return-äº†ï¼Œfinally-è¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ"><a href="#22ã€try-catch-finally-ä¸­ï¼Œå¦‚æœ-catch-ä¸­-return-äº†ï¼Œfinally-è¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ" class="headerlink" title="22ã€try-catch-finally ä¸­ï¼Œå¦‚æœ catch ä¸­ return äº†ï¼Œfinally è¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ"></a>22ã€try-catch-finally ä¸­ï¼Œå¦‚æœ catch ä¸­ return äº†ï¼Œfinally è¿˜ä¼šæ‰§è¡Œå—ï¼Ÿ</h3><p><a href="https://imgtu.com/i/jkNAeg"><img src="https://s1.ax1x.com/2022/06/25/jkNAeg.png" alt="jkNAeg.png"></a></p><h3 id="23ã€å¸¸è§çš„å¼‚å¸¸ç±»æœ‰å“ªäº›ï¼Ÿ"><a href="#23ã€å¸¸è§çš„å¼‚å¸¸ç±»æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="23ã€å¸¸è§çš„å¼‚å¸¸ç±»æœ‰å“ªäº›ï¼Ÿ"></a>23ã€å¸¸è§çš„å¼‚å¸¸ç±»æœ‰å“ªäº›ï¼Ÿ</h3><p>NullPointerExceptionï¼šç©ºæŒ‡é’ˆå¼‚å¸¸ï¼›<br>SQLExceptionï¼šæ•°æ®åº“ç›¸å…³çš„å¼‚å¸¸ï¼›<br>IndexOutOfBoundsExceptionï¼šæ•°ç»„ä¸‹è§’æ ‡è¶Šç•Œå¼‚å¸¸ï¼›<br>FileNotFoundExceptionï¼šæ‰“å¼€æ–‡ä»¶å¤±è´¥æ—¶æŠ›å‡ºï¼›<br>IOExceptionï¼šå½“å‘ç”ŸæŸç§IOå¼‚å¸¸æ—¶æŠ›å‡ºï¼›<br>ClassCastExceptionï¼šå½“è¯•å›¾å°†å¯¹è±¡å¼ºåˆ¶è½¬æ¢ä¸ºä¸æ˜¯å®ä¾‹çš„å­ç±»æ—¶ï¼ŒæŠ›å‡ºæ­¤å¼‚å¸¸ï¼›<br>NoSuchMethodExceptionï¼šæ— æ³•æ‰¾åˆ°æŸä¸€æ–¹æ³•æ—¶ï¼ŒæŠ›å‡ºï¼›<br>ArrayStoreExceptionï¼šè¯•å›¾å°†é”™è¯¯ç±»å‹çš„å¯¹è±¡å­˜å‚¨åˆ°ä¸€ä¸ªå¯¹è±¡æ•°ç»„æ—¶æŠ›å‡ºçš„å¼‚å¸¸ï¼›<br>NumberFormatExceptionï¼šå½“è¯•å›¾å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—æ—¶ï¼Œå¤±è´¥äº†ï¼ŒæŠ›å‡ºï¼›<br>IllegalArgumentException æŠ›å‡ºçš„å¼‚å¸¸è¡¨æ˜å‘æ–¹æ³•ä¼ é€’äº†ä¸€ä¸ªä¸åˆæ³•æˆ–ä¸æ­£ç¡®çš„å‚æ•°ã€‚<br>ArithmeticExceptionå½“å‡ºç°å¼‚å¸¸çš„è¿ç®—æ¡ä»¶æ—¶ï¼ŒæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ•´æ•°â€œé™¤ä»¥é›¶â€æ—¶ï¼ŒæŠ›å‡ºæ­¤ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚ </p><h3 id="24ã€hashcodeæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"><a href="#24ã€hashcodeæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ" class="headerlink" title="24ã€hashcodeæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"></a>24ã€hashcodeæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3><p>Javaä¸­Objectæœ‰ä¸€ä¸ªæ–¹æ³•ï¼š</p><p>public native int hashcode();</p><h4 id="ï¼ˆ1ï¼‰hashcode-æ–¹æ³•çš„ä½œç”¨"><a href="#ï¼ˆ1ï¼‰hashcode-æ–¹æ³•çš„ä½œç”¨" class="headerlink" title="ï¼ˆ1ï¼‰hashcode()æ–¹æ³•çš„ä½œç”¨"></a>ï¼ˆ1ï¼‰hashcode()æ–¹æ³•çš„ä½œç”¨</h4><p>hashcode()æ–¹æ³•ä¸»è¦é…åˆåŸºäºæ•£åˆ—çš„é›†åˆä¸€èµ·ä½¿ç”¨ï¼Œæ¯”å¦‚HashSetã€HashMapã€HashTableã€‚</p><p>å½“é›†åˆéœ€è¦æ·»åŠ æ–°çš„å¯¹è±¡æ—¶ï¼Œå…ˆè°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„hashcode()æ–¹æ³•ï¼Œå¾—åˆ°å¯¹åº”çš„hashcodeå€¼ï¼Œå®é™…ä¸Šhashmapä¸­ä¼šæœ‰ä¸€ä¸ªtableä¿å­˜å·²ç»å­˜è¿›å»çš„å¯¹è±¡çš„hashcodeå€¼ï¼Œå¦‚æœtableä¸­æ²¡æœ‰æ”¹hashcodeå€¼ï¼Œåˆ™ç›´æ¥å­˜å…¥ï¼Œå¦‚æœæœ‰ï¼Œå°±è°ƒç”¨equalsæ–¹æ³•ä¸æ–°å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œç›¸åŒå°±ä¸å­˜äº†ï¼Œä¸åŒå°±å­˜å…¥ã€‚</p><h4 id="ï¼ˆ2ï¼‰equalså’Œhashcodeçš„å…³ç³»"><a href="#ï¼ˆ2ï¼‰equalså’Œhashcodeçš„å…³ç³»" class="headerlink" title="ï¼ˆ2ï¼‰equalså’Œhashcodeçš„å…³ç³»"></a>ï¼ˆ2ï¼‰equalså’Œhashcodeçš„å…³ç³»</h4><p>å¦‚æœequalsä¸ºtrueï¼Œhashcodeä¸€å®šç›¸ç­‰ï¼› </p><p>å¦‚æœequalsä¸ºfalseï¼Œhashcodeä¸ä¸€å®šä¸ç›¸ç­‰ï¼›</p><p>å¦‚æœhashcodeå€¼ç›¸ç­‰ï¼Œequalsä¸ä¸€å®šç›¸ç­‰ï¼›</p><p>å¦‚æœhashcodeå€¼ä¸ç­‰ï¼Œequalsä¸€å®šä¸ç­‰ï¼›</p><h4 id="ï¼ˆ3ï¼‰é‡å†™equalsæ–¹æ³•æ—¶ï¼Œä¸€å®šè¦é‡å†™hashcodeæ–¹æ³•"><a href="#ï¼ˆ3ï¼‰é‡å†™equalsæ–¹æ³•æ—¶ï¼Œä¸€å®šè¦é‡å†™hashcodeæ–¹æ³•" class="headerlink" title="ï¼ˆ3ï¼‰é‡å†™equalsæ–¹æ³•æ—¶ï¼Œä¸€å®šè¦é‡å†™hashcodeæ–¹æ³•"></a>ï¼ˆ3ï¼‰é‡å†™equalsæ–¹æ³•æ—¶ï¼Œä¸€å®šè¦é‡å†™hashcodeæ–¹æ³•</h4><h4 id="ï¼ˆ4ï¼‰ç™¾åº¦ç™¾ç§‘"><a href="#ï¼ˆ4ï¼‰ç™¾åº¦ç™¾ç§‘" class="headerlink" title="ï¼ˆ4ï¼‰ç™¾åº¦ç™¾ç§‘"></a>ï¼ˆ4ï¼‰ç™¾åº¦ç™¾ç§‘</h4><blockquote><p>hashcodeæ–¹æ³•è¿”å›è¯¥å¯¹è±¡çš„å“ˆå¸Œç å€¼ã€‚æ”¯æŒè¯¥æ–¹æ³•æ˜¯ä¸ºå“ˆå¸Œè¡¨æä¾›ä¸€äº›ä¼˜ç‚¹ï¼Œä¾‹å¦‚ï¼Œjava.util.Hashtable æä¾›çš„å“ˆå¸Œè¡¨ã€‚ </p><p>hashCode çš„å¸¸è§„åå®šæ˜¯ï¼š<br>åœ¨ Java åº”ç”¨ç¨‹åºæ‰§è¡ŒæœŸé—´ï¼Œåœ¨åŒä¸€å¯¹è±¡ä¸Šå¤šæ¬¡è°ƒç”¨ hashCode æ–¹æ³•æ—¶ï¼Œå¿…é¡»ä¸€è‡´åœ°è¿”å›ç›¸åŒçš„æ•´æ•°ï¼Œå‰ææ˜¯å¯¹è±¡ä¸Š equals æ¯”è¾ƒä¸­æ‰€ç”¨çš„ä¿¡æ¯æ²¡æœ‰è¢«ä¿®æ”¹ã€‚ä»æŸä¸€åº”ç”¨ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œåˆ°åŒä¸€åº”ç”¨ç¨‹åºçš„å¦ä¸€æ¬¡æ‰§è¡Œï¼Œè¯¥æ•´æ•°æ— éœ€ä¿æŒä¸€è‡´ã€‚<br>å¦‚æœæ ¹æ® equals(Object) æ–¹æ³•ï¼Œä¸¤ä¸ªå¯¹è±¡æ˜¯ç›¸ç­‰çš„ï¼Œé‚£ä¹ˆåœ¨ä¸¤ä¸ªå¯¹è±¡ä¸­çš„æ¯ä¸ªå¯¹è±¡ä¸Šè°ƒç”¨ hashCode æ–¹æ³•éƒ½å¿…é¡»ç”Ÿæˆç›¸åŒçš„æ•´æ•°ç»“æœã€‚<br>ä»¥ä¸‹æƒ…å†µä¸ æ˜¯å¿…éœ€çš„ï¼šå¦‚æœæ ¹æ® equals(java.lang.Object) æ–¹æ³•ï¼Œä¸¤ä¸ªå¯¹è±¡ä¸ç›¸ç­‰ï¼Œé‚£ä¹ˆåœ¨ä¸¤ä¸ªå¯¹è±¡ä¸­çš„ä»»ä¸€å¯¹è±¡ä¸Šè°ƒç”¨ hashCode æ–¹æ³•å¿…å®šä¼šç”Ÿæˆä¸åŒçš„æ•´æ•°ç»“æœã€‚ä½†æ˜¯ï¼Œç¨‹åºå‘˜åº”è¯¥çŸ¥é“ï¼Œä¸ºä¸ç›¸ç­‰çš„å¯¹è±¡ç”Ÿæˆä¸åŒæ•´æ•°ç»“æœå¯ä»¥æé«˜å“ˆå¸Œè¡¨çš„æ€§èƒ½ã€‚<br>å®é™…ä¸Šï¼Œç”± Object ç±»å®šä¹‰çš„ hashCode æ–¹æ³•ç¡®å®ä¼šé’ˆå¯¹ä¸åŒçš„å¯¹è±¡è¿”å›ä¸åŒçš„æ•´æ•°ã€‚ï¼ˆè¿™ä¸€èˆ¬æ˜¯é€šè¿‡å°†è¯¥å¯¹è±¡çš„å†…éƒ¨åœ°å€è½¬æ¢æˆä¸€ä¸ªæ•´æ•°æ¥å®ç°çš„ï¼Œä½†æ˜¯ JavaTM ç¼–ç¨‹è¯­è¨€ä¸éœ€è¦è¿™ç§å®ç°æŠ€å·§ã€‚ï¼‰ </p><p>å½“equalsæ–¹æ³•è¢«é‡å†™æ—¶ï¼Œé€šå¸¸æœ‰å¿…è¦é‡å†™ hashCode æ–¹æ³•ï¼Œä»¥ç»´æŠ¤ hashCode æ–¹æ³•çš„å¸¸è§„åå®šï¼Œè¯¥åå®šå£°æ˜ç›¸ç­‰å¯¹è±¡å¿…é¡»å…·æœ‰ç›¸ç­‰çš„å“ˆå¸Œç ã€‚</p></blockquote><h4 id="ï¼ˆ5ï¼‰å°ç™½è§£é‡Š"><a href="#ï¼ˆ5ï¼‰å°ç™½è§£é‡Š" class="headerlink" title="ï¼ˆ5ï¼‰å°ç™½è§£é‡Š"></a>ï¼ˆ5ï¼‰å°ç™½è§£é‡Š</h4><blockquote><p>1.hashcodeæ˜¯ç”¨æ¥æŸ¥æ‰¾çš„ï¼Œå¦‚æœä½ å­¦è¿‡æ•°æ®ç»“æ„å°±åº”è¯¥çŸ¥é“ï¼Œåœ¨æŸ¥æ‰¾å’Œæ’åºè¿™ä¸€ç« æœ‰<br>ä¾‹å¦‚å†…å­˜ä¸­æœ‰è¿™æ ·çš„ä½ç½®<br>0  1  2  3  4  5  6  7<br>è€Œæˆ‘æœ‰ä¸ªç±»ï¼Œè¿™ä¸ªç±»æœ‰ä¸ªå­—æ®µå«ID,æˆ‘è¦æŠŠè¿™ä¸ªç±»å­˜æ”¾åœ¨ä»¥ä¸Š8ä¸ªä½ç½®ä¹‹ä¸€ï¼Œå¦‚æœä¸ç”¨hashcodeè€Œä»»æ„å­˜æ”¾ï¼Œé‚£ä¹ˆå½“æŸ¥æ‰¾æ—¶å°±éœ€è¦åˆ°è¿™å…«ä¸ªä½ç½®é‡ŒæŒ¨ä¸ªå»æ‰¾ï¼Œæˆ–è€…ç”¨äºŒåˆ†æ³•ä¸€ç±»çš„ç®—æ³•ã€‚<br>ä½†å¦‚æœç”¨hashcodeé‚£å°±ä¼šä½¿æ•ˆç‡æé«˜å¾ˆå¤šã€‚<br>æˆ‘ä»¬è¿™ä¸ªç±»ä¸­æœ‰ä¸ªå­—æ®µå«ID,é‚£ä¹ˆæˆ‘ä»¬å°±å®šä¹‰æˆ‘ä»¬çš„hashcodeä¸ºIDï¼…8ï¼Œç„¶åæŠŠæˆ‘ä»¬çš„ç±»å­˜æ”¾åœ¨å–å¾—å¾—ä½™æ•°é‚£ä¸ªä½ç½®ã€‚æ¯”å¦‚æˆ‘ä»¬çš„IDä¸º9ï¼Œ9é™¤8çš„ä½™æ•°ä¸º1ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æŠŠè¯¥ç±»å­˜åœ¨1è¿™ä¸ªä½ç½®ï¼Œå¦‚æœIDæ˜¯13ï¼Œæ±‚å¾—çš„ä½™æ•°æ˜¯5ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æŠŠè¯¥ç±»æ”¾åœ¨5è¿™ä¸ªä½ç½®ã€‚è¿™æ ·ï¼Œä»¥ååœ¨æŸ¥æ‰¾è¯¥ç±»æ—¶å°±å¯ä»¥é€šè¿‡IDé™¤ 8æ±‚ä½™æ•°ç›´æ¥æ‰¾åˆ°å­˜æ”¾çš„ä½ç½®äº†ã€‚</p><p>2.ä½†æ˜¯å¦‚æœä¸¤ä¸ªç±»æœ‰ç›¸åŒçš„hashcodeæ€ä¹ˆåŠé‚£ï¼ˆæˆ‘ä»¬å‡è®¾ä¸Šé¢çš„ç±»çš„IDä¸æ˜¯å”¯ä¸€çš„ï¼‰ï¼Œä¾‹å¦‚9é™¤ä»¥8å’Œ17é™¤ä»¥8çš„ä½™æ•°éƒ½æ˜¯1ï¼Œé‚£ä¹ˆè¿™æ˜¯ä¸æ˜¯åˆæ³•çš„ï¼Œå›ç­”æ˜¯ï¼šå¯ä»¥è¿™æ ·ã€‚é‚£ä¹ˆå¦‚ä½•åˆ¤æ–­å‘¢ï¼Ÿåœ¨è¿™ä¸ªæ—¶å€™å°±éœ€è¦å®šä¹‰ equalsäº†ã€‚<br>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å…ˆé€šè¿‡ hashcodeæ¥åˆ¤æ–­ä¸¤ä¸ªç±»æ˜¯å¦å­˜æ”¾æŸä¸ªæ¡¶é‡Œï¼Œä½†è¿™ä¸ªæ¡¶é‡Œå¯èƒ½æœ‰å¾ˆå¤šç±»ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å†é€šè¿‡ equals æ¥åœ¨è¿™ä¸ªæ¡¶é‡Œæ‰¾åˆ°æˆ‘ä»¬è¦çš„ç±»ã€‚<br>é‚£ä¹ˆã€‚é‡å†™äº†equals()ï¼Œä¸ºä»€ä¹ˆè¿˜è¦é‡å†™hashCode()å‘¢ï¼Ÿ<br>æƒ³æƒ³ï¼Œä½ è¦åœ¨ä¸€ä¸ªæ¡¶é‡Œæ‰¾ä¸œè¥¿ï¼Œä½ å¿…é¡»å…ˆè¦æ‰¾åˆ°è¿™ä¸ªæ¡¶å•Šï¼Œä½ ä¸é€šè¿‡é‡å†™hashcode()æ¥æ‰¾åˆ°æ¡¶ï¼Œå…‰é‡å†™equals()æœ‰ä»€ä¹ˆç”¨å•Šã€‚</p></blockquote><h3 id="25ã€java-ä¸­æ“ä½œå­—ç¬¦ä¸²éƒ½æœ‰å“ªäº›ç±»ï¼Ÿå®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#25ã€java-ä¸­æ“ä½œå­—ç¬¦ä¸²éƒ½æœ‰å“ªäº›ç±»ï¼Ÿå®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="25ã€java ä¸­æ“ä½œå­—ç¬¦ä¸²éƒ½æœ‰å“ªäº›ç±»ï¼Ÿå®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>25ã€java ä¸­æ“ä½œå­—ç¬¦ä¸²éƒ½æœ‰å“ªäº›ç±»ï¼Ÿå®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><h4 id="ï¼ˆ1ï¼‰String"><a href="#ï¼ˆ1ï¼‰String" class="headerlink" title="ï¼ˆ1ï¼‰String"></a>ï¼ˆ1ï¼‰String</h4><p>Stringæ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œæ¯æ¬¡å¯¹Stringç±»å‹çš„æ”¹å˜æ—¶éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</p><h4 id="ï¼ˆ2ï¼‰StringBuilder"><a href="#ï¼ˆ2ï¼‰StringBuilder" class="headerlink" title="ï¼ˆ2ï¼‰StringBuilder"></a>ï¼ˆ2ï¼‰StringBuilder</h4><p>çº¿ç¨‹ä¸å®‰å…¨ï¼Œæ•ˆç‡é«˜ï¼Œå¤šç”¨äºå•çº¿ç¨‹ã€‚</p><h4 id="ï¼ˆ3ï¼‰StringBuffer"><a href="#ï¼ˆ3ï¼‰StringBuffer" class="headerlink" title="ï¼ˆ3ï¼‰StringBuffer"></a>ï¼ˆ3ï¼‰StringBuffer</h4><p>çº¿ç¨‹å®‰å…¨ï¼Œç”±äºåŠ é”çš„åŸå› ï¼Œæ•ˆç‡ä¸å¦‚StringBuilderï¼Œå¤šç”¨äºå¤šçº¿ç¨‹ã€‚</p><p>ä¸é¢‘ç¹çš„å­—ç¬¦ä¸²æ“ä½œä½¿ç”¨Stringï¼Œæ“ä½œé¢‘ç¹çš„æƒ…å†µä¸å»ºè®®ä½¿ç”¨Stringã€‚</p><p>StringBuilder &gt; StringBuffer &gt; Stringã€‚</p><h3 id="26ã€java-ä¸­éƒ½æœ‰å“ªäº›å¼•ç”¨ç±»å‹ï¼Ÿ"><a href="#26ã€java-ä¸­éƒ½æœ‰å“ªäº›å¼•ç”¨ç±»å‹ï¼Ÿ" class="headerlink" title="26ã€java ä¸­éƒ½æœ‰å“ªäº›å¼•ç”¨ç±»å‹ï¼Ÿ"></a>26ã€java ä¸­éƒ½æœ‰å“ªäº›å¼•ç”¨ç±»å‹ï¼Ÿ</h3><h4 id="ï¼ˆ1ï¼‰å¼ºå¼•ç”¨"><a href="#ï¼ˆ1ï¼‰å¼ºå¼•ç”¨" class="headerlink" title="ï¼ˆ1ï¼‰å¼ºå¼•ç”¨"></a>ï¼ˆ1ï¼‰å¼ºå¼•ç”¨</h4><p>Javaä¸­é»˜è®¤å£°æ˜çš„å°±æ˜¯å¼ºå¼•ç”¨ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">obj = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure><p>åªè¦å¼ºå¼•ç”¨å­˜åœ¨ï¼Œåƒåœ¾å›æ”¶å™¨å°†æ°¸è¿œä¸ä¼šå›æ”¶è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚å¦‚æœæƒ³è¢«å›æ”¶ï¼Œå¯ä»¥å°†å¯¹è±¡ç½®ä¸ºnullï¼› </p><h4 id="ï¼ˆ2ï¼‰è½¯å¼•ç”¨ï¼ˆSoftReferenceï¼‰"><a href="#ï¼ˆ2ï¼‰è½¯å¼•ç”¨ï¼ˆSoftReferenceï¼‰" class="headerlink" title="ï¼ˆ2ï¼‰è½¯å¼•ç”¨ï¼ˆSoftReferenceï¼‰"></a>ï¼ˆ2ï¼‰è½¯å¼•ç”¨ï¼ˆSoftReferenceï¼‰</h4><p>åœ¨å†…å­˜è¶³å¤Ÿçš„æ—¶å€™ï¼Œè½¯å¼•ç”¨ä¸ä¼šè¢«å›æ”¶ï¼Œåªæœ‰åœ¨å†…å­˜ä¸è¶³æ—¶ï¼Œç³»ç»Ÿæ‰ä¼šå›æ”¶è½¯å¼•ç”¨å¯¹è±¡ï¼Œå¦‚æœå›æ”¶äº†è½¯å¼•ç”¨å¯¹è±¡ä¹‹åä»ç„¶æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œæ‰ä¼šè·‘å‡ºå†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">byte</span>[] buff = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span> * <span class="number">1024</span>];</span><br><span class="line">SoftReference&lt;<span class="type">byte</span>[]&gt; sr = <span class="keyword">new</span> <span class="title class_">SoftReference</span>&lt;&gt;(buff);</span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ3ï¼‰å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰"><a href="#ï¼ˆ3ï¼‰å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰" class="headerlink" title="ï¼ˆ3ï¼‰å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰"></a>ï¼ˆ3ï¼‰å¼±å¼•ç”¨ï¼ˆWeakReferenceï¼‰</h4><p>è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œå¼±å¼•ç”¨å°±ä¼šè¢«å›æ”¶ã€‚</p><h4 id="ï¼ˆ4ï¼‰è™šå¼•ç”¨ï¼ˆPhantomReferenceï¼‰"><a href="#ï¼ˆ4ï¼‰è™šå¼•ç”¨ï¼ˆPhantomReferenceï¼‰" class="headerlink" title="ï¼ˆ4ï¼‰è™šå¼•ç”¨ï¼ˆPhantomReferenceï¼‰"></a>ï¼ˆ4ï¼‰è™šå¼•ç”¨ï¼ˆPhantomReferenceï¼‰</h4><h4 id="ï¼ˆ5ï¼‰å¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰"><a href="#ï¼ˆ5ï¼‰å¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰" class="headerlink" title="ï¼ˆ5ï¼‰å¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰"></a>ï¼ˆ5ï¼‰å¼•ç”¨é˜Ÿåˆ—ï¼ˆReferenceQueueï¼‰</h4><p>å¼•ç”¨é˜Ÿåˆ—å¯ä»¥ä¸è½¯å¼•ç”¨ã€å¼±å¼•ç”¨ã€è™šå¼•ç”¨ä¸€èµ·é…åˆä½¿ç”¨ã€‚</p><p>å½“åƒåœ¾å›æ”¶å™¨å‡†å¤‡å›æ”¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœå‘ç°å®ƒè¿˜æœ‰å¼•ç”¨ï¼Œå°±ä¼šåœ¨å›æ”¶å¯¹è±¡ä¹‹å‰ï¼ŒæŠŠè¿™ä¸ªå¼•ç”¨åŠ å…¥åˆ°å¼•ç”¨é˜Ÿåˆ—ä¸­ã€‚</p><p>ç¨‹åºå¯ä»¥é€šè¿‡åˆ¤æ–­å¼•ç”¨é˜Ÿåˆ—ä¸­æ˜¯å¦åŠ å…¥äº†å¼•ç”¨ï¼Œæ¥åˆ¤æ–­è¢«å¼•ç”¨çš„å¯¹è±¡æ˜¯å¦å°†è¦è¢«åƒåœ¾å›æ”¶ï¼Œè¿™æ ·å¯ä»¥åœ¨å¯¹è±¡è¢«å›æ”¶ä¹‹å‰é‡‡å–ä¸€äº›å¿…è¦çš„æªæ–½ã€‚</p><h3 id="27ã€åœ¨-Java-ä¸­ï¼Œä¸ºä»€ä¹ˆä¸å…è®¸ä»é™æ€æ–¹æ³•ä¸­è®¿é—®éé™æ€å˜é‡ï¼Ÿ"><a href="#27ã€åœ¨-Java-ä¸­ï¼Œä¸ºä»€ä¹ˆä¸å…è®¸ä»é™æ€æ–¹æ³•ä¸­è®¿é—®éé™æ€å˜é‡ï¼Ÿ" class="headerlink" title="27ã€åœ¨ Java ä¸­ï¼Œä¸ºä»€ä¹ˆä¸å…è®¸ä»é™æ€æ–¹æ³•ä¸­è®¿é—®éé™æ€å˜é‡ï¼Ÿ"></a>27ã€åœ¨ Java ä¸­ï¼Œä¸ºä»€ä¹ˆä¸å…è®¸ä»é™æ€æ–¹æ³•ä¸­è®¿é—®éé™æ€å˜é‡ï¼Ÿ</h3><p>é™æ€å˜é‡å±äºç±»æœ¬èº«ï¼Œåœ¨ç±»åŠ è½½çš„æ—¶å€™å°±ä¼šåˆ†é…å†…å­˜ï¼Œå¯ä»¥é€šè¿‡ç±»åç›´æ¥è®¿é—®ï¼›<br>éé™æ€å˜é‡å±äºç±»çš„å¯¹è±¡ï¼Œåªæœ‰åœ¨ç±»çš„å¯¹è±¡äº§ç”Ÿæ—¶ï¼Œæ‰ä¼šåˆ†é…å†…å­˜ï¼Œé€šè¿‡ç±»çš„å®ä¾‹å»è®¿é—®ï¼›<br>é™æ€æ–¹æ³•ä¹Ÿå±äºç±»æœ¬èº«ï¼Œä½†æ˜¯æ­¤æ—¶æ²¡æœ‰ç±»çš„å®ä¾‹ï¼Œå†…å­˜ä¸­æ²¡æœ‰éé™æ€å˜é‡ï¼Œæ‰€ä»¥æ— æ³•è°ƒç”¨ã€‚</p><h3 id="28ã€è¯´è¯´Java-Beançš„å‘½åè§„èŒƒ"><a href="#28ã€è¯´è¯´Java-Beançš„å‘½åè§„èŒƒ" class="headerlink" title="28ã€è¯´è¯´Java Beançš„å‘½åè§„èŒƒ"></a>28ã€è¯´è¯´Java Beançš„å‘½åè§„èŒƒ</h3><p>JavaBean ç±»å¿…é¡»æ˜¯ä¸€ä¸ªå…¬å…±ç±»ï¼Œå¹¶å°†å…¶è®¿é—®å±æ€§è®¾ç½®ä¸º public<br>JavaBean ç±»å¿…é¡»æœ‰ä¸€ä¸ªç©ºçš„æ„é€ å‡½æ•°ï¼šç±»ä¸­å¿…é¡»æœ‰ä¸€ä¸ªä¸å¸¦å‚æ•°çš„å…¬ç”¨æ„é€ å™¨ï¼Œæ­¤æ„é€ å™¨ä¹Ÿåº”è¯¥é€šè¿‡è°ƒç”¨å„ä¸ªç‰¹æ€§çš„è®¾ç½®æ–¹æ³•æ¥è®¾ç½®ç‰¹æ€§çš„ç¼ºçœå€¼ã€‚<br>ä¸€ä¸ªjavaBeanç±»ä¸åº”æœ‰å…¬å…±å®ä¾‹å˜é‡ï¼Œç±»å˜é‡éƒ½ä¸ºprivate<br>æŒæœ‰å€¼åº”è¯¥é€šè¿‡ä¸€ç»„å­˜å–æ–¹æ³•ï¼ˆgetXxx å’Œ setXxxï¼‰æ¥è®¿é—®ï¼šå¯¹äºæ¯ä¸ªç‰¹æ€§ï¼Œåº”è¯¥æœ‰ä¸€ä¸ªå¸¦åŒ¹é…å…¬ç”¨ getter å’Œ setter æ–¹æ³•çš„ä¸“ç”¨å®ä¾‹å˜é‡ã€‚<br>å±æ€§ä¸ºå¸ƒå°”ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ isXxx() æ–¹æ³•ä»£æ›¿ getXxx() æ–¹æ³•ã€‚</p><p>é€šå¸¸å±æ€§åæ˜¯è¦å’Œ åŒ…åã€ç±»åã€æ–¹æ³•åã€å­—æ®µåã€å¸¸é‡åä½œå‡ºåŒºåˆ«çš„:</p><p>é¦–å…ˆ:å¿…é¡»ç”¨è‹±æ–‡ï¼Œä¸è¦ç”¨æ±‰è¯­æ‹¼éŸ³</p><h4 id="ï¼ˆ1ï¼‰åŒ…-package"><a href="#ï¼ˆ1ï¼‰åŒ…-package" class="headerlink" title="ï¼ˆ1ï¼‰åŒ…(package)"></a>ï¼ˆ1ï¼‰åŒ…(package)</h4><p>ç”¨äºå°†å®Œæˆä¸åŒåŠŸèƒ½çš„ç±»åˆ†é—¨åˆ«ç±»ï¼Œæ”¾åœ¨ä¸åŒçš„ç›®å½•(åŒ…)ä¸‹ï¼ŒåŒ…çš„å‘½åè§„åˆ™ï¼šå°†å…¬å¸åŸŸååè½¬ä½œä¸ºåŒ…åã€‚æ¯”å¦‚www.sohu.com å¯¹äºåŒ…åï¼šæ¯ä¸ªå­—æ¯éƒ½éœ€è¦å°å†™ã€‚æ¯”å¦‚ï¼šcom.sohu.test;è¯¥åŒ…ä¸‹çš„Testç±»çš„å…¨åæ˜¯ï¼šcom.sohu.Test.Java ã€‚</p><p>å¦‚æœå®šä¹‰ç±»çš„æ—¶å€™æ²¡æœ‰ä½¿ç”¨package,é‚£ä¹ˆjavaå°±è®¤ä¸ºæˆ‘ä»¬æ‰€å®šä¹‰çš„ç±»ä½äºé»˜è®¤åŒ…é‡Œé¢(default package)ã€‚</p><h4 id="ï¼ˆ2ï¼‰ç±»"><a href="#ï¼ˆ2ï¼‰ç±»" class="headerlink" title="ï¼ˆ2ï¼‰ç±»"></a>ï¼ˆ2ï¼‰ç±»</h4><p>é¦–å­—æ¯å¤§å†™ï¼Œå¦‚æœä¸€ä¸ªç±»ç”±å¤šä¸ªå•è¯æ„æˆï¼Œé‚£ä¹ˆæ¯ä¸ªå•è¯çš„é¦–å­—æ¯éƒ½å¤§å†™ï¼Œè€Œä¸”ä¸­é—´ä¸ä½¿ç”¨ä»»ä½•çš„è¿æ¥ç¬¦ã€‚å°½é‡ä½¿ç”¨è‹±æ–‡ã€‚å¦‚ConnectionFactory</p><h4 id="ï¼ˆ3ï¼‰æ–¹æ³•"><a href="#ï¼ˆ3ï¼‰æ–¹æ³•" class="headerlink" title="ï¼ˆ3ï¼‰æ–¹æ³•"></a>ï¼ˆ3ï¼‰æ–¹æ³•</h4><p>é¦–å•è¯å…¨éƒ¨å°å†™ï¼Œå¦‚æœä¸€ä¸ªæ–¹æ³•ç”±å¤šä¸ªå•è¯æ„æˆï¼Œé‚£ä¹ˆä»ç¬¬äºŒä¸ªå•è¯å¼€å§‹é¦–å­—æ¯å¤§å†™ï¼Œä¸ä½¿ç”¨è¿æ¥ç¬¦ã€‚addPerson</p><h4 id="ï¼ˆ4ï¼‰å­—æ®µ"><a href="#ï¼ˆ4ï¼‰å­—æ®µ" class="headerlink" title="ï¼ˆ4ï¼‰å­—æ®µ"></a>ï¼ˆ4ï¼‰å­—æ®µ</h4><p>ä¸æ–¹æ³•ç›¸åŒã€‚å¦‚ageOfPerson</p><h4 id="ï¼ˆ5ï¼‰å¸¸é‡"><a href="#ï¼ˆ5ï¼‰å¸¸é‡" class="headerlink" title="ï¼ˆ5ï¼‰å¸¸é‡"></a>ï¼ˆ5ï¼‰å¸¸é‡</h4><p>æ‰€æœ‰å•è¯çš„å­—æ¯éƒ½æ˜¯å¤§å†™ï¼Œå¦‚æœæœ‰å¤šä¸ªå•è¯ï¼Œé‚£ä¹ˆä½¿ç”¨ä¸‹åˆ’çº¿é“¾æ¥å³å¯ã€‚</p><p>å¦‚ï¼špublic static final int AGE_OF_PERSON = 20; //é€šå¸¸åŠ ä¸Šstatic</p><h3 id="29ã€Java-Bean-å±æ€§å‘½åè§„èŒƒé—®é¢˜åˆ†æ"><a href="#29ã€Java-Bean-å±æ€§å‘½åè§„èŒƒé—®é¢˜åˆ†æ" class="headerlink" title="29ã€Java Bean å±æ€§å‘½åè§„èŒƒé—®é¢˜åˆ†æ"></a>29ã€Java Bean å±æ€§å‘½åè§„èŒƒé—®é¢˜åˆ†æ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"><span class="keyword">private</span> String busName;</span><br><span class="line"><span class="keyword">private</span> String pCount;</span><br><span class="line"><span class="keyword">private</span> Boolean isRunning;</span><br><span class="line"><span class="comment">//æ­£ç¡®çš„å‘½åæ–¹å¼ï¼Œé©¼å³°å¼çš„</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getBusName</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> busName;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBusName</span><span class="params">(String busName)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.busName = busName;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">//è¿™æ˜¯ä»€ä¹ˆï¼Ÿ</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getpCount</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> pCount;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setpCount</span><span class="params">(String pCount)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.pCount = pCount;</span><br><span class="line">&#125;</span><br><span class="line">    <span class="comment">//è¿™ä¸ªä¹Ÿæ˜¯ä¸å…è®¸çš„</span></span><br><span class="line"><span class="keyword">public</span> Boolean <span class="title function_">getIsRunning</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> isRunning;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setIsRunning</span><span class="params">(Boolean isRunning)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.isRunning = isRunning;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol><li>javabeanå±æ€§å‘½åå°½é‡ä½¿ç”¨å¸¸è§„çš„é©¼å³°å¼å‘½åè§„åˆ™</li><li>å±æ€§åç¬¬ä¸€ä¸ªå•è¯å°½é‡é¿å…ä½¿ç”¨ä¸€ä¸ªå­—æ¯ï¼šå¦‚eBookï¼Œ eMailã€‚</li><li>booleanå±æ€§åé¿å…ä½¿ç”¨ â€œisâ€ å¼€å¤´çš„åç§°</li><li>éšç€jdkï¼Œ eclipseï¼Œ spring ç­‰è½¯ä»¶ç‰ˆæœ¬çš„ä¸æ–­æé«˜ï¼Œ åº•ç‰ˆæœ¬çš„å‡ºç°çš„é—®é¢˜å¯èƒ½åœ¨é«˜ç‰ˆæœ¬ä¸­è§£å†³äº†ï¼Œ ä½ç‰ˆæœ¬åŸæ¥æ­£å¸¸çš„ä»£ç å¯èƒ½åœ¨é«˜ç‰ˆæœ¬ç¯å¢ƒä¸‹ä¸å†æ”¯æŒã€‚</li></ol><h3 id="30ã€ä»€ä¹ˆæ˜¯-Java-çš„å†…å­˜æ¨¡å‹"><a href="#30ã€ä»€ä¹ˆæ˜¯-Java-çš„å†…å­˜æ¨¡å‹" class="headerlink" title="30ã€ä»€ä¹ˆæ˜¯ Java çš„å†…å­˜æ¨¡å‹?"></a>30ã€ä»€ä¹ˆæ˜¯ Java çš„å†…å­˜æ¨¡å‹?</h3><p>åœ¨äº†è§£ä»€ä¹ˆæ˜¯ Java å†…å­˜æ¨¡å‹ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹ä¸ºä»€ä¹ˆè¦æå‡º Java å†…å­˜æ¨¡å‹ã€‚</p><p>ä¹‹å‰æåˆ°è¿‡å¹¶å‘ç¼–ç¨‹æœ‰ä¸‰å¤§é—®é¢˜</p><p>CPU ç¼“å­˜ï¼Œåœ¨å¤šæ ¸ CPU çš„æƒ…å†µä¸‹ï¼Œå¸¦æ¥äº†å¯è§æ€§é—®é¢˜<br>æ“ä½œç³»ç»Ÿå¯¹å½“å‰æ‰§è¡Œçº¿ç¨‹çš„åˆ‡æ¢ï¼Œå¸¦æ¥äº†åŸå­æ€§é—®é¢˜<br>è¯‘å™¨æŒ‡ä»¤é‡æ’ä¼˜åŒ–ï¼Œå¸¦æ¥äº†æœ‰åºæ€§é—®é¢˜<br>ä¸ºäº†è§£å†³å¹¶å‘ç¼–ç¨‹çš„ä¸‰å¤§é—®é¢˜ï¼Œæå‡ºäº† JSR-133ï¼Œæ–°çš„ Java å†…å­˜æ¨¡å‹ï¼ŒJDK 5 å¼€å§‹ä½¿ç”¨ã€‚</p><p>ç®€å•æ€»ç»“ä¸‹</p><p>Java å†…å­˜æ¨¡å‹æ˜¯ JVM çš„ä¸€ç§è§„èŒƒ<br>å®šä¹‰äº†å…±äº«å†…å­˜åœ¨å¤šçº¿ç¨‹ç¨‹åºä¸­è¯»å†™æ“ä½œè¡Œä¸ºçš„è§„èŒƒ<br>å±è”½äº†å„ç§ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„è®¿é—®å·®å¼‚ï¼Œä¿è¯äº† Java ç¨‹åºåœ¨å„ç§å¹³å°ä¸‹å¯¹å†…å­˜çš„è®¿é—®æ•ˆæœä¸€è‡´<br>è§£å†³å¹¶å‘é—®é¢˜é‡‡ç”¨çš„æ–¹å¼ï¼šé™åˆ¶å¤„ç†å™¨ä¼˜åŒ–å’Œä½¿ç”¨å†…å­˜å±éšœ<br>å¢å¼ºäº†ä¸‰ä¸ªåŒæ­¥åŸè¯­ï¼ˆsynchronizedã€volatileã€finalï¼‰çš„å†…å­˜è¯­ä¹‰<br>å®šä¹‰äº† happens-before è§„åˆ™</p><h3 id="31ã€åœ¨-Java-ä¸­ï¼Œä»€ä¹ˆæ—¶å€™ç”¨é‡è½½ï¼Œä»€ä¹ˆæ—¶å€™ç”¨é‡å†™ï¼Ÿ"><a href="#31ã€åœ¨-Java-ä¸­ï¼Œä»€ä¹ˆæ—¶å€™ç”¨é‡è½½ï¼Œä»€ä¹ˆæ—¶å€™ç”¨é‡å†™ï¼Ÿ" class="headerlink" title="31ã€åœ¨ Java ä¸­ï¼Œä»€ä¹ˆæ—¶å€™ç”¨é‡è½½ï¼Œä»€ä¹ˆæ—¶å€™ç”¨é‡å†™ï¼Ÿ"></a>31ã€åœ¨ Java ä¸­ï¼Œä»€ä¹ˆæ—¶å€™ç”¨é‡è½½ï¼Œä»€ä¹ˆæ—¶å€™ç”¨é‡å†™ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰é‡è½½æ˜¯å¤šæ€çš„é›†ä¸­ä½“ç°ï¼Œåœ¨ç±»ä¸­ï¼Œè¦ä»¥ç»Ÿä¸€çš„æ–¹å¼å¤„ç†ä¸åŒç±»å‹æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨é‡è½½ã€‚</p><p>ï¼ˆ2ï¼‰é‡å†™çš„ä½¿ç”¨æ˜¯å»ºç«‹åœ¨ç»§æ‰¿å…³ç³»ä¸Šçš„ï¼Œå­ç±»åœ¨ç»§æ‰¿çˆ¶ç±»çš„åŸºç¡€ä¸Šï¼Œå¢åŠ æ–°çš„åŠŸèƒ½ï¼Œå¯ä»¥ç”¨é‡å†™ã€‚</p><p>ï¼ˆ3ï¼‰ç®€å•æ€»ç»“ï¼š</p><p>é‡è½½æ˜¯å¤šæ ·æ€§ï¼Œé‡å†™æ˜¯å¢å¼ºå‰‚ï¼›<br>ç›®çš„æ˜¯æé«˜ç¨‹åºçš„å¤šæ ·æ€§å’Œå¥å£®æ€§ï¼Œä»¥é€‚é…ä¸åŒåœºæ™¯ä½¿ç”¨æ—¶ï¼Œä½¿ç”¨é‡è½½è¿›è¡Œæ‰©å±•ï¼›<br>ç›®çš„æ˜¯åœ¨ä¸ä¿®æ”¹åŸæ–¹æ³•åŠæºä»£ç çš„åŸºç¡€ä¸Šå¯¹æ–¹æ³•è¿›è¡Œæ‰©å±•æˆ–å¢å¼ºæ—¶ï¼Œä½¿ç”¨é‡å†™ï¼›</p><p>ç”Ÿæ´»ä¾‹å­ï¼š</p><blockquote><p>ä½ æƒ³åƒä¸€ç¢—é¢ï¼Œæˆ‘ç»™ä½ æä¾›äº†æ‹‰é¢ï¼Œç‚’é¢ï¼Œåˆ€å‰Šé¢ï¼Œæ‹…æ‹…é¢ä¾›ä½ é€‰æ‹©ï¼Œè¿™æ˜¯é‡è½½ï¼›</p><p>ä½ æƒ³åƒä¸€ç¢—é¢ï¼Œæˆ‘ä¸ä½†ç»™ä½ ç«¯æ¥äº†é¢ï¼Œè¿˜ç»™ä½ åŠ äº†é’èœï¼ŒåŠ äº†é¸¡è›‹ï¼Œè¿™ä¸ªæ˜¯é‡å†™ï¼›</p></blockquote><p>è®¾è®¡æ¨¡å¼ï¼š</p><blockquote><p>cglibå®ç°åŠ¨æ€ä»£ç†ï¼Œæ ¸å¿ƒåŸç†ç”¨çš„å°±æ˜¯æ–¹æ³•çš„é‡å†™ï¼›</p></blockquote><p>è¯¦ç»†è§£ç­”ï¼š</p><blockquote><p>Javaçš„é‡è½½(overload) æœ€é‡è¦çš„åº”ç”¨åœºæ™¯å°±æ˜¯æ„é€ å™¨çš„é‡è½½ï¼Œæ„é€ å™¨é‡è½½åï¼Œæä¾›å¤šç§å½¢å‚å½¢å¼çš„æ„é€ å™¨ï¼Œå¯ä»¥åº”å¯¹ä¸åŒçš„ä¸šåŠ¡éœ€æ±‚ï¼ŒåŠ å¼ºç¨‹åºçš„å¥å£®æ€§å’Œå¯æ‰©å±•æ€§ï¼Œæ¯”å¦‚æˆ‘ä»¬æœ€è¿‘å­¦ä¹ çš„Springæºç ä¸­çš„ClassPathXmlApplicationContextï¼Œå®ƒçš„æ„é€ å‡½æ•°ä½¿ç”¨é‡è½½ä¸€å…±æä¾›äº†10ä¸ªæ„é€ å‡½æ•°ï¼Œè¿™æ ·å°±ä¸ºä¸šåŠ¡çš„é€‰æ‹©æä¾›äº†å¤šé€‰æ‹©æ€§ã€‚åœ¨åº”ç”¨åˆ°æ–¹æ³•ä¸­æ—¶ï¼Œä¸»è¦æ˜¯ä¸ºäº†å¢å¼ºæ–¹æ³•çš„å¥å£®æ€§å’Œå¯æ‰©å±•æ€§ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨å¼€å‘ä¸­å¸¸ç”¨çš„å„ç§å·¥å…·ç±»ï¼Œæ¯”å¦‚æˆ‘ç›®å‰å·¥ä½œä¸­çš„çŸ­ä¿¡å·¥å…·ç±»SMSUtil, å‘çŸ­ä¿¡çš„æ–¹æ³•å°±ä¼šä½¿ç”¨é‡è½½ï¼Œé’ˆå¯¹ä¸åŒä¸šåŠ¡åœºæ™¯ä¸‹çš„ä¸åŒå½¢å‚ï¼Œæä¾›çŸ­ä¿¡å‘é€æ–¹æ³•ï¼Œè¿™æ ·æé«˜äº†å·¥å…·ç±»çš„æ‰©å±•æ€§å’Œå¥å£®æ€§ã€‚<br>æ€»ç»“ï¼šé‡è½½å¿…é¡»è¦ä¿®æ”¹æ–¹æ³•(æ„é€ å™¨)çš„å½¢å‚åˆ—è¡¨ï¼Œå¯ä»¥ä¿®æ”¹æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹æ–¹æ³•çš„å¼‚å¸¸ä¿¡æ¯å³è®¿é—®æƒé™ï¼›ä½¿ç”¨èŒƒå›´æ˜¯åœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œç›®çš„æ˜¯å¯¹æ–¹æ³•(æ„é€ å™¨)è¿›è¡ŒåŠŸèƒ½æ‰©å±•ï¼Œä»¥åº”å¯¹å¤šä¸šåŠ¡åœºæ™¯çš„ä¸åŒä½¿ç”¨éœ€æ±‚ã€‚æé«˜ç¨‹åºçš„å¥å£®æ€§å’Œæ‰©å±•æ€§ã€‚<br> javaçš„é‡å†™(override) åªè¦ç”¨äºå­ç±»å¯¹çˆ¶ç±»æ–¹æ³•çš„æ‰©å±•æˆ–ä¿®æ”¹ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬å¼€å‘ä¸­ï¼Œä¸ºäº†é¿å…ç¨‹åºæ··ä¹±ï¼Œé‡å†™ä¸€èˆ¬éƒ½æ˜¯ä¸ºäº†æ–¹æ³•çš„æ‰©å±•ï¼Œæ¯”å¦‚åœ¨cglibæ–¹å¼å®ç°çš„åŠ¨æ€ä»£ç†ä¸­ï¼Œä»£ç†ç±»å°±æ˜¯ç»§æ‰¿äº†ç›®æ ‡ç±»ï¼Œå¯¹ç›®æ ‡ç±»çš„æ–¹æ³•è¿›è¡Œé‡å†™ï¼ŒåŒæ—¶åœ¨æ–¹æ³•å‰åè¿›è¡Œåˆ‡é¢ç»‡å…¥ã€‚</p></blockquote><p>æ€»ç»“ï¼šæ–¹æ³•é‡å†™æ—¶ï¼Œå‚æ•°åˆ—è¡¨ï¼Œè¿”å›å€¼å¾—ç±»å‹æ˜¯ä¸€å®šä¸èƒ½ä¿®æ”¹çš„ï¼Œå¼‚å¸¸å¯ä»¥å‡å°‘æˆ–è€…åˆ é™¤ï¼Œä½†æ˜¯ä¸èƒ½æŠ›å‡ºæ–°çš„å¼‚å¸¸æˆ–è€…æ›´å¹¿çš„å¼‚å¸¸ï¼Œæ–¹æ³•çš„è®¿é—®æƒé™å¯ä»¥é™ä½é™åˆ¶ï¼Œä½†æ˜¯ä¸èƒ½åšæ›´ä¸¥æ ¼çš„é™åˆ¶ã€‚</p><p>ï¼ˆ4ï¼‰åœ¨é‡Œæ°æ›¿æ¢åŸåˆ™ä¸­ï¼Œå­ç±»å¯¹çˆ¶ç±»çš„æ–¹æ³•å°½é‡ä¸è¦é‡å†™å’Œé‡è½½ã€‚ï¼ˆæˆ‘ä»¬å¯ä»¥é‡‡ç”¨finalçš„æ‰‹æ®µå¼ºåˆ¶æ¥éµå¾ªï¼‰</p><h3 id="32ã€ä¸¾ä¾‹è¯´æ˜ä»€ä¹ˆæƒ…å†µä¸‹ä¼šæ›´å€¾å‘äºä½¿ç”¨æŠ½è±¡ç±»è€Œä¸æ˜¯æ¥å£ï¼Ÿ"><a href="#32ã€ä¸¾ä¾‹è¯´æ˜ä»€ä¹ˆæƒ…å†µä¸‹ä¼šæ›´å€¾å‘äºä½¿ç”¨æŠ½è±¡ç±»è€Œä¸æ˜¯æ¥å£ï¼Ÿ" class="headerlink" title="32ã€ä¸¾ä¾‹è¯´æ˜ä»€ä¹ˆæƒ…å†µä¸‹ä¼šæ›´å€¾å‘äºä½¿ç”¨æŠ½è±¡ç±»è€Œä¸æ˜¯æ¥å£ï¼Ÿ"></a>32ã€ä¸¾ä¾‹è¯´æ˜ä»€ä¹ˆæƒ…å†µä¸‹ä¼šæ›´å€¾å‘äºä½¿ç”¨æŠ½è±¡ç±»è€Œä¸æ˜¯æ¥å£ï¼Ÿ</h3><p>æ¥å£å’ŒæŠ½è±¡ç±»éƒ½éµå¾ªâ€é¢å‘æ¥å£è€Œä¸æ˜¯å®ç°ç¼–ç â€è®¾è®¡åŸåˆ™ï¼Œå®ƒå¯ä»¥å¢åŠ ä»£ç çš„çµæ´»æ€§ï¼Œå¯ä»¥é€‚åº”ä¸æ–­å˜åŒ–çš„éœ€æ±‚ã€‚ä¸‹é¢æœ‰å‡ ä¸ªç‚¹å¯ä»¥å¸®åŠ©ä½ å›ç­”è¿™ä¸ªé—®é¢˜ï¼šåœ¨ Java ä¸­ï¼Œä½ åªèƒ½ç»§æ‰¿ä¸€ä¸ªç±»ï¼Œä½†å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚æ‰€ä»¥ä¸€æ—¦ä½ ç»§æ‰¿äº†ä¸€ä¸ªç±»ï¼Œä½ å°±å¤±å»äº†ç»§æ‰¿å…¶ä»–ç±»çš„æœºä¼šäº†ã€‚</p><p>æ¥å£é€šå¸¸è¢«ç”¨æ¥è¡¨ç¤ºé™„å±æè¿°æˆ–è¡Œä¸ºå¦‚ï¼š Runnable ã€ Clonable ã€ Serializable ç­‰ç­‰ï¼Œå› æ­¤å½“ä½ ä½¿ç”¨æŠ½è±¡ç±»æ¥è¡¨ç¤ºè¡Œä¸ºæ—¶ï¼Œä½ çš„ç±»å°±ä¸èƒ½åŒæ—¶æ˜¯ Runnable å’Œ Clonable( æ³¨ï¼šè¿™é‡Œçš„æ„æ€æ˜¯æŒ‡å¦‚æœæŠŠ Runnable ç­‰å®ç°ä¸ºæŠ½è±¡ç±»çš„æƒ…å†µ ) ï¼Œå› ä¸ºåœ¨ Java ä¸­ä½ ä¸èƒ½ç»§æ‰¿ä¸¤ä¸ªç±»ï¼Œä½†å½“ä½ ä½¿ç”¨æ¥å£æ—¶ï¼Œä½ çš„ç±»å°±å¯ä»¥åŒæ—¶æ‹¥æœ‰å¤šä¸ªä¸åŒçš„è¡Œä¸ºã€‚</p><p>åœ¨ä¸€äº›å¯¹æ—¶é—´è¦æ±‚æ¯”è¾ƒé«˜çš„åº”ç”¨ä¸­ï¼Œå€¾å‘äºä½¿ç”¨æŠ½è±¡ç±»ï¼Œå®ƒä¼šæ¯”æ¥å£ç¨å¿«ä¸€ç‚¹ã€‚å¦‚æœå¸Œæœ›æŠŠä¸€ç³»åˆ—è¡Œä¸ºéƒ½è§„èŒƒåœ¨ç±»ç»§æ‰¿å±‚æ¬¡å†…ï¼Œå¹¶ä¸”å¯ä»¥æ›´å¥½åœ°åœ¨åŒä¸€ä¸ªåœ°æ–¹è¿›è¡Œç¼–ç ï¼Œé‚£ä¹ˆæŠ½è±¡ç±»æ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚æœ‰æ—¶ï¼Œæ¥å£å’ŒæŠ½è±¡ç±»å¯ä»¥ä¸€èµ·ä½¿ç”¨ï¼Œæ¥å£ä¸­å®šä¹‰å‡½æ•°ï¼Œè€Œåœ¨æŠ½è±¡ç±»ä¸­å®šä¹‰é»˜è®¤çš„å®ç°ã€‚</p><h3 id="33ã€å®ä¾‹åŒ–å¯¹è±¡æœ‰å“ªå‡ ç§æ–¹å¼"><a href="#33ã€å®ä¾‹åŒ–å¯¹è±¡æœ‰å“ªå‡ ç§æ–¹å¼" class="headerlink" title="33ã€å®ä¾‹åŒ–å¯¹è±¡æœ‰å“ªå‡ ç§æ–¹å¼"></a>33ã€å®ä¾‹åŒ–å¯¹è±¡æœ‰å“ªå‡ ç§æ–¹å¼</h3><ul><li>new</li><li>clone()</li><li><p>é€šè¿‡åå°„æœºåˆ¶åˆ›å»º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç”¨ Class.forNameæ–¹æ³•è·å–ç±»ï¼Œåœ¨è°ƒç”¨ç±»çš„newinstanceï¼ˆï¼‰æ–¹æ³•</span></span><br><span class="line">Class&lt;?&gt; cls = Class.forName(<span class="string">&quot;com.dao.User&quot;</span>);</span><br><span class="line"><span class="type">User</span> <span class="variable">u</span> <span class="operator">=</span> (User)cls.newInstance();</span><br></pre></td></tr></table></figure></li><li><p>åºåˆ—åŒ–ååºåˆ—åŒ–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å°†ä¸€ä¸ªå¯¹è±¡å®ä¾‹åŒ–åï¼Œè¿›è¡Œåºåˆ—åŒ–ï¼Œå†ååºåˆ—åŒ–ï¼Œä¹Ÿå¯ä»¥è·å¾—ä¸€ä¸ªå¯¹è±¡ï¼ˆè¿œç¨‹é€šä¿¡çš„åœºæ™¯ä¸‹ä½¿ç”¨ï¼‰</span></span><br><span class="line"><span class="type">ObjectOutputStream</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span> (<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;D:/data.txt&quot;</span>));</span><br><span class="line"><span class="comment">//åºåˆ—åŒ–å¯¹è±¡</span></span><br><span class="line">out.writeObject(user1); </span><br><span class="line">out.close();</span><br><span class="line"><span class="comment">//ååºåˆ—åŒ–å¯¹è±¡</span></span><br><span class="line"><span class="type">ObjectInputStream</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;D:/data.txt&quot;</span>));</span><br><span class="line"><span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> (User) in.readObject();</span><br><span class="line">System.out.println(<span class="string">&quot;ååºåˆ—åŒ–userï¼š&quot;</span> + user2);</span><br><span class="line">in.close();</span><br></pre></td></tr></table></figure></li></ul><h3 id="34ã€byteç±»å‹127-1ç­‰äºå¤šå°‘"><a href="#34ã€byteç±»å‹127-1ç­‰äºå¤šå°‘" class="headerlink" title="34ã€byteç±»å‹127+1ç­‰äºå¤šå°‘"></a>34ã€byteç±»å‹127+1ç­‰äºå¤šå°‘</h3><p>byteçš„èŒƒå›´æ˜¯-128~127ã€‚</p><p>å­—èŠ‚é•¿åº¦ä¸º8ä½ï¼Œæœ€å·¦è¾¹çš„æ˜¯ç¬¦å·ä½ï¼Œè€Œ127çš„äºŒè¿›åˆ¶ä¸º01111111ï¼Œæ‰€ä»¥æ‰§è¡Œ+1æ“ä½œæ—¶ï¼Œ01111111å˜ä¸º10000000ã€‚</p><p>å¤§å®¶çŸ¥é“ï¼Œè®¡ç®—æœºä¸­å­˜å‚¨è´Ÿæ•°ï¼Œå­˜çš„æ˜¯è¡¥ç çš„å…´è¡°ã€‚å·¦è¾¹ç¬¬ä¸€ä½ä¸ºç¬¦å·ä½ã€‚</p><p>é‚£ä¹ˆè´Ÿæ•°çš„è¡¥ç è½¬æ¢æˆåè¿›åˆ¶å¦‚ä¸‹ï¼š</p><p>ä¸€ä¸ªæ•°å¦‚æœä¸ºæ­£ï¼Œåˆ™å®ƒçš„åŸç ã€åç ã€è¡¥ç ç›¸åŒï¼›ä¸€ä¸ªæ­£æ•°çš„è¡¥ç ï¼Œå°†å…¶è½¬åŒ–ä¸ºåè¿›åˆ¶ï¼Œå¯ä»¥ç›´æ¥è½¬æ¢ã€‚</p><p>å·²çŸ¥ä¸€ä¸ªè´Ÿæ•°çš„è¡¥ç ï¼Œå°†å…¶è½¬æ¢ä¸ºåè¿›åˆ¶æ•°ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š</p><p>å…ˆå¯¹å„ä½å–åï¼›<br>å°†å…¶è½¬æ¢ä¸ºåè¿›åˆ¶æ•°ï¼›<br>åŠ ä¸Šè´Ÿå·ï¼Œå†å‡å»1ï¼›<br>ä¾‹å¦‚10000000ï¼Œæœ€é«˜ä½æ˜¯1ï¼Œæ˜¯è´Ÿæ•°ï¼Œâ‘ å¯¹å„ä½å–åå¾—01111111ï¼Œè½¬æ¢ä¸ºåè¿›åˆ¶å°±æ˜¯127ï¼ŒåŠ ä¸Šè´Ÿå·å¾—-127ï¼Œå†å‡å»1å¾—-128ï¼›</p><h3 id="35ã€Java-å®¹å™¨éƒ½æœ‰å“ªäº›ï¼Ÿ"><a href="#35ã€Java-å®¹å™¨éƒ½æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="35ã€Java å®¹å™¨éƒ½æœ‰å“ªäº›ï¼Ÿ"></a>35ã€Java å®¹å™¨éƒ½æœ‰å“ªäº›ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰Collection</p><p>â‘  set</p><p>HashSetã€TreeSet</p><p>â‘¡ list</p><p>ArrayListã€LinkedListã€Vector</p><p>ï¼ˆ2ï¼‰Map</p><p>HashMapã€HashTableã€TreeMap</p><h3 id="36ã€Collection-å’Œ-Collections-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#36ã€Collection-å’Œ-Collections-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="36ã€Collection å’Œ Collections æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>36ã€Collection å’Œ Collections æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰Collectionæ˜¯æœ€åŸºæœ¬çš„é›†åˆæ¥å£ï¼ŒCollectionæ´¾ç”Ÿäº†ä¸¤ä¸ªå­æ¥å£listå’Œsetï¼Œåˆ†åˆ«å®šä¹‰äº†ä¸¤ç§ä¸åŒçš„å­˜å‚¨æ–¹å¼ã€‚</p><p>ï¼ˆ2ï¼‰Collectionsæ˜¯ä¸€ä¸ªåŒ…è£…ç±»ï¼Œå®ƒåŒ…å«å„ç§æœ‰å…³é›†åˆæ“ä½œçš„é™æ€æ–¹æ³•ï¼ˆå¯¹é›†åˆçš„æœç´¢ã€æ’åºã€çº¿ç¨‹å®‰å…¨åŒ–ç­‰ï¼‰ã€‚</p><p>æ­¤ç±»ä¸èƒ½å®ä¾‹åŒ–ï¼Œå°±åƒä¸€ä¸ªå·¥å…·ç±»ï¼ŒæœåŠ¡äºCollectionæ¡†æ¶ã€‚</p><h3 id="37ã€listä¸SetåŒºåˆ«"><a href="#37ã€listä¸SetåŒºåˆ«" class="headerlink" title="37ã€listä¸SetåŒºåˆ«"></a>37ã€listä¸SetåŒºåˆ«</h3><h4 id="ï¼ˆ1ï¼‰Listç®€ä»‹"><a href="#ï¼ˆ1ï¼‰Listç®€ä»‹" class="headerlink" title="ï¼ˆ1ï¼‰Listç®€ä»‹"></a>ï¼ˆ1ï¼‰Listç®€ä»‹</h4><p>å®é™…ä¸Šæœ‰ä¸¤ç§Listï¼šä¸€ç§æ˜¯åŸºæœ¬çš„ArrayList,å…¶ä¼˜ç‚¹åœ¨äºéšæœºè®¿é—®å…ƒç´ ï¼Œå¦ä¸€ç§æ˜¯LinkedList,å®ƒå¹¶ä¸æ˜¯ä¸ºå¿«é€Ÿéšæœºè®¿é—®è®¾è®¡çš„ï¼Œè€Œæ˜¯å¿«é€Ÿçš„æ’å…¥æˆ–åˆ é™¤ã€‚<br>ArrayListï¼šç”±æ•°ç»„å®ç°çš„Listã€‚å…è®¸å¯¹å…ƒç´ è¿›è¡Œå¿«é€Ÿéšæœºè®¿é—®ï¼Œä½†æ˜¯å‘Listä¸­é—´æ’å…¥ä¸ç§»é™¤å…ƒç´ çš„é€Ÿåº¦å¾ˆæ…¢ã€‚<br>LinkedList ï¼šå¯¹é¡ºåºè®¿é—®è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå‘Listä¸­é—´æ’å…¥ä¸åˆ é™¤çš„å¼€é”€å¹¶ä¸å¤§ã€‚éšæœºè®¿é—®åˆ™ç›¸å¯¹è¾ƒæ…¢ã€‚<br>è¿˜å…·æœ‰ä¸‹åˆ—æ–¹ æ³•ï¼šaddFirst(), addLast(), getFirst(), getLast(), removeFirst() å’Œ removeLast(), è¿™äº›æ–¹æ³• (æ²¡æœ‰åœ¨ä»»ä½•æ¥å£æˆ–åŸºç±»ä¸­å®šä¹‰è¿‡)ä½¿å¾—LinkedListå¯ä»¥å½“ä½œå †æ ˆã€é˜Ÿåˆ—å’ŒåŒå‘é˜Ÿåˆ—ä½¿ç”¨ã€‚</p><h4 id="ï¼ˆ2ï¼‰Setç®€ä»‹"><a href="#ï¼ˆ2ï¼‰Setç®€ä»‹" class="headerlink" title="ï¼ˆ2ï¼‰Setç®€ä»‹"></a>ï¼ˆ2ï¼‰Setç®€ä»‹</h4><p>Setå…·æœ‰ä¸Collectionå®Œå…¨ä¸€æ ·çš„æ¥å£ï¼Œå› æ­¤æ²¡æœ‰ä»»ä½•é¢å¤–çš„åŠŸèƒ½ã€‚å®é™…ä¸ŠSetå°±æ˜¯Collection,åªæ˜¯è¡Œä¸ºä¸åŒã€‚è¿™æ˜¯ç»§æ‰¿ä¸å¤šæ€æ€æƒ³çš„å…¸å‹åº”ç”¨ï¼šè¡¨ç°ä¸åŒçš„è¡Œä¸ºã€‚Setä¸ä¿å­˜é‡å¤çš„å…ƒç´ (è‡³äºå¦‚ä½•åˆ¤æ–­å…ƒç´ ç›¸åŒåˆ™è¾ƒä¸ºè´Ÿè´£) </p><p>Set : å­˜å…¥Setçš„æ¯ä¸ªå…ƒç´ éƒ½å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œå› ä¸ºSetä¸ä¿å­˜é‡å¤å…ƒç´ ã€‚åŠ å…¥Setçš„å…ƒç´ å¿…é¡»å®šä¹‰equals()æ–¹æ³•ä»¥ç¡®ä¿å¯¹è±¡çš„å”¯ä¸€æ€§ã€‚Setä¸Collectionæœ‰å®Œå…¨ä¸€æ ·çš„æ¥å£ã€‚Setæ¥å£ä¸ä¿è¯ç»´æŠ¤å…ƒç´ çš„æ¬¡åºã€‚<br>HashSetï¼šä¸ºå¿«é€ŸæŸ¥æ‰¾è®¾è®¡çš„Setã€‚å­˜å…¥HashSetçš„å¯¹è±¡å¿…é¡»å®šä¹‰hashCode()ã€‚<br>TreeSetï¼š ä¿å­˜æ¬¡åºçš„Set, åº•å±‚ä¸ºæ ‘ç»“æ„ã€‚ä½¿ç”¨å®ƒå¯ä»¥ä»Setä¸­æå–æœ‰åºçš„åºåˆ—ã€‚ </p><h4 id="ï¼ˆ3ï¼‰listä¸SetåŒºåˆ«"><a href="#ï¼ˆ3ï¼‰listä¸SetåŒºåˆ«" class="headerlink" title="ï¼ˆ3ï¼‰listä¸SetåŒºåˆ«"></a>ï¼ˆ3ï¼‰listä¸SetåŒºåˆ«</h4><p>â‘  List,Setéƒ½æ˜¯ç»§æ‰¿è‡ªCollectionæ¥å£</p><p>â‘¡ Listç‰¹ç‚¹ï¼šå…ƒç´ æœ‰æ”¾å…¥é¡ºåºï¼Œå…ƒç´ å¯é‡å¤ ï¼ŒSetç‰¹ç‚¹ï¼šå…ƒç´ æ— æ”¾å…¥é¡ºåºï¼Œå…ƒç´ ä¸å¯é‡å¤ï¼Œé‡å¤å…ƒç´ ä¼šè¦†ç›–æ‰ï¼Œï¼ˆå…ƒç´ è™½ç„¶æ— æ”¾å…¥é¡ºåºï¼Œä½†æ˜¯å…ƒç´ åœ¨setä¸­çš„ä½ç½®æ˜¯æœ‰è¯¥å…ƒç´ çš„HashCodeå†³å®šçš„ï¼Œå…¶ä½ç½®å…¶å®æ˜¯å›ºå®šçš„ï¼ŒåŠ å…¥Set çš„Objectå¿…é¡»å®šä¹‰equals()æ–¹æ³• ï¼Œå¦å¤–listæ”¯æŒforå¾ªç¯ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡ä¸‹æ ‡æ¥éå†ï¼Œä¹Ÿå¯ä»¥ç”¨è¿­ä»£å™¨ï¼Œä½†æ˜¯setåªèƒ½ç”¨è¿­ä»£ï¼Œå› ä¸ºä»–æ— åºï¼Œæ— æ³•ç”¨ä¸‹æ ‡æ¥å–å¾—æƒ³è¦çš„å€¼ã€‚ï¼‰ </p><p>â‘¢ Setå’ŒListå¯¹æ¯”ï¼š </p><p>Setï¼šæ£€ç´¢å…ƒç´ æ•ˆç‡ä½ä¸‹ï¼Œåˆ é™¤å’Œæ’å…¥æ•ˆç‡é«˜ï¼Œæ’å…¥å’Œåˆ é™¤ä¸ä¼šå¼•èµ·å…ƒç´ ä½ç½®æ”¹å˜ã€‚<br>Listï¼šå’Œæ•°ç»„ç±»ä¼¼ï¼ŒListå¯ä»¥åŠ¨æ€å¢é•¿ï¼ŒæŸ¥æ‰¾å…ƒç´ æ•ˆç‡é«˜ï¼Œæ’å…¥åˆ é™¤å…ƒç´ æ•ˆç‡ä½ï¼Œå› ä¸ºä¼šå¼•èµ·å…¶ä»–å…ƒç´ ä½ç½®æ”¹å˜ã€‚</p><h3 id="38ã€HashMap-å’Œ-Hashtable-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#38ã€HashMap-å’Œ-Hashtable-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="38ã€HashMap å’Œ Hashtable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>38ã€HashMap å’Œ Hashtable æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>HashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼ŒHashTableæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼›<br>HashMapä¸­å…è®¸é”®å’Œå€¼ä¸ºnullï¼ŒHashTableä¸å…è®¸ï¼›<br>HashMapçš„é»˜è®¤å®¹å™¨æ˜¯16ï¼Œä¸º2å€æ‰©å®¹ï¼ŒHashTableé»˜è®¤æ˜¯11ï¼Œä¸º2å€+1æ‰©å®¹ï¼›</p><h3 id="39ã€è¯´ä¸€ä¸‹-HashMap-çš„å®ç°åŸç†ï¼Ÿ"><a href="#39ã€è¯´ä¸€ä¸‹-HashMap-çš„å®ç°åŸç†ï¼Ÿ" class="headerlink" title="39ã€è¯´ä¸€ä¸‹ HashMap çš„å®ç°åŸç†ï¼Ÿ"></a>39ã€è¯´ä¸€ä¸‹ HashMap çš„å®ç°åŸç†ï¼Ÿ</h3><h4 id="ï¼ˆ1ï¼‰ç®€ä»‹"><a href="#ï¼ˆ1ï¼‰ç®€ä»‹" class="headerlink" title="ï¼ˆ1ï¼‰ç®€ä»‹"></a>ï¼ˆ1ï¼‰ç®€ä»‹</h4><p>HashMapåŸºäºmapæ¥å£ï¼Œå…ƒç´ ä»¥é”®å€¼å¯¹æ–¹å¼å­˜å‚¨ï¼Œå…è®¸æœ‰nullå€¼ï¼ŒHashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚</p><h4 id="ï¼ˆ2ï¼‰åŸºæœ¬å±æ€§"><a href="#ï¼ˆ2ï¼‰åŸºæœ¬å±æ€§" class="headerlink" title="ï¼ˆ2ï¼‰åŸºæœ¬å±æ€§"></a>ï¼ˆ2ï¼‰åŸºæœ¬å±æ€§</h4><p>åˆå§‹åŒ–å¤§å°ï¼Œé»˜è®¤16ï¼Œ2å€æ‰©å®¹ï¼›<br>è´Ÿè½½å› å­0.75ï¼›<br>åˆå§‹åŒ–çš„é»˜è®¤æ•°ç»„ï¼›<br>size<br>thresholdã€‚åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒæ•´hashmapå®¹é‡</p><h4 id="ï¼ˆ3ï¼‰HashMapçš„å­˜å‚¨ç»“æ„"><a href="#ï¼ˆ3ï¼‰HashMapçš„å­˜å‚¨ç»“æ„" class="headerlink" title="ï¼ˆ3ï¼‰HashMapçš„å­˜å‚¨ç»“æ„"></a>ï¼ˆ3ï¼‰HashMapçš„å­˜å‚¨ç»“æ„</h4><p>JDK1.7ä¸­é‡‡ç”¨æ•°ç»„+é“¾è¡¨çš„å­˜å‚¨å½¢å¼ã€‚</p><p>HashMapé‡‡å–Entryæ•°ç»„æ¥å­˜å‚¨key-valueï¼Œæ¯ä¸€ä¸ªé”®å€¼å¯¹ç»„æˆäº†ä¸€ä¸ªEntryå®ä½“ï¼ŒEntryç±»æ—¶æœºä¸Šæ˜¯ä¸€ä¸ªå•å‘çš„é“¾è¡¨ç»“æ„ï¼Œå®ƒå…·æœ‰nextæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªEntryå®ä½“ï¼Œä»¥æ­¤æ¥è§£å†³Hashå†²çªçš„é—®é¢˜ã€‚</p><p>HashMapå®ç°ä¸€ä¸ªå†…éƒ¨ç±»Entryï¼Œé‡è¦çš„å±æ€§æœ‰hashã€keyã€valueã€nextã€‚<br><a href="https://imgtu.com/i/jkaUsK"><img src="https://s1.ax1x.com/2022/06/25/jkaUsK.jpg" alt="jkaUsK.jpg"></a></p><p>JDK1.8ä¸­é‡‡ç”¨æ•°æ®+é“¾è¡¨+çº¢é»‘æ ‘çš„å­˜å‚¨å½¢å¼ã€‚å½“é“¾è¡¨é•¿åº¦è¶…è¿‡é˜ˆå€¼ï¼ˆ8ï¼‰æ—¶ï¼Œå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚åœ¨æ€§èƒ½ä¸Šè¿›ä¸€æ­¥å¾—åˆ°æå‡ã€‚<br><a href="https://imgtu.com/i/jkaNM6"><img src="https://s1.ax1x.com/2022/06/25/jkaNM6.jpg" alt="jkaNM6.jpg"></a></p><h3 id="40ã€setæœ‰å“ªäº›å®ç°ç±»ï¼Ÿ"><a href="#40ã€setæœ‰å“ªäº›å®ç°ç±»ï¼Ÿ" class="headerlink" title="40ã€setæœ‰å“ªäº›å®ç°ç±»ï¼Ÿ"></a>40ã€setæœ‰å“ªäº›å®ç°ç±»ï¼Ÿ</h3><h4 id="ï¼ˆ1ï¼‰HashSet"><a href="#ï¼ˆ1ï¼‰HashSet" class="headerlink" title="ï¼ˆ1ï¼‰HashSet"></a>ï¼ˆ1ï¼‰HashSet</h4><p>HashSetæ˜¯setæ¥å£çš„å®ç°ç±»ï¼Œsetä¸‹é¢æœ€ä¸»è¦çš„å®ç°ç±»å°±æ˜¯HashSetï¼ˆä¹Ÿå°±æ˜¯ç”¨çš„æœ€å¤šçš„ï¼‰ï¼Œæ­¤å¤–è¿˜æœ‰LinkedHashSetå’ŒTreeSetã€‚<br>HashSetæ˜¯æ— åºçš„ã€ä¸å¯é‡å¤çš„ã€‚é€šè¿‡å¯¹è±¡çš„hashCodeå’Œequalsæ–¹æ³•ä¿è¯å¯¹è±¡çš„å”¯ä¸€æ€§ã€‚<br>HashSetå†…éƒ¨çš„å­˜å‚¨ç»“æ„æ˜¯å“ˆå¸Œè¡¨ï¼Œæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚</p><h4 id="ï¼ˆ2ï¼‰TreeSet"><a href="#ï¼ˆ2ï¼‰TreeSet" class="headerlink" title="ï¼ˆ2ï¼‰TreeSet"></a>ï¼ˆ2ï¼‰TreeSet</h4><p>TreeSetå¯¹å…ƒç´ è¿›è¡Œæ’åºçš„æ–¹å¼ï¼š</p><p>å…ƒç´ è‡ªèº«å…·å¤‡æ¯”è¾ƒåŠŸèƒ½ï¼Œéœ€è¦å®ç°Comparableæ¥å£ï¼Œå¹¶è¦†ç›–compareToæ–¹æ³•ã€‚<br>å…ƒç´ è‡ªèº«ä¸å…·å¤‡æ¯”è¾ƒåŠŸèƒ½ï¼Œéœ€è¦å®ç°Comparatoræ¥å£ï¼Œå¹¶è¦†ç›–compareæ–¹æ³•ã€‚</p><h4 id="ï¼ˆ3ï¼‰LinkedHashSet"><a href="#ï¼ˆ3ï¼‰LinkedHashSet" class="headerlink" title="ï¼ˆ3ï¼‰LinkedHashSet"></a>ï¼ˆ3ï¼‰LinkedHashSet</h4><p>LinkedHashSetæ˜¯ä¸€ç§æœ‰åºçš„Seté›†åˆï¼Œå³å…¶å…ƒç´ çš„å­˜å…¥å’Œè¾“å‡ºçš„é¡ºåºæ˜¯ç›¸åŒçš„ã€‚</p><h3 id="41ã€è¯´ä¸€ä¸‹-HashSet-çš„å®ç°åŸç†ï¼Ÿ"><a href="#41ã€è¯´ä¸€ä¸‹-HashSet-çš„å®ç°åŸç†ï¼Ÿ" class="headerlink" title="41ã€è¯´ä¸€ä¸‹ HashSet çš„å®ç°åŸç†ï¼Ÿ"></a>41ã€è¯´ä¸€ä¸‹ HashSet çš„å®ç°åŸç†ï¼Ÿ</h3><p>HashSetå®é™…ä¸Šæ˜¯ä¸€ä¸ªHashMapå®ä¾‹ï¼Œæ•°æ®å­˜å‚¨ç»“æ„éƒ½æ˜¯æ•°ç»„+é“¾è¡¨ã€‚</p><p>HashSetæ˜¯åŸºäºHashMapå®ç°çš„ï¼ŒHashSetä¸­çš„å…ƒç´ éƒ½å­˜æ”¾åœ¨HashMapçš„keyä¸Šé¢ï¼Œè€Œvalueéƒ½æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„å¯¹è±¡PRESENTã€‚</p><p>private static final Object PRESENT = new Object();<br>HashSetä¸­addæ–¹æ³•è°ƒç”¨çš„æ˜¯åº•å±‚HashMapä¸­çš„putæ–¹æ³•ï¼Œputæ–¹æ³•è¦åˆ¤æ–­æ’å…¥å€¼æ˜¯å¦å­˜åœ¨ï¼Œè€ŒHashSetçš„addæ–¹æ³•ï¼Œé¦–å…ˆåˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™æ’å…¥ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¸æ’å…¥ï¼Œè¿™æ ·å°±ä¿è¯äº†HashSetä¸­ä¸å­˜åœ¨é‡å¤å€¼ã€‚</p><p> é€šè¿‡å¯¹è±¡çš„hashCodeå’Œequalsæ–¹æ³•ä¿è¯å¯¹è±¡çš„å”¯ä¸€æ€§ã€‚</p><h3 id="42ã€ArrayList-å’Œ-LinkedList-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#42ã€ArrayList-å’Œ-LinkedList-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="42ã€ArrayList å’Œ LinkedList çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>42ã€ArrayList å’Œ LinkedList çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ArrayListæ˜¯åŠ¨æ€æ•°ç»„çš„æ•°æ®ç»“æ„å®ç°ï¼ŒæŸ¥æ‰¾å’Œéå†çš„æ•ˆç‡è¾ƒé«˜ï¼›</p><p>LinkedList æ˜¯åŒå‘é“¾è¡¨çš„æ•°æ®ç»“æ„ï¼Œå¢åŠ å’Œåˆ é™¤çš„æ•ˆç‡è¾ƒé«˜ï¼›</p><h3 id="43ã€å¦‚ä½•å®ç°æ•°ç»„å’Œ-List-ä¹‹é—´çš„è½¬æ¢ï¼Ÿ"><a href="#43ã€å¦‚ä½•å®ç°æ•°ç»„å’Œ-List-ä¹‹é—´çš„è½¬æ¢ï¼Ÿ" class="headerlink" title="43ã€å¦‚ä½•å®ç°æ•°ç»„å’Œ List ä¹‹é—´çš„è½¬æ¢ï¼Ÿ"></a>43ã€å¦‚ä½•å®ç°æ•°ç»„å’Œ List ä¹‹é—´çš„è½¬æ¢ï¼Ÿ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">String[] arr = &#123;<span class="string">&quot;zs&quot;</span>,<span class="string">&quot;ls&quot;</span>,<span class="string">&quot;ww&quot;</span>&#125;;</span><br><span class="line">List&lt;String&gt; list = Arrays.asList(arr);</span><br><span class="line">System.out.println(list);</span><br><span class="line"></span><br><span class="line">ArrayList&lt;String&gt; list1 = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line">list1.add(<span class="string">&quot;å¼ ä¸‰&quot;</span>);</span><br><span class="line">list1.add(<span class="string">&quot;æå››&quot;</span>);</span><br><span class="line">list1.add(<span class="string">&quot;ç‹äº”&quot;</span>);</span><br><span class="line">String[] arr1 = list1.toArray(<span class="keyword">new</span> <span class="title class_">String</span>[list1.size()]);</span><br><span class="line">System.out.println(arr1);</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr1.length; i++)&#123;</span><br><span class="line">    System.out.println(arr1[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="44ã€åœ¨-Queue-ä¸­-poll-å’Œ-remove-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#44ã€åœ¨-Queue-ä¸­-poll-å’Œ-remove-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="44ã€åœ¨ Queue ä¸­ poll()å’Œ remove()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>44ã€åœ¨ Queue ä¸­ poll()å’Œ remove()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><h4 id="ï¼ˆ1ï¼‰offer-å’Œadd-åŒºåˆ«ï¼š"><a href="#ï¼ˆ1ï¼‰offer-å’Œadd-åŒºåˆ«ï¼š" class="headerlink" title="ï¼ˆ1ï¼‰offer()å’Œadd()åŒºåˆ«ï¼š"></a>ï¼ˆ1ï¼‰offer()å’Œadd()åŒºåˆ«ï¼š</h4><p>å¢åŠ æ–°é¡¹æ—¶ï¼Œå¦‚æœé˜Ÿåˆ—æ»¡äº†ï¼Œaddä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œofferè¿”å›falseã€‚</p><h4 id="ï¼ˆ2ï¼‰poll-å’Œremove-åŒºåˆ«ï¼š"><a href="#ï¼ˆ2ï¼‰poll-å’Œremove-åŒºåˆ«ï¼š" class="headerlink" title="ï¼ˆ2ï¼‰poll()å’Œremove()åŒºåˆ«ï¼š"></a>ï¼ˆ2ï¼‰poll()å’Œremove()åŒºåˆ«ï¼š</h4><p>poll()å’Œremove()éƒ½æ˜¯ä»é˜Ÿåˆ—ä¸­åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ŒremoveæŠ›å‡ºå¼‚å¸¸ï¼Œpollè¿”å›nullã€‚</p><h4 id="ï¼ˆ3ï¼‰peek-å’Œelementï¼ˆï¼‰åŒºåˆ«ï¼š"><a href="#ï¼ˆ3ï¼‰peek-å’Œelementï¼ˆï¼‰åŒºåˆ«ï¼š" class="headerlink" title="ï¼ˆ3ï¼‰peek()å’Œelementï¼ˆï¼‰åŒºåˆ«ï¼š"></a>ï¼ˆ3ï¼‰peek()å’Œelementï¼ˆï¼‰åŒºåˆ«ï¼š</h4><p>peek()å’Œelementï¼ˆï¼‰ç”¨äºæŸ¥è¯¢é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ ï¼Œä¸ºç©ºæ—¶elementæŠ›å‡ºå¼‚å¸¸ï¼Œpeekè¿”å›nullã€‚</p><h3 id="45ã€å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„"><a href="#45ã€å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„" class="headerlink" title="45ã€å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„"></a>45ã€å“ªäº›é›†åˆç±»æ˜¯çº¿ç¨‹å®‰å…¨çš„</h3><p>Vectorï¼šå°±æ¯”Arraylistå¤šäº†ä¸ªåŒæ­¥åŒ–æœºåˆ¶ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰ã€‚</p><p>Stackï¼šæ ˆï¼Œä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œç»§æ‰¿äºVectorã€‚</p><p>Hashtableï¼šå°±æ¯”Hashmapå¤šäº†ä¸ªçº¿ç¨‹å®‰å…¨ã€‚</p><p>ConcurrentHashMap:æ˜¯ä¸€ç§é«˜æ•ˆä½†æ˜¯çº¿ç¨‹å®‰å…¨çš„é›†åˆã€‚</p><h3 id="46ã€è¿­ä»£å™¨-Iterator-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#46ã€è¿­ä»£å™¨-Iterator-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="46ã€è¿­ä»£å™¨ Iterator æ˜¯ä»€ä¹ˆï¼Ÿ"></a>46ã€è¿­ä»£å™¨ Iterator æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ä¸ºäº†æ–¹ä¾¿çš„å¤„ç†é›†åˆä¸­çš„å…ƒç´ ,Javaä¸­å‡ºç°äº†ä¸€ä¸ªå¯¹è±¡,è¯¥å¯¹è±¡æä¾›äº†ä¸€äº›æ–¹æ³•ä¸“é—¨å¤„ç†é›†åˆä¸­çš„å…ƒç´ .ä¾‹å¦‚åˆ é™¤å’Œè·å–é›†åˆä¸­çš„å…ƒç´ .è¯¥å¯¹è±¡å°±å«åšè¿­ä»£å™¨(Iterator)ã€‚</p><h3 id="47ã€Iterator-æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"><a href="#47ã€Iterator-æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ" class="headerlink" title="47ã€Iterator æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ"></a>47ã€Iterator æ€ä¹ˆä½¿ç”¨ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ</h3><p>Iterator æ¥å£æºç ä¸­çš„æ–¹æ³•ï¼š</p><ol><li><p>java.lang.Iterable æ¥å£è¢« java.util.Collection æ¥å£ç»§æ‰¿ï¼Œjava.util.Collection æ¥å£çš„ iterator() æ–¹æ³•è¿”å›ä¸€ä¸ª Iterator å¯¹è±¡</p></li><li><p>next() æ–¹æ³•è·å¾—é›†åˆä¸­çš„ä¸‹ä¸€ä¸ªå…ƒç´ </p></li><li><p>hasNext() æ£€æŸ¥é›†åˆä¸­æ˜¯å¦è¿˜æœ‰å…ƒç´ </p></li><li><p>remove() æ–¹æ³•å°†è¿­ä»£å™¨æ–°è¿”å›çš„å…ƒç´ åˆ é™¤</p></li></ol><h3 id="48ã€Iterator-å’Œ-ListIterator-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#48ã€Iterator-å’Œ-ListIterator-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="48ã€Iterator å’Œ ListIterator æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>48ã€Iterator å’Œ ListIterator æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰ListIterator ç»§æ‰¿ Iterator</p><p>ï¼ˆ2ï¼‰ListIterator æ¯” Iteratorå¤šæ–¹æ³•</p><ol><li>add(E e)  å°†æŒ‡å®šçš„å…ƒç´ æ’å…¥åˆ—è¡¨ï¼Œæ’å…¥ä½ç½®ä¸ºè¿­ä»£å™¨å½“å‰ä½ç½®ä¹‹å‰</li><li>set(E e)  è¿­ä»£å™¨è¿”å›çš„æœ€åä¸€ä¸ªå…ƒç´ æ›¿æ¢å‚æ•°e</li><li>hasPrevious()  è¿­ä»£å™¨å½“å‰ä½ç½®ï¼Œåå‘éå†é›†åˆæ˜¯å¦å«æœ‰å…ƒç´ </li><li>previous()  è¿­ä»£å™¨å½“å‰ä½ç½®ï¼Œåå‘éå†é›†åˆï¼Œä¸‹ä¸€ä¸ªå…ƒç´ </li><li>previousIndex()  è¿­ä»£å™¨å½“å‰ä½ç½®ï¼Œåå‘éå†é›†åˆï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡</li><li><p>nextIndex()  è¿­ä»£å™¨å½“å‰ä½ç½®ï¼Œè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ çš„ä¸‹æ ‡<br>ï¼ˆ3ï¼‰ä½¿ç”¨èŒƒå›´ä¸åŒï¼ŒIteratorå¯ä»¥è¿­ä»£æ‰€æœ‰é›†åˆï¼›ListIterator åªèƒ½ç”¨äºListåŠå…¶å­ç±»</p></li><li><p>ListIterator æœ‰ add æ–¹æ³•ï¼Œå¯ä»¥å‘ List ä¸­æ·»åŠ å¯¹è±¡ï¼›Iterator ä¸èƒ½</p></li><li>ListIterator æœ‰ hasPrevious() å’Œ previous() æ–¹æ³•ï¼Œå¯ä»¥å®ç°é€†å‘éå†ï¼›Iteratorä¸å¯ä»¥</li><li>ListIterator æœ‰ nextIndex() å’ŒpreviousIndex() æ–¹æ³•ï¼Œå¯å®šä½å½“å‰ç´¢å¼•çš„ä½ç½®ï¼›Iteratorä¸å¯ä»¥</li><li>ListIterator æœ‰ set()æ–¹æ³•ï¼Œå¯ä»¥å®ç°å¯¹ List çš„ä¿®æ”¹ï¼›Iterator ä»…èƒ½éå†ï¼Œä¸èƒ½ä¿®æ”¹ã€‚<h3 id="49ã€æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ"><a href="#49ã€æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ" class="headerlink" title="49ã€æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ"></a>49ã€æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿ</h3>æˆ‘ä»¬å¾ˆå®¹æ˜“æƒ³åˆ°ç”¨finalå…³é”®å­—è¿›è¡Œä¿®é¥°ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“</li></ol><p>finalå…³é”®å­—å¯ä»¥ä¿®é¥°ç±»ï¼Œæ–¹æ³•ï¼Œæˆå‘˜å˜é‡ï¼Œfinalä¿®é¥°çš„ç±»ä¸èƒ½è¢«ç»§æ‰¿ï¼Œfinalä¿®é¥°çš„æ–¹æ³•ä¸èƒ½è¢«é‡å†™ï¼Œfinalä¿®é¥°çš„æˆå‘˜å˜é‡å¿…é¡»åˆå§‹åŒ–å€¼ï¼Œå¦‚æœè¿™ä¸ªæˆå‘˜å˜é‡æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œè¡¨ç¤ºè¿™ä¸ªå˜é‡çš„å€¼æ˜¯ä¸å¯æ”¹å˜çš„ï¼Œå¦‚æœè¯´è¿™ä¸ªæˆå‘˜å˜é‡æ˜¯å¼•ç”¨ç±»å‹ï¼Œåˆ™è¡¨ç¤ºè¿™ä¸ªå¼•ç”¨çš„åœ°å€å€¼æ˜¯ä¸èƒ½æ”¹å˜çš„ï¼Œä½†æ˜¯è¿™ä¸ªå¼•ç”¨æ‰€æŒ‡å‘çš„å¯¹è±¡é‡Œé¢çš„å†…å®¹è¿˜æ˜¯å¯ä»¥æ”¹å˜çš„ã€‚</p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬æ€ä¹ˆç¡®ä¿ä¸€ä¸ªé›†åˆä¸èƒ½è¢«ä¿®æ”¹ï¼Ÿé¦–å…ˆæˆ‘ä»¬è¦æ¸…æ¥šï¼Œé›†åˆï¼ˆmap,set,listâ€¦ï¼‰éƒ½æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¦‚æœç”¨finalä¿®é¥°çš„è¯ï¼Œé›†åˆé‡Œé¢çš„å†…å®¹è¿˜æ˜¯å¯ä»¥ä¿®æ”¹çš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªå®éªŒï¼š</p><p>å¯ä»¥çœ‹åˆ°ï¼šæˆ‘ä»¬ç”¨finalå…³é”®å­—å®šä¹‰äº†ä¸€ä¸ªmapé›†åˆï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¾€é›†åˆé‡Œé¢ä¼ å€¼ï¼Œç¬¬ä¸€ä¸ªé”®å€¼å¯¹1,1ï¼›æˆ‘ä»¬å†ä¿®æ”¹åï¼Œå¯ä»¥æŠŠé”®ä¸º1çš„å€¼æ”¹ä¸º100ï¼Œè¯´æ˜æˆ‘ä»¬æ˜¯å¯ä»¥ä¿®æ”¹mapé›†åˆçš„å€¼çš„ã€‚</p><p>é‚£æˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšæ‰èƒ½ç¡®ä¿é›†åˆä¸è¢«ä¿®æ”¹å‘¢ï¼Ÿ<br>æˆ‘ä»¬å¯ä»¥é‡‡ç”¨CollectionsåŒ…ä¸‹çš„unmodifiableMapæ–¹æ³•ï¼Œé€šè¿‡è¿™ä¸ªæ–¹æ³•è¿”å›çš„map,æ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„ã€‚ä»–ä¼šæŠ¥ java.lang.UnsupportedOperationExceptioné”™ã€‚</p><p>åŒç†ï¼šCollectionsåŒ…ä¹Ÿæä¾›äº†å¯¹listå’Œseté›†åˆçš„æ–¹æ³•ã€‚</p><p>Collections.unmodifiableList(List)<br>Collections.unmodifiableSet(Set)<br><a href="https://imgtu.com/i/jkabQ0"><img src="https://s1.ax1x.com/2022/06/25/jkabQ0.md.jpg" alt="jkabQ0.md.jpg"></a></p><h3 id="50ã€é˜Ÿåˆ—å’Œæ ˆæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#50ã€é˜Ÿåˆ—å’Œæ ˆæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="50ã€é˜Ÿåˆ—å’Œæ ˆæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>50ã€é˜Ÿåˆ—å’Œæ ˆæ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰é˜Ÿåˆ—å…ˆè¿›å…ˆå‡ºï¼Œæ ˆå…ˆè¿›åå‡ºã€‚</p><p>ï¼ˆ2ï¼‰éå†æ•°æ®é€Ÿåº¦ä¸åŒã€‚</p><p>æ ˆåªèƒ½ä»å¤´éƒ¨å–æ•°æ® ä¹Ÿå°±æœ€å…ˆæ”¾å…¥çš„éœ€è¦éå†æ•´ä¸ªæ ˆæœ€åæ‰èƒ½å–å‡ºæ¥ï¼Œè€Œä¸”åœ¨éå†æ•°æ®çš„æ—¶å€™è¿˜å¾—ä¸ºæ•°æ®å¼€è¾Ÿä¸´æ—¶ç©ºé—´ï¼Œä¿æŒæ•°æ®åœ¨éå†å‰çš„ä¸€è‡´æ€§ï¼›</p><p>é˜Ÿåˆ—åˆ™ä¸åŒï¼Œä»–åŸºäºåœ°å€æŒ‡é’ˆè¿›è¡Œéå†ï¼Œè€Œä¸”å¯ä»¥ä»å¤´æˆ–å°¾éƒ¨å¼€å§‹éå†ï¼Œä½†ä¸èƒ½åŒæ—¶éå†ï¼Œæ— éœ€å¼€è¾Ÿä¸´æ—¶ç©ºé—´ï¼Œå› ä¸ºåœ¨éå†çš„è¿‡ç¨‹ä¸­ä¸å½±åƒæ•°æ®ç»“æ„ï¼Œé€Ÿåº¦è¦å¿«çš„å¤šã€‚</p><h3 id="51ã€Java8å¼€å§‹ConcurrentHashMap-ä¸ºä»€ä¹ˆèˆå¼ƒåˆ†æ®µé”ï¼Ÿ"><a href="#51ã€Java8å¼€å§‹ConcurrentHashMap-ä¸ºä»€ä¹ˆèˆå¼ƒåˆ†æ®µé”ï¼Ÿ" class="headerlink" title="51ã€Java8å¼€å§‹ConcurrentHashMap,ä¸ºä»€ä¹ˆèˆå¼ƒåˆ†æ®µé”ï¼Ÿ"></a>51ã€Java8å¼€å§‹ConcurrentHashMap,ä¸ºä»€ä¹ˆèˆå¼ƒåˆ†æ®µé”ï¼Ÿ</h3><p>ConcurrentHashMapçš„åŸç†æ˜¯å¼•ç”¨äº†å†…éƒ¨çš„ Segment ( ReentrantLock )  åˆ†æ®µé”ï¼Œä¿è¯åœ¨æ“ä½œä¸åŒæ®µ map çš„æ—¶å€™ï¼Œ å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œ æ“ä½œåŒæ®µ map çš„æ—¶å€™ï¼Œè¿›è¡Œé”çš„ç«äº‰å’Œç­‰å¾…ã€‚ä»è€Œè¾¾åˆ°çº¿ç¨‹å®‰å…¨ï¼Œ ä¸”æ•ˆç‡å¤§äº synchronizedã€‚</p><p>ä½†æ˜¯åœ¨ Java 8 ä¹‹åï¼Œ JDK å´å¼ƒç”¨äº†è¿™ä¸ªç­–ç•¥ï¼Œé‡æ–°ä½¿ç”¨äº† synchronized+CASã€‚</p><p>å¼ƒç”¨åŸå› </p><p>é€šè¿‡  JDK çš„æºç å’Œå®˜æ–¹æ–‡æ¡£çœ‹æ¥ï¼Œ ä»–ä»¬è®¤ä¸ºçš„å¼ƒç”¨åˆ†æ®µé”çš„åŸå› ç”±ä»¥ä¸‹å‡ ç‚¹ï¼š</p><p>åŠ å…¥å¤šä¸ªåˆ†æ®µé”æµªè´¹å†…å­˜ç©ºé—´ã€‚<br>ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œ map åœ¨æ”¾å…¥æ—¶ç«äº‰åŒä¸€ä¸ªé”çš„æ¦‚ç‡éå¸¸å°ï¼Œåˆ†æ®µé”åè€Œä¼šé€ æˆæ›´æ–°ç­‰æ“ä½œçš„é•¿æ—¶é—´ç­‰å¾…ã€‚<br>ä¸ºäº†æé«˜ GC çš„æ•ˆç‡<br>æ–°çš„åŒæ­¥æ–¹æ¡ˆ</p><p>æ—¢ç„¶å¼ƒç”¨äº†åˆ†æ®µé”ï¼Œ é‚£ä¹ˆä¸€å®šç”±æ–°çš„çº¿ç¨‹å®‰å…¨æ–¹æ¡ˆï¼Œ æˆ‘ä»¬æ¥çœ‹çœ‹æºç æ˜¯æ€ä¹ˆè§£å†³çº¿ç¨‹å®‰å…¨çš„å‘¢ï¼Ÿï¼ˆæºç ä¿ç•™äº†segment ä»£ç ï¼Œ ä½†å¹¶æ²¡æœ‰ä½¿ç”¨ï¼‰ã€‚</p><h3 id="52ã€ConcurrentHashMap-JDK1-8-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨synchronizedè€Œä¸æ˜¯å¦‚ReentranLockè¿™æ ·çš„å¯é‡å…¥é”ï¼Ÿ"><a href="#52ã€ConcurrentHashMap-JDK1-8-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨synchronizedè€Œä¸æ˜¯å¦‚ReentranLockè¿™æ ·çš„å¯é‡å…¥é”ï¼Ÿ" class="headerlink" title="52ã€ConcurrentHashMap(JDK1.8)ä¸ºä»€ä¹ˆè¦ä½¿ç”¨synchronizedè€Œä¸æ˜¯å¦‚ReentranLockè¿™æ ·çš„å¯é‡å…¥é”ï¼Ÿ"></a>52ã€ConcurrentHashMap(JDK1.8)ä¸ºä»€ä¹ˆè¦ä½¿ç”¨synchronizedè€Œä¸æ˜¯å¦‚ReentranLockè¿™æ ·çš„å¯é‡å…¥é”ï¼Ÿ</h3><p>æˆ‘æƒ³ä»ä¸‹é¢å‡ ä¸ªè§’åº¦è®¨è®ºè¿™ä¸ªé—®é¢˜ï¼š</p><p>ï¼ˆ1ï¼‰é”çš„ç²’åº¦</p><p>é¦–å…ˆé”çš„ç²’åº¦å¹¶æ²¡æœ‰å˜ç²—ï¼Œç”šè‡³å˜å¾—æ›´ç»†äº†ã€‚æ¯å½“æ‰©å®¹ä¸€æ¬¡ï¼ŒConcurrentHashMapçš„å¹¶å‘åº¦å°±æ‰©å¤§ä¸€å€ã€‚</p><p>ï¼ˆ2ï¼‰Hashå†²çª</p><p>JDK1.7ä¸­ï¼ŒConcurrentHashMapä»è¿‡äºŒæ¬¡hashçš„æ–¹å¼ï¼ˆSegment -&gt; HashEntryï¼‰èƒ½å¤Ÿå¿«é€Ÿçš„æ‰¾åˆ°æŸ¥æ‰¾çš„å…ƒç´ ã€‚åœ¨1.8ä¸­é€šè¿‡é“¾è¡¨åŠ çº¢é»‘æ ‘çš„å½¢å¼å¼¥è¡¥äº†putã€getæ—¶çš„æ€§èƒ½å·®è·ã€‚<br>JDK1.8ä¸­ï¼Œåœ¨ConcurrentHashmapè¿›è¡Œæ‰©å®¹æ—¶ï¼Œå…¶ä»–çº¿ç¨‹å¯ä»¥é€šè¿‡æ£€æµ‹æ•°ç»„ä¸­çš„èŠ‚ç‚¹å†³å®šæ˜¯å¦å¯¹è¿™æ¡é“¾è¡¨ï¼ˆçº¢é»‘æ ‘ï¼‰è¿›è¡Œæ‰©å®¹ï¼Œå‡å°äº†æ‰©å®¹çš„ç²’åº¦ï¼Œæé«˜äº†æ‰©å®¹çš„æ•ˆç‡ã€‚</p><p>ä¸‹é¢æ˜¯æˆ‘å¯¹é¢è¯•ä¸­çš„é‚£ä¸ªé—®é¢˜çš„ä¸€ä¸‹çœ‹æ³•ã€‚</p><p>ä¸ºä»€ä¹ˆæ˜¯synchronizedï¼Œè€Œä¸æ˜¯ReentranLock</p><p>ï¼ˆ1ï¼‰å‡å°‘å†…å­˜å¼€é”€</p><p>å‡è®¾ä½¿ç”¨å¯é‡å…¥é”æ¥è·å¾—åŒæ­¥æ”¯æŒï¼Œé‚£ä¹ˆæ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦é€šè¿‡ç»§æ‰¿AQSæ¥è·å¾—åŒæ­¥æ”¯æŒã€‚ä½†å¹¶ä¸æ˜¯æ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦è·å¾—åŒæ­¥æ”¯æŒçš„ï¼Œåªæœ‰é“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼ˆçº¢é»‘æ ‘çš„æ ¹èŠ‚ç‚¹ï¼‰éœ€è¦åŒæ­¥ï¼Œè¿™æ— ç–‘å¸¦æ¥äº†å·¨å¤§å†…å­˜æµªè´¹ã€‚</p><p>ï¼ˆ2ï¼‰è·å¾—JVMçš„æ”¯æŒ</p><p>å¯é‡å…¥é”æ¯•ç«Ÿæ˜¯APIè¿™ä¸ªçº§åˆ«çš„ï¼Œåç»­çš„æ€§èƒ½ä¼˜åŒ–ç©ºé—´å¾ˆå°ã€‚<br>synchronizedåˆ™æ˜¯JVMç›´æ¥æ”¯æŒçš„ï¼ŒJVMèƒ½å¤Ÿåœ¨è¿è¡Œæ—¶ä½œå‡ºç›¸åº”çš„ä¼˜åŒ–æªæ–½ï¼šé”ç²—åŒ–ã€é”æ¶ˆé™¤ã€é”è‡ªæ—‹ç­‰ç­‰ã€‚è¿™å°±ä½¿å¾—synchronizedèƒ½å¤Ÿéšç€JDKç‰ˆæœ¬çš„å‡çº§è€Œä¸æ”¹åŠ¨ä»£ç çš„å‰æä¸‹è·å¾—æ€§èƒ½ä¸Šçš„æå‡ã€‚</p><h3 id="53ã€concurrentHashMapå’ŒHashTableæœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#53ã€concurrentHashMapå’ŒHashTableæœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="53ã€concurrentHashMapå’ŒHashTableæœ‰ä»€ä¹ˆåŒºåˆ«"></a>53ã€concurrentHashMapå’ŒHashTableæœ‰ä»€ä¹ˆåŒºåˆ«</h3><p>concurrentHashMapèåˆäº†hashmapå’Œhashtableçš„ä¼˜åŠ¿ï¼Œhashmapæ˜¯ä¸åŒæ­¥çš„ï¼Œä½†æ˜¯å•çº¿ç¨‹æƒ…å†µä¸‹æ•ˆç‡é«˜ï¼Œhashtableæ˜¯åŒæ­¥çš„åŒæ­¥æƒ…å†µä¸‹ä¿è¯ç¨‹åºæ‰§è¡Œçš„æ­£ç¡®æ€§ã€‚</p><p>ä½†hashtableæ¯æ¬¡åŒæ­¥æ‰§è¡Œçš„æ—¶å€™éƒ½è¦é”ä½æ•´ä¸ªç»“æ„ï¼Œå¦‚ä¸‹å›¾ï¼š<br><a href="https://imgtu.com/i/jkdpWR"><img src="https://s1.ax1x.com/2022/06/25/jkdpWR.md.jpg" alt="jkdpWR.md.jpg"></a></p><p>concurrentHashMapé”çš„æ–¹å¼æ˜¯ç»†ç²’åº¦çš„ã€‚concurrentHashMapå°†hashåˆ†ä¸º16ä¸ªæ¡¶ï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œè¯¸å¦‚getã€putã€removeç­‰å¸¸ç”¨æ“ä½œåªé”ä½å½“å‰éœ€è¦ç”¨åˆ°çš„æ¡¶ã€‚</p><p>concurrentHashMapçš„è¯»å–å¹¶å‘ï¼Œå› ä¸ºè¯»å–çš„å¤§å¤šæ•°æ—¶å€™éƒ½æ²¡æœ‰é”å®šï¼Œæ‰€ä»¥è¯»å–æ“ä½œå‡ ä¹æ˜¯å®Œå…¨çš„å¹¶å‘æ“ä½œï¼Œåªæ˜¯åœ¨æ±‚sizeæ—¶æ‰éœ€è¦é”å®šæ•´ä¸ªhashã€‚</p><p>è€Œä¸”åœ¨è¿­ä»£æ—¶ï¼ŒconcurrentHashMapä½¿ç”¨äº†ä¸åŒäºä¼ ç»Ÿé›†åˆçš„å¿«é€Ÿå¤±è´¥è¿­ä»£å™¨çš„å¦ä¸€ç§è¿­ä»£æ–¹å¼ï¼Œå¼±ä¸€è‡´è¿­ä»£å™¨ã€‚åœ¨è¿™ç§æ–¹å¼ä¸­ï¼Œå½“iteratorè¢«åˆ›å»ºåé›†åˆå†å‘ç”Ÿæ”¹å˜å°±ä¸ä¼šæŠ›å‡ºConcurrentModificationExceptionï¼Œå–è€Œä»£ä¹‹çš„æ˜¯åœ¨æ”¹å˜æ—¶newæ–°çš„æ•°æ®è€Œä¸æ˜¯å½±å“åŸæ¥çš„æ•°æ®ï¼Œiteratorå®Œæˆåå†è®²å¤´æŒ‡é’ˆæ›¿ä»£ä¸ºæ–°çš„æ•°æ®ï¼Œè¿™æ ·iteratoræ—¶ä½¿ç”¨çš„æ˜¯åŸæ¥çš„æ•°æ®ã€‚</p><h3 id="54ã€HashMapå’ŒHashSetçš„åŒºåˆ«"><a href="#54ã€HashMapå’ŒHashSetçš„åŒºåˆ«" class="headerlink" title="54ã€HashMapå’ŒHashSetçš„åŒºåˆ«"></a>54ã€HashMapå’ŒHashSetçš„åŒºåˆ«</h3><p>ï¼ˆ1ï¼‰å…ˆäº†è§£ä¸€ä¸‹HashCode</p><p>Javaä¸­çš„é›†åˆæœ‰ä¸¤ç±»ï¼Œä¸€ç±»æ˜¯Listï¼Œä¸€ç±»æ˜¯Setã€‚</p><p>Listï¼šå…ƒç´ æœ‰åºï¼Œå¯ä»¥é‡å¤ï¼›</p><p>Setï¼šå…ƒç´ æ— åºï¼Œä¸å¯é‡å¤ï¼›</p><p>è¦æƒ³ä¿è¯å…ƒç´ çš„ä¸é‡å¤ï¼Œæ‹¿ä»€ä¹ˆæ¥åˆ¤æ–­å‘¢ï¼Ÿè¿™å°±æ˜¯Object.equalsæ–¹æ³•äº†ã€‚å¦‚æœå…ƒç´ æœ‰å¾ˆå¤šï¼Œå¢åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå°±è¦åˆ¤æ–­næ¬¡å—ï¼Ÿ</p><p>æ˜¾ç„¶ä¸ç°å®ï¼Œäºæ˜¯ï¼ŒJavaé‡‡ç”¨äº†å“ˆå¸Œè¡¨çš„åŸç†ã€‚å“ˆå¸Œç®—æ³•ä¹Ÿç§°ä¸ºæ•£åˆ—ç®—æ³•ï¼Œæ˜¯å°†æ•°æ®ä¾ç‰¹å®šç®—æ³•ç›´æ¥æŒ‡å®šåˆ°ä¸€æ ¹åœ°å€ä¸Šï¼Œåˆå­¦è€…å¯ä»¥ç®€å•çš„ç†è§£ä¸ºï¼ŒHashCodeæ–¹æ³•è¿”å›çš„å°±æ˜¯å¯¹è±¡å­˜å‚¨çš„ç‰©ç†ä½ç½®ï¼ˆå®é™…ä¸Šå¹¶ä¸æ˜¯ï¼‰ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œå½“é›†åˆæ·»åŠ æ–°çš„å…ƒç´ æ—¶ï¼Œå…ˆè°ƒç”¨è¿™ä¸ªå…ƒç´ çš„hashcode()æ–¹æ³•ï¼Œå°±ä¸€ä¸‹å­èƒ½å®šä½åˆ°ä»–åº”è¯¥æ”¾ç½®çš„ç‰©ç†ä½ç½®ä¸Šã€‚å¦‚æœè¿™ä¸ªä½ç½®ä¸Šæ²¡æœ‰å…ƒç´ ï¼Œä»–å°±å¯ä»¥ç›´æ¥å­˜å‚¨åœ¨è¿™ä¸ªä½ç½®ä¸Šï¼Œä¸ç”¨å†è¿›è¡Œä»»ä½•æ¯”è¾ƒäº†ã€‚å¦‚æœè¿™ä¸ªä½ç½®ä¸Šæœ‰å…ƒç´ ï¼Œå°±è°ƒç”¨å®ƒçš„equalsæ–¹æ³•ä¸æ–°å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œæƒ³åŒçš„è¯å°±ä¸å­˜äº†ï¼Œä¸ç›¸åŒå°±æ•£åˆ—å…¶å®ƒçš„åœ°å€ã€‚æ‰€ä»¥è¿™é‡Œå­˜åœ¨ä¸€ä¸ªå†²çªè§£å†³çš„é—®é¢˜ã€‚è¿™æ ·ä¸€æ¥å®é™…ä¸Šè°ƒç”¨equalsæ–¹æ³•çš„æ¬¡æ•°å°±å¤§å¤§é™ä½äº†ï¼Œå‡ ä¹åªéœ€è¦ä¸€ä¸¤æ¬¡ã€‚</p><p>ç®€è€Œè¨€ä¹‹ï¼Œåœ¨é›†åˆæŸ¥æ‰¾æ—¶ï¼Œhashcodeèƒ½å¤§å¤§é™ä½å¯¹è±¡æ¯”è¾ƒæ¬¡æ•°ï¼Œæé«˜æŸ¥æ‰¾æ•ˆç‡ã€‚</p><p>Javaå¯¹è±¡çš„equalsæ–¹æ³•å’ŒhashCodeæ–¹æ³•æ—¶è¿™æ ·è§„å®šçš„ï¼š</p><p>ç›¸ç­‰çš„å¯¹è±¡å°±å¿…é¡»å…·æœ‰ç›¸ç­‰çš„hashcodeã€‚</p><p>å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashcodeç›¸åŒï¼Œä»–ä»¬å¹¶ä¸ä¸€å®šç›¸åŒã€‚<br>å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„hashcodeç›¸åŒï¼Œä»–ä»¬å¹¶ä¸ä¸€å®šç›¸åŒã€‚<br>å¦‚æœä¸¤ä¸ªJavaå¯¹è±¡Aå’ŒBï¼ŒAå’ŒBä¸ç›¸ç­‰ï¼Œä½†æ˜¯Aå’ŒBçš„å“ˆå¸Œç ç›¸ç­‰ï¼Œå°†Aå’ŒBéƒ½å­˜å…¥HashMapæ—¶ä¼šå‘ç”Ÿå“ˆå¸Œå†²çªï¼Œä¹Ÿå°±æ˜¯Aå’ŒBå­˜æ”¾åœ¨HashMapå†…éƒ¨æ•°ç»„çš„ä½ç½®ç´¢å¼•ç›¸åŒï¼Œè¿™æ—¶HashMapä¼šåœ¨è¯¥ä½ç½®å»ºç«‹ä¸€ä¸ªé“¾æ¥è¡¨ï¼Œå°†Aå’ŒBä¸²èµ·æ¥æ”¾åœ¨è¯¥ä½ç½®ï¼Œæ˜¾ç„¶ï¼Œè¯¥æƒ…å†µä¸è¿åHashMapçš„ä½¿ç”¨è§„åˆ™ï¼Œæ˜¯å…è®¸çš„ã€‚å½“ç„¶ï¼Œå“ˆå¸Œå†²çªè¶Šå°‘è¶Šå¥½ï¼Œå°½é‡é‡‡ç”¨å¥½çš„å“ˆå¸Œç®—æ³•é¿å…å“ˆå¸Œå†²çªã€‚</p><p>equals()ç›¸ç­‰çš„ä¸¤ä¸ªå¯¹è±¡ï¼Œhashcode()ä¸€å®šç›¸ç­‰ï¼›equals()ä¸ç›¸ç­‰çš„ä¸¤ä¸ªå¯¹è±¡ï¼Œå´å¹¶ä¸èƒ½è¯æ˜ä»–ä»¬çš„hashcode()ä¸ç›¸ç­‰ã€‚</p><p>ï¼ˆ2ï¼‰HashMapå’ŒHashSetçš„åŒºåˆ«</p><p><a href="https://imgtu.com/i/jVQ1ER"><img src="https://s1.ax1x.com/2022/06/27/jVQ1ER.jpg" alt="jVQ1ER.jpg"></a></p><h3 id="55ã€è¯·è°ˆè°ˆ-ReadWriteLock-å’Œ-StampedLock"><a href="#55ã€è¯·è°ˆè°ˆ-ReadWriteLock-å’Œ-StampedLock" class="headerlink" title="55ã€è¯·è°ˆè°ˆ ReadWriteLock å’Œ StampedLock"></a>55ã€è¯·è°ˆè°ˆ ReadWriteLock å’Œ StampedLock</h3><h4 id="ReadWriteLockåŒ…æ‹¬ä¸¤ç§å­é”"><a href="#ReadWriteLockåŒ…æ‹¬ä¸¤ç§å­é”" class="headerlink" title="ReadWriteLockåŒ…æ‹¬ä¸¤ç§å­é”"></a>ReadWriteLockåŒ…æ‹¬ä¸¤ç§å­é”</h4><p>ï¼ˆ1ï¼‰ReadWriteLock</p><p>ReadWriteLock å¯ä»¥å®ç°å¤šä¸ªè¯»é”åŒæ—¶è¿›è¡Œï¼Œä½†æ˜¯è¯»ä¸å†™å’Œå†™äºå†™äº’æ–¥ï¼Œåªèƒ½æœ‰ä¸€ä¸ªå†™é”çº¿ç¨‹åœ¨è¿›è¡Œã€‚</p><p>ï¼ˆ2ï¼‰StampedLock</p><p>StampedLockæ˜¯Jdkåœ¨1.8æä¾›çš„ä¸€ç§è¯»å†™é”ï¼Œç›¸æ¯”è¾ƒReentrantReadWriteLockæ€§èƒ½æ›´å¥½ï¼Œå› ä¸ºReentrantReadWriteLockåœ¨è¯»å†™ä¹‹é—´æ˜¯äº’æ–¥çš„ï¼Œä½¿ç”¨çš„æ˜¯ä¸€ç§æ‚²è§‚ç­–ç•¥ï¼Œåœ¨è¯»çº¿ç¨‹ç‰¹åˆ«å¤šçš„æƒ…å†µä¸‹ï¼Œä¼šé€ æˆå†™çº¿ç¨‹å¤„äºé¥¥é¥¿çŠ¶æ€ï¼Œè™½ç„¶å¯ä»¥åœ¨åˆå§‹åŒ–çš„æ—¶å€™è®¾ç½®ä¸ºtrueæŒ‡å®šä¸ºå…¬å¹³ï¼Œä½†æ˜¯ååé‡åˆä¸‹å»äº†ï¼Œè€ŒStampedLockæ˜¯æä¾›äº†ä¸€ç§ä¹è§‚ç­–ç•¥ï¼Œæ›´å¥½çš„å®ç°è¯»å†™åˆ†ç¦»ï¼Œå¹¶ä¸”ååé‡ä¸ä¼šä¸‹é™ã€‚</p><h4 id="StampedLockåŒ…æ‹¬ä¸‰ç§é”ï¼š"><a href="#StampedLockåŒ…æ‹¬ä¸‰ç§é”ï¼š" class="headerlink" title="StampedLockåŒ…æ‹¬ä¸‰ç§é”ï¼š"></a>StampedLockåŒ…æ‹¬ä¸‰ç§é”ï¼š</h4><p>ï¼ˆ1ï¼‰å†™é”writeLockï¼š</p><p>writeLockæ˜¯ä¸€ä¸ªç‹¬å é”å†™é”ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è·å¾—è¯¥é”åï¼Œå…¶ä»–è¯·æ±‚è¯»é”æˆ–è€…å†™é”çš„çº¿ç¨‹é˜»å¡ï¼Œ è·å–æˆåŠŸåï¼Œä¼šè¿”å›ä¸€ä¸ªstampï¼ˆå‡­æ®ï¼‰å˜é‡æ¥è¡¨ç¤ºè¯¥é”çš„ç‰ˆæœ¬ï¼Œåœ¨é‡Šæ”¾é”æ—¶è°ƒç”¨unlockWriteæ–¹æ³•ä¼ é€’stampå‚æ•°ã€‚æä¾›äº†éé˜»å¡å¼è·å–é”tryWriteLockã€‚</p><p>ï¼ˆ2ï¼‰æ‚²è§‚è¯»é”readLockï¼š</p><p>readLockæ˜¯ä¸€ä¸ªå…±äº«è¯»é”ï¼Œåœ¨æ²¡æœ‰çº¿ç¨‹è·å–å†™é”æƒ…å†µä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥è·å–è¯¥é”ã€‚å¦‚æœæœ‰å†™é”è·å–ï¼Œé‚£ä¹ˆå…¶ä»–çº¿ç¨‹è¯·æ±‚è¯»é”ä¼šè¢«é˜»å¡ã€‚æ‚²è§‚è¯»é”ä¼šè®¤ä¸ºå…¶ä»–çº¿ç¨‹å¯èƒ½è¦å¯¹è‡ªå·±æ“ä½œçš„æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œæ‰€ä»¥éœ€è¦å…ˆå¯¹æ•°æ®è¿›è¡ŒåŠ é”ï¼Œè¿™æ˜¯åœ¨è¯»å°‘å†™å¤šçš„æƒ…å†µä¸‹è€ƒè™‘çš„ã€‚è¯·æ±‚è¯¥é”æˆåŠŸåä¼šè¿”å›ä¸€ä¸ªstampå€¼ï¼Œåœ¨é‡Šæ”¾é”æ—¶è°ƒç”¨unlockReadæ–¹æ³•ä¼ é€’stampå‚æ•°ã€‚æä¾›äº†éé˜»å¡å¼è·å–é”æ–¹æ³•tryWriteLockã€‚</p><p>ï¼ˆ3ï¼‰ä¹è§‚è¯»é”tryOptimisticReadï¼š</p><p>tryOptimisticReadç›¸å¯¹æ¯”æ‚²è§‚è¯»é”ï¼Œåœ¨æ“ä½œæ•°æ®å‰å¹¶æ²¡æœ‰é€šè¿‡CASè®¾ç½®é”çš„çŠ¶æ€ï¼Œå¦‚æœæ²¡æœ‰çº¿ç¨‹è·å–å†™é”ï¼Œåˆ™è¿”å›ä¸€ä¸ªé0çš„stampå˜é‡ï¼Œè·å–è¯¥stampååœ¨æ“ä½œæ•°æ®å‰è¿˜éœ€è¦è°ƒç”¨validateæ–¹æ³•æ¥åˆ¤æ–­æœŸé—´æ˜¯å¦æœ‰çº¿ç¨‹è·å–äº†å†™é”ï¼Œå¦‚æœæ˜¯è¿”å›å€¼ä¸º0åˆ™æœ‰çº¿ç¨‹è·å–å†™é”ï¼Œå¦‚æœä¸æ˜¯0åˆ™å¯ä»¥ä½¿ç”¨stampå˜é‡çš„é”æ¥æ“ä½œæ•°æ®ã€‚ç”±äºtryOptimisticReadå¹¶æ²¡æœ‰ä¿®æ”¹é”çŠ¶æ€ï¼Œæ‰€ä»¥ä¸éœ€è¦é‡Šæ”¾é”ã€‚è¿™æ˜¯è¯»å¤šå†™å°‘çš„æƒ…å†µä¸‹è€ƒè™‘çš„ï¼Œä¸æ¶‰åŠCASæ“ä½œï¼Œæ‰€ä»¥æ•ˆç‡è¾ƒé«˜ï¼Œåœ¨ä¿è¯æ•°æ®ä¸€è‡´æ€§ä¸Šéœ€è¦å¤åˆ¶ä¸€ä»½è¦æ“ä½œçš„å˜é‡åˆ°æ–¹æ³•æ ˆä¸­ï¼Œå¹¶ä¸”åœ¨æ“ä½œæ•°æ®æ—¶å¯èƒ½å…¶ä»–å†™çº¿ç¨‹å·²ç»ä¿®æ”¹äº†æ•°æ®ï¼Œè€Œæˆ‘ä»¬æ“ä½œçš„æ˜¯æ–¹æ³•æ ˆé‡Œé¢çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå¿«ç…§ï¼Œæ‰€ä»¥æœ€å¤šè¿”å›çš„ä¸æ˜¯æœ€æ–°çš„æ•°æ®ï¼Œä½†æ˜¯ä¸€è‡´æ€§å¾—åˆ°äº†ä¿è¯ã€‚</p><h3 id="56ã€çº¿ç¨‹çš„run-å’Œstart-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#56ã€çº¿ç¨‹çš„run-å’Œstart-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="56ã€çº¿ç¨‹çš„run()å’Œstart()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>56ã€çº¿ç¨‹çš„run()å’Œstart()æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>æ¯ä¸ªçº¿ç¨‹éƒ½æ˜¯é€šè¿‡æŸä¸ªç‰¹å®šThreadå¯¹è±¡æ‰€å¯¹åº”çš„æ–¹æ³•run()æ¥å®Œæˆå…¶æ“ä½œçš„ï¼Œrun()æ–¹æ³•ç§°ä¸ºçº¿ç¨‹ä½“ã€‚é€šè¿‡è°ƒç”¨Threadç±»çš„start()æ–¹æ³•æ¥å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ã€‚</p><p>start() æ–¹æ³•ç”¨äºå¯åŠ¨çº¿ç¨‹ï¼Œrun() æ–¹æ³•ç”¨äºæ‰§è¡Œçº¿ç¨‹çš„è¿è¡Œæ—¶ä»£ç ã€‚run() å¯ä»¥é‡å¤è°ƒç”¨ï¼Œè€Œ start() åªèƒ½è°ƒç”¨ä¸€æ¬¡ã€‚</p><p>start()æ–¹æ³•æ¥å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼ŒçœŸæ­£å®ç°äº†å¤šçº¿ç¨‹è¿è¡Œã€‚è°ƒç”¨start()æ–¹æ³•æ— éœ€ç­‰å¾…runæ–¹æ³•ä½“ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå¯ä»¥ç›´æ¥ç»§ç»­æ‰§è¡Œå…¶ä»–çš„ä»£ç ï¼› æ­¤æ—¶çº¿ç¨‹æ˜¯å¤„äºå°±ç»ªçŠ¶æ€ï¼Œå¹¶æ²¡æœ‰è¿è¡Œã€‚ ç„¶åé€šè¿‡æ­¤Threadç±»è°ƒç”¨æ–¹æ³•run()æ¥å®Œæˆå…¶è¿è¡ŒçŠ¶æ€ï¼Œ run()æ–¹æ³•è¿è¡Œç»“æŸï¼Œ æ­¤çº¿ç¨‹ç»ˆæ­¢ã€‚ç„¶åCPUå†è°ƒåº¦å…¶å®ƒçº¿ç¨‹ã€‚</p><p>run()æ–¹æ³•æ˜¯åœ¨æœ¬çº¿ç¨‹é‡Œçš„ï¼Œåªæ˜¯çº¿ç¨‹é‡Œçš„ä¸€ä¸ªå‡½æ•°ï¼Œè€Œä¸æ˜¯å¤šçº¿ç¨‹çš„ã€‚ å¦‚æœç›´æ¥è°ƒç”¨run()ï¼Œå…¶å®å°±ç›¸å½“äºæ˜¯è°ƒç”¨äº†ä¸€ä¸ªæ™®é€šå‡½æ•°è€Œå·²ï¼Œç›´æ¥å¾…ç”¨run()æ–¹æ³•å¿…é¡»ç­‰å¾…run()æ–¹æ³•æ‰§è¡Œå®Œæ¯•æ‰èƒ½æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼Œæ‰€ä»¥æ‰§è¡Œè·¯å¾„è¿˜æ˜¯åªæœ‰ä¸€æ¡ï¼Œæ ¹æœ¬å°±æ²¡æœ‰çº¿ç¨‹çš„ç‰¹å¾ï¼Œæ‰€ä»¥åœ¨å¤šçº¿ç¨‹æ‰§è¡Œæ—¶è¦ä½¿ç”¨start()æ–¹æ³•è€Œä¸æ˜¯run()æ–¹æ³•ã€‚</p><h3 id="57ã€ä¸ºä»€ä¹ˆæˆ‘ä»¬è°ƒç”¨-start-æ–¹æ³•æ—¶ä¼šæ‰§è¡Œ-run-æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥è°ƒç”¨-run-æ–¹æ³•ï¼Ÿ"><a href="#57ã€ä¸ºä»€ä¹ˆæˆ‘ä»¬è°ƒç”¨-start-æ–¹æ³•æ—¶ä¼šæ‰§è¡Œ-run-æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥è°ƒç”¨-run-æ–¹æ³•ï¼Ÿ" class="headerlink" title="57ã€ä¸ºä»€ä¹ˆæˆ‘ä»¬è°ƒç”¨ start() æ–¹æ³•æ—¶ä¼šæ‰§è¡Œ run() æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥è°ƒç”¨ run() æ–¹æ³•ï¼Ÿ"></a>57ã€ä¸ºä»€ä¹ˆæˆ‘ä»¬è°ƒç”¨ start() æ–¹æ³•æ—¶ä¼šæ‰§è¡Œ run() æ–¹æ³•ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½ç›´æ¥è°ƒç”¨ run() æ–¹æ³•ï¼Ÿ</h3><p>è¿™æ˜¯å¦ä¸€ä¸ªéå¸¸ç»å…¸çš„ java å¤šçº¿ç¨‹é¢è¯•é—®é¢˜ï¼Œè€Œä¸”åœ¨é¢è¯•ä¸­ä¼šç»å¸¸è¢«é—®åˆ°ã€‚å¾ˆç®€å•ï¼Œä½†æ˜¯å¾ˆå¤šäººéƒ½ä¼šç­”ä¸ä¸Šæ¥ï¼</p><p>new ä¸€ä¸ª Threadï¼Œçº¿ç¨‹è¿›å…¥äº†æ–°å»ºçŠ¶æ€ã€‚è°ƒç”¨ start() æ–¹æ³•ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹å¹¶ä½¿çº¿ç¨‹è¿›å…¥äº†å°±ç»ªçŠ¶æ€ï¼Œå½“åˆ†é…åˆ°æ—¶é—´ç‰‡åå°±å¯ä»¥å¼€å§‹è¿è¡Œäº†ã€‚ start() ä¼šæ‰§è¡Œçº¿ç¨‹çš„ç›¸åº”å‡†å¤‡å·¥ä½œï¼Œç„¶åè‡ªåŠ¨æ‰§è¡Œ run() æ–¹æ³•çš„å†…å®¹ï¼Œè¿™æ˜¯çœŸæ­£çš„å¤šçº¿ç¨‹å·¥ä½œã€‚</p><p>è€Œç›´æ¥æ‰§è¡Œ run() æ–¹æ³•ï¼Œä¼šæŠŠ run æ–¹æ³•å½“æˆä¸€ä¸ª main çº¿ç¨‹ä¸‹çš„æ™®é€šæ–¹æ³•å»æ‰§è¡Œï¼Œå¹¶ä¸ä¼šåœ¨æŸä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œå®ƒï¼Œæ‰€ä»¥è¿™å¹¶ä¸æ˜¯å¤šçº¿ç¨‹å·¥ä½œã€‚</p><p>æ€»ç»“ï¼š è°ƒç”¨ start æ–¹æ³•æ–¹å¯å¯åŠ¨çº¿ç¨‹å¹¶ä½¿çº¿ç¨‹è¿›å…¥å°±ç»ªçŠ¶æ€ï¼Œè€Œ run æ–¹æ³•åªæ˜¯ thread çš„ä¸€ä¸ªæ™®é€šæ–¹æ³•è°ƒç”¨ï¼Œè¿˜æ˜¯åœ¨ä¸»çº¿ç¨‹é‡Œæ‰§è¡Œã€‚</p><h3 id="58ã€Synchronized-ç”¨è¿‡å—ï¼Œå…¶åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#58ã€Synchronized-ç”¨è¿‡å—ï¼Œå…¶åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="58ã€Synchronized ç”¨è¿‡å—ï¼Œå…¶åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>58ã€Synchronized ç”¨è¿‡å—ï¼Œå…¶åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ï¼ˆ1ï¼‰å¯é‡å…¥æ€§</p><p>synchronizedçš„é”å¯¹è±¡ä¸­æœ‰ä¸€ä¸ªè®¡æ•°å™¨ï¼ˆrecursionså˜é‡ï¼‰ä¼šè®°å½•çº¿ç¨‹è·å¾—å‡ æ¬¡é”ï¼›</p><p>å¯é‡å…¥çš„å¥½å¤„ï¼š<br>å¯ä»¥é¿å…æ­»é”ï¼›<br>å¯ä»¥è®©æˆ‘ä»¬æ›´å¥½çš„å°è£…ä»£ç ï¼›<br>synchronizedæ˜¯å¯é‡å…¥é”ï¼Œæ¯éƒ¨é”å¯¹è±¡ä¼šæœ‰ä¸€ä¸ªè®¡æ•°å™¨è®°å½•çº¿ç¨‹è·å–å‡ æ¬¡é”ï¼Œåœ¨æ‰§è¡Œå®ŒåŒæ­¥ä»£ç å—æ—¶ï¼Œè®¡æ•°å™¨çš„æ•°é‡ä¼š-1ï¼Œç›´åˆ°è®¡æ•°å™¨çš„æ•°é‡ä¸º0ï¼Œå°±é‡Šæ”¾è¿™ä¸ªé”ã€‚</p><p>ï¼ˆ2ï¼‰ä¸å¯ä¸­æ–­æ€§</p><p>ä¸€ä¸ªçº¿ç¨‹è·å¾—é”åï¼Œå¦ä¸€ä¸ªçº¿ç¨‹æƒ³è¦è·å¾—é”ï¼Œå¿…é¡»å¤„äºé˜»å¡æˆ–ç­‰å¾…çŠ¶æ€ï¼Œå¦‚æœç¬¬ä¸€ä¸ªçº¿ç¨‹ä¸é‡Šæ”¾é”ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹ä¼šä¸€ç›´é˜»å¡æˆ–ç­‰å¾…ï¼Œä¸å¯è¢«ä¸­æ–­ï¼›<br>synchronized å±äºä¸å¯è¢«ä¸­æ–­ï¼›<br>Lock lockæ–¹æ³•æ˜¯ä¸å¯ä¸­æ–­çš„ï¼›<br>Lock tryLockæ–¹æ³•æ˜¯å¯ä¸­æ–­çš„ï¼›</p><h3 id="59ã€JVM-å¯¹-Java-çš„åŸç”Ÿé”åšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿ"><a href="#59ã€JVM-å¯¹-Java-çš„åŸç”Ÿé”åšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="59ã€JVM å¯¹ Java çš„åŸç”Ÿé”åšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿ"></a>59ã€JVM å¯¹ Java çš„åŸç”Ÿé”åšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰è‡ªæ—‹é”</p><p>åœ¨çº¿ç¨‹è¿›è¡Œé˜»å¡çš„æ—¶å€™ï¼Œå…ˆè®©çº¿ç¨‹è‡ªæ—‹ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œå¯èƒ½è¿™æ®µæ—¶é—´å…¶å®ƒçº¿ç¨‹å·²ç»è§£é”ï¼Œè¿™æ—¶å°±æ— éœ€è®©çº¿ç¨‹å†è¿›è¡Œé˜»å¡æ“ä½œäº†ã€‚</p><p>è‡ªæ—‹é»˜è®¤æ¬¡æ•°æ˜¯10æ¬¡ã€‚</p><p>ï¼ˆ2ï¼‰è‡ªé€‚åº”è‡ªæ—‹é”</p><p>è‡ªæ—‹é”çš„å‡çº§ï¼Œè‡ªæ—‹çš„æ¬¡æ•°ä¸å†å›ºå®šï¼Œç”±å‰ä¸€æ¬¡è‡ªæ—‹æ¬¡æ•°å’Œé”çš„æ‹¥æœ‰è€…çš„çŠ¶æ€å†³å®šã€‚</p><p>ï¼ˆ3ï¼‰é”æ¶ˆé™¤</p><p>åœ¨åŠ¨æ€ç¼–è¯‘åŒæ­¥ä»£ç å—çš„æ—¶å€™ï¼ŒJITç¼–è¯‘å™¨å€ŸåŠ©é€ƒé€¸åˆ†ææŠ€æœ¯æ¥åˆ¤æ–­é”å¯¹è±¡æ˜¯å¦åªè¢«ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œè€Œæ²¡æœ‰å…¶ä»–çº¿ç¨‹ï¼Œè¿™æ—¶å°±å¯ä»¥å–æ¶ˆé”äº†ã€‚</p><p>4ã€é”ç²—åŒ–</p><p>å½“JITç¼–è¯‘å™¨å‘ç°ä¸€ç³»åˆ—çš„æ“ä½œéƒ½å¯¹åŒä¸€ä¸ªå¯¹è±¡åå¤åŠ é”è§£é”ï¼Œç”šè‡³åŠ é”æ“ä½œå‡ºç°åœ¨å¾ªç¯ä¸­ï¼Œæ­¤æ—¶ä¼šå°†åŠ é”åŒæ­¥çš„èŒƒå›´ç²—åŒ–åˆ°æ•´ä¸ªæ“ä½œç³»åˆ—çš„å¤–éƒ¨ã€‚</p><p>é”ç²’åº¦ï¼šä¸è¦é”ä½ä¸€äº›æ— å…³çš„ä»£ç ã€‚</p><p>é”ç²—åŒ–ï¼šå¯ä»¥ä¸€æ¬¡æ€§æ‰§è¡Œå®Œçš„ä¸è¦å¤šæ¬¡åŠ é”æ‰§è¡Œã€‚</p><h3 id="60ã€ä¸ºä»€ä¹ˆ-wait-notify-å’Œ-notifyAll-å¿…é¡»åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥å—ä¸­è¢«è°ƒç”¨ï¼Ÿ"><a href="#60ã€ä¸ºä»€ä¹ˆ-wait-notify-å’Œ-notifyAll-å¿…é¡»åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥å—ä¸­è¢«è°ƒç”¨ï¼Ÿ" class="headerlink" title="60ã€ä¸ºä»€ä¹ˆ wait(), notify()å’Œ notifyAll()å¿…é¡»åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥å—ä¸­è¢«è°ƒç”¨ï¼Ÿ"></a>60ã€ä¸ºä»€ä¹ˆ wait(), notify()å’Œ notifyAll()å¿…é¡»åœ¨åŒæ­¥æ–¹æ³•æˆ–è€…åŒæ­¥å—ä¸­è¢«è°ƒç”¨ï¼Ÿ</h3><p>Javaä¸­ï¼Œä»»ä½•å¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºé”ï¼Œå¹¶ä¸” wait()ï¼Œnotify()ç­‰æ–¹æ³•ç”¨äºç­‰å¾…å¯¹è±¡çš„é”æˆ–è€…å”¤é†’çº¿ç¨‹ï¼Œåœ¨ Java çš„çº¿ç¨‹ä¸­å¹¶æ²¡æœ‰å¯ä¾›ä»»ä½•å¯¹è±¡ä½¿ç”¨çš„é”ï¼Œæ‰€ä»¥ä»»æ„å¯¹è±¡è°ƒç”¨æ–¹æ³•ä¸€å®šå®šä¹‰åœ¨Objectç±»ä¸­ã€‚</p><p>wait(), notify()å’Œ notifyAll()è¿™äº›æ–¹æ³•åœ¨åŒæ­¥ä»£ç å—ä¸­è°ƒç”¨</p><p>æœ‰çš„äººä¼šè¯´ï¼Œæ—¢ç„¶æ˜¯çº¿ç¨‹æ”¾å¼ƒå¯¹è±¡é”ï¼Œé‚£ä¹Ÿå¯ä»¥æŠŠwait()å®šä¹‰åœ¨Threadç±»é‡Œé¢å•Šï¼Œæ–°å®šä¹‰çš„çº¿ç¨‹ç»§æ‰¿äºThreadç±»ï¼Œä¹Ÿä¸éœ€è¦é‡æ–°å®šä¹‰wait()æ–¹æ³•çš„å®ç°ã€‚ç„¶è€Œï¼Œè¿™æ ·åšæœ‰ä¸€ä¸ªéå¸¸å¤§çš„é—®é¢˜ï¼Œä¸€ä¸ªçº¿ç¨‹å®Œå…¨å¯ä»¥æŒæœ‰å¾ˆå¤šé”ï¼Œä½ ä¸€ä¸ªçº¿ç¨‹æ”¾å¼ƒé”çš„æ—¶å€™ï¼Œåˆ°åº•è¦æ”¾å¼ƒå“ªä¸ªé”ï¼Ÿå½“ç„¶äº†ï¼Œè¿™ç§è®¾è®¡å¹¶ä¸æ˜¯ä¸èƒ½å®ç°ï¼Œåªæ˜¯ç®¡ç†èµ·æ¥æ›´åŠ å¤æ‚ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œwait()ã€notify()å’ŒnotifyAll()æ–¹æ³•è¦å®šä¹‰åœ¨Objectç±»ä¸­ã€‚</p><h3 id="61ã€Java-å¦‚ä½•å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„é€šè®¯å’Œåä½œï¼Ÿ"><a href="#61ã€Java-å¦‚ä½•å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„é€šè®¯å’Œåä½œï¼Ÿ" class="headerlink" title="61ã€Java å¦‚ä½•å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„é€šè®¯å’Œåä½œï¼Ÿ"></a>61ã€Java å¦‚ä½•å®ç°å¤šçº¿ç¨‹ä¹‹é—´çš„é€šè®¯å’Œåä½œï¼Ÿ</h3><p>å¯ä»¥é€šè¿‡ä¸­æ–­ å’Œ å…±äº«å˜é‡çš„æ–¹å¼å®ç°çº¿ç¨‹é—´çš„é€šè®¯å’Œåä½œ</p><p>æ¯”å¦‚è¯´æœ€ç»å…¸çš„ç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å‹ï¼šå½“é˜Ÿåˆ—æ»¡æ—¶ï¼Œç”Ÿäº§è€…éœ€è¦ç­‰å¾…é˜Ÿåˆ—æœ‰ç©ºé—´æ‰èƒ½ç»§ç»­å¾€é‡Œé¢æ”¾å…¥å•†å“ï¼Œè€Œåœ¨ç­‰å¾…çš„æœŸé—´å†…ï¼Œç”Ÿäº§è€…å¿…é¡»é‡Šæ”¾å¯¹ä¸´ç•Œèµ„æºï¼ˆå³é˜Ÿåˆ—ï¼‰çš„å ç”¨æƒã€‚å› ä¸ºç”Ÿäº§è€…å¦‚æœä¸é‡Šæ”¾å¯¹ä¸´ç•Œèµ„æºçš„å ç”¨æƒï¼Œé‚£ä¹ˆæ¶ˆè´¹è€…å°±æ— æ³•æ¶ˆè´¹é˜Ÿåˆ—ä¸­çš„å•†å“ï¼Œå°±ä¸ä¼šè®©é˜Ÿåˆ—æœ‰ç©ºé—´ï¼Œé‚£ä¹ˆç”Ÿäº§è€…å°±ä¼šä¸€ç›´æ— é™ç­‰å¾…ä¸‹å»ã€‚å› æ­¤ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå½“é˜Ÿåˆ—æ»¡æ—¶ï¼Œä¼šè®©ç”Ÿäº§è€…äº¤å‡ºå¯¹ä¸´ç•Œèµ„æºçš„å ç”¨æƒï¼Œå¹¶è¿›å…¥æŒ‚èµ·çŠ¶æ€ã€‚ç„¶åç­‰å¾…æ¶ˆè´¹è€…æ¶ˆè´¹äº†å•†å“ï¼Œç„¶åæ¶ˆè´¹è€…é€šçŸ¥ç”Ÿäº§è€…é˜Ÿåˆ—æœ‰ç©ºé—´äº†ã€‚åŒæ ·åœ°ï¼Œå½“é˜Ÿåˆ—ç©ºæ—¶ï¼Œæ¶ˆè´¹è€…ä¹Ÿå¿…é¡»ç­‰å¾…ï¼Œç­‰å¾…ç”Ÿäº§è€…é€šçŸ¥å®ƒé˜Ÿåˆ—ä¸­æœ‰å•†å“äº†ã€‚è¿™ç§äº’ç›¸é€šä¿¡çš„è¿‡ç¨‹å°±æ˜¯çº¿ç¨‹é—´çš„åä½œã€‚</p><p>Javaä¸­çº¿ç¨‹é€šä¿¡åä½œçš„æœ€å¸¸è§çš„ä¸¤ç§æ–¹å¼ï¼š</p><p>1ã€syncrhoizedåŠ é”çš„çº¿ç¨‹çš„Objectç±»çš„wait()/notify()/notifyAll()</p><p>2ã€ReentrantLockç±»åŠ é”çš„çº¿ç¨‹çš„Conditionç±»çš„await()/signal()/signalAll()</p><p>çº¿ç¨‹é—´ç›´æ¥çš„æ•°æ®äº¤æ¢ï¼š</p><p>é€šè¿‡ç®¡é“è¿›è¡Œçº¿ç¨‹é—´é€šä¿¡ï¼š1ï¼‰å­—èŠ‚æµï¼›2ï¼‰å­—ç¬¦æµ</p><h3 id="62ã€Thread-ç±»ä¸­çš„-yield-æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"><a href="#62ã€Thread-ç±»ä¸­çš„-yield-æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ" class="headerlink" title="62ã€Thread ç±»ä¸­çš„ yield æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ"></a>62ã€Thread ç±»ä¸­çš„ yield æ–¹æ³•æœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</h3><p>yield()åº”è¯¥åšçš„æ˜¯è®©å½“å‰è¿è¡Œçº¿ç¨‹å›åˆ°å¯è¿è¡ŒçŠ¶æ€ï¼Œä»¥å…è®¸å…·æœ‰ç›¸åŒä¼˜å…ˆçº§çš„å…¶ä»–çº¿ç¨‹è·å¾—è¿è¡Œæœºä¼šã€‚å› æ­¤ï¼Œä½¿ç”¨yield()çš„ç›®çš„æ˜¯è®©ç›¸åŒä¼˜å…ˆçº§çš„çº¿ç¨‹ä¹‹é—´èƒ½é€‚å½“çš„è½®è½¬æ‰§è¡Œã€‚ä½†æ˜¯ï¼Œå®é™…ä¸­æ— æ³•ä¿è¯yield()è¾¾åˆ°è®©æ­¥ç›®çš„ï¼Œå› ä¸ºè®©æ­¥çš„çº¿ç¨‹è¿˜æœ‰å¯èƒ½è¢«çº¿ç¨‹è°ƒåº¦ç¨‹åºå†æ¬¡é€‰ä¸­ã€‚</p><p>ç»“è®ºï¼šyield()ä»æœªå¯¼è‡´çº¿ç¨‹è½¬åˆ°ç­‰å¾…/ç¡çœ /é˜»å¡çŠ¶æ€ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œyield()å°†å¯¼è‡´çº¿ç¨‹ä»è¿è¡ŒçŠ¶æ€è½¬åˆ°å¯è¿è¡ŒçŠ¶æ€ï¼Œä½†æœ‰å¯èƒ½æ²¡æœ‰æ•ˆæœã€‚</p><h3 id="63ã€ä¸ºä»€ä¹ˆè¯´-Synchronized-æ˜¯éå…¬å¹³é”ï¼Ÿ"><a href="#63ã€ä¸ºä»€ä¹ˆè¯´-Synchronized-æ˜¯éå…¬å¹³é”ï¼Ÿ" class="headerlink" title="63ã€ä¸ºä»€ä¹ˆè¯´ Synchronized æ˜¯éå…¬å¹³é”ï¼Ÿ"></a>63ã€ä¸ºä»€ä¹ˆè¯´ Synchronized æ˜¯éå…¬å¹³é”ï¼Ÿ</h3><p>å½“é”è¢«é‡Šæ”¾åï¼Œä»»ä½•ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰æœºä¼šç«äº‰å¾—åˆ°é”ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯æé«˜æ•ˆç‡ï¼Œä½†ç¼ºç‚¹æ˜¯å¯èƒ½äº§ç”Ÿçº¿ç¨‹é¥¥é¥¿ç°è±¡ã€‚</p><h3 id="64ã€è¯·è°ˆè°ˆ-volatile-æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Œä¸ºä»€ä¹ˆå®ƒèƒ½ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§ï¼Ÿ"><a href="#64ã€è¯·è°ˆè°ˆ-volatile-æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Œä¸ºä»€ä¹ˆå®ƒèƒ½ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§ï¼Ÿ" class="headerlink" title="64ã€è¯·è°ˆè°ˆ volatile æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Œä¸ºä»€ä¹ˆå®ƒèƒ½ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§ï¼Ÿ"></a>64ã€è¯·è°ˆè°ˆ volatile æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Œä¸ºä»€ä¹ˆå®ƒèƒ½ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹çš„å¯è§æ€§ï¼Ÿ</h3><p>volatileåªèƒ½ä½œç”¨äºå˜é‡ï¼Œä¿è¯äº†æ“ä½œå¯è§æ€§å’Œæœ‰åºæ€§ï¼Œä¸ä¿è¯åŸå­æ€§ã€‚</p><p>åœ¨Javaçš„å†…å­˜æ¨¡å‹ä¸­åˆ†ä¸ºä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ï¼ŒJavaå†…å­˜æ¨¡å‹è§„å®šæ‰€æœ‰çš„å˜é‡å­˜å‚¨åœ¨ä¸»å†…å­˜ä¸­ï¼Œæ¯æ¡çº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ã€‚</p><p>ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜ä¹‹é—´çš„äº¤äº’åˆ†ä¸º8ä¸ªåŸå­æ“ä½œï¼š</p><ol><li>lock</li><li>unlock</li><li>read</li><li>load</li><li>assign</li><li>use</li><li>store</li><li>write</li></ol><p>volatileä¿®é¥°çš„å˜é‡ï¼Œåªæœ‰å¯¹volatileè¿›è¡Œassignæ“ä½œï¼Œæ‰å¯ä»¥loadï¼Œåªæœ‰loadæ‰å¯ä»¥useï¼Œï¼Œè¿™æ ·å°±ä¿è¯äº†åœ¨å·¥ä½œå†…å­˜æ“ä½œvolatileå˜é‡ï¼Œéƒ½ä¼šåŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ã€‚</p><h3 id="65ã€ä¸ºä»€ä¹ˆè¯´-Synchronized-æ˜¯ä¸€ä¸ªæ‚²è§‚é”ï¼Ÿä¹è§‚é”çš„å®ç°åŸç†åˆæ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ˜¯-CASï¼Œå®ƒæœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿ"><a href="#65ã€ä¸ºä»€ä¹ˆè¯´-Synchronized-æ˜¯ä¸€ä¸ªæ‚²è§‚é”ï¼Ÿä¹è§‚é”çš„å®ç°åŸç†åˆæ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ˜¯-CASï¼Œå®ƒæœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿ" class="headerlink" title="65ã€ä¸ºä»€ä¹ˆè¯´ Synchronized æ˜¯ä¸€ä¸ªæ‚²è§‚é”ï¼Ÿä¹è§‚é”çš„å®ç°åŸç†åˆæ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ˜¯ CASï¼Œå®ƒæœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿ"></a>65ã€ä¸ºä»€ä¹ˆè¯´ Synchronized æ˜¯ä¸€ä¸ªæ‚²è§‚é”ï¼Ÿä¹è§‚é”çš„å®ç°åŸç†åˆæ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ˜¯ CASï¼Œå®ƒæœ‰ä»€ä¹ˆç‰¹æ€§ï¼Ÿ</h3><p>Synchronizedçš„å¹¶å‘ç­–ç•¥æ˜¯æ‚²è§‚çš„ï¼Œä¸ç®¡æ˜¯å¦äº§ç”Ÿç«äº‰ï¼Œä»»ä½•æ•°æ®çš„æ“ä½œéƒ½å¿…é¡»åŠ é”ã€‚</p><p>ä¹è§‚é”çš„æ ¸å¿ƒæ˜¯CASï¼ŒCASåŒ…æ‹¬å†…å­˜å€¼ã€é¢„æœŸå€¼ã€æ–°å€¼ï¼Œåªæœ‰å½“å†…å­˜å€¼ç­‰äºé¢„æœŸå€¼æ—¶ï¼Œæ‰ä¼šå°†å†…å­˜å€¼ä¿®æ”¹ä¸ºæ–°å€¼ã€‚</p><h3 id="66ã€ä¹è§‚é”ä¸€å®šå°±æ˜¯å¥½çš„å—ï¼Ÿ"><a href="#66ã€ä¹è§‚é”ä¸€å®šå°±æ˜¯å¥½çš„å—ï¼Ÿ" class="headerlink" title="66ã€ä¹è§‚é”ä¸€å®šå°±æ˜¯å¥½çš„å—ï¼Ÿ"></a>66ã€ä¹è§‚é”ä¸€å®šå°±æ˜¯å¥½çš„å—ï¼Ÿ</h3><p>ä¹è§‚é”è®¤ä¸ºå¯¹ä¸€ä¸ªå¯¹è±¡çš„æ“ä½œä¸ä¼šå¼•å‘å†²çªï¼Œæ‰€ä»¥æ¯æ¬¡æ“ä½œéƒ½ä¸è¿›è¡ŒåŠ é”ï¼Œåªæ˜¯åœ¨æœ€åæäº¤æ›´æ”¹æ—¶éªŒè¯æ˜¯å¦å‘ç”Ÿå†²çªï¼Œå¦‚æœå†²çªåˆ™å†è¯•ä¸€éï¼Œç›´è‡³æˆåŠŸä¸ºæ­¢ï¼Œè¿™ä¸ªå°è¯•çš„è¿‡ç¨‹ç§°ä¸ºè‡ªæ—‹ã€‚</p><p>ä¹è§‚é”æ²¡æœ‰åŠ é”ï¼Œä½†ä¹è§‚é”å¼•å…¥äº†ABAé—®é¢˜ï¼Œæ­¤æ—¶ä¸€èˆ¬é‡‡ç”¨ç‰ˆæœ¬å·è¿›è¡Œæ§åˆ¶ï¼›<br>ä¹Ÿå¯èƒ½äº§ç”Ÿè‡ªæ—‹æ¬¡æ•°è¿‡å¤šé—®é¢˜ï¼Œæ­¤æ—¶å¹¶ä¸èƒ½æé«˜æ•ˆç‡ï¼Œåè€Œä¸å¦‚ç›´æ¥åŠ é”çš„æ•ˆç‡é«˜ï¼›<br>åªèƒ½ä¿è¯ä¸€ä¸ªå¯¹è±¡çš„åŸå­æ€§ï¼Œå¯ä»¥å°è£…æˆå¯¹è±¡ï¼Œå†è¿›è¡ŒCASæ“ä½œï¼›</p><h3 id="67ã€è¯·å°½å¯èƒ½è¯¦å°½åœ°å¯¹æ¯”ä¸‹-Synchronized-å’Œ-ReentrantLock-çš„å¼‚åŒã€‚"><a href="#67ã€è¯·å°½å¯èƒ½è¯¦å°½åœ°å¯¹æ¯”ä¸‹-Synchronized-å’Œ-ReentrantLock-çš„å¼‚åŒã€‚" class="headerlink" title="67ã€è¯·å°½å¯èƒ½è¯¦å°½åœ°å¯¹æ¯”ä¸‹ Synchronized å’Œ ReentrantLock çš„å¼‚åŒã€‚"></a>67ã€è¯·å°½å¯èƒ½è¯¦å°½åœ°å¯¹æ¯”ä¸‹ Synchronized å’Œ ReentrantLock çš„å¼‚åŒã€‚</h3><h4 id="ï¼ˆ1ï¼‰ç›¸ä¼¼ç‚¹"><a href="#ï¼ˆ1ï¼‰ç›¸ä¼¼ç‚¹" class="headerlink" title="ï¼ˆ1ï¼‰ç›¸ä¼¼ç‚¹"></a>ï¼ˆ1ï¼‰ç›¸ä¼¼ç‚¹</h4><p>å®ƒä»¬éƒ½æ˜¯é˜»å¡å¼çš„åŒæ­¥ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªçº¿ç¨‹è·å¾—äº†å¯¹è±¡é”ï¼Œè¿›å…¥ä»£ç å—ï¼Œå…¶å®ƒè®¿é—®è¯¥åŒæ­¥å—çš„çº¿ç¨‹éƒ½å¿…é¡»é˜»å¡åœ¨åŒæ­¥ä»£ç å—å¤–é¢ç­‰å¾…ï¼Œè€Œè¿›è¡Œçº¿ç¨‹é˜»å¡å’Œå”¤é†’çš„ä»£ç æ˜¯æ¯”è¾ƒé«˜çš„ã€‚</p><h4 id="ï¼ˆ2ï¼‰åŠŸèƒ½åŒºåˆ«"><a href="#ï¼ˆ2ï¼‰åŠŸèƒ½åŒºåˆ«" class="headerlink" title="ï¼ˆ2ï¼‰åŠŸèƒ½åŒºåˆ«"></a>ï¼ˆ2ï¼‰åŠŸèƒ½åŒºåˆ«</h4><p>Synchronizedæ˜¯javaè¯­è¨€çš„å…³é”®å­—ï¼Œæ˜¯åŸç”Ÿè¯­æ³•å±‚é¢çš„äº’æ–¥ï¼Œéœ€è¦JVMå®ç°ï¼›ReentrantLock æ˜¯JDK1.5ä¹‹åæä¾›çš„APIå±‚é¢çš„äº’æ–¥é”ï¼Œéœ€è¦lockå’Œunlock()æ–¹æ³•é…åˆtry/finallyä»£ç å—æ¥å®Œæˆã€‚<br>Synchronizedä½¿ç”¨è¾ƒReentrantLock ä¾¿åˆ©ä¸€äº›ï¼›<br>é”çš„ç»†ç²’åº¦å’Œçµæ´»æ€§ï¼šReentrantLockå¼ºäºSynchronizedï¼›</p><h4 id="ï¼ˆ3ï¼‰æ€§èƒ½åŒºåˆ«"><a href="#ï¼ˆ3ï¼‰æ€§èƒ½åŒºåˆ«" class="headerlink" title="ï¼ˆ3ï¼‰æ€§èƒ½åŒºåˆ«"></a>ï¼ˆ3ï¼‰æ€§èƒ½åŒºåˆ«</h4><p>Synchronizedå¼•å…¥åå‘é”ï¼Œè‡ªæ—‹é”ä¹‹åï¼Œä¸¤è€…çš„æ€§èƒ½å·®ä¸å¤šï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨Synchronizedã€‚</p><h4 id="â‘ -Synchronized"><a href="#â‘ -Synchronized" class="headerlink" title="â‘  Synchronized"></a>â‘  Synchronized</h4><p>Synchronizedä¼šåœ¨åŒæ­¥å—çš„å‰ååˆ†åˆ«å½¢æˆmonitorenterå’Œmonitorexitä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤ã€‚</p><p>åœ¨æ‰§è¡ŒmonitorenteræŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆè¦å°è¯•è·å–å¯¹è±¡é”ã€‚å¦‚æœè¿™ä¸ªå¯¹è±¡æ²¡è¢«é”å®šï¼Œæˆ–è€…å½“å‰çº¿ç¨‹å·²ç»æ‹¥æœ‰äº†é‚£ä¸ªå¯¹è±¡é”ï¼ŒæŠŠé”çš„è®¡æ•°å™¨+1ï¼Œç›¸åº”çš„æ‰§è¡Œmonitorexitæ—¶ï¼Œè®¡æ•°å™¨-1ï¼Œå½“è®¡æ•°å™¨ä¸º0æ—¶ï¼Œé”å°±ä¼šè¢«é‡Šæ”¾ã€‚å¦‚æœè·å–é”å¤±è´¥ï¼Œå½“å‰çº¿ç¨‹å°±è¦é˜»å¡ï¼ŒçŸ¥é“å¯¹è±¡é”è¢«å¦ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾ä¸ºæ­¢ã€‚</p><h4 id="â‘¡-ReentrantLock"><a href="#â‘¡-ReentrantLock" class="headerlink" title="â‘¡ ReentrantLock"></a>â‘¡ ReentrantLock</h4><p>ReentrantLockæ˜¯java.util.concurrentåŒ…ä¸‹æä¾›çš„ä¸€å¥—äº’æ–¥é”ï¼Œç›¸æ¯”Synchronizedï¼ŒReentrantLockç±»æä¾›äº†ä¸€äº›é«˜çº§åŠŸèƒ½ï¼Œä¸»è¦æœ‰å¦‚ä¸‹ä¸‰é¡¹ï¼š</p><p>ç­‰å¾…å¯ä¸­æ–­ï¼ŒæŒæœ‰é”çš„çº¿ç¨‹é•¿æœŸä¸é‡Šæ”¾çš„æ—¶å€™ï¼Œæ­£åœ¨ç­‰å¾…çš„çº¿ç¨‹å¯ä»¥é€‰æ‹©æ”¾å¼ƒç­‰å¾…ï¼Œè¿™ç›¸å½“äºSynchronizedé¿å…å‡ºç°æ­»é”çš„æƒ…å†µã€‚é€šè¿‡lock.lockInterruptibly()æ¥å®ç°è¿™ä¸€æœºåˆ¶ï¼›<br>å…¬å¹³é”ï¼Œå¤šä¸ªçº¿ç¨‹ç­‰å¾…åŒä¸€ä¸ªé”æ—¶ï¼Œå¿…é¡»æŒ‰ç…§ç”³è¯·é”çš„æ—¶é—´é¡ºåºè·å¾—é”ï¼ŒSynchronizedé”æ˜¯éå…¬å¹³é”ï¼›ReentrantLocké»˜è®¤ä¹Ÿæ˜¯éå…¬å¹³é”ï¼Œå¯ä»¥é€šè¿‡å‚æ•°trueè®¾ä¸ºå…¬å¹³é”ï¼Œä½†å…¬å¹³é”è¡¨ç°çš„æ€§èƒ½ä¸æ˜¯å¾ˆå¥½ï¼›<br>é”ç»‘å®šå¤šä¸ªæ¡ä»¶ï¼Œä¸€ä¸ªReentrantLockå¯¹è±¡å¯ä»¥åŒæ—¶ç»‘å®šå¤šä¸ªå¯¹è±¡ã€‚ReentrantLockæä¾›äº†ä¸€ä¸ªConditionï¼ˆæ¡ä»¶ï¼‰ç±»ï¼Œç”¨æ¥å®ç°åˆ†ç»„å”¤é†’éœ€è¦å”¤é†’çš„çº¿ç¨‹ä»¬ï¼Œè€Œä¸æ˜¯åƒSynchronizedè¦ä¹ˆéšæœºå”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œè¦ä¹ˆå”¤é†’å…¨éƒ¨çº¿ç¨‹ã€‚</p><h3 id="68ã€ReentrantLock-æ˜¯å¦‚ä½•å®ç°å¯é‡å…¥æ€§çš„ï¼Ÿ"><a href="#68ã€ReentrantLock-æ˜¯å¦‚ä½•å®ç°å¯é‡å…¥æ€§çš„ï¼Ÿ" class="headerlink" title="68ã€ReentrantLock æ˜¯å¦‚ä½•å®ç°å¯é‡å…¥æ€§çš„ï¼Ÿ"></a>68ã€ReentrantLock æ˜¯å¦‚ä½•å®ç°å¯é‡å…¥æ€§çš„ï¼Ÿ</h3><h4 id="ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯å¯é‡å…¥æ€§"><a href="#ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯å¯é‡å…¥æ€§" class="headerlink" title="ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯å¯é‡å…¥æ€§"></a>ï¼ˆ1ï¼‰ä»€ä¹ˆæ˜¯å¯é‡å…¥æ€§</h4><p>ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”æ—¶ï¼Œå½“å…¶ä»–çº¿ç¨‹å°è¯•è·å–è¯¥é”æ—¶ï¼Œä¼šè¢«é˜»å¡ï¼›è€Œè¿™ä¸ªçº¿ç¨‹å°è¯•è·å–è‡ªå·±æŒæœ‰é”æ—¶ï¼Œå¦‚æœæˆåŠŸè¯´æ˜è¯¥é”æ˜¯å¯é‡å…¥çš„ï¼Œåä¹‹åˆ™ä¸å¯é‡å…¥ã€‚</p><h4 id="ï¼ˆ2ï¼‰synchronizedæ˜¯å¦‚ä½•å®ç°å¯é‡å…¥æ€§"><a href="#ï¼ˆ2ï¼‰synchronizedæ˜¯å¦‚ä½•å®ç°å¯é‡å…¥æ€§" class="headerlink" title="ï¼ˆ2ï¼‰synchronizedæ˜¯å¦‚ä½•å®ç°å¯é‡å…¥æ€§"></a>ï¼ˆ2ï¼‰synchronizedæ˜¯å¦‚ä½•å®ç°å¯é‡å…¥æ€§</h4><p>synchronizedå…³é”®å­—ç»è¿‡ç¼–è¯‘åï¼Œä¼šåœ¨åŒæ­¥å—çš„å‰ååˆ†åˆ«å½¢æˆmonitorenterå’Œmonitorexitä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤ã€‚æ¯ä¸ªé”å¯¹è±¡å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªè®¡æ•°å™¨ï¼Œè¯¥è®¡æ•°å™¨åˆå§‹å€¼ä¸º0ï¼Œè¡¨ç¤ºä»»ä½•çº¿ç¨‹éƒ½å¯ä»¥è·å–è¯¥é”å¹¶æ‰§è¡Œç›¸åº”çš„æ–¹æ³•ã€‚æ ¹æ®è™šæ‹Ÿæœºè§„èŒƒè¦æ±‚ï¼Œåœ¨æ‰§è¡ŒmonitorenteræŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆè¦å°è¯•è·å–å¯¹è±¡çš„é”ï¼Œå¦‚æœè¿™ä¸ªå¯¹è±¡æ²¡æœ‰è¢«é”å®šï¼Œæˆ–è€…å½“å‰çº¿ç¨‹å·²ç»æ‹¥æœ‰äº†å¯¹è±¡çš„é”ï¼ŒæŠŠé”çš„è®¡æ•°å™¨+1ï¼Œç›¸åº”çš„åœ¨æ‰§è¡ŒmonitorexitæŒ‡ä»¤åé”è®¡æ•°å™¨-1ï¼Œå½“è®¡æ•°å™¨ä¸º0æ—¶ï¼Œé”å°±è¢«é‡Šæ”¾ã€‚å¦‚æœè·å–å¯¹è±¡é”å¤±è´¥ï¼Œé‚£å½“å‰çº¿ç¨‹å°±è¦é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°å¯¹è±¡é”è¢«å¦ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾ä¸ºæ­¢ã€‚</p><h4 id="ï¼ˆ3ï¼‰ReentrantLockå¦‚ä½•å®ç°å¯é‡å…¥æ€§"><a href="#ï¼ˆ3ï¼‰ReentrantLockå¦‚ä½•å®ç°å¯é‡å…¥æ€§" class="headerlink" title="ï¼ˆ3ï¼‰ReentrantLockå¦‚ä½•å®ç°å¯é‡å…¥æ€§"></a>ï¼ˆ3ï¼‰ReentrantLockå¦‚ä½•å®ç°å¯é‡å…¥æ€§</h4><p>ReentrantLockä½¿ç”¨å†…éƒ¨ç±»Syncæ¥ç®¡ç†é”ï¼Œæ‰€ä»¥çœŸæ­£çš„è·å–é”æ˜¯ç”±Syncçš„å®ç°ç±»æ§åˆ¶çš„ã€‚Syncæœ‰ä¸¤ä¸ªå®ç°ï¼Œåˆ†åˆ«ä¸ºNonfairSyncï¼ˆéå…¬å…¬å¹³é”ï¼‰å’ŒFairSyncï¼ˆå…¬å¹³é”ï¼‰ã€‚Syncé€šè¿‡ç»§æ‰¿AQSå®ç°ï¼Œåœ¨AQSä¸­ç»´æŠ¤äº†ä¸€ä¸ªprivate volatile int stateæ¥è®¡ç®—é‡å…¥æ¬¡æ•°ï¼Œé¿å…é¢‘ç¹çš„æŒæœ‰é‡Šæ”¾æ“ä½œå¸¦æ¥çš„çº¿ç¨‹é—®é¢˜ã€‚</p><h4 id="ï¼ˆ4ï¼‰ReentrantLockä»£ç å®ä¾‹"><a href="#ï¼ˆ4ï¼‰ReentrantLockä»£ç å®ä¾‹" class="headerlink" title="ï¼ˆ4ï¼‰ReentrantLockä»£ç å®ä¾‹"></a>ï¼ˆ4ï¼‰ReentrantLockä»£ç å®ä¾‹</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Syncç»§æ‰¿äºAQS</span></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Sync</span> <span class="keyword">extends</span> <span class="title class_">AbstractQueuedSynchronizer</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ReentrantLocké»˜è®¤æ˜¯éå…¬å¹³é”</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ReentrantLock</span><span class="params">()</span> &#123;</span><br><span class="line">        sync = <span class="keyword">new</span> <span class="title class_">NonfairSync</span>();</span><br><span class="line"> &#125;</span><br><span class="line"><span class="comment">// å¯ä»¥é€šè¿‡å‘æ„é€ æ–¹æ³•ä¸­ä¼ trueæ¥å®ç°å…¬å¹³é”</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ReentrantLock</span><span class="params">(<span class="type">boolean</span> fair)</span> &#123;</span><br><span class="line">    sync = fair ? <span class="keyword">new</span> <span class="title class_">FairSync</span>() : <span class="keyword">new</span> <span class="title class_">NonfairSync</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">tryAcquire</span><span class="params">(<span class="type">int</span> acquires)</span> &#123;</span><br><span class="line">        <span class="comment">// å½“å‰æƒ³è¦è·å–é”çš„çº¿ç¨‹</span></span><br><span class="line">        <span class="keyword">final</span> <span class="type">Thread</span> <span class="variable">current</span> <span class="operator">=</span> Thread.currentThread();</span><br><span class="line">        <span class="comment">// å½“å‰é”çš„çŠ¶æ€</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">c</span> <span class="operator">=</span> getState();</span><br><span class="line">        <span class="comment">// state == 0 æ­¤æ—¶æ­¤åˆ»æ²¡æœ‰çº¿ç¨‹æŒæœ‰é”</span></span><br><span class="line">        <span class="keyword">if</span> (c == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">// è™½ç„¶æ­¤æ—¶æ­¤åˆ»é”æ˜¯å¯ä»¥ç”¨çš„ï¼Œä½†æ˜¯è¿™æ˜¯å…¬å¹³é”ï¼Œæ—¢ç„¶æ˜¯å…¬å¹³ï¼Œå°±å¾—è®²ç©¶å…ˆæ¥ååˆ°ï¼Œ</span></span><br><span class="line">            <span class="comment">// çœ‹çœ‹æœ‰æ²¡æœ‰åˆ«äººåœ¨é˜Ÿåˆ—ä¸­ç­‰äº†åŠå¤©äº†</span></span><br><span class="line">            <span class="keyword">if</span> (!hasQueuedPredecessors() &amp;&amp;</span><br><span class="line">                <span class="comment">// å¦‚æœæ²¡æœ‰çº¿ç¨‹åœ¨ç­‰å¾…ï¼Œé‚£å°±ç”¨CASå°è¯•ä¸€ä¸‹ï¼ŒæˆåŠŸäº†å°±è·å–åˆ°é”äº†ï¼Œ</span></span><br><span class="line">                <span class="comment">// ä¸æˆåŠŸçš„è¯ï¼Œåªèƒ½è¯´æ˜ä¸€ä¸ªé—®é¢˜ï¼Œå°±åœ¨åˆšåˆšå‡ ä¹åŒä¸€æ—¶åˆ»æœ‰ä¸ªçº¿ç¨‹æŠ¢å…ˆäº† =_=</span></span><br><span class="line">                <span class="comment">// å› ä¸ºåˆšåˆšè¿˜æ²¡äººçš„ï¼Œæˆ‘åˆ¤æ–­è¿‡äº†</span></span><br><span class="line">                compareAndSetState(<span class="number">0</span>, acquires)) &#123;</span><br><span class="line">                <span class="comment">// åˆ°è¿™é‡Œå°±æ˜¯è·å–åˆ°é”äº†ï¼Œæ ‡è®°ä¸€ä¸‹ï¼Œå‘Šè¯‰å¤§å®¶ï¼Œç°åœ¨æ˜¯æˆ‘å ç”¨äº†é”</span></span><br><span class="line">            setExclusiveOwnerThread(current);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">      <span class="comment">// ä¼šè¿›å…¥è¿™ä¸ªelse ifåˆ†æ”¯ï¼Œè¯´æ˜æ˜¯é‡å…¥äº†ï¼Œéœ€è¦æ“ä½œï¼šstate=state+1</span></span><br><span class="line">    <span class="comment">// è¿™é‡Œä¸å­˜åœ¨å¹¶å‘é—®é¢˜</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (current == getExclusiveOwnerThread()) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">nextc</span> <span class="operator">=</span> c + acquires;</span><br><span class="line">        <span class="keyword">if</span> (nextc &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Maximum lock count exceeded&quot;</span>);</span><br><span class="line">        setState(nextc);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å¦‚æœåˆ°è¿™é‡Œï¼Œè¯´æ˜å‰é¢çš„ifå’Œelse iféƒ½æ²¡æœ‰è¿”å›trueï¼Œè¯´æ˜æ²¡æœ‰è·å–åˆ°é”</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;            </span><br></pre></td></tr></table></figure><h4 id="ï¼ˆ5ï¼‰ä»£ç åˆ†æ"><a href="#ï¼ˆ5ï¼‰ä»£ç åˆ†æ" class="headerlink" title="ï¼ˆ5ï¼‰ä»£ç åˆ†æ"></a>ï¼ˆ5ï¼‰ä»£ç åˆ†æ</h4><p>å½“ä¸€ä¸ªçº¿ç¨‹åœ¨è·å–é”è¿‡ç¨‹ä¸­ï¼Œå…ˆåˆ¤æ–­stateçš„å€¼æ˜¯å¦ä¸º0ï¼Œå¦‚æœæ˜¯è¡¨ç¤ºæ²¡æœ‰çº¿ç¨‹æŒæœ‰é”ï¼Œå°±å¯ä»¥å°è¯•è·å–é”ã€‚<br>å½“stateçš„å€¼ä¸ä¸º0æ—¶ï¼Œè¡¨ç¤ºé”å·²ç»è¢«ä¸€ä¸ªçº¿ç¨‹å ç”¨äº†ï¼Œè¿™æ—¶ä¼šåšä¸€ä¸ªåˆ¤æ–­current==getExclusiveOwnerThread()ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›çš„æ˜¯å½“å‰æŒæœ‰é”çš„çº¿ç¨‹ï¼Œè¿™ä¸ªåˆ¤æ–­æ˜¯çœ‹å½“å‰æŒæœ‰é”çš„çº¿ç¨‹æ˜¯ä¸æ˜¯è‡ªå·±ï¼Œå¦‚æœæ˜¯è‡ªå·±ï¼Œé‚£ä¹ˆå°†stateçš„å€¼+1ï¼Œè¡¨ç¤ºé‡å…¥è¿”å›å³å¯ã€‚</p><h3 id="69ã€ä»€ä¹ˆæ˜¯é”æ¶ˆé™¤å’Œé”ç²—åŒ–ï¼Ÿ"><a href="#69ã€ä»€ä¹ˆæ˜¯é”æ¶ˆé™¤å’Œé”ç²—åŒ–ï¼Ÿ" class="headerlink" title="69ã€ä»€ä¹ˆæ˜¯é”æ¶ˆé™¤å’Œé”ç²—åŒ–ï¼Ÿ"></a>69ã€ä»€ä¹ˆæ˜¯é”æ¶ˆé™¤å’Œé”ç²—åŒ–ï¼Ÿ</h3><h4 id="ï¼ˆ1ï¼‰é”æ¶ˆé™¤"><a href="#ï¼ˆ1ï¼‰é”æ¶ˆé™¤" class="headerlink" title="ï¼ˆ1ï¼‰é”æ¶ˆé™¤"></a>ï¼ˆ1ï¼‰é”æ¶ˆé™¤</h4><p>æ‰€æ¶ˆé™¤å°±æ˜¯è™šæ‹Ÿæœºæ ¹æ®ä¸€ä¸ªå¯¹è±¡æ˜¯å¦çœŸæ­£å­˜åœ¨åŒæ­¥æƒ…å†µï¼Œè‹¥ä¸å­˜åœ¨åŒæ­¥æƒ…å†µï¼Œåˆ™å¯¹è¯¥å¯¹è±¡çš„è®¿é—®æ— éœ€ç»è¿‡åŠ é”è§£é”çš„æ“ä½œã€‚</p><p>æ¯”å¦‚StringBufferçš„appendæ–¹æ³•ï¼Œå› ä¸ºappendæ–¹æ³•éœ€è¦åˆ¤æ–­å¯¹è±¡æ˜¯å¦è¢«å ç”¨ï¼Œè€Œå¦‚æœä»£ç ä¸å­˜åœ¨é”ç«äº‰ï¼Œé‚£ä¹ˆè¿™éƒ¨åˆ†çš„æ€§èƒ½æ¶ˆè€—æ˜¯æ— æ„ä¹‰çš„ã€‚äºæ˜¯è™šæ‹Ÿæœºåœ¨å³æ—¶ç¼–è¯‘çš„æ—¶å€™å°±ä¼šå°†ä¸Šé¢çš„ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œä¹Ÿå°±æ˜¯é”æ¶ˆé™¤ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">synchronized</span> StringBuffer <span class="title function_">append</span><span class="params">(String str)</span> &#123;</span><br><span class="line">    toStringCache = <span class="literal">null</span>;</span><br><span class="line">    <span class="built_in">super</span>.append(str);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»æºç å¯ä»¥çœ‹å‡ºï¼Œappendæ–¹æ³•ç”¨äº† synchronizedå…³é”®å­—ï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ä½†æˆ‘ä»¬å¯èƒ½ä»…åœ¨çº¿ç¨‹å†…éƒ¨æŠŠStringBufferå½“åšå±€éƒ¨å˜é‡ä½¿ç”¨ï¼›StringBufferä»…åœ¨æ–¹æ³•å†…ä½œç”¨åŸŸæœ‰æ•ˆï¼Œä¸å­˜åœ¨çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œè¿™æ—¶æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼–è¯‘å™¨å°†å…¶ä¼˜åŒ–ï¼Œå°†é”æ¶ˆé™¤ï¼Œå‰ææ˜¯Javaå¿…é¡»è¿è¡Œåœ¨serveræ¨¡å¼ï¼ŒåŒæ—¶å¿…é¡»å¼€å¯é€ƒé€¸åˆ†æï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-server -XX:+DoEscapeAnalysis -XX:+EliminateLocks</span><br><span class="line"></span><br><span class="line">å…¶ä¸­+DoEscapeAnalysisè¡¨ç¤ºå¼€å¯é€ƒé€¸åˆ†æï¼Œ+EliminateLocksè¡¨ç¤ºé”æ¶ˆé™¤ã€‚</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">createStringBuffer</span><span class="params">(String str1, String str2)</span> &#123;</span><br><span class="line">    <span class="type">StringBuffer</span> <span class="variable">sBuf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">    sBuf.append(str1);<span class="comment">// appendæ–¹æ³•æ˜¯åŒæ­¥æ“ä½œ</span></span><br><span class="line">    sBuf.append(str2);</span><br><span class="line">    <span class="keyword">return</span> sBuf.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€ƒé€¸åˆ†æï¼šæ¯”å¦‚ä¸Šé¢çš„ä»£ç ï¼Œå®ƒè¦çœ‹sBufæ˜¯å¦å¯èƒ½é€ƒå‡ºå®ƒçš„ä½œç”¨åŸŸï¼Ÿå¦‚æœå°†sBufä½œä¸ºæ–¹æ³•çš„è¿”å›å€¼è¿›è¡Œè¿”å›ï¼Œé‚£ä¹ˆå®ƒåœ¨æ–¹æ³•å¤–éƒ¨å¯èƒ½è¢«å½“ä½œä¸€ä¸ªå…¨å±€å¯¹è±¡ä½¿ç”¨ï¼Œå°±æœ‰å¯èƒ½å‘ç”Ÿçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œè¿™æ—¶å°±å¯ä»¥è¯´sBufè¿™ä¸ªå¯¹è±¡å‘ç”Ÿé€ƒé€¸äº†ï¼Œå› è€Œä¸åº”å°†appendæ“ä½œçš„é”æ¶ˆé™¤ï¼Œä½†æˆ‘ä»¬ä¸Šé¢çš„ä»£ç æ²¡æœ‰å‘ç”Ÿé”é€ƒé€¸ï¼Œé”æ¶ˆé™¤å°±å¯ä»¥å¸¦æ¥ä¸€å®šçš„æ€§èƒ½æå‡ã€‚ </p><h4 id="ï¼ˆ2ï¼‰é”ç²—åŒ–"><a href="#ï¼ˆ2ï¼‰é”ç²—åŒ–" class="headerlink" title="ï¼ˆ2ï¼‰é”ç²—åŒ–"></a>ï¼ˆ2ï¼‰é”ç²—åŒ–</h4><p>é”çš„è¯·æ±‚ã€åŒæ­¥ã€é‡Šæ”¾éƒ½ä¼šæ¶ˆè€—ä¸€å®šçš„ç³»ç»Ÿèµ„æºï¼Œå¦‚æœé«˜é¢‘çš„é”è¯·æ±‚åè€Œä¸åˆ©äºç³»ç»Ÿæ€§èƒ½çš„ä¼˜åŒ–ï¼Œé”ç²—åŒ–å°±æ˜¯æŠŠå¤šæ¬¡çš„é”è¯·æ±‚åˆå¹¶æˆä¸€ä¸ªè¯·æ±‚ï¼Œæ‰©å¤§é”çš„èŒƒå›´ï¼Œé™ä½é”è¯·æ±‚ã€åŒæ­¥ã€é‡Šæ”¾å¸¦æ¥çš„æ€§èƒ½æŸè€—ã€‚</p><h3 id="70ã€è·Ÿ-Synchronized-ç›¸æ¯”ï¼Œå¯é‡å…¥é”-ReentrantLock-å…¶å®ç°åŸç†æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"><a href="#70ã€è·Ÿ-Synchronized-ç›¸æ¯”ï¼Œå¯é‡å…¥é”-ReentrantLock-å…¶å®ç°åŸç†æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ" class="headerlink" title="70ã€è·Ÿ Synchronized ç›¸æ¯”ï¼Œå¯é‡å…¥é” ReentrantLock å…¶å®ç°åŸç†æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"></a>70ã€è·Ÿ Synchronized ç›¸æ¯”ï¼Œå¯é‡å…¥é” ReentrantLock å…¶å®ç°åŸç†æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h3><p>1ã€éƒ½æ˜¯å¯é‡å…¥é”ï¼›</p><p>2ã€ReentrantLockå†…éƒ¨æ˜¯å®ç°äº†Syncï¼ŒSyncç»§æ‰¿äºAQSæŠ½è±¡ç±»ã€‚Syncæœ‰ä¸¤ä¸ªå®ç°ï¼Œä¸€ä¸ªæ˜¯å…¬å¹³é”ï¼Œä¸€ä¸ªæ˜¯éå…¬å¹³é”ï¼Œé€šè¿‡æ„é€ å‡½æ•°å®šä¹‰ã€‚AQSä¸­ç»´æŠ¤äº†ä¸€ä¸ªstateæ¥è®¡ç®—é‡å…¥æ¬¡æ•°ï¼Œé¿å…é¢‘ç¹çš„æŒæœ‰é‡Šæ”¾æ“ä½œå¸¦æ¥çš„çº¿ç¨‹é—®é¢˜ã€‚</p><p>3ã€ReentrantLockåªèƒ½å®šä¹‰ä»£ç å—ï¼Œè€ŒSynchronizedå¯ä»¥å®šä¹‰æ–¹æ³•å’Œä»£ç å—ï¼›</p><p>4ã€Synchronizedæ˜¯JVMçš„ä¸€ä¸ªå†…éƒ¨å…³é”®å­—ï¼ŒReentrantLockæ˜¯JDK1.5ä¹‹åå¼•å…¥çš„ä¸€ä¸ªAPIå±‚é¢çš„äº’æ–¥é”ï¼›</p><p>5ã€Synchronizedå®ç°è‡ªåŠ¨çš„åŠ é”ã€é‡Šæ”¾é”ï¼ŒReentrantLockéœ€è¦æ‰‹åŠ¨åŠ é”å’Œé‡Šæ”¾é”ï¼Œä¸­é—´å¯ä»¥æš‚åœï¼›</p><p>6ã€Synchronizedç”±äºå¼•è¿›äº†åå‘é”å’Œè‡ªæ—‹é”ï¼Œæ‰€ä»¥æ€§èƒ½ä¸Šå’ŒReentrantLockå·®ä¸å¤šï¼Œä½†æ“ä½œä¸Šæ–¹ä¾¿å¾ˆå¤šï¼Œæ‰€ä»¥ä¼˜å…ˆä½¿ç”¨Synchronizedã€‚</p><h3 id="71ã€é‚£ä¹ˆè¯·è°ˆè°ˆ-AQS-æ¡†æ¶æ˜¯æ€ä¹ˆå›äº‹å„¿ï¼Ÿ"><a href="#71ã€é‚£ä¹ˆè¯·è°ˆè°ˆ-AQS-æ¡†æ¶æ˜¯æ€ä¹ˆå›äº‹å„¿ï¼Ÿ" class="headerlink" title="71ã€é‚£ä¹ˆè¯·è°ˆè°ˆ AQS æ¡†æ¶æ˜¯æ€ä¹ˆå›äº‹å„¿ï¼Ÿ"></a>71ã€é‚£ä¹ˆè¯·è°ˆè°ˆ AQS æ¡†æ¶æ˜¯æ€ä¹ˆå›äº‹å„¿ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰AQSæ˜¯AbstractQueuedSynchronizerçš„ç¼©å†™ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªFIFOé˜Ÿåˆ—ï¼Œå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªå®ç°åŒæ­¥é”çš„æ ¸å¿ƒç»„ä»¶ã€‚</p><p>AQSæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œä¸»è¦é€šè¿‡ç»§æ‰¿çš„æ–¹å¼æ¥ä½¿ç”¨ï¼Œå®ƒæœ¬èº«æ²¡æœ‰å®ç°ä»»ä½•çš„åŒæ­¥æ¥å£ï¼Œä»…ä»…æ˜¯å®šä¹‰äº†åŒæ­¥çŠ¶æ€çš„è·å–å’Œé‡Šæ”¾çš„æ–¹æ³•æ¥æä¾›è‡ªå®šä¹‰çš„åŒæ­¥ç»„ä»¶ã€‚</p><p>ï¼ˆ2ï¼‰AQSçš„ä¸¤ç§åŠŸèƒ½ï¼šç‹¬å é”å’Œå…±äº«é”</p><p>ï¼ˆ3ï¼‰AQSçš„å†…éƒ¨å®ç°</p><p>AQSçš„å®ç°ä¾èµ–å†…éƒ¨çš„åŒæ­¥é˜Ÿåˆ—ï¼Œä¹Ÿå°±æ˜¯FIFOçš„åŒå‘é˜Ÿåˆ—ï¼Œå¦‚æœå½“å‰çº¿ç¨‹ç«äº‰å¤±è´¥ï¼Œé‚£ä¹ˆAQSä¼šæŠŠå½“å‰çº¿ç¨‹ä»¥åŠç­‰å¾…çŠ¶æ€ä¿¡æ¯æ„é€ æˆä¸€ä¸ªNodeåŠ å…¥åˆ°åŒæ­¥é˜Ÿåˆ—ä¸­ï¼ŒåŒæ—¶å†é˜»å¡è¯¥çº¿ç¨‹ã€‚å½“è·å–é”çš„çº¿ç¨‹é‡Šæ”¾é”ä»¥åï¼Œä¼šä»é˜Ÿåˆ—ä¸­å”¤é†’ä¸€ä¸ªé˜»å¡çš„èŠ‚ç‚¹ï¼ˆçº¿ç¨‹ï¼‰ã€‚</p><p><a href="https://imgtu.com/i/jV6pBd"><img src="https://s1.ax1x.com/2022/06/27/jV6pBd.jpg" alt="jV6pBd.jpg"></a></p><p>AQSé˜Ÿåˆ—å†…éƒ¨ç»´æŠ¤çš„æ˜¯ä¸€ä¸ªFIFOçš„åŒå‘é“¾è¡¨ï¼Œè¿™ç§ç»“æ„çš„ç‰¹ç‚¹æ˜¯æ¯ä¸ªæ•°æ®ç»“æ„éƒ½æœ‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘ç›´æ¥çš„åç»§èŠ‚ç‚¹å’Œç›´æ¥å‰é©±èŠ‚ç‚¹ã€‚æ‰€ä»¥åŒå‘é“¾è¡¨å¯ä»¥ä»ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹å¾ˆæ–¹ä¾¿çš„èŒƒæ–‡å‰é©±å’Œåç»§èŠ‚ç‚¹ã€‚æ¯ä¸ªNodeå…¶å®æ˜¯ç”±çº¿ç¨‹å°è£…ï¼Œå½“çº¿ç¨‹äº‰æŠ¢é”å¤±è´¥åä¼šå°è£…æˆNodeåŠ å…¥åˆ°AQSé˜Ÿåˆ—ä¸­ã€‚</p><h3 id="72ã€AQS-å¯¹èµ„æºçš„å…±äº«æ–¹å¼ï¼Ÿ"><a href="#72ã€AQS-å¯¹èµ„æºçš„å…±äº«æ–¹å¼ï¼Ÿ" class="headerlink" title="72ã€AQS å¯¹èµ„æºçš„å…±äº«æ–¹å¼ï¼Ÿ"></a>72ã€AQS å¯¹èµ„æºçš„å…±äº«æ–¹å¼ï¼Ÿ</h3><p>AQSå®šä¹‰ä¸¤ç§èµ„æºå…±äº«æ–¹å¼</p><p>ï¼ˆ1ï¼‰Exclusiveï¼ˆç‹¬å ï¼‰</p><p>åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œï¼Œå¦‚ReentrantLockã€‚åˆå¯åˆ†ä¸ºå…¬å¹³é”å’Œéå…¬å¹³é”ï¼š</p><p>å…¬å¹³é”ï¼šæŒ‰ç…§çº¿ç¨‹åœ¨é˜Ÿåˆ—ä¸­çš„æ’é˜Ÿé¡ºåºï¼Œå…ˆåˆ°è€…å…ˆæ‹¿åˆ°é”<br>éå…¬å¹³é”ï¼šå½“çº¿ç¨‹è¦è·å–é”æ—¶ï¼Œæ— è§†é˜Ÿåˆ—é¡ºåºç›´æ¥å»æŠ¢é”ï¼Œè°æŠ¢åˆ°å°±æ˜¯è°çš„<br>ï¼ˆ2ï¼‰Shareï¼ˆå…±äº«ï¼‰</p><p>å¤šä¸ªçº¿ç¨‹å¯åŒæ—¶æ‰§è¡Œï¼Œå¦‚Semaphore/CountDownLatchã€‚Semaphoreã€CountDownLatchã€ CyclicBarrierã€ReadWriteLock æˆ‘ä»¬éƒ½ä¼šåœ¨åé¢è®²åˆ°ã€‚</p><p>ReentrantReadWriteLock å¯ä»¥çœ‹æˆæ˜¯ç»„åˆå¼ï¼Œå› ä¸ºReentrantReadWriteLockä¹Ÿå°±æ˜¯è¯»å†™é”å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹æŸä¸€èµ„æºè¿›è¡Œè¯»ã€‚</p><p>ä¸åŒçš„è‡ªå®šä¹‰åŒæ­¥å™¨äº‰ç”¨å…±äº«èµ„æºçš„æ–¹å¼ä¹Ÿä¸åŒã€‚è‡ªå®šä¹‰åŒæ­¥å™¨åœ¨å®ç°æ—¶åªéœ€è¦å®ç°å…±äº«èµ„æº state çš„è·å–ä¸é‡Šæ”¾æ–¹å¼å³å¯ï¼Œè‡³äºå…·ä½“çº¿ç¨‹ç­‰å¾…é˜Ÿåˆ—çš„ç»´æŠ¤ï¼ˆå¦‚è·å–èµ„æºå¤±è´¥å…¥é˜Ÿ/å”¤é†’å‡ºé˜Ÿç­‰ï¼‰ï¼ŒAQSå·²ç»åœ¨é¡¶å±‚å®ç°å¥½äº†ã€‚</p><h3 id="73ã€å¦‚ä½•è®©-Java-çš„çº¿ç¨‹å½¼æ­¤åŒæ­¥ï¼Ÿ"><a href="#73ã€å¦‚ä½•è®©-Java-çš„çº¿ç¨‹å½¼æ­¤åŒæ­¥ï¼Ÿ" class="headerlink" title="73ã€å¦‚ä½•è®© Java çš„çº¿ç¨‹å½¼æ­¤åŒæ­¥ï¼Ÿ"></a>73ã€å¦‚ä½•è®© Java çš„çº¿ç¨‹å½¼æ­¤åŒæ­¥ï¼Ÿ</h3><p>synchronized<br>volatile<br>ReenreantLock<br>ä½¿ç”¨å±€éƒ¨å˜é‡å®ç°çº¿ç¨‹åŒæ­¥</p><h3 id="74ã€ä½ äº†è§£è¿‡å“ªäº›åŒæ­¥å™¨ï¼Ÿè¯·åˆ†åˆ«ä»‹ç»ä¸‹ã€‚"><a href="#74ã€ä½ äº†è§£è¿‡å“ªäº›åŒæ­¥å™¨ï¼Ÿè¯·åˆ†åˆ«ä»‹ç»ä¸‹ã€‚" class="headerlink" title="74ã€ä½ äº†è§£è¿‡å“ªäº›åŒæ­¥å™¨ï¼Ÿè¯·åˆ†åˆ«ä»‹ç»ä¸‹ã€‚"></a>74ã€ä½ äº†è§£è¿‡å“ªäº›åŒæ­¥å™¨ï¼Ÿè¯·åˆ†åˆ«ä»‹ç»ä¸‹ã€‚</h3><p>ï¼ˆ1ï¼‰SemaphoreåŒæ­¥å™¨</p><p>ç‰¹å¾ï¼š</p><p>ç»å…¸çš„ä¿¡å·é‡ï¼Œé€šè¿‡è®¡æ•°å™¨æ§åˆ¶å¯¹å…±äº«èµ„æºçš„è®¿é—®<br>Semaphore(int count):åˆ›å»ºæ‹¥æœ‰countä¸ªè®¸å¯è¯çš„ä¿¡å·é‡<br>acquire()/acquire(int num) : è·å–1/numä¸ªè®¸å¯è¯<br>release/release(int num) : é‡Šæ”¾1/numä¸ªè®¸å¯è¯</p><p>ï¼ˆ2ï¼‰CountDownLatchåŒæ­¥å™¨</p><p>ç‰¹å¾ï¼š</p><p>å¿…é¡»å‘ç”ŸæŒ‡å®šæ•°é‡çš„äº‹ä»¶åæ‰å¯ä»¥ç»§ç»­è¿è¡Œ(æ¯”å¦‚èµ›è·‘æ¯”èµ›ï¼Œè£åˆ¤å–Šå‡º3,2,1ä¹‹åå¤§å®¶æ‰åŒæ—¶è·‘)<br>CountDownLatch(int count):å¿…é¡»å‘ç”Ÿcountä¸ªæ•°é‡æ‰å¯ä»¥æ‰“å¼€é”å­˜å™¨<br>await:ç­‰å¾…é”å­˜å™¨<br>countDown:è§¦å‘äº‹ä»¶</p><p>ï¼ˆ3ï¼‰CyclicBarrieråŒæ­¥å™¨</p><p>ç‰¹å¾ï¼š</p><p>é€‚ç”¨äºåªæœ‰å¤šä¸ªçº¿ç¨‹éƒ½åˆ°è¾¾é¢„å®šç‚¹æ—¶æ‰å¯ä»¥ç»§ç»­æ‰§è¡Œ(æ¯”å¦‚æ–—åœ°ä¸»ï¼Œéœ€è¦ç­‰é½ä¸‰ä¸ªäººæ‰å¼€å§‹)<br>CyclicBarrier(int num) :ç­‰å¾…çº¿ç¨‹çš„æ•°é‡<br>CyclicBarrier(int num, Runnable action) :ç­‰å¾…çº¿ç¨‹çš„æ•°é‡ä»¥åŠæ‰€æœ‰çº¿ç¨‹åˆ°è¾¾åçš„æ“ä½œ<br>await() : åˆ°è¾¾ä¸´ç•Œç‚¹åæš‚åœçº¿ç¨‹</p><p>ï¼ˆ4ï¼‰äº¤æ¢å™¨(Exchanger)åŒæ­¥å™¨</p><p>ï¼ˆ5ï¼‰PhaseråŒæ­¥å™¨</p><h3 id="75ã€Java-ä¸­çš„çº¿ç¨‹æ± æ˜¯å¦‚ä½•å®ç°çš„"><a href="#75ã€Java-ä¸­çš„çº¿ç¨‹æ± æ˜¯å¦‚ä½•å®ç°çš„" class="headerlink" title="75ã€Java ä¸­çš„çº¿ç¨‹æ± æ˜¯å¦‚ä½•å®ç°çš„"></a>75ã€Java ä¸­çš„çº¿ç¨‹æ± æ˜¯å¦‚ä½•å®ç°çš„</h3><p>åˆ›å»ºä¸€ä¸ªé˜»å¡é˜Ÿåˆ—æ¥å®¹çº³ä»»åŠ¡ï¼Œåœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œä»»åŠ¡æ—¶åˆ›å»ºè¶³å¤Ÿå¤šçš„çº¿ç¨‹ï¼Œå¹¶å¤„ç†ä»»åŠ¡ï¼Œä¹‹åæ¯ä¸ªå·¥ä½œçº¿ç¨‹è‡ªåŠ¨ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­è·å–çº¿ç¨‹ï¼Œç›´åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ä»»åŠ¡ä¸º0ä¸ºæ­¢ï¼Œæ­¤æ—¶çº¿ç¨‹å¤„äºç­‰å¾…çŠ¶æ€ï¼Œä¸€æ—¦æœ‰å·¥ä½œä»»åŠ¡åŠ å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œå³åˆ»å”¤é†’å·¥ä½œçº¿ç¨‹è¿›è¡Œå¤„ç†ï¼Œå®ç°çº¿ç¨‹çš„å¯å¤ç”¨æ€§ã€‚</p><p>çº¿ç¨‹æ± ä¸€èˆ¬åŒ…æ‹¬å››ä¸ªåŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼š</p><p>ï¼ˆ1ï¼‰çº¿ç¨‹æ± ç®¡ç†å™¨</p><p>ç”¨äºåˆ›å»ºçº¿ç¨‹æ± ï¼Œé”€æ¯çº¿ç¨‹æ± ï¼Œæ·»åŠ æ–°ä»»åŠ¡ã€‚</p><p>ï¼ˆ2ï¼‰å·¥ä½œçº¿ç¨‹</p><p>çº¿ç¨‹æ± ä¸­çº¿ç¨‹ï¼Œå¯å¾ªç¯æ‰§è¡Œä»»åŠ¡ï¼Œåœ¨æ²¡æœ‰ä»»åŠ¡æ—¶å¤„äºç­‰å¾…çŠ¶æ€ã€‚</p><p>ï¼ˆ3ï¼‰ä»»åŠ¡é˜Ÿåˆ—</p><p>ç”¨äºå­˜æ”¾æ²¡æœ‰å¤„ç†çš„ä»»åŠ¡ï¼Œä¸€ç§ç¼“å­˜æœºåˆ¶ã€‚</p><p>ï¼ˆ4ï¼‰ä»»åŠ¡æ¥å£</p><p>æ¯ä¸ªä»»åŠ¡å¿…é¡»å®ç°çš„æ¥å£ï¼Œä¾›å·¥ä½œçº¿ç¨‹è°ƒåº¦ä»»åŠ¡çš„æ‰§è¡Œï¼Œä¸»è¦è§„å®šäº†ä»»åŠ¡çš„å¼€å§‹å’Œæ”¶å°¾å·¥ä½œï¼Œå’Œä»»åŠ¡çš„çŠ¶æ€ã€‚</p><h3 id="76ã€åˆ›å»ºçº¿ç¨‹æ± çš„å‡ ä¸ªæ ¸å¿ƒæ„é€ å‚æ•°"><a href="#76ã€åˆ›å»ºçº¿ç¨‹æ± çš„å‡ ä¸ªæ ¸å¿ƒæ„é€ å‚æ•°" class="headerlink" title="76ã€åˆ›å»ºçº¿ç¨‹æ± çš„å‡ ä¸ªæ ¸å¿ƒæ„é€ å‚æ•°"></a>76ã€åˆ›å»ºçº¿ç¨‹æ± çš„å‡ ä¸ªæ ¸å¿ƒæ„é€ å‚æ•°</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Javaçº¿ç¨‹æ± çš„å®Œæ•´æ„é€ å‡½æ•°</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ThreadPoolExecutor</span><span class="params">(</span></span><br><span class="line"><span class="params">  <span class="type">int</span> corePoolSize, // çº¿ç¨‹æ± é•¿æœŸç»´æŒçš„æœ€å°çº¿ç¨‹æ•°ï¼Œå³ä½¿çº¿ç¨‹å¤„äºIdleçŠ¶æ€ï¼Œä¹Ÿä¸ä¼šå›æ”¶ã€‚</span></span><br><span class="line"><span class="params">  <span class="type">int</span> maximumPoolSize, // çº¿ç¨‹æ•°çš„ä¸Šé™</span></span><br><span class="line"><span class="params">  <span class="type">long</span> keepAliveTime, // çº¿ç¨‹æœ€å¤§ç”Ÿå‘½å‘¨æœŸã€‚</span></span><br><span class="line"><span class="params">  TimeUnit unit, //æ—¶é—´å•ä½                                 </span></span><br><span class="line"><span class="params">  BlockingQueue&lt;Runnable&gt; workQueue, //ä»»åŠ¡é˜Ÿåˆ—ã€‚å½“çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹éƒ½å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œè€Œæ­¤æ—¶ä»»åŠ¡æ•°é‡ç»§ç»­å¢åŠ ï¼Œåˆ™éœ€è¦ä¸€ä¸ªå®¹å™¨æ¥å®¹çº³è¿™äº›ä»»åŠ¡ï¼Œè¿™å°±æ˜¯ä»»åŠ¡é˜Ÿåˆ—ã€‚</span></span><br><span class="line"><span class="params">  ThreadFactory threadFactory, // çº¿ç¨‹å·¥å‚ã€‚å®šä¹‰å¦‚ä½•å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œå¯ä»¥è®¾ç½®çº¿ç¨‹åç§°ï¼Œå¹¶ä¸”å¯ä»¥ç¡®è®¤æ˜¯å¦æ˜¯åå°çº¿ç¨‹ç­‰ã€‚</span></span><br><span class="line"><span class="params">  RejectedExecutionHandler handler // æ‹’ç»ä»»åŠ¡å¤„ç†å™¨ã€‚ç”±äºè¶…å‡ºçº¿ç¨‹æ•°é‡å’Œé˜Ÿåˆ—å®¹é‡è€Œå¯¹ç»§ç»­å¢åŠ çš„ä»»åŠ¡è¿›è¡Œå¤„ç†çš„ç¨‹åºã€‚</span></span><br><span class="line"><span class="params">)</span></span><br></pre></td></tr></table></figure><h3 id="77ã€çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ˜¯æ€ä¹ˆåˆ›å»ºçš„ï¼Ÿæ˜¯ä¸€å¼€å§‹å°±éšç€çº¿ç¨‹æ± çš„å¯åŠ¨åˆ›å»ºå¥½çš„å—ï¼Ÿ"><a href="#77ã€çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ˜¯æ€ä¹ˆåˆ›å»ºçš„ï¼Ÿæ˜¯ä¸€å¼€å§‹å°±éšç€çº¿ç¨‹æ± çš„å¯åŠ¨åˆ›å»ºå¥½çš„å—ï¼Ÿ" class="headerlink" title="77ã€çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ˜¯æ€ä¹ˆåˆ›å»ºçš„ï¼Ÿæ˜¯ä¸€å¼€å§‹å°±éšç€çº¿ç¨‹æ± çš„å¯åŠ¨åˆ›å»ºå¥½çš„å—ï¼Ÿ"></a>77ã€çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ˜¯æ€ä¹ˆåˆ›å»ºçš„ï¼Ÿæ˜¯ä¸€å¼€å§‹å°±éšç€çº¿ç¨‹æ± çš„å¯åŠ¨åˆ›å»ºå¥½çš„å—ï¼Ÿ</h3><p>çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ˜¯åœ¨ç¬¬ä¸€æ¬¡æäº¤ä»»åŠ¡submitæ—¶åˆ›å»ºçš„</p><p>åˆ›å»ºçº¿ç¨‹çš„æ–¹å¼æœ‰ç»§æ‰¿Threadå’Œå®ç°Runnableï¼Œé‡å†™runæ–¹æ³•ï¼Œstartå¼€å§‹æ‰§è¡Œï¼Œwaitç­‰å¾…ï¼Œsleepä¼‘çœ ï¼Œshutdownåœæ­¢ã€‚</p><p>ï¼ˆ1ï¼‰newSingleThreadExecutorï¼šå•çº¿ç¨‹æ± ã€‚</p><p>é¡¾åæ€ä¹‰å°±æ˜¯ä¸€ä¸ªæ± ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è¿è¡Œï¼Œè¯¥çº¿ç¨‹æ°¸ä¸è¶…æ—¶ï¼Œè€Œä¸”ç”±äºæ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼Œå½“æœ‰å¤šä¸ªä»»åŠ¡éœ€è¦å¤„ç†æ—¶ï¼Œä¼šå°†å®ƒä»¬æ”¾ç½®åˆ°ä¸€ä¸ªæ— ç•Œé˜»å¡é˜Ÿåˆ—ä¸­é€ä¸ªå¤„ç†ï¼Œå®ƒçš„å®ç°ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title function_">newSingleThreadExecutor</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">FinalizableDelegatedExecutorService</span></span><br><span class="line">            (<span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">1</span>, <span class="number">1</span>,<span class="number">0L</span>, TimeUnit.MILLISECONDS,</span><br><span class="line">             <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;Runnable()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®ƒçš„ä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œä¸‹é¢æ˜¯ç®€å•çš„ç¤ºä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException,InterruptedException &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºå•çº¿ç¨‹æ‰§è¡Œå™¨</span></span><br><span class="line">    <span class="type">ExecutorService</span> <span class="variable">es</span> <span class="operator">=</span> Executors.newSingleThreadExecutor();</span><br><span class="line">    <span class="comment">// æ‰§è¡Œä¸€ä¸ªä»»åŠ¡</span></span><br><span class="line">    Future&lt;String&gt; future = es.submit(<span class="keyword">new</span> <span class="title class_">Callable</span>&lt;String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// è·å¾—ä»»åŠ¡æ‰§è¡Œåçš„è¿”å›å€¼</span></span><br><span class="line">    System.out.println(<span class="string">&quot;è¿”å›å€¼ï¼š&quot;</span> + future.get());</span><br><span class="line">    <span class="comment">// å…³é—­æ‰§è¡Œå™¨</span></span><br><span class="line">    es.shutdown();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰newCachedThreadPoolï¼šç¼“å†²åŠŸèƒ½çš„çº¿ç¨‹ã€‚</p><p>å»ºç«‹äº†ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œè€Œä¸”çº¿ç¨‹æ•°é‡æ˜¯æ²¡æœ‰é™åˆ¶çš„(å½“ç„¶ï¼Œä¸èƒ½è¶…è¿‡Integerçš„æœ€å¤§å€¼)ï¼Œæ–°å¢ä¸€ä¸ªä»»åŠ¡å³æœ‰ä¸€ä¸ªçº¿ç¨‹å¤„ç†ï¼Œæˆ–è€…å¤ç”¨ä¹‹å‰ç©ºé—²çš„çº¿ç¨‹ï¼Œæˆ–è€…é‡äº²å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯ä¸€æ—¦ä¸€ä¸ªçº¿ç¨‹åœ¨60ç§’å†…ä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€æ—¶ï¼ˆä¹Ÿå°±æ˜¯ä¸€åˆ†é’Ÿæ— äº‹å¯åšï¼‰ï¼Œåˆ™ä¼šè¢«ç»ˆæ­¢ï¼Œå…¶æºç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title function_">newCachedThreadPool</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">0</span>, Integer.MAX_VALUE,<span class="number">60L</span>, TimeUnit.SECONDS,</span><br><span class="line">                                      <span class="keyword">new</span> <span class="title class_">SynchronousQueue</span>&lt;Runnable&gt;());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œéœ€è¦è¯´æ˜çš„æ˜¯ï¼Œä»»åŠ¡é˜Ÿåˆ—ä½¿ç”¨äº†åŒæ­¥é˜»å¡é˜Ÿåˆ—ï¼Œè¿™æ„å‘³ç€å‘é˜Ÿåˆ—ä¸­åŠ å…¥ä¸€ä¸ªå…ƒç´ ï¼Œå³å¯å”¤é†’ä¸€ä¸ªçº¿ç¨‹(æ–°åˆ›å»ºçš„çº¿ç¨‹æˆ–å¤ç”¨ç©ºé—²çº¿ç¨‹æ¥å¤„ç†)ï¼Œè¿™ç§é˜Ÿåˆ—å·²ç»æ²¡æœ‰é˜Ÿåˆ—æ·±åº¦çš„æ¦‚å¿µäº†ã€‚</p><p>ï¼ˆ3ï¼‰newFixedThreadPoolï¼šå›ºå®šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± ã€‚</p><p>åœ¨åˆå§‹åŒ–æ—¶å·²ç»å†³å®šäº†çº¿ç¨‹çš„æœ€å¤§æ•°é‡ï¼Œè‹¥ä»»åŠ¡æ·»åŠ çš„èƒ½åŠ›è¶…å‡ºäº†çº¿ç¨‹çš„å¤„ç†èƒ½åŠ›ï¼Œåˆ™å»ºç«‹é˜»å¡é˜Ÿåˆ—å®¹çº³å¤šä½™çš„ä»»åŠ¡ï¼Œå…¶æºç å¦‚ä¸‹ï¼šã€€</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ExecutorService <span class="title function_">newFixedThreadPool</span><span class="params">(<span class="type">int</span> nThreads)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(nThreads, nThreads,</span><br><span class="line">                                      <span class="number">0L</span>, TimeUnit.MILLISECONDS,</span><br><span class="line">                                      <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;Runnable&gt;());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢è¿”å›çš„æ˜¯ä¸€ä¸ªThreadPoolExecutorï¼Œå®ƒçš„corePoolSizeå’ŒmaximumPoolSizeæ˜¯ç›¸ç­‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæœ€å¤§çº¿ç¨‹æ•°é‡ä¸ºnThreadsã€‚å¦‚æœä»»åŠ¡å¢é•¿çš„é€Ÿåº¦éå¸¸å¿«ï¼Œè¶…è¿‡äº†LinkedBlockingQueneçš„æœ€å¤§å®¹é‡(Integerçš„æœ€å¤§å€¼)ï¼Œé‚£æ­¤æ—¶ä¼šå¦‚ä½•å¤„ç†å‘¢ï¼Ÿä¼šæŒ‰ç…§ThreadPoolExecutoré»˜è®¤çš„æ‹’ç»ç­–ç•¥(é»˜è®¤æ˜¯DiscardPolicyï¼Œç›´æ¥ä¸¢å¼ƒ)æ¥å¤„ç†ã€‚</p><p>ä»¥ä¸Šä¸‰ç§çº¿ç¨‹æ± æ‰§è¡Œå™¨éƒ½æ˜¯ThreadPoolExecutorçš„ç®€åŒ–ç‰ˆï¼Œç›®çš„æ˜¯å¸®åŠ©å¼€å‘äººå‘˜å±è”½è¿‡å¾—çº¿ç¨‹ç»†èŠ‚ï¼Œç®€åŒ–å¤šçº¿ç¨‹å¼€å‘ã€‚å½“éœ€è¦è¿è¡Œå¼‚æ­¥ä»»åŠ¡æ—¶ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡Executorsè·å¾—ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œç„¶åè¿è¡Œä»»åŠ¡ï¼Œä¸éœ€è¦å…³æ³¨ThreadPoolExecutorçš„ä¸€ç³»åˆ—å‚æ•°æ—¶ä»€ä¹ˆå«ä¹‰ã€‚å½“ç„¶ï¼Œæœ‰æ—¶å€™è¿™ä¸‰ä¸ªçº¿ç¨‹ä¸èƒ½æ»¡è¶³è¦æ±‚ï¼Œæ­¤æ—¶åˆ™å¯ä»¥ç›´æ¥æ“ä½œThreadPoolExecutoræ¥å®ç°å¤æ‚çš„å¤šçº¿ç¨‹è®¡ç®—ã€‚</p><p>newSingleThreadExecutorã€newCachedThreadPoolã€newFixedThreadPoolæ˜¯çº¿ç¨‹æ± çš„ç®€åŒ–ç‰ˆï¼Œè€ŒThreadPoolExecutoråˆ™æ˜¯æ——èˆ°ç‰ˆ<em>_</em>ç®€åŒ–ç‰ˆå®¹æ˜“æ“ä½œï¼Œéœ€è¦äº†è§£çš„çŸ¥è¯†ç›¸å¯¹å°‘äº›ï¼Œæ–¹ä¾¿ä½¿ç”¨ï¼Œè€Œæ——èˆ°ç‰ˆåŠŸèƒ½é½å…¨ï¼Œé€‚ç”¨é¢å¹¿ï¼Œéš¾ä»¥é©¾é©­ã€‚</p><h3 id="78ã€volatile-å…³é”®å­—çš„ä½œç”¨"><a href="#78ã€volatile-å…³é”®å­—çš„ä½œç”¨" class="headerlink" title="78ã€volatile å…³é”®å­—çš„ä½œç”¨"></a>78ã€volatile å…³é”®å­—çš„ä½œç”¨</h3><p>å¯¹äºå¯è§æ€§ï¼ŒJava æä¾›äº† volatile å…³é”®å­—æ¥ä¿è¯å¯è§æ€§å’Œç¦æ­¢æŒ‡ä»¤é‡æ’ã€‚ volatile æä¾› happens-before çš„ä¿è¯ï¼Œç¡®ä¿ä¸€ä¸ªçº¿ç¨‹çš„ä¿®æ”¹èƒ½å¯¹å…¶ä»–çº¿ç¨‹æ˜¯å¯è§çš„ã€‚å½“ä¸€ä¸ªå…±äº«å˜é‡è¢« volatile ä¿®é¥°æ—¶ï¼Œå®ƒä¼šä¿è¯ä¿®æ”¹çš„å€¼ä¼šç«‹å³è¢«æ›´æ–°åˆ°ä¸»å­˜ï¼Œå½“æœ‰å…¶ä»–çº¿ç¨‹éœ€è¦è¯»å–æ—¶ï¼Œå®ƒä¼šå»å†…å­˜ä¸­è¯»å–æ–°å€¼ã€‚</p><p>ä»å®è·µè§’åº¦è€Œè¨€ï¼Œvolatile çš„ä¸€ä¸ªé‡è¦ä½œç”¨å°±æ˜¯å’Œ CAS ç»“åˆï¼Œä¿è¯äº†åŸå­æ€§ï¼Œè¯¦ç»†çš„å¯ä»¥å‚è§ java.util.concurrent.atomic åŒ…ä¸‹çš„ç±»ï¼Œæ¯”å¦‚ AtomicIntegerã€‚</p><p>volatile å¸¸ç”¨äºå¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å•æ¬¡æ“ä½œ(å•æ¬¡è¯»æˆ–è€…å•æ¬¡å†™)ã€‚</p><h3 id="79ã€æ—¢ç„¶-volatile-èƒ½å¤Ÿä¿è¯çº¿ç¨‹é—´çš„å˜é‡å¯è§æ€§ï¼Œæ˜¯ä¸æ˜¯å°±æ„å‘³ç€åŸºäº-volatile-å˜é‡çš„è¿ç®—å°±æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Ÿ"><a href="#79ã€æ—¢ç„¶-volatile-èƒ½å¤Ÿä¿è¯çº¿ç¨‹é—´çš„å˜é‡å¯è§æ€§ï¼Œæ˜¯ä¸æ˜¯å°±æ„å‘³ç€åŸºäº-volatile-å˜é‡çš„è¿ç®—å°±æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Ÿ" class="headerlink" title="79ã€æ—¢ç„¶ volatile èƒ½å¤Ÿä¿è¯çº¿ç¨‹é—´çš„å˜é‡å¯è§æ€§ï¼Œæ˜¯ä¸æ˜¯å°±æ„å‘³ç€åŸºäº volatile å˜é‡çš„è¿ç®—å°±æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Ÿ"></a>79ã€æ—¢ç„¶ volatile èƒ½å¤Ÿä¿è¯çº¿ç¨‹é—´çš„å˜é‡å¯è§æ€§ï¼Œæ˜¯ä¸æ˜¯å°±æ„å‘³ç€åŸºäº volatile å˜é‡çš„è¿ç®—å°±æ˜¯å¹¶å‘å®‰å…¨çš„ï¼Ÿ</h3><p>volatileä¿®é¥°çš„å˜é‡åœ¨å„ä¸ªçº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ä¸å­˜åœ¨ä¸€è‡´æ€§çš„é—®é¢˜ï¼ˆåœ¨å„ä¸ªçº¿ç¨‹å·¥ä½œçš„å†…å­˜ä¸­ï¼Œvolatileä¿®é¥°çš„å˜é‡ä¹Ÿä¼šå­˜åœ¨ä¸ä¸€è‡´çš„æƒ…å†µï¼Œä½†æ˜¯ç”±äºæ¯æ¬¡ä½¿ç”¨ä¹‹å‰éƒ½ä¼šå…ˆåˆ·æ–°ä¸»å­˜ä¸­çš„æ•°æ®åˆ°å·¥ä½œå†…å­˜ï¼Œæ‰§è¡Œå¼•æ“çœ‹ä¸åˆ°ä¸ä¸€è‡´çš„æƒ…å†µï¼Œå› æ­¤å¯ä»¥è®¤ä¸ºä¸å­˜åœ¨ä¸ä¸€è‡´çš„é—®é¢˜ï¼‰ï¼Œä½†æ˜¯javaçš„è¿ç®—å¹¶éåŸå­æ€§çš„æ“ä½œï¼Œå¯¼è‡´volatileåœ¨å¹¶å‘ä¸‹å¹¶éæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p><h3 id="80ã€ThreadLocal-æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ"><a href="#80ã€ThreadLocal-æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ" class="headerlink" title="80ã€ThreadLocal æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ"></a>80ã€ThreadLocal æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ</h3><p>ThreadLocal æ˜¯ä¸€ä¸ªæœ¬åœ°çº¿ç¨‹å‰¯æœ¬å˜é‡å·¥å…·ç±»ï¼Œåœ¨æ¯ä¸ªçº¿ç¨‹ä¸­éƒ½åˆ›å»ºäº†ä¸€ä¸ª ThreadLocalMap å¯¹è±¡ï¼Œç®€å•è¯´ ThreadLocal å°±æ˜¯ä¸€ç§ä»¥ç©ºé—´æ¢æ—¶é—´çš„åšæ³•ï¼Œæ¯ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®è‡ªå·±å†…éƒ¨ ThreadLocalMap å¯¹è±¡å†…çš„ valueã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œé¿å…èµ„æºåœ¨å¤šçº¿ç¨‹é—´å…±äº«ã€‚</p><p>åŸç†ï¼šçº¿ç¨‹å±€éƒ¨å˜é‡æ˜¯å±€é™äºçº¿ç¨‹å†…éƒ¨çš„å˜é‡ï¼Œå±äºçº¿ç¨‹è‡ªèº«æ‰€æœ‰ï¼Œä¸åœ¨å¤šä¸ªçº¿ç¨‹é—´å…±äº«ã€‚Javaæä¾›ThreadLocalç±»æ¥æ”¯æŒçº¿ç¨‹å±€éƒ¨å˜é‡ï¼Œæ˜¯ä¸€ç§å®ç°çº¿ç¨‹å®‰å…¨çš„æ–¹å¼ã€‚ä½†æ˜¯åœ¨ç®¡ç†ç¯å¢ƒä¸‹ï¼ˆå¦‚ web æœåŠ¡å™¨ï¼‰ä½¿ç”¨çº¿ç¨‹å±€éƒ¨å˜é‡çš„æ—¶å€™è¦ç‰¹åˆ«å°å¿ƒï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå·¥ä½œçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸæ¯”ä»»ä½•åº”ç”¨å˜é‡çš„ç”Ÿå‘½å‘¨æœŸéƒ½è¦é•¿ã€‚ä»»ä½•çº¿ç¨‹å±€éƒ¨å˜é‡ä¸€æ—¦åœ¨å·¥ä½œå®Œæˆåæ²¡æœ‰é‡Šæ”¾ï¼ŒJava åº”ç”¨å°±å­˜åœ¨å†…å­˜æ³„éœ²çš„é£é™©ã€‚</p><p>ç»å…¸çš„ä½¿ç”¨åœºæ™¯æ˜¯ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…ä¸€ä¸ª JDBC è¿æ¥ Connectionã€‚è¿™æ ·å°±å¯ä»¥ä¿è¯æ¯ä¸ªçº¿ç¨‹çš„éƒ½åœ¨å„è‡ªçš„ Connection ä¸Šè¿›è¡Œæ•°æ®åº“çš„æ“ä½œï¼Œä¸ä¼šå‡ºç° A çº¿ç¨‹å…³äº† Bçº¿ç¨‹æ­£åœ¨ä½¿ç”¨çš„ Connectionï¼› è¿˜æœ‰ Session ç®¡ç† ç­‰é—®é¢˜ã€‚</p><h3 id="81ã€è¯·è°ˆè°ˆ-ThreadLocal-æ˜¯æ€ä¹ˆè§£å†³å¹¶å‘å®‰å…¨çš„ï¼Ÿ"><a href="#81ã€è¯·è°ˆè°ˆ-ThreadLocal-æ˜¯æ€ä¹ˆè§£å†³å¹¶å‘å®‰å…¨çš„ï¼Ÿ" class="headerlink" title="81ã€è¯·è°ˆè°ˆ ThreadLocal æ˜¯æ€ä¹ˆè§£å†³å¹¶å‘å®‰å…¨çš„ï¼Ÿ"></a>81ã€è¯·è°ˆè°ˆ ThreadLocal æ˜¯æ€ä¹ˆè§£å†³å¹¶å‘å®‰å…¨çš„ï¼Ÿ</h3><p>åœ¨javaç¨‹åºä¸­ï¼Œå¸¸ç”¨çš„æœ‰ä¸¤ç§æœºåˆ¶æ¥è§£å†³å¤šçº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Œä¸€ç§æ˜¯sychronizedæ–¹å¼ï¼Œé€šè¿‡é”æœºåˆ¶ï¼Œä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œæ—¶ï¼Œè®©å¦ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…ï¼Œæ˜¯ä»¥æ—¶é—´æ¢ç©ºé—´çš„æ–¹å¼æ¥è®©å¤šçº¿ç¨‹ä¸²è¡Œæ‰§è¡Œã€‚è€Œå¦å¤–ä¸€ç§æ–¹å¼å°±æ˜¯ThreadLocalæ–¹å¼ï¼Œé€šè¿‡åˆ›å»ºçº¿ç¨‹å±€éƒ¨å˜é‡ï¼Œä»¥ç©ºé—´æ¢æ—¶é—´çš„æ–¹å¼æ¥è®©å¤šçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œã€‚ä¸¤ç§æ–¹å¼å„æœ‰ä¼˜åŠ£ï¼Œé€‚ç”¨äºä¸åŒçš„åœºæ™¯ï¼Œè¦æ ¹æ®ä¸åŒçš„ä¸šåŠ¡åœºæ™¯æ¥è¿›è¡Œé€‰æ‹©ã€‚</p><p>åœ¨springçš„æºç ä¸­ï¼Œå°±ä½¿ç”¨äº†ThreadLocalæ¥ç®¡ç†è¿æ¥ï¼Œåœ¨å¾ˆå¤šå¼€æºé¡¹ç›®ä¸­ï¼Œéƒ½ç»å¸¸ä½¿ç”¨ThreadLocalæ¥æ§åˆ¶å¤šçº¿ç¨‹å¹¶å‘é—®é¢˜ï¼Œå› ä¸ºå®ƒè¶³å¤Ÿçš„ç®€å•ï¼Œæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒæ˜¯å¦æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå› ä¸ºå˜é‡æ˜¯æ¯ä¸ªçº¿ç¨‹æ‰€ç‰¹æœ‰çš„ã€‚</p><h3 id="82ã€å¾ˆå¤šäººéƒ½è¯´è¦æ…ç”¨-ThreadLocalï¼Œè°ˆè°ˆä½ çš„ç†è§£ï¼Œä½¿ç”¨-ThreadLocal-éœ€è¦æ³¨æ„äº›ä»€ä¹ˆï¼Ÿ"><a href="#82ã€å¾ˆå¤šäººéƒ½è¯´è¦æ…ç”¨-ThreadLocalï¼Œè°ˆè°ˆä½ çš„ç†è§£ï¼Œä½¿ç”¨-ThreadLocal-éœ€è¦æ³¨æ„äº›ä»€ä¹ˆï¼Ÿ" class="headerlink" title="82ã€å¾ˆå¤šäººéƒ½è¯´è¦æ…ç”¨ ThreadLocalï¼Œè°ˆè°ˆä½ çš„ç†è§£ï¼Œä½¿ç”¨ ThreadLocal éœ€è¦æ³¨æ„äº›ä»€ä¹ˆï¼Ÿ"></a>82ã€å¾ˆå¤šäººéƒ½è¯´è¦æ…ç”¨ ThreadLocalï¼Œè°ˆè°ˆä½ çš„ç†è§£ï¼Œä½¿ç”¨ ThreadLocal éœ€è¦æ³¨æ„äº›ä»€ä¹ˆï¼Ÿ</h3><p>ThreadLocal å˜é‡è§£å†³äº†å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å•ä¸ªçº¿ç¨‹ä¸­å˜é‡çš„å…±äº«é—®é¢˜ï¼Œä½¿ç”¨åä¸ºThreadLocalMapçš„å“ˆå¸Œè¡¨è¿›è¡Œç»´æŠ¤ï¼ˆkeyä¸ºThreadLocalå˜é‡åï¼Œvalueä¸ºThreadLocalå˜é‡çš„å€¼ï¼‰ï¼›</p><p>ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li>çº¿ç¨‹ä¹‹é—´çš„threadLocalå˜é‡æ˜¯äº’ä¸å½±å“çš„ï¼Œ</li><li>ä½¿ç”¨private final staticè¿›è¡Œä¿®é¥°ï¼Œé˜²æ­¢å¤šå®ä¾‹æ—¶å†…å­˜çš„æ³„éœ²é—®é¢˜</li><li>çº¿ç¨‹æ± ç¯å¢ƒä¸‹ä½¿ç”¨åå°†threadLocalå˜é‡removeæ‰æˆ–è®¾ç½®æˆä¸€ä¸ªåˆå§‹å€¼</li></ul><h3 id="83ã€ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ"><a href="#83ã€ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ" class="headerlink" title="83ã€ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ"></a>83ã€ä¸ºä»€ä¹ˆä»£ç ä¼šé‡æ’åºï¼Ÿ</h3><p>åœ¨æ‰§è¡Œç¨‹åºæ—¶ï¼Œä¸ºäº†æä¾›æ€§èƒ½ï¼Œå¤„ç†å™¨å’Œç¼–è¯‘å™¨å¸¸å¸¸ä¼šå¯¹æŒ‡ä»¤è¿›è¡Œé‡æ’åºï¼Œä½†æ˜¯ä¸èƒ½éšæ„é‡æ’åºï¼Œä¸æ˜¯ä½ æƒ³æ€ä¹ˆæ’åºå°±æ€ä¹ˆæ’åºï¼Œå®ƒéœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼š</p><ul><li>åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸èƒ½æ”¹å˜ç¨‹åºè¿è¡Œçš„ç»“æœï¼›</li><li>å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»çš„ä¸å…è®¸é‡æ’åº</li></ul><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šé‡æ’åºä¸ä¼šå½±å“å•çº¿ç¨‹ç¯å¢ƒçš„æ‰§è¡Œç»“æœï¼Œä½†æ˜¯ä¼šç ´åå¤šçº¿ç¨‹çš„æ‰§è¡Œè¯­ä¹‰ã€‚</p><h3 id="84ã€ä»€ä¹ˆæ˜¯è‡ªæ—‹"><a href="#84ã€ä»€ä¹ˆæ˜¯è‡ªæ—‹" class="headerlink" title="84ã€ä»€ä¹ˆæ˜¯è‡ªæ—‹"></a>84ã€ä»€ä¹ˆæ˜¯è‡ªæ—‹</h3><p>å¾ˆå¤š synchronized é‡Œé¢çš„ä»£ç åªæ˜¯ä¸€äº›å¾ˆç®€å•çš„ä»£ç ï¼Œæ‰§è¡Œæ—¶é—´éå¸¸å¿«ï¼Œæ­¤æ—¶ç­‰å¾…çš„çº¿ç¨‹éƒ½åŠ é”å¯èƒ½æ˜¯ä¸€ç§ä¸å¤ªå€¼å¾—çš„æ“ä½œï¼Œå› ä¸ºçº¿ç¨‹é˜»å¡æ¶‰åŠåˆ°ç”¨æˆ·æ€å’Œå†…æ ¸æ€åˆ‡æ¢çš„é—®é¢˜ã€‚æ—¢ç„¶ synchronized é‡Œé¢çš„ä»£ç æ‰§è¡Œå¾—éå¸¸å¿«ï¼Œä¸å¦¨è®©ç­‰å¾…é”çš„çº¿ç¨‹ä¸è¦è¢«é˜»å¡ï¼Œè€Œæ˜¯åœ¨ synchronized çš„è¾¹ç•Œåšå¿™å¾ªç¯ï¼Œè¿™å°±æ˜¯è‡ªæ—‹ã€‚å¦‚æœåšäº†å¤šæ¬¡å¾ªç¯å‘ç°è¿˜æ²¡æœ‰è·å¾—é”ï¼Œå†é˜»å¡ï¼Œè¿™æ ·å¯èƒ½æ˜¯ä¸€ç§æ›´å¥½çš„ç­–ç•¥ã€‚</p><h3 id="85ã€å¤šçº¿ç¨‹ä¸­-synchronized-é”å‡çº§çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#85ã€å¤šçº¿ç¨‹ä¸­-synchronized-é”å‡çº§çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="85ã€å¤šçº¿ç¨‹ä¸­ synchronized é”å‡çº§çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>85ã€å¤šçº¿ç¨‹ä¸­ synchronized é”å‡çº§çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>synchronized é”å‡çº§åŸç†ï¼šåœ¨é”å¯¹è±¡çš„å¯¹è±¡å¤´é‡Œé¢æœ‰ä¸€ä¸ª threadid å­—æ®µï¼Œåœ¨ç¬¬ä¸€æ¬¡è®¿é—®çš„æ—¶å€™ threadid ä¸ºç©ºï¼Œjvm è®©å…¶æŒæœ‰åå‘é”ï¼Œå¹¶å°† threadid è®¾ç½®ä¸ºå…¶çº¿ç¨‹ idï¼Œå†æ¬¡è¿›å…¥çš„æ—¶å€™ä¼šå…ˆåˆ¤æ–­ threadid æ˜¯å¦ä¸å…¶çº¿ç¨‹ id ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´åˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨æ­¤å¯¹è±¡ï¼Œå¦‚æœä¸ä¸€è‡´ï¼Œåˆ™å‡çº§åå‘é”ä¸ºè½»é‡çº§é”ï¼Œé€šè¿‡è‡ªæ—‹å¾ªç¯ä¸€å®šæ¬¡æ•°æ¥è·å–é”ï¼Œæ‰§è¡Œä¸€å®šæ¬¡æ•°ä¹‹åï¼Œå¦‚æœè¿˜æ²¡æœ‰æ­£å¸¸è·å–åˆ°è¦ä½¿ç”¨çš„å¯¹è±¡ï¼Œæ­¤æ—¶å°±ä¼šæŠŠé”ä»è½»é‡çº§å‡çº§ä¸ºé‡é‡çº§é”ï¼Œæ­¤è¿‡ç¨‹å°±æ„æˆäº† synchronized é”çš„å‡çº§ã€‚</p><p>é”çš„å‡çº§çš„ç›®çš„ï¼šé”å‡çº§æ˜¯ä¸ºäº†å‡ä½äº†é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ã€‚åœ¨ Java 6 ä¹‹åä¼˜åŒ– synchronized çš„å®ç°æ–¹å¼ï¼Œä½¿ç”¨äº†åå‘é”å‡çº§ä¸ºè½»é‡çº§é”å†å‡çº§åˆ°é‡é‡çº§é”çš„æ–¹å¼ï¼Œä»è€Œå‡ä½äº†é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ã€‚</p><h3 id="86ã€synchronized-å’Œ-ReentrantLock-åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#86ã€synchronized-å’Œ-ReentrantLock-åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="86ã€synchronized å’Œ ReentrantLock åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>86ã€synchronized å’Œ ReentrantLock åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>synchronized æ˜¯å’Œ ifã€elseã€forã€while ä¸€æ ·çš„å…³é”®å­—ï¼ŒReentrantLock æ˜¯ç±»ï¼Œè¿™æ˜¯äºŒè€…çš„æœ¬è´¨åŒºåˆ«ã€‚æ—¢ç„¶ ReentrantLock æ˜¯ç±»ï¼Œé‚£ä¹ˆå®ƒå°±æä¾›äº†æ¯”synchronized æ›´å¤šæ›´çµæ´»çš„ç‰¹æ€§ï¼Œå¯ä»¥è¢«ç»§æ‰¿ã€å¯ä»¥æœ‰æ–¹æ³•ã€å¯ä»¥æœ‰å„ç§å„æ ·çš„ç±»å˜é‡</p><p>synchronized æ—©æœŸçš„å®ç°æ¯”è¾ƒä½æ•ˆï¼Œå¯¹æ¯” ReentrantLockï¼Œå¤§å¤šæ•°åœºæ™¯æ€§èƒ½éƒ½ç›¸å·®è¾ƒå¤§ï¼Œä½†æ˜¯åœ¨ Java 6 ä¸­å¯¹ synchronized è¿›è¡Œäº†éå¸¸å¤šçš„æ”¹è¿›ã€‚</p><p>ç›¸åŒç‚¹ï¼šä¸¤è€…éƒ½æ˜¯å¯é‡å…¥é”</p><p>ä¸¤è€…éƒ½æ˜¯å¯é‡å…¥é”ã€‚â€œå¯é‡å…¥é”â€æ¦‚å¿µæ˜¯ï¼šè‡ªå·±å¯ä»¥å†æ¬¡è·å–è‡ªå·±çš„å†…éƒ¨é”ã€‚æ¯”å¦‚ä¸€ä¸ªçº¿ç¨‹è·å¾—äº†æŸä¸ªå¯¹è±¡çš„é”ï¼Œæ­¤æ—¶è¿™ä¸ªå¯¹è±¡é”è¿˜æ²¡æœ‰é‡Šæ”¾ï¼Œå½“å…¶å†æ¬¡æƒ³è¦è·å–è¿™ä¸ªå¯¹è±¡çš„é”çš„æ—¶å€™è¿˜æ˜¯å¯ä»¥è·å–çš„ï¼Œå¦‚æœä¸å¯é”é‡å…¥çš„è¯ï¼Œå°±ä¼šé€ æˆæ­»é”ã€‚åŒä¸€ä¸ªçº¿ç¨‹æ¯æ¬¡è·å–é”ï¼Œé”çš„è®¡æ•°å™¨éƒ½è‡ªå¢1ï¼Œæ‰€ä»¥è¦ç­‰åˆ°é”çš„è®¡æ•°å™¨ä¸‹é™ä¸º0æ—¶æ‰èƒ½é‡Šæ”¾é”ã€‚</p><p>ä¸»è¦åŒºåˆ«å¦‚ä¸‹ï¼š</p><ul><li>ReentrantLock ä½¿ç”¨èµ·æ¥æ¯”è¾ƒçµæ´»ï¼Œä½†æ˜¯å¿…é¡»æœ‰é‡Šæ”¾é”çš„é…åˆåŠ¨ä½œï¼›</li><li>ReentrantLock å¿…é¡»æ‰‹åŠ¨è·å–ä¸é‡Šæ”¾é”ï¼Œè€Œ synchronized ä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å’Œå¼€å¯é”ï¼›</li><li>ReentrantLock åªé€‚ç”¨äºä»£ç å—é”ï¼Œè€Œ synchronized å¯ä»¥ä¿®é¥°ç±»ã€æ–¹æ³•ã€å˜é‡ç­‰ã€‚</li><li>äºŒè€…çš„é”æœºåˆ¶å…¶å®ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚ReentrantLock åº•å±‚è°ƒç”¨çš„æ˜¯ Unsafe çš„park æ–¹æ³•</li><li>åŠ é”ï¼Œsynchronized æ“ä½œçš„åº”è¯¥æ˜¯å¯¹è±¡å¤´ä¸­ mark word</li></ul><p>Javaä¸­æ¯ä¸€ä¸ªå¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºé”ï¼Œè¿™æ˜¯synchronizedå®ç°åŒæ­¥çš„åŸºç¡€ï¼š</p><ul><li>æ™®é€šåŒæ­¥æ–¹æ³•ï¼Œé”æ˜¯å½“å‰å®ä¾‹å¯¹è±¡</li><li>é™æ€åŒæ­¥æ–¹æ³•ï¼Œé”æ˜¯å½“å‰ç±»çš„classå¯¹è±¡</li><li>åŒæ­¥æ–¹æ³•å—ï¼Œé”æ˜¯æ‹¬å·é‡Œé¢çš„å¯¹è±¡</li></ul><h3 id="87ã€Java-Concurrency-API-ä¸­çš„-Lock-æ¥å£-Lock-interface-æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ"><a href="#87ã€Java-Concurrency-API-ä¸­çš„-Lock-æ¥å£-Lock-interface-æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ" class="headerlink" title="87ã€Java Concurrency API ä¸­çš„ Lock æ¥å£(Lock interface)æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ"></a>87ã€Java Concurrency API ä¸­çš„ Lock æ¥å£(Lock interface)æ˜¯ä»€ä¹ˆï¼Ÿå¯¹æ¯”åŒæ­¥å®ƒæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ</h3><p>Lock æ¥å£æ¯”åŒæ­¥æ–¹æ³•å’ŒåŒæ­¥å—æä¾›äº†æ›´å…·æ‰©å±•æ€§çš„é”æ“ä½œã€‚ä»–ä»¬å…è®¸æ›´çµæ´»çš„ç»“æ„ï¼Œå¯ä»¥å…·æœ‰å®Œå…¨ä¸åŒçš„æ€§è´¨ï¼Œå¹¶ä¸”å¯ä»¥æ”¯æŒå¤šä¸ªç›¸å…³ç±»çš„æ¡ä»¶å¯¹è±¡ã€‚</p><p>å®ƒçš„ä¼˜åŠ¿æœ‰ï¼š</p><p>ï¼ˆ1ï¼‰å¯ä»¥ä½¿é”æ›´å…¬å¹³</p><p>ï¼ˆ2ï¼‰å¯ä»¥ä½¿çº¿ç¨‹åœ¨ç­‰å¾…é”çš„æ—¶å€™å“åº”ä¸­æ–­</p><p>ï¼ˆ3ï¼‰å¯ä»¥è®©çº¿ç¨‹å°è¯•è·å–é”ï¼Œå¹¶åœ¨æ— æ³•è·å–é”çš„æ—¶å€™ç«‹å³è¿”å›æˆ–è€…ç­‰å¾…ä¸€æ®µæ—¶é—´</p><p>ï¼ˆ4ï¼‰å¯ä»¥åœ¨ä¸åŒçš„èŒƒå›´ï¼Œä»¥ä¸åŒçš„é¡ºåºè·å–å’Œé‡Šæ”¾é”</p><p>æ•´ä½“ä¸Šæ¥è¯´ Lock æ˜¯ synchronized çš„æ‰©å±•ç‰ˆï¼ŒLock æä¾›äº†æ— æ¡ä»¶çš„ã€å¯è½®è¯¢çš„(tryLock æ–¹æ³•)ã€å®šæ—¶çš„(tryLock å¸¦å‚æ–¹æ³•)ã€å¯ä¸­æ–­çš„(lockInterruptibly)ã€å¯å¤šæ¡ä»¶é˜Ÿåˆ—çš„(newCondition æ–¹æ³•)é”æ“ä½œã€‚å¦å¤– Lock çš„å®ç°ç±»åŸºæœ¬éƒ½æ”¯æŒéå…¬å¹³é”(é»˜è®¤)å’Œå…¬å¹³é”ï¼Œsynchronized åªæ”¯æŒéå…¬å¹³é”ï¼Œå½“ç„¶ï¼Œåœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œéå…¬å¹³é”æ˜¯é«˜æ•ˆçš„é€‰æ‹©ã€‚</p><h3 id="88ã€jsp-å’Œ-servlet-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#88ã€jsp-å’Œ-servlet-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="88ã€jsp å’Œ servlet æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>88ã€jsp å’Œ servlet æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰servletæ˜¯æœåŠ¡å™¨ç«¯çš„Javaç¨‹åºï¼Œå®ƒæ‹…å½“å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„ä¸­é—´å±‚ã€‚</p><p>ï¼ˆ2ï¼‰jspå…¨åä¸ºJava server pagesï¼Œä¸­æ–‡åå«JavaæœåŠ¡å™¨é¡µé¢ï¼Œå…¶æœ¬è´¨æ˜¯ä¸€ä¸ªç®€åŒ–çš„servletè®¾è®¡ã€‚JSPæ˜¯ä¸€ç§åŠ¨æ€é¡µé¢è®¾è®¡ï¼Œå®ƒçš„ä¸»è¦ç›®çš„æ˜¯å°†è¡¨ç¤ºé€»è¾‘ä»servletä¸­åˆ†ç¦»å‡ºæ¥ã€‚</p><p>ï¼ˆ3ï¼‰JVMåªèƒ½è¯†åˆ«Javaä»£ç ï¼Œä¸èƒ½è¯†åˆ«JSPï¼ŒJSPç¼–è¯‘åå˜æˆäº†servletï¼Œwebå®¹å™¨å°†JSPçš„ä»£ç ç¼–è¯‘æˆJVMèƒ½å¤Ÿè¯†åˆ«çš„Javaç±»ï¼ˆservletï¼‰ã€‚</p><p>ï¼ˆ4ï¼‰JSPæœ‰å†…ç½®å¯¹è±¡ã€servletæ²¡æœ‰å†…ç½®å¯¹è±¡ã€‚</p><h3 id="89ã€jsp-æœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#89ã€jsp-æœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="89ã€jsp æœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>89ã€jsp æœ‰å“ªäº›å†…ç½®å¯¹è±¡ï¼Ÿä½œç”¨åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>JSPä¹å¤§å†…ç½®å¯¹è±¡ï¼š</p><ol><li>pageContextï¼Œé¡µé¢ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œç›¸å½“äºé¡µé¢ä¸­æ‰€æœ‰åŠŸèƒ½çš„é›†åˆï¼Œé€šè¿‡å®ƒå¯ä»¥è·å–JSPé¡µé¢çš„outã€requestã€responseã€sessionã€applicationå¯¹è±¡ã€‚</li><li>request</li><li>response</li><li>session</li><li>applicationï¼Œåº”ç”¨ç¨‹åºå¯¹è±¡ï¼Œapplicationå®ç°äº†ç”¨æˆ·é—´æ•°æ®çš„å…±äº«ï¼Œå¯å­˜æ”¾å…¨å±€å˜é‡ï¼Œå®ƒå¼€å§‹äºæœåŠ¡å™¨å¯åŠ¨ï¼ŒçŸ¥é“æœåŠ¡å™¨å…³é—­ã€‚</li><li>pageï¼Œå°±æ˜¯JSPæœ¬èº«ã€‚</li><li>exception</li><li>outï¼Œoutç”¨äºåœ¨webæµè§ˆå™¨å†…è¾“å‡ºä¿¡æ¯ï¼Œå¹¶ä¸”ç®¡ç†åº”ç”¨æœåŠ¡å™¨ä¸Šçš„è¾“å‡ºç¼“å†²åŒºï¼Œä½œç”¨åŸŸpageã€‚</li><li>configï¼Œå–å¾—æœåŠ¡å™¨çš„é…ç½®ä¿¡æ¯ã€‚</li></ol><h3 id="90ã€forward-å’Œ-redirect-çš„åŒºåˆ«ï¼Ÿ"><a href="#90ã€forward-å’Œ-redirect-çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="90ã€forward å’Œ redirect çš„åŒºåˆ«ï¼Ÿ"></a>90ã€forward å’Œ redirect çš„åŒºåˆ«ï¼Ÿ</h3><ol><li>forwardæ˜¯ç›´æ¥è¯·æ±‚è½¬å‘ï¼›redirectæ˜¯é—´æ¥è¯·æ±‚è½¬å‘ï¼Œåˆå«é‡å®šå‘ã€‚</li><li>forwardï¼Œå®¢æˆ·ç«¯å’Œæµè§ˆå™¨æ‰§è¡Œä¸€æ¬¡è¯·æ±‚ï¼›redirectï¼Œå®¢æˆ·ç«¯å’Œæµè§ˆå™¨æ‰§è¡Œä¸¤æ¬¡è¯·æ±‚ã€‚</li><li>forwardï¼Œç»å…¸çš„MVCæ¨¡å¼å°±æ˜¯forwardï¼›redirectï¼Œç”¨äºé¿å…ç”¨æˆ·çš„éæ­£å¸¸è®¿é—®ã€‚ï¼ˆä¾‹å¦‚ç”¨æˆ·éæ­£å¸¸è®¿é—®ï¼Œservletå°±å¯ä»¥å°†HTTPè¯·æ±‚é‡å®šå‘åˆ°ç™»å½•é¡µé¢ï¼‰ã€‚</li><li>forwardï¼Œåœ°å€ä¸å˜ï¼›redirectï¼Œåœ°å€æ”¹å˜ã€‚</li><li>forwardå¸¸ç”¨æ–¹æ³•ï¼šRequestDispatcherç±»çš„forward()æ–¹æ³•ï¼›redirectå¸¸ç”¨æ–¹æ³•ï¼šHttpServletRequestç±»çš„sendRedirect()æ–¹æ³•ã€‚</li></ol><h3 id="91ã€è¯´ä¸€ä¸‹-jsp-çš„-4-ç§ä½œç”¨åŸŸï¼Ÿ"><a href="#91ã€è¯´ä¸€ä¸‹-jsp-çš„-4-ç§ä½œç”¨åŸŸï¼Ÿ" class="headerlink" title="91ã€è¯´ä¸€ä¸‹ jsp çš„ 4 ç§ä½œç”¨åŸŸï¼Ÿ"></a>91ã€è¯´ä¸€ä¸‹ jsp çš„ 4 ç§ä½œç”¨åŸŸï¼Ÿ</h3><p>applicationã€sessionã€requestã€page</p><h3 id="92ã€session-å’Œ-cookie-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#92ã€session-å’Œ-cookie-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="92ã€session å’Œ cookie æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>92ã€session å’Œ cookie æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>ï¼ˆ1ï¼‰å­˜å‚¨ä½ç½®ä¸åŒ</p><ul><li>cookieåœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ï¼›</li><li>sessionåœ¨æœåŠ¡å™¨ï¼›</li></ul><p>ï¼ˆ2ï¼‰å­˜å‚¨å®¹é‡ä¸åŒ</p><ul><li>cookie&lt;=4Kï¼Œä¸€ä¸ªç«™ç‚¹æœ€å¤šä¿ç•™20ä¸ªcookieï¼›</li><li>sessionæ²¡æœ‰ä¸Šçº¿ï¼Œå‡ºäºå¯¹æœåŠ¡å™¨çš„ä¿æŠ¤ï¼Œsessionå†…ä¸å¯å­˜è¿‡å¤šä¸œè¥¿ï¼Œå¹¶ä¸”è¦è®¾ç½®sessionåˆ é™¤æœºåˆ¶ï¼›</li></ul><p>ï¼ˆ3ï¼‰å­˜å‚¨æ–¹å¼ä¸åŒ</p><ul><li>cookieåªèƒ½ä¿å­˜ASCIIå­—ç¬¦ä¸²ï¼Œå¹¶éœ€è¦é€šè¿‡ç¼–ç æ–¹å¼å­˜å‚¨ä¸ºUnicodeå­—ç¬¦æˆ–è€…äºŒè¿›åˆ¶æ•°æ®ï¼›</li><li>sessionä¸­èƒ½å­˜å‚¨ä»»ä½•ç±»å‹çš„æ•°æ®ï¼ŒåŒ…æ‹¬å¹¶ä¸å±€é™äºStringã€integerã€listã€mapç­‰ï¼›</li></ul><p>ï¼ˆ4ï¼‰éšç§ç­–ç•¥ä¸åŒ</p><ul><li>cookieå¯¹å®¢æˆ·ç«¯æ˜¯å¯è§çš„ï¼Œä¸å®‰å…¨ï¼›</li><li>sessionå­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Šï¼Œå®‰å…¨ï¼›</li></ul><p>ï¼ˆ5ï¼‰æœ‰æ•ˆæœŸä¸åŒ</p><ul><li>å¼€å‘å¯ä»¥é€šè¿‡è®¾ç½®cookieçš„å±æ€§ï¼Œè¾¾åˆ°ä½¿cookieé•¿æœŸæœ‰æ•ˆçš„æ•ˆæœï¼›</li><li>sessionä¾èµ–äºåä¸ºJESSIONIDçš„cookieï¼Œè€Œcookie JSESSIONIDçš„è¿‡æœŸæ—¶é—´é»˜è®¤ä¸º-1ï¼Œåªéœ€å…³é—­çª—å£è¯¥sessionå°±ä¼šå¤±æ•ˆï¼Œå› è€Œsessionè¾¾ä¸åˆ°é•¿æœŸæœ‰æ•ˆçš„æ•ˆæœï¼›</li></ul><p>ï¼ˆ6ï¼‰è·¨åŸŸæ”¯æŒä¸Šä¸åŒ</p><ul><li>cookieæ”¯æŒè·¨åŸŸï¼›</li><li>sessionä¸æ”¯æŒè·¨åŸŸï¼›</li></ul><h3 id="93ã€å¦‚æœå®¢æˆ·ç«¯ç¦æ­¢-cookie-èƒ½å®ç°-session-è¿˜èƒ½ç”¨å—ï¼Ÿ"><a href="#93ã€å¦‚æœå®¢æˆ·ç«¯ç¦æ­¢-cookie-èƒ½å®ç°-session-è¿˜èƒ½ç”¨å—ï¼Ÿ" class="headerlink" title="93ã€å¦‚æœå®¢æˆ·ç«¯ç¦æ­¢ cookie èƒ½å®ç° session è¿˜èƒ½ç”¨å—ï¼Ÿ"></a>93ã€å¦‚æœå®¢æˆ·ç«¯ç¦æ­¢ cookie èƒ½å®ç° session è¿˜èƒ½ç”¨å—ï¼Ÿ</h3><p>ä¸€èˆ¬é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ä¼šè¯ä¸­ï¼ŒæœåŠ¡å™¨å­˜å‚¨ session çš„ sessionid æ˜¯é€šè¿‡ cookie å­˜åˆ°æµè§ˆå™¨é‡Œã€‚</p><p>å¦‚æœæµè§ˆå™¨ç¦ç”¨äº† cookieï¼Œæµè§ˆå™¨è¯·æ±‚æœåŠ¡å™¨æ— æ³•æºå¸¦ sessionidï¼ŒæœåŠ¡å™¨æ— æ³•è¯†åˆ«è¯·æ±‚ä¸­çš„ç”¨æˆ·èº«ä»½ï¼Œsessionå¤±æ•ˆã€‚</p><p>ä½†æ˜¯å¯ä»¥é€šè¿‡å…¶ä»–æ–¹æ³•åœ¨ç¦ç”¨ cookie çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç»§ç»­ä½¿ç”¨sessionï¼š</p><ol><li>é€šè¿‡urlé‡å†™ï¼ŒæŠŠ sessionid ä½œä¸ºå‚æ•°è¿½åŠ çš„åŸ url ä¸­ï¼Œåç»­çš„æµè§ˆå™¨ä¸æœåŠ¡å™¨äº¤äº’ä¸­æºå¸¦ sessionid å‚æ•°ã€‚</li><li>æœåŠ¡å™¨çš„è¿”å›æ•°æ®ä¸­åŒ…å« sessionidï¼Œæµè§ˆå™¨å‘é€è¯·æ±‚æ—¶ï¼Œæºå¸¦ sessionid å‚æ•°ã€‚</li><li>é€šè¿‡ Http åè®®å…¶ä»– header å­—æ®µï¼ŒæœåŠ¡å™¨æ¯æ¬¡è¿”å›æ—¶è®¾ç½®è¯¥ header å­—æ®µä¿¡æ¯ï¼Œæµè§ˆå™¨ä¸­ js è¯»å–è¯¥ header å­—æ®µï¼Œè¯·æ±‚æœåŠ¡å™¨æ—¶ï¼Œjsè®¾ç½®æºå¸¦è¯¥ header å­—æ®µã€‚</li></ol><h3 id="94ã€ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿ"><a href="#94ã€ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿ" class="headerlink" title="94ã€ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿ"></a>94ã€ä»€ä¹ˆæ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿ</h3><p>å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ä¸€èˆ¬çº¿ç¨‹çš„ä¸ªæ•°éƒ½å¤§äº CPU æ ¸å¿ƒçš„ä¸ªæ•°ï¼Œè€Œä¸€ä¸ª CPU æ ¸å¿ƒåœ¨ä»»æ„æ—¶åˆ»åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨ï¼Œä¸ºäº†è®©è¿™äº›çº¿ç¨‹éƒ½èƒ½å¾—åˆ°æœ‰æ•ˆæ‰§è¡Œï¼ŒCPU é‡‡å–çš„ç­–ç•¥æ˜¯ä¸ºæ¯ä¸ªçº¿ç¨‹åˆ†é…æ—¶é—´ç‰‡å¹¶è½®è½¬çš„å½¢å¼ã€‚å½“ä¸€ä¸ªçº¿ç¨‹çš„æ—¶é—´ç‰‡ç”¨å®Œçš„æ—¶å€™å°±ä¼šé‡æ–°å¤„äºå°±ç»ªçŠ¶æ€è®©ç»™å…¶ä»–çº¿ç¨‹ä½¿ç”¨ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å±äºä¸€æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</p><p>æ¦‚æ‹¬æ¥è¯´å°±æ˜¯ï¼šå½“å‰ä»»åŠ¡åœ¨æ‰§è¡Œå®Œ CPU æ—¶é—´ç‰‡åˆ‡æ¢åˆ°å¦ä¸€ä¸ªä»»åŠ¡ä¹‹å‰ä¼šå…ˆä¿å­˜è‡ªå·±çš„çŠ¶æ€ï¼Œä»¥ä¾¿ä¸‹æ¬¡å†åˆ‡æ¢å›è¿™ä¸ªä»»åŠ¡æ—¶ï¼Œå¯ä»¥å†åŠ è½½è¿™ä¸ªä»»åŠ¡çš„çŠ¶æ€ã€‚ä»»åŠ¡ä»ä¿å­˜åˆ°å†åŠ è½½çš„è¿‡ç¨‹å°±æ˜¯ä¸€æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚</p><p>ä¸Šä¸‹æ–‡åˆ‡æ¢é€šå¸¸æ˜¯è®¡ç®—å¯†é›†å‹çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒéœ€è¦ç›¸å½“å¯è§‚çš„å¤„ç†å™¨æ—¶é—´ï¼Œåœ¨æ¯ç§’å‡ åä¸Šç™¾æ¬¡çš„åˆ‡æ¢ä¸­ï¼Œæ¯æ¬¡åˆ‡æ¢éƒ½éœ€è¦çº³ç§’é‡çº§çš„æ—¶é—´ã€‚æ‰€ä»¥ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢å¯¹ç³»ç»Ÿæ¥è¯´æ„å‘³ç€æ¶ˆè€—å¤§é‡çš„ CPU æ—¶é—´ï¼Œäº‹å®ä¸Šï¼Œå¯èƒ½æ˜¯æ“ä½œç³»ç»Ÿä¸­æ—¶é—´æ¶ˆè€—æœ€å¤§çš„æ“ä½œã€‚</p><p>Linux ç›¸æ¯”ä¸å…¶ä»–æ“ä½œç³»ç»Ÿï¼ˆåŒ…æ‹¬å…¶ä»–ç±» Unix ç³»ç»Ÿï¼‰æœ‰å¾ˆå¤šçš„ä¼˜ç‚¹ï¼Œå…¶ä¸­æœ‰ä¸€é¡¹å°±æ˜¯ï¼Œå…¶ä¸Šä¸‹æ–‡åˆ‡æ¢å’Œæ¨¡å¼åˆ‡æ¢çš„æ—¶é—´æ¶ˆè€—éå¸¸å°‘ã€‚</p><h3 id="95ã€cookieã€sessionã€token"><a href="#95ã€cookieã€sessionã€token" class="headerlink" title="95ã€cookieã€sessionã€token"></a>95ã€cookieã€sessionã€token</h3><p>1ã€sessionæœºåˆ¶</p><p><a href="https://imgtu.com/i/jVoY7T"><img src="https://s1.ax1x.com/2022/06/27/jVoY7T.jpg" alt="jVoY7T.jpg"></a></p><p>sessionæ˜¯æœåŠ¡ç«¯å­˜å‚¨çš„ä¸€ä¸ªå¯¹è±¡ï¼Œä¸»è¦ç”¨æ¥å­˜å‚¨æ‰€æœ‰è®¿é—®è¿‡è¯¥æœåŠ¡ç«¯çš„å®¢æˆ·ç«¯çš„ç”¨æˆ·ä¿¡æ¯ï¼ˆä¹Ÿå¯ä»¥å­˜å‚¨å…¶ä»–ä¿¡æ¯ï¼‰ï¼Œä»è€Œå®ç°ä¿æŒç”¨æˆ·ä¼šè¯çŠ¶æ€ã€‚ä½†æ˜¯æœåŠ¡å™¨é‡å¯æ—¶ï¼Œå†…å­˜ä¼šè¢«é”€æ¯ï¼Œå­˜å‚¨çš„ç”¨æˆ·ä¿¡æ¯ä¹Ÿå°±æ¶ˆå¤±äº†ã€‚</p><p>ä¸åŒçš„ç”¨æˆ·è®¿é—®æœåŠ¡ç«¯çš„æ—¶å€™ä¼šåœ¨sessionå¯¹è±¡ä¸­å­˜å‚¨é”®å€¼å¯¹ï¼Œâ€œé”®â€ç”¨æ¥å­˜å‚¨å¼€å¯è¿™ä¸ªç”¨æˆ·ä¿¡æ¯çš„â€œé’¥åŒ™â€ï¼Œåœ¨ç™»å½•æˆåŠŸåï¼Œâ€œé’¥åŒ™â€é€šè¿‡cookieè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯å­˜å‚¨ä¸ºsessionIdè®°å½•åœ¨cookieä¸­ã€‚å½“å®¢æˆ·ç«¯å†æ¬¡è®¿é—®æ—¶ï¼Œä¼šé»˜è®¤æºå¸¦cookieä¸­çš„sessionIdæ¥å®ç°ä¼šè¯æœºåˆ¶ã€‚</p><p>ï¼ˆ1ï¼‰sessionæ˜¯åŸºäºcookieçš„ã€‚</p><ul><li>cookieçš„æ•°æ®4kå·¦å³ï¼›</li><li>cookieå­˜å‚¨æ•°æ®çš„æ ¼å¼ï¼šå­—ç¬¦ä¸²key=value</li><li>cookieå­˜å‚¨æœ‰æ•ˆæœŸï¼šå¯ä»¥è‡ªè¡Œé€šè¿‡expiresè¿›è¡Œå…·ä½“çš„æ—¥æœŸè®¾ç½®ï¼Œå¦‚æœæ²¡è®¾ç½®ï¼Œé»˜è®¤æ˜¯å…³é—­æµè§ˆå™¨æ—¶å¤±æ•ˆã€‚</li><li>cookieæœ‰æ•ˆèŒƒå›´ï¼šå½“å‰åŸŸåä¸‹æœ‰æ•ˆã€‚æ‰€ä»¥sessionè¿™ç§ä¼šè¯å­˜å‚¨æ–¹å¼æ–¹å¼åªé€‚ç”¨äºå®¢æˆ·ç«¯ä»£ç å’ŒæœåŠ¡ç«¯ä»£ç è¿è¡Œåœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼ˆå‰åç«¯é¡¹ç›®åè®®ã€åŸŸåã€ç«¯å£å·éƒ½ä¸€è‡´ï¼Œå³åœ¨ä¸€ä¸ªé¡¹ç›®ä¸‹ï¼‰</li></ul><p>ï¼ˆ2ï¼‰sessionæŒä¹…åŒ–</p><p>ç”¨äºè§£å†³é‡å¯æœåŠ¡å™¨åsessionæ¶ˆå¤±çš„é—®é¢˜ã€‚åœ¨æ•°æ®åº“ä¸­å­˜å‚¨sessionï¼Œè€Œä¸æ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚é€šè¿‡åŒ…ï¼šexpress-mysql-sessionã€‚</p><p>å½“å®¢æˆ·ç«¯å­˜å‚¨çš„cookieå¤±æ•ˆåï¼ŒæœåŠ¡ç«¯çš„sessionä¸ä¼šç«‹å³é”€æ¯ï¼Œä¼šæœ‰ä¸€ä¸ªå»¶æ—¶ï¼ŒæœåŠ¡ç«¯ä¼šå®šæœŸæ¸…ç†æ— æ•ˆsessionï¼Œä¸ä¼šé€ æˆæ— æ•ˆæ•°æ®å ç”¨å­˜å‚¨ç©ºé—´çš„é—®é¢˜ã€‚</p><p>2ã€tokenæœºåˆ¶</p><p><a href="https://imgtu.com/i/jVITkF"><img src="https://s1.ax1x.com/2022/06/27/jVITkF.jpg" alt="jVITkF.jpg"></a></p><p>é€‚ç”¨äºå‰åç«¯åˆ†ç¦»çš„é¡¹ç›®ï¼ˆå‰åç«¯ä»£ç è¿è¡Œåœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸‹ï¼‰</p><p>è¯·æ±‚ç™»å½•æ—¶ï¼Œtokenå’ŒsessionidåŸç†ç›¸åŒï¼Œæ˜¯å¯¹keyå’Œkeyå¯¹åº”çš„ç”¨æˆ·ä¿¡æ¯è¿›è¡ŒåŠ å¯†åçš„åŠ å¯†å­—ç¬¦ï¼Œç™»å½•æˆåŠŸåï¼Œä¼šåœ¨å“åº”ä¸»ä½“ä¸­å°†{tokenï¼šâ€œå­—ç¬¦ä¸²â€}è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><p>å®¢æˆ·ç«¯é€šè¿‡cookieéƒ½å¯ä»¥è¿›è¡Œå­˜å‚¨ã€‚å†æ¬¡è¯·æ±‚æ—¶ä¸ä¼šé»˜è®¤æºå¸¦ï¼Œéœ€è¦åœ¨è¯·æ±‚æ‹¦æˆªå™¨ä½ç½®ç»™è¯·æ±‚å¤´ä¸­æ·»åŠ è®¤è¯å­—æ®µAuthorizationæºå¸¦tokenä¿¡æ¯ï¼ŒæœåŠ¡å™¨å°±å¯ä»¥é€šè¿‡tokenä¿¡æ¯æŸ¥æ‰¾ç”¨æˆ·ç™»å½•çŠ¶æ€ã€‚</p><h3 id="96ã€è¯´ä¸€ä¸‹-session-çš„å·¥ä½œåŸç†ï¼Ÿ"><a href="#96ã€è¯´ä¸€ä¸‹-session-çš„å·¥ä½œåŸç†ï¼Ÿ" class="headerlink" title="96ã€è¯´ä¸€ä¸‹ session çš„å·¥ä½œåŸç†ï¼Ÿ"></a>96ã€è¯´ä¸€ä¸‹ session çš„å·¥ä½œåŸç†ï¼Ÿ</h3><p>å½“å®¢æˆ·ç«¯ç™»å½•å®Œæˆåï¼Œä¼šåœ¨æœåŠ¡ç«¯äº§ç”Ÿä¸€ä¸ªsessionï¼Œæ­¤æ—¶æœåŠ¡ç«¯ä¼šå°†sessionidè¿”å›ç»™å®¢æˆ·ç«¯æµè§ˆå™¨ã€‚å®¢æˆ·ç«¯å°†sessionidå‚¨å­˜åœ¨æµè§ˆå™¨çš„cookieä¸­ï¼Œå½“ç”¨æˆ·å†æ¬¡ç™»å½•æ—¶ï¼Œä¼šè·å¾—å¯¹åº”çš„sessionidï¼Œç„¶åå°†sessionidå‘é€åˆ°æœåŠ¡ç«¯è¯·æ±‚ç™»å½•ï¼ŒæœåŠ¡ç«¯åœ¨å†…å­˜ä¸­æ‰¾åˆ°å¯¹åº”çš„sessionidï¼Œå®Œæˆç™»å½•ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œè¿”å›ç™»å½•é¡µé¢ã€‚</p><h3 id="97ã€http-å“åº”ç -301-å’Œ-302-ä»£è¡¨çš„æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#97ã€http-å“åº”ç -301-å’Œ-302-ä»£è¡¨çš„æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="97ã€http å“åº”ç  301 å’Œ 302 ä»£è¡¨çš„æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>97ã€http å“åº”ç  301 å’Œ 302 ä»£è¡¨çš„æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><ol><li>301å’Œ302çŠ¶æ€ç éƒ½è¡¨ç¤ºé‡å®šå‘ï¼Œå½“æµè§ˆå™¨æ‹¿åˆ°æœåŠ¡å™¨è¿”å›çš„è¿™ä¸ªçŠ¶æ€ç åæ‚”è‡ªåŠ¨è·³è½¬åˆ°ä¸€ä¸ªæ–°çš„URLåœ°å€ã€‚</li><li>301ä»£è¡¨æ°¸ä¹…æ€§é‡å®šå‘ï¼Œæ—§åœ°å€è¢«æ°¸ä¹…ç§»é™¤ï¼Œå®¢æˆ·ç«¯å‘æ–°åœ°å€å‘é€è¯·æ±‚ã€‚</li><li>302ä»£è¡¨æš‚æ—¶æ€§é‡å®šå‘ï¼Œæ—§åœ°å€è¿˜åœ¨ï¼Œå®¢æˆ·ç«¯ç»§ç»­å‘æ—§åœ°å€å‘é€è¯·æ±‚ã€‚</li><li>303ä»£è¡¨æš‚æ—¶æ€§é‡å®šå‘ï¼Œé‡å®šå‘åˆ°æ–°åœ°å€æ—¶ï¼Œå¿…é¡»ä½¿ç”¨GETæ–¹æ³•è¯·æ±‚æ–°åœ°å€ã€‚</li><li>307ä»£è¡¨æš‚æ—¶æ€§é‡å®šå‘ï¼Œä¸302çš„åŒºåˆ«åœ¨äº307ä¸å…è®¸ä»POSTæ”¹ä¸ºGETã€‚</li><li>307ä»£è¡¨æ°¸ä¹…æ€§é‡å®šå‘ï¼Œä¸301çš„åŒºåˆ«åœ¨äº308ä¸å…è®¸ä»POSTæ”¹ä¸ºGETã€‚</li></ol><h3 id="98ã€ç®€è¿°-tcp-å’Œ-udpçš„åŒºåˆ«ï¼Ÿ"><a href="#98ã€ç®€è¿°-tcp-å’Œ-udpçš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="98ã€ç®€è¿° tcp å’Œ udpçš„åŒºåˆ«ï¼Ÿ"></a>98ã€ç®€è¿° tcp å’Œ udpçš„åŒºåˆ«ï¼Ÿ</h3><ol><li>TCPæ˜¯ä¼ è¾“æ§åˆ¶åè®®ï¼ŒUDPæ˜¯ç”¨æˆ·æ•°æ®è¡¨åè®®ï¼›</li><li>TCPé•¿è¿æ¥ï¼ŒUDPæ— è¿æ¥ï¼›</li><li>UDPç¨‹åºç»“æ„è¾ƒç®€å•ï¼Œåªéœ€å‘é€ï¼Œæ— é¡»æ¥æ”¶ï¼›</li><li>TCPå¯é ï¼Œä¿è¯æ•°æ®æ­£ç¡®æ€§ã€é¡ºåºæ€§ï¼›UDPä¸å¯é ï¼Œå¯èƒ½ä¸¢æ•°æ®ï¼›</li><li>TCPé€‚ç”¨äºå°‘é‡æ•°æ®ï¼ŒUDPé€‚ç”¨äºå¤§é‡æ•°æ®ä¼ è¾“ï¼›</li><li>TCPé€Ÿåº¦æ…¢ï¼ŒUDPé€Ÿåº¦å¿«ï¼›</li></ol><h3 id="99ã€tcp-ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"><a href="#99ã€tcp-ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ" class="headerlink" title="99ã€tcp ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"></a>99ã€tcp ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</h3><p>å› ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½è¦ç¡®è®¤è¿æ¥ï¼Œâ‘ å®¢æˆ·ç«¯è¯·æ±‚è¿æ¥æœåŠ¡ç«¯ï¼›â‘¡é’ˆå¯¹å®¢æˆ·ç«¯çš„è¯·æ±‚ç¡®è®¤åº”ç­”ï¼Œå¹¶è¯·æ±‚å»ºç«‹è¿æ¥ï¼›â‘¢é’ˆå¯¹æœåŠ¡ç«¯çš„è¯·æ±‚ç¡®è®¤åº”ç­”ï¼Œå»ºç«‹è¿æ¥ï¼›</p><p>ä¸¤æ¬¡æ— æ³•ç¡®ä¿Aèƒ½æ”¶åˆ°Bçš„æ•°æ®ï¼›</p><h3 id="100ã€OSI-çš„ä¸ƒå±‚æ¨¡å‹éƒ½æœ‰å“ªäº›ï¼Ÿ"><a href="#100ã€OSI-çš„ä¸ƒå±‚æ¨¡å‹éƒ½æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="100ã€OSI çš„ä¸ƒå±‚æ¨¡å‹éƒ½æœ‰å“ªäº›ï¼Ÿ"></a>100ã€OSI çš„ä¸ƒå±‚æ¨¡å‹éƒ½æœ‰å“ªäº›ï¼Ÿ</h3><p><a href="https://imgtu.com/i/jVo5jI"><img src="https://s1.ax1x.com/2022/06/27/jVo5jI.jpg" alt="jVo5jI.jpg"></a></p><h3 id="101ã€get-å’Œ-post-è¯·æ±‚æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ"><a href="#101ã€get-å’Œ-post-è¯·æ±‚æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ" class="headerlink" title="101ã€get å’Œ post è¯·æ±‚æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ"></a>101ã€get å’Œ post è¯·æ±‚æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ</h3><ol><li>getè¯·æ±‚å‚æ•°æ˜¯è¿æ¥åœ¨urlåé¢çš„,è€Œpostè¯·æ±‚å‚æ•°æ˜¯å­˜æ”¾åœ¨requestbodyå†…çš„ï¼›</li><li>getè¯·æ±‚å› ä¸ºæµè§ˆå™¨å¯¹urlé•¿åº¦æœ‰é™åˆ¶ï¼Œæ‰€ä»¥å‚æ•°ä¸ªæ•°æœ‰é™åˆ¶ï¼Œè€Œpostè¯·æ±‚å‚æ•°ä¸ªæ•°æ²¡æœ‰é™åˆ¶ï¼›</li><li>å› ä¸ºgetè¯·æ±‚å‚æ•°æš´éœ²åœ¨urlä¸Š,æ‰€ä»¥å®‰å…¨æ–¹é¢postæ¯”getæ›´åŠ å®‰å…¨ï¼›</li><li>getè¯·æ±‚åªèƒ½è¿›è¡Œurlç¼–ç ,è€Œpostè¯·æ±‚å¯ä»¥æ”¯æŒå¤šç§ç¼–ç æ–¹å¼ï¼›</li><li>getè¯·æ±‚å‚æ•°ä¼šä¿å­˜åœ¨æµè§ˆå™¨å†å²è®°å½•å†…,postè¯·æ±‚å¹¶ä¸ä¼šï¼›</li><li>getè¯·æ±‚æµè§ˆå™¨ä¼šä¸»åŠ¨cache,postå¹¶ä¸ä¼š,é™¤éä¸»åŠ¨è®¾ç½®ï¼›</li><li>getè¯·æ±‚äº§ç”Ÿ1ä¸ªtcpæ•°æ®åŒ…,postè¯·æ±‚äº§ç”Ÿ2ä¸ªtcpæ•°æ®åŒ…ï¼›</li><li>åœ¨æµè§ˆå™¨è¿›è¡Œå›é€€æ“ä½œæ—¶,getè¯·æ±‚æ˜¯æ— å®³çš„,è€Œpostè¯·æ±‚åˆ™ä¼šé‡æ–°è¯·æ±‚ä¸€æ¬¡ï¼›</li><li>æµè§ˆå™¨åœ¨å‘é€getè¯·æ±‚æ—¶ä¼šå°†headerå’Œdataä¸€èµ·å‘é€ç»™æœåŠ¡å™¨,æœåŠ¡å™¨è¿”å›200çŠ¶æ€ç ,è€Œåœ¨å‘é€postè¯·æ±‚æ—¶,ä¼šå…ˆå°†headerå‘é€ç»™æœåŠ¡å™¨,æœåŠ¡å™¨è¿”å›100,ä¹‹åå†å°†dataå‘é€ç»™æœåŠ¡å™¨,æœåŠ¡å™¨è¿”å›200 OKï¼›</li></ol><h3 id="102ã€ä»€ä¹ˆæ˜¯-XSS-æ”»å‡»ï¼Œå¦‚ä½•é¿å…ï¼Ÿ"><a href="#102ã€ä»€ä¹ˆæ˜¯-XSS-æ”»å‡»ï¼Œå¦‚ä½•é¿å…ï¼Ÿ" class="headerlink" title="102ã€ä»€ä¹ˆæ˜¯ XSS æ”»å‡»ï¼Œå¦‚ä½•é¿å…ï¼Ÿ"></a>102ã€ä»€ä¹ˆæ˜¯ XSS æ”»å‡»ï¼Œå¦‚ä½•é¿å…ï¼Ÿ</h3><p>xss(Cross Site Scripting)ï¼Œå³è·¨ç«™è„šæœ¬æ”»å‡»ï¼Œæ˜¯ä¸€ç§å¸¸è§äºwebåº”ç”¨ç¨‹åºä¸­çš„è®¡ç®—æœºå®‰å…¨æ¼æ´ã€‚æŒ‡çš„æ˜¯åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸Šï¼Œåœ¨æ¸²æŸ“DOMæ ‘çš„æ—¶å€™ï¼Œæ‰§è¡Œäº†ä¸å¯é¢„æœŸçš„JSè„šæœ¬ï¼Œä»è€Œå‘ç”Ÿäº†å®‰å…¨é—®é¢˜ã€‚</p><p>XSSå°±æ˜¯é€šè¿‡åœ¨ç”¨æˆ·ç«¯æ³¨å…¥æ¶æ„çš„å¯è¿è¡Œè„šæœ¬ï¼Œè‹¥æœåŠ¡ç«¯å¯¹ç”¨æˆ·çš„è¾“å…¥ä¸è¿›è¡Œå¤„ç†ï¼Œç›´æ¥å°†ç”¨æˆ·çš„è¾“å…¥è¾“å‡ºåˆ°æµè§ˆå™¨ï¼Œç„¶åæµè§ˆå™¨å°†ä¼šæ‰§è¡Œç”¨æˆ·æ³¨å…¥çš„è„šæœ¬ã€‚ æ‰€ä»¥XSSæ”»å‡»çš„æ ¸å¿ƒå°±æ˜¯æµè§ˆå™¨æ¸²æŸ“DOMçš„æ—¶å€™å°†æ–‡æœ¬ä¿¡æ¯è§£ææˆJSè„šæœ¬ä»è€Œå¼•å‘JSè„šæœ¬æ³¨å…¥ï¼Œé‚£ä¹ˆXSSæ”»å‡»çš„é˜²å¾¡æ‰‹æ®µå°±æ˜¯åŸºäºæµè§ˆå™¨æ¸²æŸ“è¿™ä¸€æ­¥å»åšé˜²å¾¡ã€‚åªè¦æˆ‘ä»¬ä½¿ç”¨HTMLç¼–ç å°†æµè§ˆå™¨éœ€è¦æ¸²æŸ“çš„ä¿¡æ¯ç¼–ç åï¼Œæµè§ˆå™¨åœ¨æ¸²æŸ“DOMå…ƒç´ çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è§£ç éœ€è¦æ¸²æŸ“çš„ä¿¡æ¯ï¼Œå°†ä¸Šè¿°ä¿¡æ¯è§£ææˆå­—ç¬¦ä¸²è€Œä¸æ˜¯JSè„šæœ¬ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬é˜²å¾¡XSSæ”»å‡»çš„æ ¸å¿ƒæƒ³æ³•ã€‚</p><p>é¢„é˜²ï¼š</p><p>1ã€è·å–ç”¨æˆ·çš„è¾“å…¥ï¼Œä¸ç”¨innerHtml,ç”¨innerText.<br>2ã€å¯¹ç”¨æˆ·çš„è¾“å…¥è¿›è¡Œè¿‡æ»¤ï¼Œå¦‚å¯¹&amp; &lt; &gt; â€œ â€˜ /ç­‰è¿›è¡Œè½¬ä¹‰ï¼›</p><h3 id="103ã€ä»€ä¹ˆæ˜¯-CSRF-æ”»å‡»ï¼Œå¦‚ä½•é¿å…ï¼Ÿ"><a href="#103ã€ä»€ä¹ˆæ˜¯-CSRF-æ”»å‡»ï¼Œå¦‚ä½•é¿å…ï¼Ÿ" class="headerlink" title="103ã€ä»€ä¹ˆæ˜¯ CSRF æ”»å‡»ï¼Œå¦‚ä½•é¿å…ï¼Ÿ"></a>103ã€ä»€ä¹ˆæ˜¯ CSRF æ”»å‡»ï¼Œå¦‚ä½•é¿å…ï¼Ÿ</h3><p>è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆè‹±è¯­ï¼šCross-site request forgeryï¼‰ï¼Œä¹Ÿè¢«ç§°ä¸º one-click attack æˆ–è€… session ridingï¼Œé€šå¸¸ç¼©å†™ä¸º CSRF æˆ–è€… XSRFï¼Œ æ˜¯ä¸€ç§æŒŸåˆ¶ç”¨æˆ·åœ¨å½“å‰å·²ç™»å½•çš„Webåº”ç”¨ç¨‹åºä¸Šæ‰§è¡Œéæœ¬æ„çš„æ“ä½œçš„æ”»å‡»æ–¹æ³•ã€‚è·Ÿè·¨ç½‘ç«™è„šæœ¬ï¼ˆXSSï¼‰ç›¸æ¯”ï¼ŒXSS åˆ©ç”¨çš„æ˜¯ç”¨æˆ·å¯¹æŒ‡å®šç½‘ç«™çš„ä¿¡ä»»ï¼ŒCSRF åˆ©ç”¨çš„æ˜¯ç½‘ç«™å¯¹ç”¨æˆ·ç½‘é¡µæµè§ˆå™¨çš„ä¿¡ä»»ã€‚</p><p>1ã€æ”»å‡»ç»†èŠ‚</p><p>è·¨ç«™è¯·æ±‚æ”»å‡»ï¼Œç®€å•åœ°è¯´ï¼Œæ˜¯æ”»å‡»è€…é€šè¿‡ä¸€äº›æŠ€æœ¯æ‰‹æ®µæ¬ºéª—ç”¨æˆ·çš„æµè§ˆå™¨å»è®¿é—®ä¸€ä¸ªè‡ªå·±æ›¾ç»è®¤è¯è¿‡çš„ç½‘ç«™å¹¶è¿è¡Œä¸€äº›æ“ä½œï¼ˆå¦‚å‘é‚®ä»¶ï¼Œå‘æ¶ˆæ¯ï¼Œç”šè‡³è´¢äº§æ“ä½œå¦‚è½¬è´¦å’Œè´­ä¹°å•†å“ï¼‰ã€‚ç”±äºæµè§ˆå™¨æ›¾ç»è®¤è¯è¿‡ï¼Œæ‰€ä»¥è¢«è®¿é—®çš„ç½‘ç«™ä¼šè®¤ä¸ºæ˜¯çœŸæ­£çš„ç”¨æˆ·æ“ä½œè€Œå»è¿è¡Œã€‚è¿™åˆ©ç”¨äº†webä¸­ç”¨æˆ·èº«ä»½éªŒè¯çš„ä¸€ä¸ªæ¼æ´ï¼šç®€å•çš„èº«ä»½éªŒè¯åªèƒ½ä¿è¯è¯·æ±‚å‘è‡ªæŸä¸ªç”¨æˆ·çš„æµè§ˆå™¨ï¼Œå´ä¸èƒ½ä¿è¯è¯·æ±‚æœ¬èº«æ˜¯ç”¨æˆ·è‡ªæ„¿å‘å‡ºçš„ã€‚</p><p>ä¾‹å­</p><p>å‡å¦‚ä¸€å®¶é“¶è¡Œç”¨ä»¥è¿è¡Œè½¬è´¦æ“ä½œçš„URLåœ°å€å¦‚ä¸‹ï¼š<a href="http://www.examplebank.com/withdraw?account=AccoutName&amp;amount=1000&amp;for=PayeeName">http://www.examplebank.com/withdraw?account=AccoutName&amp;amount=1000&amp;for=PayeeName</a></p><p>é‚£ä¹ˆï¼Œä¸€ä¸ªæ¶æ„æ”»å‡»è€…å¯ä»¥åœ¨å¦ä¸€ä¸ªç½‘ç«™ä¸Šæ”¾ç½®å¦‚ä¸‹ä»£ç ï¼š <img src="http://www.examplebank.com/withdraw?account=Alice&amount=1000&for=Badman"></p><p>å¦‚æœæœ‰è´¦æˆ·åä¸ºAliceçš„ç”¨æˆ·è®¿é—®äº†æ¶æ„ç«™ç‚¹ï¼Œè€Œå¥¹ä¹‹å‰åˆšè®¿é—®è¿‡é“¶è¡Œä¸ä¹…ï¼Œç™»å½•ä¿¡æ¯å°šæœªè¿‡æœŸï¼Œé‚£ä¹ˆå¥¹å°±ä¼šæŸå¤±1000èµ„é‡‘ã€‚</p><p>è¿™ç§æ¶æ„çš„ç½‘å€å¯ä»¥æœ‰å¾ˆå¤šç§å½¢å¼ï¼Œè—èº«äºç½‘é¡µä¸­çš„è®¸å¤šåœ°æ–¹ã€‚æ­¤å¤–ï¼Œæ”»å‡»è€…ä¹Ÿä¸éœ€è¦æ§åˆ¶æ”¾ç½®æ¶æ„ç½‘å€çš„ç½‘ç«™ã€‚ä¾‹å¦‚ä»–å¯ä»¥å°†è¿™ç§åœ°å€è—åœ¨è®ºå›ï¼Œåšå®¢ç­‰ä»»ä½•ç”¨æˆ·ç”Ÿæˆä¿¡æ¯çš„ç½‘ç«™ä¸­ã€‚è¿™æ„å‘³ç€å¦‚æœæœåŠ¡ç«¯æ²¡æœ‰åˆé€‚çš„é˜²å¾¡æªæ–½çš„è¯ï¼Œç”¨æˆ·å³ä½¿è®¿é—®ç†Ÿæ‚‰çš„å¯ä¿¡ç½‘ç«™ä¹Ÿæœ‰å—æ”»å‡»çš„å±é™©ã€‚</p><p>é€è¿‡ä¾‹å­èƒ½å¤Ÿçœ‹å‡ºï¼Œæ”»å‡»è€…å¹¶ä¸èƒ½é€šè¿‡CSRFæ”»å‡»æ¥ç›´æ¥è·å–ç”¨æˆ·çš„è´¦æˆ·æ§åˆ¶æƒï¼Œä¹Ÿä¸èƒ½ç›´æ¥çªƒå–ç”¨æˆ·çš„ä»»ä½•ä¿¡æ¯ã€‚ä»–ä»¬èƒ½åšåˆ°çš„ï¼Œæ˜¯æ¬ºéª—ç”¨æˆ·æµè§ˆå™¨ï¼Œè®©å…¶ä»¥ç”¨æˆ·çš„åä¹‰è¿è¡Œæ“ä½œã€‚</p><p>2ã€é˜²å¾¡æªæ–½</p><p>æ£€æŸ¥Refererå­—æ®µ</p><p>HTTPå¤´ä¸­æœ‰ä¸€ä¸ªRefererå­—æ®µï¼Œè¿™ä¸ªå­—æ®µç”¨ä»¥æ ‡æ˜è¯·æ±‚æ¥æºäºå“ªä¸ªåœ°å€ã€‚åœ¨å¤„ç†æ•æ„Ÿæ•°æ®è¯·æ±‚æ—¶ï¼Œé€šå¸¸æ¥è¯´ï¼ŒRefererå­—æ®µåº”å’Œè¯·æ±‚çš„åœ°å€ä½äºåŒä¸€åŸŸåä¸‹ã€‚ä»¥ä¸Šæ–‡é“¶è¡Œæ“ä½œä¸ºä¾‹ï¼ŒRefererå­—æ®µåœ°å€é€šå¸¸åº”è¯¥æ˜¯è½¬è´¦æŒ‰é’®æ‰€åœ¨çš„ç½‘é¡µåœ°å€ï¼Œåº”è¯¥ä¹Ÿä½äºwww.examplebank.comä¹‹ä¸‹ã€‚è€Œå¦‚æœæ˜¯CSRFæ”»å‡»ä¼ æ¥çš„è¯·æ±‚ï¼ŒRefererå­—æ®µä¼šæ˜¯åŒ…å«æ¶æ„ç½‘å€çš„åœ°å€ï¼Œä¸ä¼šä½äºwww.examplebank.comä¹‹ä¸‹ï¼Œè¿™æ—¶å€™æœåŠ¡å™¨å°±èƒ½è¯†åˆ«å‡ºæ¶æ„çš„è®¿é—®ã€‚</p><p>è¿™ç§åŠæ³•ç®€å•æ˜“è¡Œï¼Œå·¥ä½œé‡ä½ï¼Œä»…éœ€è¦åœ¨å…³é”®è®¿é—®å¤„å¢åŠ ä¸€æ­¥æ ¡éªŒã€‚ä½†è¿™ç§åŠæ³•ä¹Ÿæœ‰å…¶å±€é™æ€§ï¼Œå› å…¶å®Œå…¨ä¾èµ–æµè§ˆå™¨å‘é€æ­£ç¡®çš„Refererå­—æ®µã€‚è™½ç„¶httpåè®®å¯¹æ­¤å­—æ®µçš„å†…å®¹æœ‰æ˜ç¡®çš„è§„å®šï¼Œä½†å¹¶æ— æ³•ä¿è¯æ¥è®¿çš„æµè§ˆå™¨çš„å…·ä½“å®ç°ï¼Œäº¦æ— æ³•ä¿è¯æµè§ˆå™¨æ²¡æœ‰å®‰å…¨æ¼æ´å½±å“åˆ°æ­¤å­—æ®µã€‚å¹¶ä¸”ä¹Ÿå­˜åœ¨æ”»å‡»è€…æ”»å‡»æŸäº›æµè§ˆå™¨ï¼Œç¯¡æ”¹å…¶Refererå­—æ®µçš„å¯èƒ½ã€‚</p><p>3ã€æ·»åŠ æ ¡éªŒtoken</p><p>ç”±äºCSRFçš„æœ¬è´¨åœ¨äºæ”»å‡»è€…æ¬ºéª—ç”¨æˆ·å»è®¿é—®è‡ªå·±è®¾ç½®çš„åœ°å€ï¼Œæ‰€ä»¥å¦‚æœè¦æ±‚åœ¨è®¿é—®æ•æ„Ÿæ•°æ®è¯·æ±‚æ—¶ï¼Œè¦æ±‚ç”¨æˆ·æµè§ˆå™¨æä¾›ä¸ä¿å­˜åœ¨cookieä¸­ï¼Œå¹¶ä¸”æ”»å‡»è€…æ— æ³•ä¼ªé€ çš„æ•°æ®ä½œä¸ºæ ¡éªŒï¼Œé‚£ä¹ˆæ”»å‡»è€…å°±æ— æ³•å†è¿è¡ŒCSRFæ”»å‡»ã€‚è¿™ç§æ•°æ®é€šå¸¸æ˜¯çª—ä½“ä¸­çš„ä¸€ä¸ªæ•°æ®é¡¹ã€‚æœåŠ¡å™¨å°†å…¶ç”Ÿæˆå¹¶é™„åŠ åœ¨çª—ä½“ä¸­ï¼Œå…¶å†…å®¹æ˜¯ä¸€ä¸ªä¼ªéšæœºæ•°ã€‚å½“å®¢æˆ·ç«¯é€šè¿‡çª—ä½“æäº¤è¯·æ±‚æ—¶ï¼Œè¿™ä¸ªä¼ªéšæœºæ•°ä¹Ÿä¸€å¹¶æäº¤ä¸Šå»ä»¥ä¾›æ ¡éªŒã€‚æ­£å¸¸çš„è®¿é—®æ—¶ï¼Œå®¢æˆ·ç«¯æµè§ˆå™¨èƒ½å¤Ÿæ­£ç¡®å¾—åˆ°å¹¶ä¼ å›è¿™ä¸ªä¼ªéšæœºæ•°ï¼Œè€Œé€šè¿‡CSRFä¼ æ¥çš„æ¬ºéª—æ€§æ”»å‡»ä¸­ï¼Œæ”»å‡»è€…æ— ä»äº‹å…ˆå¾—çŸ¥è¿™ä¸ªä¼ªéšæœºæ•°çš„å€¼ï¼ŒæœåŠ¡ç«¯å°±ä¼šå› ä¸ºæ ¡éªŒtokençš„å€¼ä¸ºç©ºæˆ–è€…é”™è¯¯ï¼Œæ‹’ç»è¿™ä¸ªå¯ç–‘è¯·æ±‚ã€‚</p><h3 id="104ã€å¦‚ä½•å®ç°è·¨åŸŸï¼Ÿè¯´ä¸€ä¸‹-JSONP-å®ç°åŸç†ï¼Ÿ"><a href="#104ã€å¦‚ä½•å®ç°è·¨åŸŸï¼Ÿè¯´ä¸€ä¸‹-JSONP-å®ç°åŸç†ï¼Ÿ" class="headerlink" title="104ã€å¦‚ä½•å®ç°è·¨åŸŸï¼Ÿè¯´ä¸€ä¸‹ JSONP å®ç°åŸç†ï¼Ÿ"></a>104ã€å¦‚ä½•å®ç°è·¨åŸŸï¼Ÿè¯´ä¸€ä¸‹ JSONP å®ç°åŸç†ï¼Ÿ</h3><p>1ã€<a href="https://blog.csdn.net/guorui_java/article/details/107345499">jsonpåŸç†è¯¦è§£â€”â€”ç»ˆäºææ¸…æ¥šjsonpæ˜¯å•¥äº†</a></p><p>2ã€æœ€æµè¡Œçš„è·¨åŸŸæ–¹æ¡ˆcors</p><p>corsæ˜¯ç›®å‰ä¸»æµçš„è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼Œè·¨åŸŸèµ„æºå…±äº«(CORS) æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå®ƒä½¿ç”¨é¢å¤–çš„ HTTP å¤´æ¥å‘Šè¯‰æµè§ˆå™¨ è®©è¿è¡Œåœ¨ä¸€ä¸ª origin (domain) ä¸Šçš„Webåº”ç”¨è¢«å‡†è®¸è®¿é—®æ¥è‡ªä¸åŒæºæœåŠ¡å™¨ä¸Šçš„æŒ‡å®šçš„èµ„æºã€‚å½“ä¸€ä¸ªèµ„æºä»ä¸è¯¥èµ„æºæœ¬èº«æ‰€åœ¨çš„æœåŠ¡å™¨ä¸åŒçš„åŸŸã€åè®®æˆ–ç«¯å£è¯·æ±‚ä¸€ä¸ªèµ„æºæ—¶ï¼Œèµ„æºä¼šå‘èµ·ä¸€ä¸ªè·¨åŸŸ HTTP è¯·æ±‚ã€‚</p><p>3ã€æœ€æ–¹ä¾¿çš„è·¨åŸŸæ–¹æ¡ˆNginx</p><p>nginxæ˜¯ä¸€æ¬¾æå…¶å¼ºå¤§çš„webæœåŠ¡å™¨ï¼Œå…¶ä¼˜ç‚¹å°±æ˜¯è½»é‡çº§ã€å¯åŠ¨å¿«ã€é«˜å¹¶å‘ã€‚</p><p>ç°åœ¨çš„æ–°é¡¹ç›®ä¸­nginxå‡ ä¹æ˜¯é¦–é€‰ï¼Œæˆ‘ä»¬ç”¨nodeæˆ–è€…javaå¼€å‘çš„æœåŠ¡é€šå¸¸éƒ½éœ€è¦ç»è¿‡nginxçš„åå‘ä»£ç†ã€‚</p><p>åå‘ä»£ç†çš„åŸç†å¾ˆç®€å•ï¼Œå³æ‰€æœ‰å®¢æˆ·ç«¯çš„è¯·æ±‚éƒ½å¿…é¡»å…ˆç»è¿‡nginxçš„å¤„ç†ï¼Œnginxä½œä¸ºä»£ç†æœåŠ¡å™¨å†è®²è¯·æ±‚è½¬å‘ç»™nodeæˆ–è€…javaæœåŠ¡ï¼Œè¿™æ ·å°±è§„é¿äº†åŒæºç­–ç•¥ã€‚</p><h3 id="105ã€websocketåº”ç”¨çš„æ˜¯å“ªä¸ªåè®®"><a href="#105ã€websocketåº”ç”¨çš„æ˜¯å“ªä¸ªåè®®" class="headerlink" title="105ã€websocketåº”ç”¨çš„æ˜¯å“ªä¸ªåè®®"></a>105ã€websocketåº”ç”¨çš„æ˜¯å“ªä¸ªåè®®</h3><p>WebSocketæ˜¯ä¸€ä¸ªå…è®¸Webåº”ç”¨ç¨‹åº(é€šå¸¸æŒ‡æµè§ˆå™¨)ä¸æœåŠ¡å™¨è¿›è¡ŒåŒå‘é€šä¿¡çš„åè®®ã€‚HTML5çš„WebSocket APIä¸»è¦æ˜¯ä¸ºæµè§ˆå™¨ç«¯æä¾›äº†ä¸€ä¸ªåŸºäºTCPåè®®å®ç°å…¨åŒå·¥é€šä¿¡çš„æ–¹æ³•ã€‚</p><p>WebSocketä¼˜åŠ¿ï¼š æµè§ˆå™¨å’ŒæœåŠ¡å™¨åªéœ€è¦è¦åšä¸€ä¸ªæ¡æ‰‹çš„åŠ¨ä½œï¼Œåœ¨å»ºç«‹è¿æ¥ä¹‹åï¼ŒåŒæ–¹å¯ä»¥åœ¨ä»»æ„æ—¶åˆ»ï¼Œç›¸äº’æ¨é€ä¿¡æ¯ã€‚åŒæ—¶ï¼ŒæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¹‹é—´äº¤æ¢çš„å¤´ä¿¡æ¯å¾ˆå°ã€‚</p><h3 id="106ã€è¯´ä¸€ä¸‹-tcp-ç²˜åŒ…æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ"><a href="#106ã€è¯´ä¸€ä¸‹-tcp-ç²˜åŒ…æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ" class="headerlink" title="106ã€è¯´ä¸€ä¸‹ tcp ç²˜åŒ…æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ"></a>106ã€è¯´ä¸€ä¸‹ tcp ç²˜åŒ…æ˜¯æ€ä¹ˆäº§ç”Ÿçš„ï¼Ÿ</h3><p>å‘é€æ–¹éœ€è¦ç­‰ç¼“å†²åŒºæ»¡æ‰èƒ½å‘é€å‡ºå»ï¼Œé€ æˆç²˜åŒ…ï¼›<br>æ¥æ”¶æ–¹ä¸åŠæ—¶æ¥æ”¶ç¼“å†²åŒºçš„åŒ…ï¼Œé€ æˆç²˜åŒ…ï¼›</p><h3 id="107ã€è¯·åˆ—ä¸¾å‡ºåœ¨-JDK-ä¸­å‡ ä¸ªå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Ÿ"><a href="#107ã€è¯·åˆ—ä¸¾å‡ºåœ¨-JDK-ä¸­å‡ ä¸ªå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Ÿ" class="headerlink" title="107ã€è¯·åˆ—ä¸¾å‡ºåœ¨ JDK ä¸­å‡ ä¸ªå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Ÿ"></a>107ã€è¯·åˆ—ä¸¾å‡ºåœ¨ JDK ä¸­å‡ ä¸ªå¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ï¼Ÿ</h3><h4 id="1ã€å•ä¾‹æ¨¡å¼"><a href="#1ã€å•ä¾‹æ¨¡å¼" class="headerlink" title="1ã€å•ä¾‹æ¨¡å¼"></a>1ã€å•ä¾‹æ¨¡å¼</h4><p>ä½œç”¨ï¼šä¿è¯ç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚</p><p>JDKä¸­ä½“ç°ï¼šRuntimeç±»ã€‚</p><h4 id="2ã€é™æ€å·¥å‚æ¨¡å¼"><a href="#2ã€é™æ€å·¥å‚æ¨¡å¼" class="headerlink" title="2ã€é™æ€å·¥å‚æ¨¡å¼"></a>2ã€é™æ€å·¥å‚æ¨¡å¼</h4><p>ä½œç”¨ï¼šä»£æ›¿æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡ï¼Œæ–¹æ³•åæ¯”æ„é€ å‡½æ•°æ¸…æ™°ã€‚</p><p>JDKä¸­ä½“ç°ï¼šInteger.valueOfã€Class.forName</p><h4 id="3ã€æŠ½è±¡å·¥å‚"><a href="#3ã€æŠ½è±¡å·¥å‚" class="headerlink" title="3ã€æŠ½è±¡å·¥å‚"></a>3ã€æŠ½è±¡å·¥å‚</h4><p>ä½œç”¨ï¼šåˆ›å»ºæŸä¸€ç§ç±»çš„å¯¹è±¡ã€‚</p><p>JDKä¸­ä½“ç°ï¼šJava.sqlåŒ…ã€‚</p><h4 id="4ã€åŸå‹æ¨¡å¼"><a href="#4ã€åŸå‹æ¨¡å¼" class="headerlink" title="4ã€åŸå‹æ¨¡å¼"></a>4ã€åŸå‹æ¨¡å¼</h4><p>clone()ï¼›</p><p>åŸå‹æ¨¡å¼çš„æœ¬è´¨æ˜¯æ‹·è´åŸå‹æ¥åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œæ‹·è´æ˜¯æ¯”newæ›´å¿«çš„åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ï¼Œå½“éœ€è¦å¤§æ‰¹é‡åˆ›å»ºæ–°å¯¹è±¡è€Œä¸”éƒ½æ˜¯åŒä¸€ä¸ªç±»çš„å¯¹è±¡çš„æ—¶å€™è€ƒè™‘ä½¿ç”¨åŸå‹æ¨¡å¼ã€‚</p><p>ä¸€èˆ¬çš„å…‹éš†åªæ˜¯æµ…æ‹·è´ï¼ˆå¯¹è±¡çš„hashå€¼ä¸ä¸€æ ·ï¼Œä½†æ˜¯å¯¹è±¡é‡Œé¢çš„æˆå‘˜å˜é‡çš„hashå€¼æ˜¯ä¸€æ ·çš„ï¼‰ã€‚</p><p>æœ‰äº›åœºæ™¯éœ€è¦æ·±æ‹·è´ï¼Œè¿™æ—¶æˆ‘ä»¬å°±è¦é‡å†™cloneæ–¹æ³•ï¼Œä»¥ArrayListä¸ºä¾‹ï¼š</p><h4 id="5ã€é€‚é…å™¨æ¨¡å¼"><a href="#5ã€é€‚é…å™¨æ¨¡å¼" class="headerlink" title="5ã€é€‚é…å™¨æ¨¡å¼"></a>5ã€é€‚é…å™¨æ¨¡å¼</h4><p>ä½œç”¨ï¼šä½¿ä¸å…¼å®¹çš„æ¥å£ç›¸å®¹ã€‚</p><p>JDKä¸­ä½“ç°ï¼šInputStreamã€OutputStreamã€‚</p><h4 id="6ã€è£…é¥°å™¨æ¨¡å¼"><a href="#6ã€è£…é¥°å™¨æ¨¡å¼" class="headerlink" title="6ã€è£…é¥°å™¨æ¨¡å¼"></a>6ã€è£…é¥°å™¨æ¨¡å¼</h4><p>ä½œç”¨ï¼šä¸ºç±»æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œé˜²æ­¢ç±»ç»§æ‰¿å¸¦æ¥çš„ç±»çˆ†ç‚¸ã€‚</p><p>JDKä¸­ä½“ç°ï¼šioç±»ã€Collectionsã€Listã€‚</p><h4 id="7ã€å¤–è§‚æ¨¡å¼"><a href="#7ã€å¤–è§‚æ¨¡å¼" class="headerlink" title="7ã€å¤–è§‚æ¨¡å¼"></a>7ã€å¤–è§‚æ¨¡å¼</h4><p>ä½œç”¨ï¼šå°è£…ä¸€ç»„äº¤äº’ç±»ï¼Œä¸€ç›´å¯¹å¤–æä¾›æ¥å£ã€‚</p><p>JDKä¸­ä½“ç°ï¼šloggingåŒ…ã€‚</p><h4 id="8ã€äº«å…ƒæ¨¡å¼"><a href="#8ã€äº«å…ƒæ¨¡å¼" class="headerlink" title="8ã€äº«å…ƒæ¨¡å¼"></a>8ã€äº«å…ƒæ¨¡å¼</h4><p>ä½œç”¨ï¼šå…±äº«å¯¹è±¡ã€èŠ‚çœå†…å­˜ã€‚</p><p>JDKä¸­ä½“ç°ï¼šInteger.valueOfã€Stringå¸¸é‡æ± ã€‚</p><h4 id="9ã€ä»£ç†æ¨¡å¼"><a href="#9ã€ä»£ç†æ¨¡å¼" class="headerlink" title="9ã€ä»£ç†æ¨¡å¼"></a>9ã€ä»£ç†æ¨¡å¼</h4><p>ä½œç”¨ï¼š</p><p>ï¼ˆ1ï¼‰é€æ˜è°ƒç”¨è¢«ä»£ç†å¯¹è±¡ï¼Œæ— é¡»çŸ¥é“å¤æ‚å®ç°ç»†èŠ‚ï¼›</p><p>ï¼ˆ2ï¼‰å¢åŠ è¢«ä»£ç†ç±»çš„åŠŸèƒ½ï¼›</p><p>JDKä¸­ä½“ç°ï¼šåŠ¨æ€ä»£ç†ã€‚</p><h4 id="10ã€è¿­ä»£å™¨æ¨¡å¼"><a href="#10ã€è¿­ä»£å™¨æ¨¡å¼" class="headerlink" title="10ã€è¿­ä»£å™¨æ¨¡å¼"></a>10ã€è¿­ä»£å™¨æ¨¡å¼</h4><p>ä½œç”¨ï¼šå°†é›†åˆçš„è¿­ä»£å’Œé›†åˆæœ¬èº«åˆ†ç¦»ã€‚</p><p>JDKä¸­ä½“ç°ï¼šIterator</p><h4 id="11ã€å‘½ä»¤æ¨¡å¼"><a href="#11ã€å‘½ä»¤æ¨¡å¼" class="headerlink" title="11ã€å‘½ä»¤æ¨¡å¼"></a>11ã€å‘½ä»¤æ¨¡å¼</h4><p>ä½œç”¨ï¼šå°è£…æ“ä½œï¼Œä½¿æ¥å£ä¸€è‡´ã€‚</p><p>JDKä¸­ä½“ç°ï¼šRunableã€Callableã€ThreadPoolExecutorã€‚</p><h3 id="108ã€ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿä½ æ˜¯å¦åœ¨ä½ çš„ä»£ç é‡Œé¢ä½¿ç”¨è¿‡ä»»ä½•è®¾è®¡æ¨¡å¼ï¼Ÿ"><a href="#108ã€ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿä½ æ˜¯å¦åœ¨ä½ çš„ä»£ç é‡Œé¢ä½¿ç”¨è¿‡ä»»ä½•è®¾è®¡æ¨¡å¼ï¼Ÿ" class="headerlink" title="108ã€ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿä½ æ˜¯å¦åœ¨ä½ çš„ä»£ç é‡Œé¢ä½¿ç”¨è¿‡ä»»ä½•è®¾è®¡æ¨¡å¼ï¼Ÿ"></a>108ã€ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿä½ æ˜¯å¦åœ¨ä½ çš„ä»£ç é‡Œé¢ä½¿ç”¨è¿‡ä»»ä½•è®¾è®¡æ¨¡å¼ï¼Ÿ</h3><h4 id="1ã€ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿ"><a href="#1ã€ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿ" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿ"></a>1ã€ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿ</h4><p>è®¾è®¡æ¨¡å¼æ˜¯è§£å†³è½¯ä»¶å¼€å‘æŸäº›ç‰¹å®šé—®é¢˜è€Œæå‡ºçš„ä¸€äº›è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºè§£å†³é—®é¢˜çš„ä¸€äº›å›ºå®šæ€è·¯ã€‚</p><p>é€šè¿‡è®¾è®¡æ¨¡å¼å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¢å¼ºä»£ç çš„å¯å¤ç”¨æ€§ã€å¯æ‰©å±•æ€§ã€çµæ´»æ€§ã€‚</p><p>æˆ‘ä»¬ä½¿ç”¨è®¾è®¡æ¨¡å¼çš„æœ€ç»ˆç›®çš„æ˜¯å®ç°ä»£ç çš„é«˜å†…èšã€ä½è€¦åˆã€‚</p><h4 id="2ã€è®¾è®¡æ¨¡å¼çš„ä¸ƒå¤§åŸåˆ™"><a href="#2ã€è®¾è®¡æ¨¡å¼çš„ä¸ƒå¤§åŸåˆ™" class="headerlink" title="2ã€è®¾è®¡æ¨¡å¼çš„ä¸ƒå¤§åŸåˆ™"></a>2ã€è®¾è®¡æ¨¡å¼çš„ä¸ƒå¤§åŸåˆ™</h4><p>å•ä¸€èŒè´£åŸåˆ™<br>æ¥å£éš”ç¦»åŸåˆ™<br>ä¾èµ–å€’è½¬åŸåˆ™<br>é‡Œå¼æ›¿æ¢åŸåˆ™<br>å¼€é—­åŸåˆ™<br>è¿ªç±³ç‰¹æ³•åˆ™<br>åˆæˆå¤ç”¨åŸåˆ™</p><h4 id="3ã€ä½ æ˜¯å¦åœ¨ä½ çš„ä»£ç é‡Œé¢ä½¿ç”¨è¿‡ä»»ä½•è®¾è®¡æ¨¡å¼ï¼Ÿ"><a href="#3ã€ä½ æ˜¯å¦åœ¨ä½ çš„ä»£ç é‡Œé¢ä½¿ç”¨è¿‡ä»»ä½•è®¾è®¡æ¨¡å¼ï¼Ÿ" class="headerlink" title="3ã€ä½ æ˜¯å¦åœ¨ä½ çš„ä»£ç é‡Œé¢ä½¿ç”¨è¿‡ä»»ä½•è®¾è®¡æ¨¡å¼ï¼Ÿ"></a>3ã€ä½ æ˜¯å¦åœ¨ä½ çš„ä»£ç é‡Œé¢ä½¿ç”¨è¿‡ä»»ä½•è®¾è®¡æ¨¡å¼ï¼Ÿ</h4><p>ï¼ˆ1ï¼‰å•ä¾‹æ¨¡å¼</p><p>JDKç§çš„runtimeï¼ŒSpringç§çš„singetonã€‚</p><p>ï¼ˆ2ï¼‰ç®€å•å·¥å‚æ¨¡å¼</p><p>Springçš„BeanFactoryï¼Œæ ¹æ®ä¼ å…¥ä¸€ä¸ªå”¯ä¸€æ ‡è¯†æ¥è·å¾—beanå¯¹è±¡ã€‚</p><p>ï¼ˆ3ï¼‰åŸå‹æ¨¡å¼</p><p>clone()</p><p>ï¼ˆ4ï¼‰ä»£ç†æ¨¡å¼</p><p>Springçš„AOPä¸­ï¼ŒSpringå®ç°AOPåŠŸèƒ½çš„åŸç†å°±æ˜¯ä»£ç†æ¨¡å¼ï¼Œâ‘ JDKåŠ¨æ€ä»£ç†ã€‚â‘¡CGLIBåŠ¨æ€ä»£ç†ï¼Œä½¿ç”¨Adviceï¼ˆé€šçŸ¥ï¼‰å¯¹ç±»è¿›è¡Œæ–¹æ³•çº§åˆ«çš„åˆ‡é¢å¢å¼ºã€‚</p><p>ï¼ˆ5ï¼‰è£…é¥°å™¨æ¨¡å¼</p><p>ä¸ºç±»æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œé˜²æ­¢ç±»çˆ†ç‚¸ï¼›</p><p>IOæµã€æ•°æ®æºåŒ…è£…ï¼ŒSpringä¸­ç”¨åˆ°çš„è£…é¥°å™¨æ¨¡å¼è¡¨ç°åœ¨Wrapperã€‚</p><h3 id="109ã€Java-ä¸­ä»€ä¹ˆå«å•ä¾‹è®¾è®¡æ¨¡å¼ï¼Ÿè¯·ç”¨-Java-å†™å‡ºçº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼"><a href="#109ã€Java-ä¸­ä»€ä¹ˆå«å•ä¾‹è®¾è®¡æ¨¡å¼ï¼Ÿè¯·ç”¨-Java-å†™å‡ºçº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼" class="headerlink" title="109ã€Java ä¸­ä»€ä¹ˆå«å•ä¾‹è®¾è®¡æ¨¡å¼ï¼Ÿè¯·ç”¨ Java å†™å‡ºçº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼"></a>109ã€Java ä¸­ä»€ä¹ˆå«å•ä¾‹è®¾è®¡æ¨¡å¼ï¼Ÿè¯·ç”¨ Java å†™å‡ºçº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼</h3><ol><li>ä¿è¯ç¨‹åºåªæœ‰ä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹ï¼Œå«åšå•ä¾‹æ¨¡å¼ï¼›</li><li>å†…éƒ¨ç±»çš„æ–¹å¼å®ç°å•ä¾‹æ¨¡å¼ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼›</li><li>åŒé‡éªŒè¯æ–¹å¼å®ç°å•ä¾‹æ¨¡å¼ä¹Ÿæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼›</li></ol><h3 id="110ã€åœ¨-Java-ä¸­ï¼Œä»€ä¹ˆå«è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼ï¼ˆobserver-design-patternï¼‰ï¼Ÿ"><a href="#110ã€åœ¨-Java-ä¸­ï¼Œä»€ä¹ˆå«è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼ï¼ˆobserver-design-patternï¼‰ï¼Ÿ" class="headerlink" title="110ã€åœ¨ Java ä¸­ï¼Œä»€ä¹ˆå«è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼ï¼ˆobserver design patternï¼‰ï¼Ÿ"></a>110ã€åœ¨ Java ä¸­ï¼Œä»€ä¹ˆå«è§‚å¯Ÿè€…è®¾è®¡æ¨¡å¼ï¼ˆobserver design patternï¼‰ï¼Ÿ</h3><p>1ã€è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…åŒæ—¶ç›‘å¬æŸä¸€ä¸»é¢˜å¯¹è±¡ã€‚å½“è¿™ä¸ªä¸»é¢˜å¯¹è±¡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±ã€‚</p><p>2ã€JAVAæä¾›çš„å¯¹è§‚å¯Ÿè€…æ¨¡å¼çš„æ”¯æŒ</p><p>åœ¨JAVAè¯­è¨€çš„java.utilåº“é‡Œé¢ï¼Œæä¾›äº†ä¸€ä¸ªObservableç±»ä»¥åŠä¸€ä¸ªObserveræ¥å£ï¼Œæ„æˆJAVAè¯­è¨€å¯¹è§‚å¯Ÿè€…æ¨¡å¼çš„æ”¯æŒã€‚</p><p>ï¼ˆ1ï¼‰Observeræ¥å£</p><p>è¿™ä¸ªæ¥å£åªå®šä¹‰äº†ä¸€ä¸ªæ–¹æ³•ï¼Œå³update()æ–¹æ³•ï¼Œå½“è¢«è§‚å¯Ÿè€…å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¢«è§‚å¯Ÿè€…å¯¹è±¡çš„notifyObservers()æ–¹æ³•å°±ä¼šè°ƒç”¨è¿™ä¸€æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Observer</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Observable o, Object arg)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰Observableç±»</p><p>è¢«è§‚å¯Ÿè€…ç±»éƒ½æ˜¯java.util.Observableç±»çš„å­ç±»ã€‚java.util.Observableæä¾›å…¬å¼€çš„æ–¹æ³•æ”¯æŒè§‚å¯Ÿè€…å¯¹è±¡ï¼Œè¿™äº›æ–¹æ³•ä¸­æœ‰ä¸¤ä¸ªå¯¹Observableçš„å­ç±»éå¸¸é‡è¦ï¼šä¸€ä¸ªæ˜¯setChanged()ï¼Œå¦ä¸€ä¸ªæ˜¯notifyObservers()ã€‚ç¬¬ä¸€æ–¹æ³•setChanged()è¢«è°ƒç”¨ä¹‹åä¼šè®¾ç½®ä¸€ä¸ªå†…éƒ¨æ ‡è®°å˜é‡ï¼Œä»£è¡¨è¢«è§‚å¯Ÿè€…å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–ã€‚ç¬¬äºŒä¸ªæ˜¯notifyObservers()ï¼Œè¿™ä¸ªæ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œä¼šè°ƒç”¨æ‰€æœ‰ç™»è®°è¿‡çš„è§‚å¯Ÿè€…å¯¹è±¡çš„update()æ–¹æ³•ï¼Œä½¿è¿™äº›è§‚å¯Ÿè€…å¯¹è±¡å¯ä»¥æ›´æ–°è‡ªå·±ã€‚</p><h3 id="111ã€ä½¿ç”¨å·¥å‚æ¨¡å¼æœ€ä¸»è¦çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿåœ¨å“ªé‡Œä½¿ç”¨ï¼Ÿ"><a href="#111ã€ä½¿ç”¨å·¥å‚æ¨¡å¼æœ€ä¸»è¦çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿåœ¨å“ªé‡Œä½¿ç”¨ï¼Ÿ" class="headerlink" title="111ã€ä½¿ç”¨å·¥å‚æ¨¡å¼æœ€ä¸»è¦çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿåœ¨å“ªé‡Œä½¿ç”¨ï¼Ÿ"></a>111ã€ä½¿ç”¨å·¥å‚æ¨¡å¼æœ€ä¸»è¦çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿåœ¨å“ªé‡Œä½¿ç”¨ï¼Ÿ</h3><p>1ã€å·¥å‚æ¨¡å¼å¥½å¤„</p><ul><li>è‰¯å¥½çš„å°è£…æ€§ã€ä»£ç ç»“æ„æ¸…æ™°ï¼›</li><li>æ‰©å±•æ€§å¥½ï¼Œå¦‚æœæƒ³å¢åŠ ä¸€ä¸ªäº§å“ï¼Œåªéœ€æ‰©å±•ä¸€ä¸ªå·¥å‚ç±»å³å¯ï¼›</li><li>å…¸å‹çš„è§£è€¦æ¡†æ¶ï¼›</li></ul><p>2ã€åœ¨å“ªé‡Œä½¿ç”¨ï¼Ÿ</p><ul><li>éœ€è¦ç”Ÿæˆå¯¹è±¡çš„åœ°æ–¹ï¼›</li><li>ä¸åŒæ•°æ®åº“çš„è®¿é—®ï¼›</li></ul><h3 id="112ã€è¯·è§£é‡Šè‡ªåŠ¨è£…é…æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ"><a href="#112ã€è¯·è§£é‡Šè‡ªåŠ¨è£…é…æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="112ã€è¯·è§£é‡Šè‡ªåŠ¨è£…é…æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ"></a>112ã€è¯·è§£é‡Šè‡ªåŠ¨è£…é…æ¨¡å¼çš„åŒºåˆ«ï¼Ÿ</h3><p>æœ‰äº”ç§è‡ªåŠ¨è£…é…çš„æ–¹å¼ï¼Œå¯ä»¥ç”¨æ¥æŒ‡å¯¼ Spring å®¹å™¨ç”¨è‡ªåŠ¨è£…é…æ–¹å¼æ¥è¿›è¡Œä¾èµ–æ³¨å…¥ã€‚</p><p>1ã€no</p><p>é»˜è®¤çš„æ–¹å¼æ˜¯ä¸è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œé€šè¿‡æ˜¾å¼è®¾ç½® ref å±æ€§æ¥è¿›è¡Œè£…é…ã€‚ç¬¬ 402 é¡µ å…± 485 é¡µ</p><p>2ã€byName</p><p>é€šè¿‡å‚æ•°å è‡ªåŠ¨è£…é…ï¼ŒSpring å®¹å™¨åœ¨é…ç½®æ–‡ä»¶ä¸­å‘ç° bean</p><p>çš„ autowire å±æ€§è¢«è®¾ç½®æˆ bynameï¼Œä¹‹åå®¹å™¨è¯•å›¾åŒ¹é…ã€è£…é…å’Œè¯¥ bean çš„å±</p><p>æ€§å…·æœ‰ç›¸åŒåå­—çš„ beanã€‚</p><p>3ã€byType:</p><p>é€šè¿‡å‚æ•°ç±»å‹è‡ªåŠ¨è£…é…ï¼ŒSpring å®¹å™¨åœ¨é…ç½®æ–‡ä»¶ä¸­å‘ç° bean</p><p>çš„ autowire å±æ€§è¢«è®¾ç½®æˆ byTypeï¼Œä¹‹åå®¹å™¨è¯•å›¾åŒ¹é…ã€è£…é…å’Œè¯¥ bean çš„å±</p><p>æ€§å…·æœ‰ç›¸åŒç±»å‹çš„ beanã€‚å¦‚æœæœ‰å¤šä¸ª bean ç¬¦åˆæ¡ä»¶ï¼Œåˆ™æŠ›å‡ºé”™è¯¯ã€‚</p><p>4ã€constructor</p><p>è¿™ä¸ªæ–¹å¼ç±»ä¼¼äº byTypeï¼Œ ä½†æ˜¯è¦æä¾›ç»™æ„é€ å™¨å‚æ•°ï¼Œå¦‚</p><p>æœæ²¡æœ‰ç¡®å®šçš„å¸¦å‚æ•°çš„æ„é€ å™¨å‚æ•°ç±»å‹ï¼Œå°†ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><p>5ã€autodetect</p><p>é¦–å…ˆå°è¯•ä½¿ç”¨ constructor æ¥è‡ªåŠ¨è£…é…ï¼Œå¦‚æœæ— æ³•å·¥ä½œï¼Œ</p><p>åˆ™ä½¿ç”¨ byType æ–¹å¼ã€‚</p><h3 id="113ã€ä¸¾ä¸€ä¸ªç”¨-Java-å®ç°çš„è£…é¥°æ¨¡å¼-decorator-design-pattern-ï¼Ÿå®ƒæ˜¯ä½œç”¨äºå¯¹è±¡å±‚æ¬¡è¿˜æ˜¯ç±»å±‚æ¬¡ï¼Ÿ"><a href="#113ã€ä¸¾ä¸€ä¸ªç”¨-Java-å®ç°çš„è£…é¥°æ¨¡å¼-decorator-design-pattern-ï¼Ÿå®ƒæ˜¯ä½œç”¨äºå¯¹è±¡å±‚æ¬¡è¿˜æ˜¯ç±»å±‚æ¬¡ï¼Ÿ" class="headerlink" title="113ã€ä¸¾ä¸€ä¸ªç”¨ Java å®ç°çš„è£…é¥°æ¨¡å¼(decorator design pattern)ï¼Ÿå®ƒæ˜¯ä½œç”¨äºå¯¹è±¡å±‚æ¬¡è¿˜æ˜¯ç±»å±‚æ¬¡ï¼Ÿ"></a>113ã€ä¸¾ä¸€ä¸ªç”¨ Java å®ç°çš„è£…é¥°æ¨¡å¼(decorator design pattern)ï¼Ÿå®ƒæ˜¯ä½œç”¨äºå¯¹è±¡å±‚æ¬¡è¿˜æ˜¯ç±»å±‚æ¬¡ï¼Ÿ</h3><p>åœ¨Java IOä¸­è¿ç”¨äº†è£…é¥°å™¨æ¨¡å¼ï¼ŒinputStreamä½œä¸ºæŠ½è±¡ç±»ï¼Œå…¶ä¸‹æœ‰å‡ ä¸ªå®ç°ç±»ï¼Œè¡¨ç¤ºä»ä¸åŒçš„æ•°æ®æºè¾“å…¥ï¼š</p><ol><li>byteArrayInputStream</li><li>fileInputStream</li><li>StringBufferInputStream</li><li>PipedInputStreamï¼Œä»ç®¡é“äº§ç”Ÿè¾“å…¥ï¼›</li><li>SequenceInputStreamï¼Œå¯å°†å…¶ä»–æµæ”¶é›†åˆå¹¶åˆ°ä¸€ä¸ªæµå†…ï¼›</li></ol><p>FilterInputStreamä½œä¸ºè£…é¥°å™¨åœ¨JDKä¸­æ˜¯ä¸€ä¸ªæ™®é€šç±»ï¼Œå…¶ä¸‹é¢æœ‰å¤šä¸ªå…·ä½“è£…é¥°å™¨æ¯”å¦‚BufferedInputStreamã€DataInputStreamç­‰ã€‚</p><p>FilterInputStreamå†…éƒ¨å°è£…äº†åŸºç¡€æ„ä»¶ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">volatile</span> InputStream in;</span><br></pre></td></tr></table></figure><p>è€ŒBufferedInputStreamåœ¨è°ƒç”¨å…¶read()è¯»å–æ•°æ®æ—¶ä¼šå§”æ‰˜åŸºç¡€æ„ä»¶æ¥è¿›è¡Œæ›´åº•å±‚çš„æ“ä½œï¼Œè€Œå®ƒè‡ªå·±æ‰€èµ·çš„è£…é¥°ä½œç”¨å°±æ˜¯ç¼“å†²ï¼Œåœ¨æºç ä¸­å¯ä»¥å¾ˆæ¸…æ¥šçš„çœ‹åˆ°è¿™ä¸€åˆ‡ã€‚</p><h3 id="114ã€ä»€ä¹ˆæ˜¯-Spring-æ¡†æ¶ï¼ŸSpring-æ¡†æ¶æœ‰å“ªäº›ä¸»è¦æ¨¡å—ï¼Ÿ"><a href="#114ã€ä»€ä¹ˆæ˜¯-Spring-æ¡†æ¶ï¼ŸSpring-æ¡†æ¶æœ‰å“ªäº›ä¸»è¦æ¨¡å—ï¼Ÿ" class="headerlink" title="114ã€ä»€ä¹ˆæ˜¯ Spring æ¡†æ¶ï¼ŸSpring æ¡†æ¶æœ‰å“ªäº›ä¸»è¦æ¨¡å—ï¼Ÿ"></a>114ã€ä»€ä¹ˆæ˜¯ Spring æ¡†æ¶ï¼ŸSpring æ¡†æ¶æœ‰å“ªäº›ä¸»è¦æ¨¡å—ï¼Ÿ</h3><p>Springæ˜¯ä¸€ä¸ªæ§åˆ¶åè½¬å’Œé¢å‘åˆ‡é¢çš„å®¹å™¨æ¡†æ¶ã€‚</p><p>Springæœ‰ä¸ƒå¤§åŠŸèƒ½æ¨¡å—ï¼š</p><p>1ã€Core</p><p>Coreæ¨¡å—æ˜¯Springçš„æ ¸å¿ƒç±»åº“ï¼ŒCoreå®ç°äº†IOCåŠŸèƒ½ã€‚</p><p>2ã€AOP</p><p>Apring AOPæ¨¡å—æ˜¯Springçš„AOPåº“ï¼Œæä¾›äº†AOPï¼ˆæ‹¦æˆªå™¨ï¼‰æœºåˆ¶ï¼Œå¹¶æä¾›å¸¸è§çš„æ‹¦æˆªå™¨ï¼Œä¾›ç”¨æˆ·è‡ªå®šä¹‰å’Œé…ç½®ã€‚</p><p>3ã€orm</p><p>æä¾›å¯¹å¸¸ç”¨ORMæ¡†æ¶çš„ç®¡ç†å’Œæ”¯æŒï¼Œhibernateã€mybatisç­‰ã€‚</p><p>4ã€Dao</p><p>Springæä¾›å¯¹JDBCçš„æ”¯æŒï¼Œå¯¹JDBCè¿›è¡Œå°è£…ã€‚</p><p>5ã€Web</p><p>å¯¹Struts2çš„æ”¯æŒã€‚</p><p>6ã€Context</p><p>Contextæ¨¡å—æä¾›æ¡†æ¶å¼çš„Beançš„è®¿é—®æ–¹å¼ï¼Œå…¶å®ƒç¨‹åºå¯ä»¥é€šè¿‡Contextè®¿é—®Springçš„Beanèµ„æºï¼Œç›¸å½“äºèµ„æºæ³¨å…¥ã€‚</p><p>7ã€MVC</p><p>MVCæ¨¡å—ä¸ºspringæä¾›äº†ä¸€å¥—è½»é‡çº§çš„MVCå®ç°ï¼Œå³Spring MVCã€‚</p><h3 id="115ã€ä½¿ç”¨-Spring-æ¡†æ¶èƒ½å¸¦æ¥å“ªäº›å¥½å¤„ï¼Ÿ"><a href="#115ã€ä½¿ç”¨-Spring-æ¡†æ¶èƒ½å¸¦æ¥å“ªäº›å¥½å¤„ï¼Ÿ" class="headerlink" title="115ã€ä½¿ç”¨ Spring æ¡†æ¶èƒ½å¸¦æ¥å“ªäº›å¥½å¤„ï¼Ÿ"></a>115ã€ä½¿ç”¨ Spring æ¡†æ¶èƒ½å¸¦æ¥å“ªäº›å¥½å¤„ï¼Ÿ</h3><p>1ã€è½»é‡çº§æ¡†æ¶ã€å®¹å™¨</p><p>Springæ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œç®¡ç†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå’Œé…ç½®ã€‚åŸºäºä¸€ä¸ªå¯é…ç½®åŸå‹prototypeï¼Œä½ çš„beanå¯ä»¥ä½¿å•åˆ©çš„ï¼Œä¹Ÿå¯ä»¥æ¯æ¬¡éœ€è¦æ—¶éƒ½ç”Ÿæˆä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚</p><p>2ã€æ§åˆ¶åè½¬IOC</p><p>Springé€šè¿‡æ§åˆ¶åè½¬å®ç°æ¾è€¦åˆã€‚</p><p>3ã€æ”¯æŒAOP</p><p>Springæä¾›å¯¹AOPçš„æ”¯æŒï¼Œå®ƒå…è®¸å°†ä¸€äº›é€šç”¨ä»»åŠ¡ï¼Œå¦‚å®‰å…¨ã€äº‹åŠ¡ã€æ—¥å¿—ç­‰è¿›è¡Œé›†ä¸­å¼å¤„ç†ï¼Œä»è€Œæé«˜äº†ç¨‹åºçš„å¤ç”¨æ€§ã€‚</p><p>4ã€è½»é‡çº§æ¡†æ¶</p><p>5ã€æ–¹ä¾¿æµ‹è¯•</p><p>Springæä¾›Junit4çš„æ”¯æŒï¼Œå¯ä»¥é€šè¿‡æ³¨è§£æ–¹ä¾¿æµ‹è¯•springç¨‹åºã€‚</p><p>6ã€å¯¹Javaä¸­å¾ˆå¤šAPIè¿›è¡Œäº†å°è£…</p><p>7ã€æ–¹ä¾¿é›†æˆå„ç§ä¼˜ç§€æ¡†æ¶</p><p>å¦‚Strutsã€hibernateã€mybstisã€‚</p><p>8ã€æ”¯æŒå£°æ˜å¼äº‹åŠ¡å¤„ç†</p><p>åªéœ€é€šè¿‡é…ç½®å°±å¯ä»¥å®Œæˆå¯¹äº‹åŠ¡çš„ç®¡ç†ï¼Œè€Œæ— é¡»æ‰‹åŠ¨ç¼–ç¨‹ã€‚</p><h3 id="116ã€Spring-IOCã€AOPä¸¾ä¾‹è¯´æ˜"><a href="#116ã€Spring-IOCã€AOPä¸¾ä¾‹è¯´æ˜" class="headerlink" title="116ã€Spring IOCã€AOPä¸¾ä¾‹è¯´æ˜"></a>116ã€Spring IOCã€AOPä¸¾ä¾‹è¯´æ˜</h3><h4 id="1ã€IOCç†è®ºçš„èƒŒæ™¯"><a href="#1ã€IOCç†è®ºçš„èƒŒæ™¯" class="headerlink" title="1ã€IOCç†è®ºçš„èƒŒæ™¯"></a>1ã€IOCç†è®ºçš„èƒŒæ™¯</h4><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨é‡‡ç”¨é¢å‘å¯¹è±¡æ–¹æ³•è®¾è®¡çš„è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œå®ƒçš„åº•å±‚å®ç°éƒ½æ˜¯ç”±Nä¸ªå¯¹è±¡ç»„æˆçš„ï¼Œæ‰€æœ‰çš„å¯¹è±¡é€šè¿‡å½¼æ­¤çš„åˆä½œï¼Œæœ€ç»ˆå®ç°ç³»ç»Ÿçš„ä¸šåŠ¡é€»è¾‘ã€‚</p><p>å¦‚æœæˆ‘ä»¬æ‰“å¼€æœºæ¢°å¼æ‰‹è¡¨çš„åç›–ï¼Œå°±ä¼šçœ‹åˆ°ä¸ä¸Šé¢ç±»ä¼¼çš„æƒ…å½¢ï¼Œå„ä¸ªé½¿è½®åˆ†åˆ«å¸¦åŠ¨æ—¶é’ˆã€åˆ†é’ˆå’Œç§’é’ˆé¡ºæ—¶é’ˆæ—‹è½¬ï¼Œä»è€Œåœ¨è¡¨ç›˜ä¸Šäº§ç”Ÿæ­£ç¡®çš„æ—¶é—´ã€‚å›¾1ä¸­æè¿°çš„å°±æ˜¯è¿™æ ·çš„ä¸€ä¸ªé½¿è½®ç»„ï¼Œå®ƒæ‹¥æœ‰å¤šä¸ªç‹¬ç«‹çš„é½¿è½®ï¼Œè¿™äº›é½¿è½®ç›¸äº’å•®åˆåœ¨ä¸€èµ·ï¼ŒååŒå·¥ä½œï¼Œå…±åŒå®ŒæˆæŸé¡¹ä»»åŠ¡ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è¿™æ ·çš„é½¿è½®ç»„ä¸­ï¼Œå¦‚æœæœ‰ä¸€ä¸ªé½¿è½®å‡ºäº†é—®é¢˜ï¼Œå°±å¯èƒ½ä¼šå½±å“åˆ°æ•´ä¸ªé½¿è½®ç»„çš„æ­£å¸¸è¿è½¬ã€‚<br>é½¿è½®ç»„ä¸­é½¿è½®ä¹‹é—´çš„å•®åˆå…³ç³»,ä¸è½¯ä»¶ç³»ç»Ÿä¸­å¯¹è±¡ä¹‹é—´çš„è€¦åˆå…³ç³»éå¸¸ç›¸ä¼¼ã€‚å¯¹è±¡ä¹‹é—´çš„è€¦åˆå…³ç³»æ˜¯æ— æ³•é¿å…çš„ï¼Œä¹Ÿæ˜¯å¿…è¦çš„ï¼Œè¿™æ˜¯ååŒå·¥ä½œçš„åŸºç¡€ã€‚ç°åœ¨ï¼Œä¼´éšç€å·¥ä¸šçº§åº”ç”¨çš„è§„æ¨¡è¶Šæ¥è¶Šåºå¤§ï¼Œå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ä¹Ÿè¶Šæ¥è¶Šå¤æ‚ï¼Œç»å¸¸ä¼šå‡ºç°å¯¹è±¡ä¹‹é—´çš„å¤šé‡ä¾èµ–æ€§å…³ç³»ï¼Œå› æ­¤ï¼Œæ¶æ„å¸ˆå’Œè®¾è®¡å¸ˆå¯¹äºç³»ç»Ÿçš„åˆ†æå’Œè®¾è®¡ï¼Œå°†é¢ä¸´æ›´å¤§çš„æŒ‘æˆ˜ã€‚å¯¹è±¡ä¹‹é—´è€¦åˆåº¦è¿‡é«˜çš„ç³»ç»Ÿï¼Œå¿…ç„¶ä¼šå‡ºç°ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«çš„æƒ…å½¢ã€‚</p><p>è€¦åˆå…³ç³»ä¸ä»…ä¼šå‡ºç°åœ¨å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´ï¼Œä¹Ÿä¼šå‡ºç°åœ¨è½¯ä»¶ç³»ç»Ÿçš„å„æ¨¡å—ä¹‹é—´ï¼Œä»¥åŠè½¯ä»¶ç³»ç»Ÿå’Œç¡¬ä»¶ç³»ç»Ÿä¹‹é—´ã€‚å¦‚ä½•é™ä½ç³»ç»Ÿä¹‹é—´ã€æ¨¡å—ä¹‹é—´å’Œå¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæ˜¯è½¯ä»¶å·¥ç¨‹æ°¸è¿œè¿½æ±‚çš„ç›®æ ‡ä¹‹ä¸€ã€‚ä¸ºäº†è§£å†³å¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦è¿‡é«˜çš„é—®é¢˜ï¼Œè½¯ä»¶ä¸“å®¶Michael Mattsonæå‡ºäº†IOCç†è®ºï¼Œç”¨æ¥å®ç°å¯¹è±¡ä¹‹é—´çš„â€œè§£è€¦â€ï¼Œç›®å‰è¿™ä¸ªç†è®ºå·²ç»è¢«æˆåŠŸåœ°åº”ç”¨åˆ°å®è·µå½“ä¸­ï¼Œå¾ˆå¤šçš„J2EEé¡¹ç›®å‡é‡‡ç”¨äº†IOCæ¡†æ¶äº§å“Springã€‚</p><h4 id="2ã€ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬"><a href="#2ã€ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬" class="headerlink" title="2ã€ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬"></a>2ã€ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬</h4><p>IOCæ˜¯Inversion of Controlçš„ç¼©å†™ï¼Œå¤šæ•°ä¹¦ç±ç¿»è¯‘æˆâ€œæ§åˆ¶åè½¬â€ï¼Œè¿˜æœ‰äº›ä¹¦ç±ç¿»è¯‘æˆä¸ºâ€œæ§åˆ¶åå‘â€æˆ–è€…â€œæ§åˆ¶å€’ç½®â€ã€‚<br>1996å¹´ï¼ŒMichael Mattsonåœ¨ä¸€ç¯‡æœ‰å…³æ¢è®¨é¢å‘å¯¹è±¡æ¡†æ¶çš„æ–‡ç« ä¸­ï¼Œé¦–å…ˆæå‡ºäº†IOC è¿™ä¸ªæ¦‚å¿µã€‚å¯¹äºé¢å‘å¯¹è±¡è®¾è®¡åŠç¼–ç¨‹çš„åŸºæœ¬æ€æƒ³ï¼Œå‰é¢æˆ‘ä»¬å·²ç»è®²äº†å¾ˆå¤šäº†ï¼Œä¸å†èµ˜è¿°ï¼Œç®€å•æ¥è¯´å°±æ˜¯æŠŠå¤æ‚ç³»ç»Ÿåˆ†è§£æˆç›¸äº’åˆä½œçš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡ç±»é€šè¿‡å°è£…ä»¥åï¼Œå†…éƒ¨å®ç°å¯¹å¤–éƒ¨æ˜¯é€æ˜çš„ï¼Œä»è€Œé™ä½äº†è§£å†³é—®é¢˜çš„å¤æ‚åº¦ï¼Œè€Œä¸”å¯ä»¥çµæ´»åœ°è¢«é‡ç”¨å’Œæ‰©å±•ã€‚IOCç†è®ºæå‡ºçš„è§‚ç‚¹å¤§ä½“æ˜¯è¿™æ ·çš„ï¼šå€ŸåŠ©äºâ€œç¬¬ä¸‰æ–¹â€å®ç°å…·æœ‰ä¾èµ–å…³ç³»çš„å¯¹è±¡ä¹‹é—´çš„è§£è€¦ï¼Œå¦‚ä¸‹å›¾ï¼š</p><p><a href="https://imgtu.com/i/jVTJxA"><img src="https://s1.ax1x.com/2022/06/27/jVTJxA.jpg" alt="jVTJxA.jpg"></a></p><p>å¤§å®¶çœ‹åˆ°äº†å§ï¼Œç”±äºå¼•è¿›äº†ä¸­é—´ä½ç½®çš„â€œç¬¬ä¸‰æ–¹â€ï¼Œä¹Ÿå°±æ˜¯IOCå®¹å™¨ï¼Œä½¿å¾—Aã€Bã€Cã€Dè¿™4ä¸ªå¯¹è±¡æ²¡æœ‰äº†è€¦åˆå…³ç³»ï¼Œé½¿è½®ä¹‹é—´çš„ä¼ åŠ¨å…¨éƒ¨ä¾é â€œç¬¬ä¸‰æ–¹â€äº†ï¼Œå…¨éƒ¨å¯¹è±¡çš„æ§åˆ¶æƒå…¨éƒ¨ä¸Šç¼´ç»™â€œç¬¬ä¸‰æ–¹â€IOCå®¹å™¨ï¼Œæ‰€ä»¥ï¼ŒIOCå®¹å™¨æˆäº†æ•´ä¸ªç³»ç»Ÿçš„å…³é”®æ ¸å¿ƒï¼Œå®ƒèµ·åˆ°äº†ä¸€ç§ç±»ä¼¼â€œç²˜åˆå‰‚â€çš„ä½œç”¨ï¼ŒæŠŠç³»ç»Ÿä¸­çš„æ‰€æœ‰å¯¹è±¡ç²˜åˆåœ¨ä¸€èµ·å‘æŒ¥ä½œç”¨ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªâ€œç²˜åˆå‰‚â€ï¼Œå¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´ä¼šå½¼æ­¤å¤±å»è”ç³»ï¼Œè¿™å°±æ˜¯æœ‰äººæŠŠIOCå®¹å™¨æ¯”å–»æˆâ€œç²˜åˆå‰‚â€çš„ç”±æ¥ã€‚<br>æˆ‘ä»¬å†æ¥åšä¸ªè¯•éªŒï¼šæŠŠä¸Šå›¾ä¸­é—´çš„IOCå®¹å™¨æ‹¿æ‰ï¼Œç„¶åå†æ¥çœ‹çœ‹è¿™å¥—ç³»ç»Ÿï¼ˆæ‹¿æ‰IoCå®¹å™¨åçš„ç³»ç»Ÿï¼‰ï¼š</p><p><a href="https://imgtu.com/i/jVTDPg"><img src="https://s1.ax1x.com/2022/06/27/jVTDPg.jpg" alt="jVTDPg.jpg"></a></p><p>æˆ‘ä»¬ç°åœ¨çœ‹åˆ°çš„ç”»é¢ï¼Œå°±æ˜¯æˆ‘ä»¬è¦å®ç°æ•´ä¸ªç³»ç»Ÿæ‰€éœ€è¦å®Œæˆçš„å…¨éƒ¨å†…å®¹ã€‚è¿™æ—¶å€™ï¼ŒAã€Bã€Cã€Dè¿™4ä¸ªå¯¹è±¡ä¹‹é—´å·²ç»æ²¡æœ‰äº†è€¦åˆå…³ç³»ï¼Œå½¼æ­¤æ¯«æ— è”ç³»ï¼Œè¿™æ ·çš„è¯ï¼Œå½“ä½ åœ¨å®ç°Açš„æ—¶å€™ï¼Œæ ¹æœ¬æ— é¡»å†å»è€ƒè™‘Bã€Cå’ŒDäº†ï¼Œå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»å·²ç»é™ä½åˆ°äº†æœ€ä½ç¨‹åº¦ã€‚æ‰€ä»¥ï¼Œå¦‚æœçœŸèƒ½å®ç°IOCå®¹å™¨ï¼Œå¯¹äºç³»ç»Ÿå¼€å‘è€Œè¨€ï¼Œè¿™å°†æ˜¯ä¸€ä»¶å¤šä¹ˆç¾å¥½çš„äº‹æƒ…ï¼Œå‚ä¸å¼€å‘çš„æ¯ä¸€æˆå‘˜åªè¦å®ç°è‡ªå·±çš„ç±»å°±å¯ä»¥äº†ï¼Œè·Ÿåˆ«äººæ²¡æœ‰ä»»ä½•å…³ç³»ï¼<br>æˆ‘ä»¬å†æ¥çœ‹çœ‹ï¼Œæ§åˆ¶åè½¬(IOC)åˆ°åº•ä¸ºä»€ä¹ˆè¦èµ·è¿™ä¹ˆä¸ªåå­—ï¼Ÿæˆ‘ä»¬æ¥å¯¹æ¯”ä¸€ä¸‹ï¼š<br>è½¯ä»¶ç³»ç»Ÿåœ¨æ²¡æœ‰å¼•å…¥IOCå®¹å™¨ä¹‹å‰ï¼Œå¦‚å›¾1æ‰€ç¤ºï¼Œå¯¹è±¡Aä¾èµ–äºå¯¹è±¡Bï¼Œé‚£ä¹ˆå¯¹è±¡Aåœ¨åˆå§‹åŒ–æˆ–è€…è¿è¡Œåˆ°æŸä¸€ç‚¹çš„æ—¶å€™ï¼Œè‡ªå·±å¿…é¡»ä¸»åŠ¨å»åˆ›å»ºå¯¹è±¡Bæˆ–è€…ä½¿ç”¨å·²ç»åˆ›å»ºçš„å¯¹è±¡Bã€‚æ— è®ºæ˜¯åˆ›å»ºè¿˜æ˜¯ä½¿ç”¨å¯¹è±¡Bï¼Œæ§åˆ¶æƒéƒ½åœ¨è‡ªå·±æ‰‹ä¸Šã€‚<br>è½¯ä»¶ç³»ç»Ÿåœ¨å¼•å…¥IOCå®¹å™¨ä¹‹åï¼Œè¿™ç§æƒ…å½¢å°±å®Œå…¨æ”¹å˜äº†ï¼Œå¦‚å›¾3æ‰€ç¤ºï¼Œç”±äºIOCå®¹å™¨çš„åŠ å…¥ï¼Œå¯¹è±¡Aä¸å¯¹è±¡Bä¹‹é—´å¤±å»äº†ç›´æ¥è”ç³»ï¼Œæ‰€ä»¥ï¼Œå½“å¯¹è±¡Aè¿è¡Œåˆ°éœ€è¦å¯¹è±¡Bçš„æ—¶å€™ï¼ŒIOCå®¹å™¨ä¼šä¸»åŠ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡Bæ³¨å…¥åˆ°å¯¹è±¡Aéœ€è¦çš„åœ°æ–¹ã€‚<br>é€šè¿‡å‰åçš„å¯¹æ¯”ï¼Œæˆ‘ä»¬ä¸éš¾çœ‹å‡ºæ¥ï¼šå¯¹è±¡Aè·å¾—ä¾èµ–å¯¹è±¡Bçš„è¿‡ç¨‹,ç”±ä¸»åŠ¨è¡Œä¸ºå˜ä¸ºäº†è¢«åŠ¨è¡Œä¸ºï¼Œæ§åˆ¶æƒé¢ å€’è¿‡æ¥äº†ï¼Œè¿™å°±æ˜¯â€œæ§åˆ¶åè½¬â€è¿™ä¸ªåç§°çš„ç”±æ¥ã€‚</p><h4 id="3ã€IOCçš„åˆ«åï¼šä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰"><a href="#3ã€IOCçš„åˆ«åï¼šä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰" class="headerlink" title="3ã€IOCçš„åˆ«åï¼šä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰"></a>3ã€IOCçš„åˆ«åï¼šä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰</h4><p>2004å¹´ï¼ŒMartin Fowleræ¢è®¨äº†åŒä¸€ä¸ªé—®é¢˜ï¼Œæ—¢ç„¶IOCæ˜¯æ§åˆ¶åè½¬ï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯â€œå“ªäº›æ–¹é¢çš„æ§åˆ¶è¢«åè½¬äº†å‘¢ï¼Ÿâ€ï¼Œç»è¿‡è¯¦ç»†åœ°åˆ†æå’Œè®ºè¯åï¼Œä»–å¾—å‡ºäº†ç­”æ¡ˆï¼šâ€œè·å¾—ä¾èµ–å¯¹è±¡çš„è¿‡ç¨‹è¢«åè½¬äº†â€ã€‚æ§åˆ¶è¢«åè½¬ä¹‹åï¼Œè·å¾—ä¾èµ–å¯¹è±¡çš„è¿‡ç¨‹ç”±è‡ªèº«ç®¡ç†å˜ä¸ºäº†ç”±IOCå®¹å™¨ä¸»åŠ¨æ³¨å…¥ã€‚äºæ˜¯ï¼Œä»–ç»™â€œæ§åˆ¶åè½¬â€å–äº†ä¸€ä¸ªæ›´åˆé€‚çš„åå­—å«åšâ€œä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰â€ã€‚ä»–çš„è¿™ä¸ªç­”æ¡ˆï¼Œå®é™…ä¸Šç»™å‡ºäº†å®ç°IOCçš„æ–¹æ³•ï¼šæ³¨å…¥ã€‚æ‰€è°“ä¾èµ–æ³¨å…¥ï¼Œå°±æ˜¯ç”±IOCå®¹å™¨åœ¨è¿è¡ŒæœŸé—´ï¼ŒåŠ¨æ€åœ°å°†æŸç§ä¾èµ–å…³ç³»æ³¨å…¥åˆ°å¯¹è±¡ä¹‹ä¸­ã€‚</p><p>æ‰€ä»¥ï¼Œä¾èµ–æ³¨å…¥(DI)å’Œæ§åˆ¶åè½¬(IOC)æ˜¯ä»ä¸åŒçš„è§’åº¦çš„æè¿°çš„åŒä¸€ä»¶äº‹æƒ…ï¼Œå°±æ˜¯æŒ‡é€šè¿‡å¼•å…¥IOCå®¹å™¨ï¼Œåˆ©ç”¨ä¾èµ–å…³ç³»æ³¨å…¥çš„æ–¹å¼ï¼Œå®ç°å¯¹è±¡ä¹‹é—´çš„è§£è€¦ã€‚<br>æˆ‘ä»¬ä¸¾ä¸€ä¸ªç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼Œæ¥å¸®åŠ©ç†è§£ä¾èµ–æ³¨å…¥çš„è¿‡ç¨‹ã€‚å¤§å®¶å¯¹USBæ¥å£å’ŒUSBè®¾å¤‡åº”è¯¥éƒ½å¾ˆç†Ÿæ‚‰å§ï¼ŒUSBä¸ºæˆ‘ä»¬ä½¿ç”¨ç”µè„‘æä¾›äº†å¾ˆå¤§çš„æ–¹ä¾¿ï¼Œç°åœ¨æœ‰å¾ˆå¤šçš„å¤–éƒ¨è®¾å¤‡éƒ½æ”¯æŒUSBæ¥å£ã€‚</p><p><a href="https://imgtu.com/i/jVTrGQ"><img src="https://s1.ax1x.com/2022/06/27/jVTrGQ.jpg" alt="jVTrGQ.jpg"></a></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬åˆ©ç”¨ç”µè„‘ä¸»æœºå’ŒUSBæ¥å£æ¥å®ç°ä¸€ä¸ªä»»åŠ¡ï¼šä»å¤–éƒ¨USBè®¾å¤‡è¯»å–ä¸€ä¸ªæ–‡ä»¶ã€‚<br>ç”µè„‘ä¸»æœºè¯»å–æ–‡ä»¶çš„æ—¶å€™ï¼Œå®ƒä¸€ç‚¹ä¹Ÿä¸ä¼šå…³å¿ƒUSBæ¥å£ä¸Šè¿æ¥çš„æ˜¯ä»€ä¹ˆå¤–éƒ¨è®¾å¤‡ï¼Œè€Œä¸”å®ƒç¡®å®ä¹Ÿæ— é¡»çŸ¥é“ã€‚å®ƒçš„ä»»åŠ¡å°±æ˜¯è¯»å–USBæ¥å£ï¼ŒæŒ‚æ¥çš„å¤–éƒ¨è®¾å¤‡åªè¦ç¬¦åˆUSBæ¥å£æ ‡å‡†å³å¯ã€‚æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ç»™ç”µè„‘ä¸»æœºè¿æ¥ä¸Šä¸€ä¸ªUç›˜ï¼Œé‚£ä¹ˆä¸»æœºå°±ä»Uç›˜ä¸Šè¯»å–æ–‡ä»¶ï¼›å¦‚æœæˆ‘ç»™ç”µè„‘ä¸»æœºè¿æ¥ä¸Šä¸€ä¸ªå¤–ç½®ç¡¬ç›˜ï¼Œé‚£ä¹ˆç”µè„‘ä¸»æœºå°±ä»å¤–ç½®ç¡¬ç›˜ä¸Šè¯»å–æ–‡ä»¶ã€‚æŒ‚æ¥å¤–éƒ¨è®¾å¤‡çš„æƒåŠ›ç”±æˆ‘ä½œä¸»ï¼Œå³æ§åˆ¶æƒå½’æˆ‘ï¼Œè‡³äºUSBæ¥å£æŒ‚æ¥çš„æ˜¯ä»€ä¹ˆè®¾å¤‡ï¼Œç”µè„‘ä¸»æœºæ˜¯å†³å®šä¸äº†ï¼Œå®ƒåªèƒ½è¢«åŠ¨çš„æ¥å—ã€‚ç”µè„‘ä¸»æœºéœ€è¦å¤–éƒ¨è®¾å¤‡çš„æ—¶å€™ï¼Œæ ¹æœ¬ä¸ç”¨å®ƒå‘Šè¯‰æˆ‘ï¼Œæˆ‘å°±ä¼šä¸»åŠ¨å¸®å®ƒæŒ‚ä¸Šå®ƒæƒ³è¦çš„å¤–éƒ¨è®¾å¤‡ï¼Œä½ çœ‹æˆ‘çš„æœåŠ¡æ˜¯å¤šä¹ˆçš„åˆ°ä½ã€‚è¿™å°±æ˜¯æˆ‘ä»¬ç”Ÿæ´»ä¸­å¸¸è§çš„ä¸€ä¸ªä¾èµ–æ³¨å…¥çš„ä¾‹å­ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘å°±èµ·åˆ°äº†IOCå®¹å™¨çš„ä½œç”¨ã€‚<br>é€šè¿‡è¿™ä¸ªä¾‹å­,ä¾èµ–æ³¨å…¥çš„æ€è·¯å·²ç»éå¸¸æ¸…æ¥šï¼šå½“ç”µè„‘ä¸»æœºè¯»å–æ–‡ä»¶çš„æ—¶å€™ï¼Œæˆ‘å°±æŠŠå®ƒæ‰€è¦ä¾èµ–çš„å¤–éƒ¨è®¾å¤‡ï¼Œå¸®ä»–æŒ‚æ¥ä¸Šã€‚æ•´ä¸ªå¤–éƒ¨è®¾å¤‡æ³¨å…¥çš„è¿‡ç¨‹å’Œä¸€ä¸ªè¢«ä¾èµ–çš„å¯¹è±¡åœ¨ç³»ç»Ÿè¿è¡Œæ—¶è¢«æ³¨å…¥å¦å¤–ä¸€ä¸ªå¯¹è±¡å†…éƒ¨çš„è¿‡ç¨‹å®Œå…¨ä¸€æ ·ã€‚<br>æˆ‘ä»¬æŠŠä¾èµ–æ³¨å…¥åº”ç”¨åˆ°è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œå†æ¥æè¿°ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼š<br>å¯¹è±¡Aä¾èµ–äºå¯¹è±¡B,å½“å¯¹è±¡ Aéœ€è¦ç”¨åˆ°å¯¹è±¡Bçš„æ—¶å€™ï¼ŒIOCå®¹å™¨å°±ä¼šç«‹å³åˆ›å»ºä¸€ä¸ªå¯¹è±¡Bé€ç»™å¯¹è±¡Aã€‚IOCå®¹å™¨å°±æ˜¯ä¸€ä¸ªå¯¹è±¡åˆ¶é€ å·¥å‚ï¼Œä½ éœ€è¦ä»€ä¹ˆï¼Œå®ƒä¼šç»™ä½ é€å»ï¼Œä½ ç›´æ¥ä½¿ç”¨å°±è¡Œäº†ï¼Œè€Œå†ä¹Ÿä¸ç”¨å»å…³å¿ƒä½ æ‰€ç”¨çš„ä¸œè¥¿æ˜¯å¦‚ä½•åˆ¶æˆçš„ï¼Œä¹Ÿä¸ç”¨å…³å¿ƒæœ€åæ˜¯æ€ä¹ˆè¢«é”€æ¯çš„ï¼Œè¿™ä¸€åˆ‡å…¨éƒ¨ç”±IOCå®¹å™¨åŒ…åŠã€‚<br>åœ¨ä¼ ç»Ÿçš„å®ç°ä¸­ï¼Œç”±ç¨‹åºå†…éƒ¨ä»£ç æ¥æ§åˆ¶ç»„ä»¶ä¹‹é—´çš„å…³ç³»ã€‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨newå…³é”®å­—æ¥å®ç°ä¸¤ä¸ªç»„ä»¶ä¹‹é—´å…³ç³»çš„ç»„åˆï¼Œè¿™ç§å®ç°æ–¹å¼ä¼šé€ æˆç»„ä»¶ä¹‹é—´è€¦åˆã€‚IOCå¾ˆå¥½åœ°è§£å†³äº†è¯¥é—®é¢˜ï¼Œå®ƒå°†å®ç°ç»„ä»¶é—´å…³ç³»ä»ç¨‹åºå†…éƒ¨æåˆ°å¤–éƒ¨å®¹å™¨ï¼Œä¹Ÿå°±æ˜¯è¯´ç”±å®¹å™¨åœ¨è¿è¡ŒæœŸå°†ç»„ä»¶é—´çš„æŸç§ä¾èµ–å…³ç³»åŠ¨æ€æ³¨å…¥ç»„ä»¶ä¸­ã€‚</p><h4 id="4ã€IOCä¸ºæˆ‘ä»¬å¸¦æ¥äº†ä»€ä¹ˆå¥½å¤„"><a href="#4ã€IOCä¸ºæˆ‘ä»¬å¸¦æ¥äº†ä»€ä¹ˆå¥½å¤„" class="headerlink" title="4ã€IOCä¸ºæˆ‘ä»¬å¸¦æ¥äº†ä»€ä¹ˆå¥½å¤„"></a>4ã€IOCä¸ºæˆ‘ä»¬å¸¦æ¥äº†ä»€ä¹ˆå¥½å¤„</h4><p>æˆ‘ä»¬è¿˜æ˜¯ä»USBçš„ä¾‹å­è¯´èµ·ï¼Œä½¿ç”¨USBå¤–éƒ¨è®¾å¤‡æ¯”ä½¿ç”¨å†…ç½®ç¡¬ç›˜ï¼Œåˆ°åº•å¸¦æ¥ä»€ä¹ˆå¥½å¤„ï¼Ÿ<br>ç¬¬ä¸€ã€USBè®¾å¤‡ä½œä¸ºç”µè„‘ä¸»æœºçš„å¤–éƒ¨è®¾å¤‡ï¼Œåœ¨æ’å…¥ä¸»æœºä¹‹å‰ï¼Œä¸ç”µè„‘ä¸»æœºæ²¡æœ‰ä»»ä½•çš„å…³ç³»ï¼Œåªæœ‰è¢«æˆ‘ä»¬è¿æ¥åœ¨ä¸€èµ·ä¹‹åï¼Œä¸¤è€…æ‰å‘ç”Ÿè”ç³»ï¼Œå…·æœ‰ç›¸å…³æ€§ã€‚æ‰€ä»¥ï¼Œæ— è®ºä¸¤è€…ä¸­çš„ä»»ä½•ä¸€æ–¹å‡ºç°ä»€ä¹ˆçš„é—®é¢˜ï¼Œéƒ½ä¸ä¼šå½±å“å¦ä¸€æ–¹çš„è¿è¡Œã€‚è¿™ç§ç‰¹æ€§ä½“ç°åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œå°±æ˜¯å¯ç»´æŠ¤æ€§æ¯”è¾ƒå¥½ï¼Œéå¸¸ä¾¿äºè¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œä¾¿äºè°ƒè¯•ç¨‹åºå’Œè¯Šæ–­æ•…éšœã€‚ä»£ç ä¸­çš„æ¯ä¸€ä¸ªClasséƒ½å¯ä»¥å•ç‹¬æµ‹è¯•ï¼Œå½¼æ­¤ä¹‹é—´äº’ä¸å½±å“ï¼Œåªè¦ä¿è¯è‡ªèº«çš„åŠŸèƒ½æ— è¯¯å³å¯ï¼Œè¿™å°±æ˜¯ç»„ä»¶ä¹‹é—´ä½è€¦åˆæˆ–è€…æ— è€¦åˆå¸¦æ¥çš„å¥½å¤„ã€‚<br>ç¬¬äºŒã€USBè®¾å¤‡å’Œç”µè„‘ä¸»æœºçš„ä¹‹é—´æ— å…³æ€§ï¼Œè¿˜å¸¦æ¥äº†å¦å¤–ä¸€ä¸ªå¥½å¤„ï¼Œç”Ÿäº§USBè®¾å¤‡çš„å‚å•†å’Œç”Ÿäº§ç”µè„‘ä¸»æœºçš„å‚å•†å®Œå…¨å¯ä»¥æ˜¯äº’ä¸ç›¸å¹²çš„äººï¼Œå„å¹²å„äº‹ï¼Œä»–ä»¬ä¹‹é—´å”¯ä¸€éœ€è¦éµå®ˆçš„å°±æ˜¯USBæ¥å£æ ‡å‡†ã€‚è¿™ç§ç‰¹æ€§ä½“ç°åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¥½å¤„å¯æ˜¯å¤ªå¤§äº†ã€‚æ¯ä¸ªå¼€å‘å›¢é˜Ÿçš„æˆå‘˜éƒ½åªéœ€è¦å…³å¿ƒå®ç°è‡ªèº«çš„ä¸šåŠ¡é€»è¾‘ï¼Œå®Œå…¨ä¸ç”¨å»å…³å¿ƒå…¶å®ƒçš„äººå·¥ä½œè¿›å±•ï¼Œå› ä¸ºä½ çš„ä»»åŠ¡è·Ÿåˆ«äººæ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œä½ çš„ä»»åŠ¡å¯ä»¥å•ç‹¬æµ‹è¯•ï¼Œä½ çš„ä»»åŠ¡ä¹Ÿä¸ç”¨ä¾èµ–äºåˆ«äººçš„ç»„ä»¶ï¼Œå†ä¹Ÿä¸ç”¨æ‰¯ä¸æ¸…è´£ä»»äº†ã€‚æ‰€ä»¥ï¼Œåœ¨ä¸€ä¸ªå¤§ä¸­å‹é¡¹ç›®ä¸­ï¼Œå›¢é˜Ÿæˆå‘˜åˆ†å·¥æ˜ç¡®ã€è´£ä»»æ˜æ™°ï¼Œå¾ˆå®¹æ˜“å°†ä¸€ä¸ªå¤§çš„ä»»åŠ¡åˆ’åˆ†ä¸ºç»†å°çš„ä»»åŠ¡ï¼Œå¼€å‘æ•ˆç‡å’Œäº§å“è´¨é‡å¿…å°†å¾—åˆ°å¤§å¹…åº¦çš„æé«˜ã€‚<br>ç¬¬ä¸‰ã€åŒä¸€ä¸ªUSBå¤–éƒ¨è®¾å¤‡å¯ä»¥æ’æ¥åˆ°ä»»ä½•æ”¯æŒUSBçš„è®¾å¤‡ï¼Œå¯ä»¥æ’æ¥åˆ°ç”µè„‘ä¸»æœºï¼Œä¹Ÿå¯ä»¥æ’æ¥åˆ°DVæœºï¼ŒUSBå¤–éƒ¨è®¾å¤‡å¯ä»¥è¢«åå¤åˆ©ç”¨ã€‚åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œè¿™ç§ç‰¹æ€§å°±æ˜¯å¯å¤ç”¨æ€§å¥½ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå…·æœ‰æ™®éæ€§çš„å¸¸ç”¨ç»„ä»¶ç‹¬ç«‹å‡ºæ¥ï¼Œåå¤åˆ©ç”¨åˆ°é¡¹ç›®ä¸­çš„å…¶å®ƒéƒ¨åˆ†ï¼Œæˆ–è€…æ˜¯å…¶å®ƒé¡¹ç›®ï¼Œå½“ç„¶è¿™ä¹Ÿæ˜¯é¢å‘å¯¹è±¡çš„åŸºæœ¬ç‰¹å¾ã€‚æ˜¾ç„¶ï¼ŒIOCä¸ä»…æ›´å¥½åœ°è´¯å½»äº†è¿™ä¸ªåŸåˆ™ï¼Œæé«˜äº†æ¨¡å—çš„å¯å¤ç”¨æ€§ã€‚ç¬¦åˆæ¥å£æ ‡å‡†çš„å®ç°ï¼Œéƒ½å¯ä»¥æ’æ¥åˆ°æ”¯æŒæ­¤æ ‡å‡†çš„æ¨¡å—ä¸­ã€‚<br>ç¬¬å››ã€åŒUSBå¤–éƒ¨è®¾å¤‡ä¸€æ ·ï¼Œæ¨¡å—å…·æœ‰çƒ­æ’æ‹”ç‰¹æ€§ã€‚IOCç”Ÿæˆå¯¹è±¡çš„æ–¹å¼è½¬ä¸ºå¤–ç½®æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯æŠŠå¯¹è±¡ç”Ÿæˆæ”¾åœ¨é…ç½®æ–‡ä»¶é‡Œè¿›è¡Œå®šä¹‰ï¼Œè¿™æ ·ï¼Œå½“æˆ‘ä»¬æ›´æ¢ä¸€ä¸ªå®ç°å­ç±»å°†ä¼šå˜å¾—å¾ˆç®€å•ï¼Œåªè¦ä¿®æ”¹é…ç½®æ–‡ä»¶å°±å¯ä»¥äº†ï¼Œå®Œå…¨å…·æœ‰çƒ­æ’æ‹¨çš„ç‰¹æ€§ã€‚<br>ä»¥ä¸Šå‡ ç‚¹å¥½å¤„ï¼Œéš¾é“è¿˜ä¸è¶³ä»¥æ‰“åŠ¨æˆ‘ä»¬ï¼Œè®©æˆ‘ä»¬åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨IOCæ¡†æ¶å—ï¼Ÿ</p><h4 id="5ã€IOCå®¹å™¨çš„æŠ€æœ¯å‰–æ"><a href="#5ã€IOCå®¹å™¨çš„æŠ€æœ¯å‰–æ" class="headerlink" title="5ã€IOCå®¹å™¨çš„æŠ€æœ¯å‰–æ"></a>5ã€IOCå®¹å™¨çš„æŠ€æœ¯å‰–æ</h4><p>IOCä¸­æœ€åŸºæœ¬çš„æŠ€æœ¯å°±æ˜¯â€œåå°„(Reflection)â€ç¼–ç¨‹ï¼Œç›®å‰.Net C#ã€Javaå’ŒPHP5ç­‰è¯­è¨€å‡æ”¯æŒï¼Œå…¶ä¸­PHP5çš„æŠ€æœ¯ä¹¦ç±ä¸­ï¼Œæœ‰æ—¶å€™ä¹Ÿè¢«ç¿»è¯‘æˆâ€œæ˜ å°„â€ã€‚æœ‰å…³åå°„çš„æ¦‚å¿µå’Œç”¨æ³•ï¼Œå¤§å®¶åº”è¯¥éƒ½å¾ˆæ¸…æ¥šï¼Œé€šä¿—æ¥è®²å°±æ˜¯æ ¹æ®ç»™å‡ºçš„ç±»åï¼ˆå­—ç¬¦ä¸²æ–¹å¼ï¼‰æ¥åŠ¨æ€åœ°ç”Ÿæˆå¯¹è±¡ã€‚è¿™ç§ç¼–ç¨‹æ–¹å¼å¯ä»¥è®©å¯¹è±¡åœ¨ç”Ÿæˆæ—¶æ‰å†³å®šåˆ°åº•æ˜¯å“ªä¸€ç§å¯¹è±¡ã€‚åå°„çš„åº”ç”¨æ˜¯å¾ˆå¹¿æ³›çš„ï¼Œå¾ˆå¤šçš„æˆç†Ÿçš„æ¡†æ¶ï¼Œæ¯”å¦‚è±¡Javaä¸­çš„Hibernateã€Springæ¡†æ¶ï¼Œ.Netä¸­ NHibernateã€Spring.Netæ¡†æ¶éƒ½æ˜¯æŠŠâ€œåå°„â€åšä¸ºæœ€åŸºæœ¬çš„æŠ€æœ¯æ‰‹æ®µã€‚<br>åå°„æŠ€æœ¯å…¶å®å¾ˆæ—©å°±å‡ºç°äº†ï¼Œä½†ä¸€ç›´è¢«å¿½ç•¥ï¼Œæ²¡æœ‰è¢«è¿›ä¸€æ­¥çš„åˆ©ç”¨ã€‚å½“æ—¶çš„åå°„ç¼–ç¨‹æ–¹å¼ç›¸å¯¹äºæ­£å¸¸çš„å¯¹è±¡ç”Ÿæˆæ–¹å¼è¦æ…¢è‡³å°‘å¾—10å€ã€‚ç°åœ¨çš„åå°„æŠ€æœ¯ç»è¿‡æ”¹è‰¯ä¼˜åŒ–ï¼Œå·²ç»éå¸¸æˆç†Ÿï¼Œåå°„æ–¹å¼ç”Ÿæˆå¯¹è±¡å’Œé€šå¸¸å¯¹è±¡ç”Ÿæˆæ–¹å¼ï¼Œé€Ÿåº¦å·²ç»ç›¸å·®ä¸å¤§äº†ï¼Œå¤§çº¦ä¸º1-2å€çš„å·®è·ã€‚<br>æˆ‘ä»¬å¯ä»¥æŠŠIOCå®¹å™¨çš„å·¥ä½œæ¨¡å¼çœ‹åšæ˜¯å·¥å‚æ¨¡å¼çš„å‡åï¼Œå¯ä»¥æŠŠIOCå®¹å™¨çœ‹ä½œæ˜¯ä¸€ä¸ªå·¥å‚ï¼Œè¿™ä¸ªå·¥å‚é‡Œè¦ç”Ÿäº§çš„å¯¹è±¡éƒ½åœ¨é…ç½®æ–‡ä»¶ä¸­ç»™å‡ºå®šä¹‰ï¼Œç„¶ååˆ©ç”¨ç¼–ç¨‹è¯­è¨€çš„çš„åå°„ç¼–ç¨‹ï¼Œæ ¹æ®é…ç½®æ–‡ä»¶ä¸­ç»™å‡ºçš„ç±»åç”Ÿæˆç›¸åº”çš„å¯¹è±¡ã€‚ä»å®ç°æ¥çœ‹ï¼ŒIOCæ˜¯æŠŠä»¥å‰åœ¨å·¥å‚æ–¹æ³•é‡Œå†™æ­»çš„å¯¹è±¡ç”Ÿæˆä»£ç ï¼Œæ”¹å˜ä¸ºç”±é…ç½®æ–‡ä»¶æ¥å®šä¹‰ï¼Œä¹Ÿå°±æ˜¯æŠŠå·¥å‚å’Œå¯¹è±¡ç”Ÿæˆè¿™ä¸¤è€…ç‹¬ç«‹åˆ†éš”å¼€æ¥ï¼Œç›®çš„å°±æ˜¯æé«˜çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><h4 id="6ã€IOCå®¹å™¨çš„ä¸€äº›äº§å“"><a href="#6ã€IOCå®¹å™¨çš„ä¸€äº›äº§å“" class="headerlink" title="6ã€IOCå®¹å™¨çš„ä¸€äº›äº§å“"></a>6ã€IOCå®¹å™¨çš„ä¸€äº›äº§å“</h4><p>Sun ONEæŠ€æœ¯ä½“ç³»ä¸‹çš„IOCå®¹å™¨æœ‰ï¼šè½»é‡çº§çš„æœ‰Springã€Guiceã€Pico Containerã€Avalonã€HiveMindï¼›é‡é‡çº§çš„æœ‰EJBï¼›ä¸è½»ä¸é‡çš„æœ‰JBossï¼ŒJdonç­‰ç­‰ã€‚Springæ¡†æ¶ä½œä¸ºJavaå¼€å‘ä¸­SSH(Strutsã€Springã€Hibernate)ä¸‰å‰‘å®¢ä¹‹ä¸€ï¼Œå¤§ä¸­å°é¡¹ç›®ä¸­éƒ½æœ‰ä½¿ç”¨ï¼Œéå¸¸æˆç†Ÿï¼Œåº”ç”¨å¹¿æ³›ï¼ŒEJBåœ¨å…³é”®æ€§çš„å·¥ä¸šçº§é¡¹ç›®ä¸­ä¹Ÿè¢«ä½¿ç”¨ï¼Œæ¯”å¦‚æŸäº›ç”µä¿¡ä¸šåŠ¡ã€‚<br>.NetæŠ€æœ¯ä½“ç³»ä¸‹çš„IOCå®¹å™¨æœ‰ï¼šSpring.Netã€Castleç­‰ç­‰ã€‚Spring.Netæ˜¯ä»Javaçš„Springç§»æ¤è¿‡æ¥çš„IOCå®¹å™¨ï¼ŒCastleçš„IOCå®¹å™¨å°±æ˜¯Windsoréƒ¨åˆ†ã€‚å®ƒä»¬å‡æ˜¯è½»é‡çº§çš„æ¡†æ¶ï¼Œæ¯”è¾ƒæˆç†Ÿï¼Œå…¶ä¸­Spring.Netå·²ç»è¢«é€æ¸åº”ç”¨äºå„ç§é¡¹ç›®ä¸­ã€‚</p><h4 id="7ã€ä½¿ç”¨IOCæ¡†æ¶åº”è¯¥æ³¨æ„ä»€ä¹ˆ"><a href="#7ã€ä½¿ç”¨IOCæ¡†æ¶åº”è¯¥æ³¨æ„ä»€ä¹ˆ" class="headerlink" title="7ã€ä½¿ç”¨IOCæ¡†æ¶åº”è¯¥æ³¨æ„ä»€ä¹ˆ"></a>7ã€ä½¿ç”¨IOCæ¡†æ¶åº”è¯¥æ³¨æ„ä»€ä¹ˆ</h4><p>ä½¿ç”¨IOCæ¡†æ¶äº§å“èƒ½å¤Ÿç»™æˆ‘ä»¬çš„å¼€å‘è¿‡ç¨‹å¸¦æ¥å¾ˆå¤§çš„å¥½å¤„ï¼Œä½†æ˜¯ä¹Ÿè¦å……åˆ†è®¤è¯†å¼•å…¥IOCæ¡†æ¶çš„ç¼ºç‚¹ï¼Œåšåˆ°å¿ƒä¸­æœ‰æ•°ï¼Œæœç»æ»¥ç”¨æ¡†æ¶ã€‚</p><p>ï¼ˆ1ï¼‰è½¯ä»¶ç³»ç»Ÿä¸­ç”±äºå¼•å…¥äº†ç¬¬ä¸‰æ–¹IOCå®¹å™¨ï¼Œç”Ÿæˆå¯¹è±¡çš„æ­¥éª¤å˜å¾—æœ‰äº›å¤æ‚ï¼Œæœ¬æ¥æ˜¯ä¸¤è€…ä¹‹é—´çš„äº‹æƒ…ï¼Œåˆå‡­ç©ºå¤šå‡ºä¸€é“æ‰‹ç»­ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨åˆšå¼€å§‹ä½¿ç”¨IOCæ¡†æ¶çš„æ—¶å€™ï¼Œä¼šæ„Ÿè§‰ç³»ç»Ÿå˜å¾—ä¸å¤ªç›´è§‚ã€‚æ‰€ä»¥ï¼Œå¼•å…¥äº†ä¸€ä¸ªå…¨æ–°çš„æ¡†æ¶ï¼Œå°±ä¼šå¢åŠ å›¢é˜Ÿæˆå‘˜å­¦ä¹ å’Œè®¤è¯†çš„åŸ¹è®­æˆæœ¬ï¼Œå¹¶ä¸”åœ¨ä»¥åçš„è¿è¡Œç»´æŠ¤ä¸­ï¼Œè¿˜å¾—è®©æ–°åŠ å…¥è€…å…·å¤‡åŒæ ·çš„çŸ¥è¯†ä½“ç³»ã€‚</p><p>ï¼ˆ2ï¼‰ç”±äºIOCå®¹å™¨ç”Ÿæˆå¯¹è±¡æ˜¯é€šè¿‡åå°„æ–¹å¼ï¼Œåœ¨è¿è¡Œæ•ˆç‡ä¸Šæœ‰ä¸€å®šçš„æŸè€—ã€‚å¦‚æœä½ è¦è¿½æ±‚è¿è¡Œæ•ˆç‡çš„è¯ï¼Œå°±å¿…é¡»å¯¹æ­¤è¿›è¡Œæƒè¡¡ã€‚</p><p>ï¼ˆ3ï¼‰ã€å…·ä½“åˆ°IOCæ¡†æ¶äº§å“(æ¯”å¦‚ï¼šSpring)æ¥è®²ï¼Œéœ€è¦è¿›è¡Œå¤§é‡çš„é…åˆ¶å·¥ä½œï¼Œæ¯”è¾ƒç¹çï¼Œå¯¹äºä¸€äº›å°çš„é¡¹ç›®è€Œè¨€ï¼Œå®¢è§‚ä¸Šä¹Ÿå¯èƒ½åŠ å¤§ä¸€äº›å·¥ä½œæˆæœ¬ã€‚</p><p>ï¼ˆ4ï¼‰IOCæ¡†æ¶äº§å“æœ¬èº«çš„æˆç†Ÿåº¦éœ€è¦è¿›è¡Œè¯„ä¼°ï¼Œå¦‚æœå¼•å…¥ä¸€ä¸ªä¸æˆç†Ÿçš„IOCæ¡†æ¶äº§å“ï¼Œé‚£ä¹ˆä¼šå½±å“åˆ°æ•´ä¸ªé¡¹ç›®ï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯ä¸€ä¸ªéšæ€§çš„é£é™©ã€‚<br>æˆ‘ä»¬å¤§ä½“å¯ä»¥å¾—å‡ºè¿™æ ·çš„ç»“è®ºï¼šä¸€äº›å·¥ä½œé‡ä¸å¤§çš„é¡¹ç›®æˆ–è€…äº§å“ï¼Œä¸å¤ªé€‚åˆä½¿ç”¨IOCæ¡†æ¶äº§å“ã€‚å¦å¤–ï¼Œå¦‚æœå›¢é˜Ÿæˆå‘˜çš„çŸ¥è¯†èƒ½åŠ›æ¬ ç¼ºï¼Œå¯¹äºIOCæ¡†æ¶äº§å“ç¼ºä¹æ·±å…¥çš„ç†è§£ï¼Œä¹Ÿä¸è¦è´¸ç„¶å¼•å…¥ã€‚æœ€åï¼Œç‰¹åˆ«å¼ºè°ƒè¿è¡Œæ•ˆç‡çš„é¡¹ç›®æˆ–è€…äº§å“ï¼Œä¹Ÿä¸å¤ªé€‚åˆå¼•å…¥IOCæ¡†æ¶äº§å“ï¼Œè±¡WEB2.0ç½‘ç«™å°±æ˜¯è¿™ç§æƒ…å†µã€‚</p><h3 id="117ã€ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬-IOC-ï¼Ÿä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ"><a href="#117ã€ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬-IOC-ï¼Ÿä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ" class="headerlink" title="117ã€ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬(IOC)ï¼Ÿä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ"></a>117ã€ä»€ä¹ˆæ˜¯æ§åˆ¶åè½¬(IOC)ï¼Ÿä»€ä¹ˆæ˜¯ä¾èµ–æ³¨å…¥ï¼Ÿ</h3><p>å€ŸåŠ©Springå®ç°å…·æœ‰ä¾èµ–å…³ç³»çš„å¯¹è±¡ä¹‹é—´çš„è§£è€¦ã€‚</p><p>å¯¹è±¡Aè¿è¡Œéœ€è¦å¯¹è±¡Bï¼Œç”±ä¸»åŠ¨åˆ›å»ºå˜ä¸ºIOCå®¹å™¨æ³¨å…¥ï¼Œè¿™ä¾¿æ˜¯æ§åˆ¶åè½¬ã€‚</p><p>è·å¾—ä¾èµ–å¯¹è±¡çš„è¿‡ç¨‹è¢«åè½¬äº†ï¼Œè·å–ä¾èµ–å¯¹è±¡çš„è¿‡ç¨‹ç”±è‡ªèº«åˆ›å»ºå˜ä¸ºç”±IOCå®¹å™¨æ³¨å…¥ï¼Œè¿™ä¾¿æ˜¯ä¾èµ–æ³¨å…¥ã€‚</p><h3 id="118ã€BeanFactory-å’Œ-ApplicationContext-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#118ã€BeanFactory-å’Œ-ApplicationContext-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="118ã€BeanFactory å’Œ ApplicationContext æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>118ã€BeanFactory å’Œ ApplicationContext æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>1ã€BeanFactoryæ˜¯Springçš„æœ€åº•å±‚æ¥å£ï¼ŒåŒ…å«beançš„å®šä¹‰ï¼Œç®¡ç†beançš„åŠ è½½ï¼Œå®ä¾‹åŒ–ï¼Œæ§åˆ¶beançš„ç”Ÿå‘½å‘¨æœŸï¼Œç‰¹ç‚¹æ˜¯æ¯æ¬¡è·å–å¯¹è±¡æ—¶æ‰ä¼šåˆ›å»ºå¯¹è±¡ã€‚</p><p>ApplicationContextæ˜¯BeanFactoryçš„å­æ¥å£ï¼Œæ‹¥æœ‰BeanFactoryçš„å…¨éƒ¨åŠŸèƒ½ï¼Œå¹¶ä¸”æ‰©å±•äº†å¾ˆå¤šé«˜çº§ç‰¹æ€§ï¼Œæ¯æ¬¡å®¹å™¨å¯åŠ¨æ—¶å°±ä¼šåˆ›å»ºæ‰€æœ‰çš„å¯¹è±¡ã€‚</p><ol><li>ApplicationContextçš„é¢å¤–åŠŸèƒ½ï¼š</li><li>ç»§æ‰¿MessageSourceï¼Œæ”¯æŒå›½é™…åŒ–ï¼›</li><li>ç»Ÿä¸€çš„èµ„æºæ–‡ä»¶è®¿é—®æ–¹å¼ï¼›</li><li>æä¾›åœ¨ç›‘å¬å™¨ä¸­æ³¨å†Œbeanï¼›</li><li>åŒæ—¶åŠ è½½è¿‡ä¸ªé…ç½®æ–‡ä»¶ï¼›</li><li>è½½å…¥å¤šä¸ªï¼ˆæœ‰ç»§æ‰¿å…³ç³»ï¼‰ä¸Šä¸‹æ–‡ï¼Œä½¿å¾—æ¯ä¸ªä¸Šä¸‹æ–‡éƒ½ä¸“æ³¨äºä¸€ä¸ªç‰¹å®šçš„å±‚æ¬¡ï¼Œæ¯”å¦‚åº”ç”¨çš„webå±‚ï¼›</li></ol><p>2ã€BeanFactoryé€šå¸¸ä»¥ç¼–ç¨‹çš„æ–¹å¼è¢«åˆ›å»ºï¼ŒApplicationContextå¯ä»¥ä»¥å£°æ˜çš„æ–¹å¼åˆ›å»ºï¼Œå¦‚ä½¿ç”¨ContextLoaderã€‚</p><p>3ã€BeanFactory å’Œ ApplicationContextéƒ½æ”¯æŒBeanPostProcessorï¼ŒBeanFactoryPostProcessorï¼Œä½†BeanFactoryéœ€è¦æ‰‹åŠ¨æ³¨å†Œï¼ŒApplicationContextåˆ™æ˜¯è‡ªåŠ¨æ³¨å†Œã€‚</p><h3 id="119ã€ä»€ä¹ˆæ˜¯-JavaConfigï¼Ÿ"><a href="#119ã€ä»€ä¹ˆæ˜¯-JavaConfigï¼Ÿ" class="headerlink" title="119ã€ä»€ä¹ˆæ˜¯ JavaConfigï¼Ÿ"></a>119ã€ä»€ä¹ˆæ˜¯ JavaConfigï¼Ÿ</h3><p>JavaConfigæ˜¯Spring3.0æ–°å¢çš„æ¦‚å¿µï¼Œå°±æ˜¯ä»¥æ³¨è§£çš„å½¢å¼å–ä»£Springä¸­ç¹ççš„xmlæ–‡ä»¶ã€‚</p><p>JavaConfigç»“åˆäº†xmlçš„è§£è€¦å’Œjavaç¼–è¯‘æ—¶æ£€æŸ¥çš„ä¼˜ç‚¹ã€‚</p><ol><li>@Configurationï¼Œè¡¨ç¤ºè¿™ä¸ªç±»æ˜¯é…ç½®ç±»ï¼›</li><li>@ComponentScanï¼Œç›¸å½“äºxmlçš„<context:componentScan basepackage=>ï¼›</li><li>@Beanï¼Œç›¸å½“äºxmlçš„<bean id="student" class="com.guor.entity">ï¼›</li><li>@EnableWebMvcï¼Œç›¸å½“äºxmlçš„<mvc:annotation-driven>ï¼›</li><li>@ImportResourceï¼Œç›¸å½“äºxmlçš„<import resource="application-context-cache.xml">ï¼›</li><li>@PropertySourceï¼Œç”¨äºè¯»å–propertiesé…ç½®æ–‡ä»¶ï¼›</li><li>@Profileï¼Œä¸€èˆ¬ç”¨äºå¤šç¯å¢ƒé…ç½®ï¼Œæ¿€æ´»æ—¶å¯ç”¨@ActiveProfile(â€œdevâ€)æ³¨è§£ï¼›</li></ol><h3 id="120ã€ä»€ä¹ˆæ˜¯-ORM-æ¡†æ¶ï¼Ÿ"><a href="#120ã€ä»€ä¹ˆæ˜¯-ORM-æ¡†æ¶ï¼Ÿ" class="headerlink" title="120ã€ä»€ä¹ˆæ˜¯ ORM æ¡†æ¶ï¼Ÿ"></a>120ã€ä»€ä¹ˆæ˜¯ ORM æ¡†æ¶ï¼Ÿ</h3><p>ORMï¼ˆObject-relational mappingï¼‰ï¼Œå¯¹è±¡å…³ç³»æ˜ å°„ã€‚</p><p>æ˜¯ä¸ºäº†è§£å†³é¢å‘å¯¹è±¡ä¸å…³ç³»å‹æ•°æ®åº“å­˜åœ¨çš„ä¸åŒ¹é…é—®é¢˜ã€‚</p><p>ORMæ¡†æ¶çš„ä¼˜ç‚¹ï¼š</p><ol><li>å¼€å‘æ•ˆç‡æ›´é«˜</li><li>æ•°æ®è®¿é—®æ›´æŠ½è±¡ã€è½»ä¾¿</li><li>æ”¯æŒé¢å‘å¯¹è±¡å°è£…</li></ol><h3 id="121ã€Spring-æœ‰å‡ ç§é…ç½®æ–¹å¼ï¼Ÿ"><a href="#121ã€Spring-æœ‰å‡ ç§é…ç½®æ–¹å¼ï¼Ÿ" class="headerlink" title="121ã€Spring æœ‰å‡ ç§é…ç½®æ–¹å¼ï¼Ÿ"></a>121ã€Spring æœ‰å‡ ç§é…ç½®æ–¹å¼ï¼Ÿ</h3><p>1ã€xmlé…ç½®æ–‡ä»¶</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jackma&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.tyq.dto.User&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jackma&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;55&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;jm&quot;</span> /&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">     </span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;jm&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.tyq.dto.Dog&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jack&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;breed&quot;</span> <span class="attr">value</span>=<span class="string">&quot;é‡‘æ¯›&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2ã€åŸºäºæ³¨è§£çš„æ–¹å¼</p><p>é¡¹ç›®è¶Šæ¥è¶Šå¤§ï¼ŒåŸºäºxmlé…ç½®å¤ªéº»çƒ¦ï¼ŒSpring 2.xæ—¶ä»£æä¾›äº†å£°æ˜beançš„æ³¨è§£ã€‚</p><p>ï¼ˆ1ï¼‰Beançš„å®šä¹‰</p><p>@Componentã€@Controllerã€@Serviceã€@Repositoryã€‚</p><p>ï¼ˆ2ï¼‰Beançš„æ³¨å…¥</p><p>@Autowire</p><p>3ã€åŸºäºJavaçš„æ–¹å¼</p><p>Spring 3.xä»¥åï¼Œå¯ä»¥é€šè¿‡Javaä»£ç è£…é…Beanã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">zs</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Dog <span class="title function_">dog</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span>  <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Bean</span>  <span class="comment">//ä¸¤ä¸ªç‹—</span></span><br><span class="line">    <span class="keyword">public</span> Dog <span class="title function_">haqi</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;zs&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//getï¼Œsetæ–¹æ³•ç•¥</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> åŸæ¥å°±æ˜¯é…ç½®ç±»å•Šï¼Œé€šè¿‡@Beanã€@Componentã€getBeanæ–¹å¼è¿›è¡ŒBeançš„æ³¨å†Œå’Œå‘ç°ã€‚</p><h3 id="122ã€è¯·è§£é‡Š-Spring-Bean-çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ"><a href="#122ã€è¯·è§£é‡Š-Spring-Bean-çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ" class="headerlink" title="122ã€è¯·è§£é‡Š Spring Bean çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ"></a>122ã€è¯·è§£é‡Š Spring Bean çš„ç”Ÿå‘½å‘¨æœŸï¼Ÿ</h3><ol><li>é€šè¿‡æ„é€ å™¨æˆ–å·¥å‚æ–¹æ³•åˆ›å»ºbeanå®ä¾‹ï¼›</li><li>ä¸ºbeançš„å±æ€§èµ‹å€¼ï¼›</li><li>è°ƒç”¨beançš„åˆå§‹åŒ–æ–¹æ³•ï¼›</li><li>ä½¿ç”¨beanï¼›</li><li>å½“å®¹å™¨å…³é—­æ—¶ï¼Œè°ƒç”¨beançš„é”€æ¯æ–¹æ³•ï¼›</li></ol><h3 id="123ã€Spring-Bean-çš„ä½œç”¨åŸŸä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#123ã€Spring-Bean-çš„ä½œç”¨åŸŸä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="123ã€Spring Bean çš„ä½œç”¨åŸŸä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>123ã€Spring Bean çš„ä½œç”¨åŸŸä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><h4 id="Springå®¹å™¨ä¸­çš„beanå¯ä»¥åˆ†ä¸º5ä¸ªèŒƒå›´ï¼š"><a href="#Springå®¹å™¨ä¸­çš„beanå¯ä»¥åˆ†ä¸º5ä¸ªèŒƒå›´ï¼š" class="headerlink" title="Springå®¹å™¨ä¸­çš„beanå¯ä»¥åˆ†ä¸º5ä¸ªèŒƒå›´ï¼š"></a>Springå®¹å™¨ä¸­çš„beanå¯ä»¥åˆ†ä¸º5ä¸ªèŒƒå›´ï¼š</h4><ol><li>singletonï¼šè¿™ç§beanèŒƒå›´æ˜¯é»˜è®¤çš„ï¼Œè¿™ç§èŒƒå›´ç¡®ä¿ä¸ç®¡æ¥å—å¤šå°‘è¯·æ±‚ï¼Œæ¯ä¸ªå®¹å™¨ä¸­åªå“Ÿä¸€ä¸ªbeançš„å®ä¾‹ï¼Œå•ä¾‹æ¨¡å¼ï¼›</li><li>prototypeï¼šä¸ºæ¯ä¸€ä¸ªbeanæä¾›ä¸€ä¸ªå®ä¾‹ï¼›</li><li>requestï¼šåœ¨è¯·æ±‚beanèŒƒå›´å†…ä¸ºæ¯ä¸€ä¸ªæ¥è‡ªå®¢æˆ·ç«¯çš„ç½‘ç»œè¯·æ±‚åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œåœ¨è¯·æ±‚å®Œæ¯•åï¼Œbeanä¼šå¤±æ•ˆå¹¶è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶ï¼›</li><li>sessionï¼šä¸ºæ¯ä¸ªsessionåˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œsessionè¿‡æœŸåï¼Œbeanä¼šéšä¹‹æ¶ˆå¤±ï¼›</li><li>global-sessionï¼šglobal-sessionå’ŒPortletåº”ç”¨ç›¸å…³ã€‚å½“ä½ çš„åº”ç”¨éƒ¨ç½²åœ¨Portletå®¹å™¨ä¸­å·¥ä½œæ—¶ï¼Œå®ƒåŒ…å«å¾ˆå¤športletã€‚å¦‚æœä½ æƒ³è¦å£°æ˜è®©æ‰€æœ‰çš„portletå…¬ç”¨å…¨å±€çš„å­˜å‚¨å˜é‡çš„è¯ï¼Œé‚£ä¹ˆå…¨å±€å˜é‡éœ€è¦å­˜å‚¨åœ¨global-sessionä¸­ã€‚</li></ol><h3 id="124ã€å¦‚ä½•åœ¨-Spring-Boot-ä¸­ç¦ç”¨-Actuator-ç«¯ç‚¹å®‰å…¨æ€§ï¼Ÿ"><a href="#124ã€å¦‚ä½•åœ¨-Spring-Boot-ä¸­ç¦ç”¨-Actuator-ç«¯ç‚¹å®‰å…¨æ€§ï¼Ÿ" class="headerlink" title="124ã€å¦‚ä½•åœ¨ Spring Boot ä¸­ç¦ç”¨ Actuator ç«¯ç‚¹å®‰å…¨æ€§ï¼Ÿ"></a>124ã€å¦‚ä½•åœ¨ Spring Boot ä¸­ç¦ç”¨ Actuator ç«¯ç‚¹å®‰å…¨æ€§ï¼Ÿ</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æ•æ„Ÿçš„HTTPç«¯ç‚¹éƒ½æ˜¯å®‰å…¨çš„ï¼Œåªæœ‰å…·æœ‰Actuatorè§’è‰²çš„ç”¨æˆ·æ‰èƒ½è®¿é—®å®ƒä»¬ã€‚å®‰å…¨æ€§æ˜¯ä½¿ç”¨æ ‡å‡†çš„HTTPServletRequest.isUserInRoleæ–¹æ³•å®æ–½çš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨management.security.enable = falseæ¥ç¦ç”¨å®‰å…¨æ€§ã€‚åªæœ‰åœ¨æ‰§è¡Œæœºæ„ç«¯ç‚¹åœ¨é˜²ç«å¢™åè®¿é—®æ—¶ï¼Œæ‰å»ºè®®ç¦ç”¨å®‰å…¨æ€§ã€‚</p><h3 id="125ã€ä»€ä¹ˆæ˜¯-Spring-inner-beansï¼Ÿ"><a href="#125ã€ä»€ä¹ˆæ˜¯-Spring-inner-beansï¼Ÿ" class="headerlink" title="125ã€ä»€ä¹ˆæ˜¯ Spring inner beansï¼Ÿ"></a>125ã€ä»€ä¹ˆæ˜¯ Spring inner beansï¼Ÿ</h3><p>åœ¨Springæ¡†æ¶ä¸­ï¼Œæ— è®ºä½•æ—¶beanè¢«ä½¿ç”¨æ—¶ï¼Œå½“ä»…è¢«è°ƒç”¨ä¸€ä¸ªå±æ€§ã€‚å¯ä»¥å°†è¿™ä¸ªbeanå£°æ˜ä¸ºå†…éƒ¨beanã€‚å†…éƒ¨beanå¯ä»¥ç”¨setteræ³¨å…¥â€œå±æ€§â€å’Œæ„é€ æ–¹æ³•æ³¨å…¥â€œæ„é€ å‚æ•°â€çš„æ–¹å¼æ¥å®ç°ã€‚æ¯”å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ï¼Œä¸€ä¸ªCustomerç±»å¼•ç”¨äº†ä¸€ä¸ªPersonç±»ï¼Œæˆ‘ä»¬è¦åšçš„æ˜¯åˆ›å»ºä¸€ä¸ªPersonå®ä¾‹ï¼Œç„¶åå†Customerå†…éƒ¨ä½¿ç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Customer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Person person;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;CustomerBean&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.Customer&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;person&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.person&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">value</span>=<span class="string">1</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ç´ å°æš–&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">18</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="126ã€Spring-æ¡†æ¶ä¸­çš„å•ä¾‹-Beans-æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆï¼Ÿ"><a href="#126ã€Spring-æ¡†æ¶ä¸­çš„å•ä¾‹-Beans-æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆï¼Ÿ" class="headerlink" title="126ã€Spring æ¡†æ¶ä¸­çš„å•ä¾‹ Beans æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆï¼Ÿ"></a>126ã€Spring æ¡†æ¶ä¸­çš„å•ä¾‹ Beans æ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆï¼Ÿ</h3><p>Springæ¡†æ¶å¹¶æ²¡æœ‰å¯¹å•ä¾‹beanè¿›è¡Œä»»ä½•å¤šçº¿ç¨‹çš„å°è£…å¤„ç†ã€‚å…³äºå•ä¾‹beançš„çº¿ç¨‹å®‰å…¨å’Œå¹¶å‘é—®é¢˜éœ€è¦å¼€å‘è€…è‡ªè¡Œå»æå®šã€‚ä½†å®é™…ä¸Šï¼Œå¤§éƒ¨åˆ†çš„Spring beanå¹¶æ²¡æœ‰å¯å˜çš„çŠ¶æ€ï¼Œæ‰€ä»¥åœ¨æŸç§ç¨‹åº¦ä¸Šè¯´Springçš„å•ä¾‹beanæ—¶çº¿ç¨‹å®‰å…¨çš„ã€‚å¦‚æœä½ çš„beanæœ‰å¤šç§çŠ¶æ€çš„è¯ï¼Œæ¯”å¦‚view modelï¼Œå°±éœ€è¦è‡ªè¡Œä¿è¯çº¿ç¨‹å®‰å…¨å•¦ã€‚</p><p>æœ€æµ…æ˜¾çš„è§£å†³åŠæ³•å°±æ˜¯å°†å¤šæ€beançš„ä½œç”¨åŸŸç”±singletonå˜æ›´ä¸ºprototypeã€‚</p><h3 id="127ã€è¯·è§£é‡Š-Spring-Bean-çš„è‡ªåŠ¨è£…é…ï¼Ÿ"><a href="#127ã€è¯·è§£é‡Š-Spring-Bean-çš„è‡ªåŠ¨è£…é…ï¼Ÿ" class="headerlink" title="127ã€è¯·è§£é‡Š Spring Bean çš„è‡ªåŠ¨è£…é…ï¼Ÿ"></a>127ã€è¯·è§£é‡Š Spring Bean çš„è‡ªåŠ¨è£…é…ï¼Ÿ</h3><p>Springæ”¯æŒIOCï¼Œè‡ªåŠ¨è£…é…ä¸ç”¨ç±»å®ä¾‹åŒ–ï¼Œç›´æ¥ä»beanå®¹å™¨ä¸­å–ã€‚</p><p>1ã€é…ç½®åœ¨xmlä¸­</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;employeeDAO&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.guor.EmployeeDAOImpl&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>2ã€@Autowiredè‡ªåŠ¨è£…é…</p><h3 id="128ã€å¦‚ä½•å¼€å¯åŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…ï¼Ÿ"><a href="#128ã€å¦‚ä½•å¼€å¯åŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…ï¼Ÿ" class="headerlink" title="128ã€å¦‚ä½•å¼€å¯åŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…ï¼Ÿ"></a>128ã€å¦‚ä½•å¼€å¯åŸºäºæ³¨è§£çš„è‡ªåŠ¨è£…é…ï¼Ÿ</h3><p>è¦ä½¿ç”¨ @Autowiredï¼Œéœ€è¦æ³¨å†Œ AutowiredAnnotationBeanPostProcessorï¼Œå¯ä»¥æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ¥å®ç°ï¼š</p><p>å¼•å…¥é…ç½®æ–‡ä»¶ä¸­çš„<bean>ä¸‹å¼•å…¥ <context:annotation-config><br><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;beans&gt;</span></span><br><span class="line">    <span class="section">&lt;context:annotation-config /&gt;</span></span><br><span class="line"><span class="section">&lt;/beans&gt;</span></span><br></pre></td></tr></table></figure><br>åœ¨beané…ç½®æ–‡ä»¶ä¸­ç›´æ¥å¼•å…¥AutowiredAnnotationBeanPostProcessor<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="129ã€ä»€ä¹ˆæ˜¯-Spring-Batchï¼Ÿ"><a href="#129ã€ä»€ä¹ˆæ˜¯-Spring-Batchï¼Ÿ" class="headerlink" title="129ã€ä»€ä¹ˆæ˜¯ Spring Batchï¼Ÿ"></a>129ã€ä»€ä¹ˆæ˜¯ Spring Batchï¼Ÿ</h3><p>1ã€ä»€ä¹ˆæ˜¯spring batch?</p><p>spring batchæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€å®Œå–„çš„æ‰¹å¤„ç†æ¡†æ¶ï¼Œå®ƒä¸»è¦çš„ç›®çš„åœ¨äºå¸®åŠ©ä¼ä¸šå»ºç«‹å¥å£®ã€é«˜æ•ˆçš„æ‰¹å¤„ç†åº”ç”¨ã€‚</p><p>spring batchæ˜¯Springçš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œå®ƒä½¿ç”¨javaè¯­è¨€å¹¶åŸºäºspringæ¡†æ¶ä½œä¸ºåŸºç¡€å¼€å‘ï¼Œä½¿å¾—å·²ç»ä½¿ç”¨Springæ¡†æ¶çš„å¼€å‘è€…æˆ–è€…æ˜¯ä¼ä¸šå¯ä»¥æ›´åŠ å®¹æ˜“è®¿é—®å’Œåˆ©ç”¨ä¼ä¸šæœåŠ¡ã€‚</p><p>spring batchæä¾›äº†å¤§é‡å¯é‡ç”¨çš„ç»„ä»¶,åŒ…æ‹¬äº†æ—¥å¿—ã€è¿½è¸ªã€äº‹åŠ¡ã€ä»»åŠ¡ä½œä¸šç»Ÿè®¡ã€ä»»åŠ¡é‡å¯ã€è·³è¿‡ã€é‡å¤ã€èµ„æºç®¡ç†ã€‚</p><p>å¯¹å¤§æ•°æ®é‡å’Œé«˜æ€§èƒ½çš„æ‰¹å¤„ç†ä»»åŠ¡ï¼Œspring batchåŒæ ·æä¾›äº†é«˜çº§åŠŸèƒ½å’Œç‰¹æ€§æ¥æ”¯æŒã€‚</p><p>ä¾‹å¦‚ï¼šåˆ†åŒºåŠŸèƒ½ã€è¿œç¨‹åŠŸèƒ½ã€‚</p><p>æ€»çš„æ¥è¯´ï¼Œspring batchå¯ä»¥æ”¯æŒç®€å•çš„ã€å¤æ‚çš„å’Œå¤§æ•°æ®é‡çš„æ‰¹å¤„ç†ä½œä¸šã€‚</p><p>2ã€spring batchä¸šåŠ¡åœºæ™¯</p><p>å‘¨æœŸæ€§çš„æäº¤æ‰¹å¤„ç†</p><p>æŠŠä¸€ä¸ªä»»åŠ¡å¹¶è¡Œå¤„ç†</p><p>æ¶ˆæ¯é©±åŠ¨åº”ç”¨åˆ†çº§å¤„ç†</p><p>å¤§è§„æ¨¡å¹¶è¡Œæ‰¹å¤„ç†</p><p>æ‰‹å·¥æˆ–è°ƒåº¦ä½¿ä»»åŠ¡å¤±è´¥ä¹‹åé‡æ–°å¯åŠ¨</p><p>æœ‰ä¾èµ–æ­¥éª¤çš„é¡ºåºæ‰§è¡Œ(ä½¿ç”¨å·¥ä½œæµé©±åŠ¨æ‰©å±•)</p><p>å¤„ç†æ—¶è·³è¿‡éƒ¨åˆ†è®°å½•</p><p>æˆæ‰¹äº‹åŠ¡ï¼šä¸ºå°æ‰¹é‡çš„æˆ–æœ‰çš„å­˜å‚¨è¿‡ç¨‹/è„šæœ¬çš„åœºæ™¯ä½¿ç”¨</p><h3 id="130ã€spring-mvc-å’Œ-struts-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#130ã€spring-mvc-å’Œ-struts-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="130ã€spring mvc å’Œ struts çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>130ã€spring mvc å’Œ struts çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>1ã€æ‹¦æˆªæœºåˆ¶çš„ä¸åŒ</p><p>Struts2æ˜¯ç±»çº§åˆ«çš„æ‹¦æˆªï¼Œæ¯æ¬¡è¯·æ±‚å°±ä¼šåˆ›å»ºä¸€ä¸ªActionï¼Œå’ŒSpringæ•´åˆæ—¶Struts2çš„ActionBeanæ³¨å…¥ä½œç”¨åŸŸæ˜¯åŸå‹æ¨¡å¼prototypeï¼Œç„¶åé€šè¿‡setterï¼Œgetterå§requestæ•°æ®æ³¨å…¥åˆ°å±æ€§ã€‚Struts2ä¸­ï¼Œä¸€ä¸ªActionå¯¹åº”ä¸€ä¸ªrequestï¼Œresponseä¸Šä¸‹æ–‡ï¼Œåœ¨æ¥æ”¶å‚æ•°æ—¶ï¼Œå¯ä»¥é€šè¿‡å±æ€§æ¥æ”¶ï¼Œè¿™è¯´æ˜å±æ€§å‚æ•°æ˜¯è®©å¤šä¸ªæ–¹æ³•å…±äº«çš„ã€‚Struts2ä¸­Actionçš„ä¸€ä¸ªæ–¹æ³•å¯ä»¥å¯¹åº”ä¸€ä¸ªurlï¼Œè€Œå…¶ç±»å±æ€§å´è¢«æ‰€æœ‰æ–¹æ³•å…±äº«ï¼Œè¿™ä¹Ÿå°±æ— æ³•ç”¨æ³¨è§£æˆ–å…¶ä»–æ–¹å¼æ ‡è¯†å…¶æ‰€å±æ–¹æ³•äº†ï¼Œåªèƒ½è®¾è®¡ä¸ºå¤šä¾‹ã€‚</p><p>SpringMVCæ˜¯æ–¹æ³•çº§åˆ«çš„æ‹¦æˆªï¼Œä¸€ä¸ªæ–¹æ³•å¯¹åº”ä¸€ä¸ªRequestä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥æ–¹æ³•ç›´æ¥åŸºæœ¬ä¸Šæ˜¯ç‹¬ç«‹çš„ï¼Œç‹¬äº«requestï¼Œresponseæ•°æ®ã€‚è€Œæ¯ä¸ªæ–¹æ³•åŒæ—¶åˆä½•ä¸€ä¸ªurlå¯¹åº”ï¼Œå‚æ•°çš„ä¼ é€’æ˜¯ç›´æ¥æ³¨å…¥åˆ°æ–¹æ³•ä¸­çš„ï¼Œæ˜¯æ–¹æ³•æ‰€ç‹¬æœ‰çš„ã€‚å¤„ç†ç»“æœé€šè¿‡ModeMapè¿”å›ç»™æ¡†æ¶ã€‚åœ¨Springæ•´åˆæ—¶ï¼ŒSpringMVCçš„Controller Beané»˜è®¤å•ä¾‹æ¨¡å¼Singletonï¼Œæ‰€ä»¥é»˜è®¤å¯¹æ‰€æœ‰çš„è¯·æ±‚ï¼Œåªä¼šåˆ›å»ºä¸€ä¸ªControllerï¼Œæœ‰åº”ä¸ºæ²¡æœ‰å…±äº«çš„å±æ€§ï¼Œæ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¦‚æœè¦æ”¹å˜é»˜è®¤çš„ä½œç”¨åŸŸï¼Œéœ€è¦æ·»åŠ @Scopeæ³¨è§£ä¿®æ”¹ã€‚</p><p>Struts2æœ‰è‡ªå·±çš„æ‹¦æˆªInterceptoræœºåˆ¶ï¼ŒSpringMVCè¿™æ˜¯ç”¨çš„æ˜¯ç‹¬ç«‹çš„Aopæ–¹å¼ï¼Œè¿™æ ·å¯¼è‡´Struts2çš„é…ç½®æ–‡ä»¶é‡è¿˜æ˜¯æ¯”SpringMVCå¤§ã€‚</p><p>2ã€åº•å±‚æ¡†æ¶çš„ä¸åŒ</p><p>Struts2é‡‡ç”¨Filterï¼ˆStrutsPrepareAndExecuteFilterï¼‰å®ç°ï¼ŒSpringMVCï¼ˆDispatcherServletï¼‰åˆ™é‡‡ç”¨Servletå®ç°ã€‚Filteråœ¨å®¹å™¨å¯åŠ¨ä¹‹åå³åˆå§‹åŒ–ï¼›æœåŠ¡åœæ­¢ä»¥åå æ¯ï¼Œæ™šäºServletã€‚Servletåœ¨æ˜¯åœ¨è°ƒç”¨æ—¶åˆå§‹åŒ–ï¼Œå…ˆäºFilterè°ƒç”¨ï¼ŒæœåŠ¡åœæ­¢åé”€æ¯ã€‚</p><p>3ã€æ€§èƒ½æ–¹é¢</p><p>Struts2æ˜¯ç±»çº§åˆ«çš„æ‹¦æˆªï¼Œæ¯æ¬¡è¯·æ±‚å¯¹åº”å®ä¾‹ä¸€ä¸ªæ–°çš„Actionï¼Œéœ€è¦åŠ è½½æ‰€æœ‰çš„å±æ€§å€¼æ³¨å…¥ï¼ŒSpringMVCå®ç°äº†é›¶é…ç½®ï¼Œç”±äºSpringMVCåŸºäºæ–¹æ³•çš„æ‹¦æˆªï¼Œæœ‰åŠ è½½ä¸€æ¬¡å•ä¾‹æ¨¡å¼beanæ³¨å…¥ã€‚æ‰€ä»¥ï¼ŒSpringMVCå¼€å‘æ•ˆç‡å’Œæ€§èƒ½é«˜äºStruts2ã€‚</p><p>4ã€é…ç½®æ–¹é¢</p><p>spring MVCå’ŒSpringæ˜¯æ— ç¼çš„ã€‚ä»è¿™ä¸ªé¡¹ç›®çš„ç®¡ç†å’Œå®‰å…¨ä¸Šä¹Ÿæ¯”Struts2é«˜ã€‚</p><h3 id="131ã€è¯·ä¸¾ä¾‹è§£é‡Š-Required-æ³¨è§£ï¼Ÿ"><a href="#131ã€è¯·ä¸¾ä¾‹è§£é‡Š-Required-æ³¨è§£ï¼Ÿ" class="headerlink" title="131ã€è¯·ä¸¾ä¾‹è§£é‡Š@Required æ³¨è§£ï¼Ÿ"></a>131ã€è¯·ä¸¾ä¾‹è§£é‡Š@Required æ³¨è§£ï¼Ÿ</h3><p>@Requiredæ³¨è§£åº”ç”¨äºbeanå±æ€§çš„setteræ–¹æ³•ï¼Œå®ƒè¡¨æ˜å½±å“çš„beanå±æ€§åœ¨é…ç½®æ—¶å¿…é¡»æ”¾åœ¨XMLé…ç½®æ–‡ä»¶ä¸­ã€‚</p><p>åä¹ã€è¯·ä¸¾ä¾‹è¯´æ˜@Qualifier æ³¨è§£ï¼Ÿ<br>å¦‚æœåœ¨xmlä¸­å®šä¹‰äº†ä¸€ç§ç±»å‹çš„å¤šä¸ªbeanï¼ŒåŒæ—¶åœ¨javaæ³¨è§£ä¸­åˆæƒ³æŠŠå…¶ä¸­ä¸€ä¸ªbeanå¯¹è±¡ä½œä¸ºå±æ€§ï¼Œé‚£ä¹ˆæ­¤æ—¶å¯ä»¥ä½¿ç”¨@QualifieråŠ @Autowiredæ¥è¾¾åˆ°è¿™ä¸€ç›®çš„ï¼Œè‹¥ä¸åŠ @Qualifierè¿™ä¸ªæ³¨è§£ï¼Œåœ¨è¿è¡Œæ—¶ä¼šå‡ºç°â€œ No qualifying bean of type [com.tutorialspoint.Student] is defined: expected single matching bean but found 2: student1,student2â€è¿™ä¸ªå¼‚å¸¸ã€‚</p><h3 id="132ã€Springå¸¸ç”¨æ³¨è§£"><a href="#132ã€Springå¸¸ç”¨æ³¨è§£" class="headerlink" title="132ã€Springå¸¸ç”¨æ³¨è§£"></a>132ã€Springå¸¸ç”¨æ³¨è§£</h3><p><a href="https://blog.csdn.net/guorui_java/article/details/107347754">Springå¸¸ç”¨æ³¨è§£ï¼ˆç»å¯¹ç»å…¸ï¼‰</a></p><h3 id="133ã€é¡¹ç›®ä¸­æ˜¯å¦‚ä½•å®ç°æƒé™éªŒè¯çš„ï¼Œæƒé™éªŒè¯éœ€è¦å‡ å¼ è¡¨"><a href="#133ã€é¡¹ç›®ä¸­æ˜¯å¦‚ä½•å®ç°æƒé™éªŒè¯çš„ï¼Œæƒé™éªŒè¯éœ€è¦å‡ å¼ è¡¨" class="headerlink" title="133ã€é¡¹ç›®ä¸­æ˜¯å¦‚ä½•å®ç°æƒé™éªŒè¯çš„ï¼Œæƒé™éªŒè¯éœ€è¦å‡ å¼ è¡¨"></a>133ã€é¡¹ç›®ä¸­æ˜¯å¦‚ä½•å®ç°æƒé™éªŒè¯çš„ï¼Œæƒé™éªŒè¯éœ€è¦å‡ å¼ è¡¨</h3><p>é€šè¿‡äº†è§£ï¼Œç°åœ¨æœ€æ™®éçš„æƒé™ç®¡ç†æ¨¡å‹å°±æ˜¯RBACï¼ˆRole-Based Access Controlï¼‰ã€‚</p><p>1ã€æƒé™æ§åˆ¶åˆ†ç±»</p><p>èœå•åŠŸèƒ½<br>urlæ§åˆ¶ï¼ˆæ§åˆ¶è®¿é—®ä¸åŒçš„æ§åˆ¶å™¨ï¼‰<br>2ã€RBACçš„ä¼˜ç¼ºç‚¹</p><p>ï¼ˆ1ï¼‰ä¼˜ç‚¹</p><p>ç®€åŒ–äº†ç”¨æˆ·å’Œæƒé™çš„å…³ç³»<br>æ˜“æ‰©å±•ã€æ˜“ç»´æŠ¤</p><p>ï¼ˆ2ï¼‰ç¼ºç‚¹</p><p>RBACæ¨¡å‹æ²¡æœ‰æä¾›æ“ä½œé¡ºåºçš„æ§åˆ¶æœºåˆ¶ï¼Œè¿™ä¸€ç¼ºé™·ä½¿å¾—RBACæ¨¡å‹å¾ˆéš¾é€‚åº”å“ªäº›å¯¹æ“ä½œæ¬¡åºæœ‰ä¸¥æ ¼è¦æ±‚çš„ç³»ç»Ÿã€‚</p><p>3ã€RBACæ”¯æŒçš„å®‰å…¨åŸåˆ™</p><p>ï¼ˆ1ï¼‰æœ€å°æƒé™åŸåˆ™</p><p>RBACå¯ä»¥å°†è§’è‰²é…ç½®æˆå…¶å®Œæˆä»»åŠ¡æ‰€éœ€çš„æœ€å°æƒé™é›†åˆã€‚</p><p>ï¼ˆ2ï¼‰è´£ä»»åˆ†ç¦»åŸåˆ™</p><p>å¯ä»¥é€šè¿‡è°ƒç”¨ç›¸äº’ç‹¬ç«‹äº’æ–¥çš„è§’è‰²æ¥å…±åŒå®Œæˆæ•æ„Ÿçš„ä»»åŠ¡ï¼Œä¾‹å¦‚è¦æ±‚ä¸€ä¸ªè®°è´¦å‘˜å’Œè´¢åŠ¡ç®¡ç†å‘˜å…±åŒå‚ä¸ç»Ÿä¸€è¿‡è´¦æ“ä½œã€‚</p><p>ï¼ˆ3ï¼‰æ•°æ®æŠ½è±¡åŸåˆ™</p><p>å¯ä»¥é€šè¿‡æƒé™çš„æŠ½è±¡æ¥ä½“ç°ï¼Œä¾‹å¦‚è´¢åŠ¡æ“ä½œç”¨å€Ÿæ¬¾ã€å­˜æ¬¾ç­‰æŠ½è±¡æƒé™ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å…¸å‹çš„è¯»å†™æƒé™ã€‚</p><p>4ã€è¿œå¤æ—¶ä»£çš„æƒé™æ§åˆ¶</p><p>å½“æ—¶è¿˜æ²¡æœ‰RBACï¼Œä¹Ÿæ²¡æœ‰è¿™ä¸ªæ¦‚å¿µï¼Œå°±æ˜¯ä¸€å †ç¨‹åºå‘˜åœ¨é‚£é¼“æ£ï¼Œè§‰å¾—ç™»å½•è¿™å—è¯¥åšç‚¹ä»€ä¹ˆã€‚</p><p><a href="https://imgtu.com/i/jV7rTK"><img src="https://s1.ax1x.com/2022/06/27/jV7rTK.jpg" alt="jV7rTK.jpg"></a></p><blockquote><p>1ã€æ–°å»ºä¸€ä¸ªç”¨æˆ·ï¼Œå¯¹è¿™ä¸ªç”¨æˆ·è¿›è¡Œèµ‹äºˆæƒé™ã€‚</p><p>2ã€ä½†æ˜¯ä¸€æ—¦ç”¨æˆ·å¤šäº†ï¼Œæƒé™å¤æ‚äº†ï¼Œè¿™å·¥ä½œé‡ä¹Ÿæ˜¯è›®å¤§çš„ã€‚</p></blockquote><p>5ã€RBAC</p><p>RBAC 1.0</p><p><a href="https://imgtu.com/i/jV76YD"><img src="https://s1.ax1x.com/2022/06/27/jV76YD.jpg" alt="jV76YD.jpg"></a></p><p><a href="https://imgtu.com/i/jV7cfe"><img src="https://s1.ax1x.com/2022/06/27/jV7cfe.jpg" alt="jV7cfe.jpg"></a></p><p>ç›´æ¥ä¸Šå›¾ï¼Œä¸€ç›®äº†ç„¶ï¼Œå½“ç¨‹åºä¸æ˜¯å¾ˆå¤æ‚çš„æ—¶å€™ï¼ŒRBACå°±æ˜¯è¿™æ ·è®¾è®¡çš„ï¼Œæˆ‘ä»¬å…¬å¸çš„æƒé™éªŒè¯æ¨¡å—å°±æ˜¯è¿™æ ·è®¾è®¡çš„ã€‚</p><p>ç®€ç®€å•å•ï¼Œäº”å¼ è¡¨ï¼Œè§£</p><p>RBAC 2.0</p><p>åŸºäºRBAC 1.0æ¨¡å‹çš„åŸºç¡€ä¸Šï¼Œè¿›è¡Œäº†è§’è‰²çš„è®¿é—®æ§åˆ¶</p><p><a href="https://imgtu.com/i/jV7yFO"><img src="https://s1.ax1x.com/2022/06/27/jV7yFO.jpg" alt="jV7yFO.jpg"></a></p><p>RBAC2ä¸­çš„ä¸€ä¸ªåŸºæœ¬é™åˆ¶æ˜¯äº’æ–¥è§’è‰²çš„é™åˆ¶ï¼Œäº’æ–¥è§’è‰²æ˜¯æŒ‡å„è‡ªæƒé™å¯ä»¥äº’ç›¸åˆ¶çº¦çš„ä¸¤ä¸ªè§’è‰²ã€‚å¯¹äºè¿™ç±»è§’è‰²ä¸€ä¸ªç”¨æˆ·åœ¨æŸä¸€æ¬¡æ´»åŠ¨ä¸­åªèƒ½è¢«åˆ†é…å…¶ä¸­çš„ä¸€ä¸ªè§’è‰²ï¼Œä¸èƒ½åŒæ—¶è·å¾—ä¸¤ä¸ªè§’è‰²çš„ä½¿ç”¨æƒã€‚</p><p>è¯¥æ¨¡å‹æœ‰ä»¥ä¸‹å‡ ç§çº¦æŸ</p><ul><li>äº’æ–¥è§’è‰² ï¼šåŒä¸€ç”¨æˆ·åªèƒ½åˆ†é…åˆ°ä¸€ç»„äº’æ–¥è§’è‰²é›†åˆä¸­è‡³å¤šä¸€ä¸ªè§’è‰²ï¼Œæ”¯æŒè´£ä»»åˆ†ç¦»çš„åŸåˆ™ã€‚äº’æ–¥è§’è‰²æ˜¯æŒ‡å„è‡ªæƒé™äº’ç›¸åˆ¶çº¦çš„ä¸¤ä¸ªè§’è‰²ã€‚å¯¹äºè¿™ç±»è§’è‰²ä¸€ä¸ªç”¨æˆ·åœ¨æŸä¸€æ¬¡æ´»åŠ¨ä¸­åªèƒ½è¢«åˆ†é…å…¶ä¸­çš„ä¸€ä¸ªè§’è‰²ï¼Œä¸èƒ½åŒæ—¶è·å¾—ä¸¤ä¸ªè§’è‰²çš„ä½¿ç”¨æƒã€‚å¸¸ä¸¾çš„ä¾‹å­ï¼šåœ¨å®¡è®¡æ´»åŠ¨ä¸­ï¼Œä¸€ä¸ªè§’è‰²ä¸èƒ½åŒæ—¶è¢«æŒ‡æ´¾ç»™ä¼šè®¡è§’è‰²å’Œå®¡è®¡å‘˜è§’è‰²ã€‚</li><li>åŸºæ•°çº¦æŸ ï¼šä¸€ä¸ªè§’è‰²è¢«åˆ†é…çš„ç”¨æˆ·æ•°é‡å—é™ï¼›ä¸€ä¸ªç”¨æˆ·å¯æ‹¥æœ‰çš„è§’è‰²æ•°ç›®å—é™ï¼›åŒæ ·ä¸€ä¸ªè§’è‰²å¯¹åº”çš„è®¿é—®æƒé™æ•°ç›®ä¹Ÿåº”å—é™ï¼Œä»¥æ§åˆ¶é«˜çº§æƒé™åœ¨ç³»ç»Ÿä¸­çš„åˆ†é…ã€‚</li><li>å…ˆå†³æ¡ä»¶è§’è‰² ï¼šå¯ä»¥åˆ†é…è§’è‰²ç»™ç”¨æˆ·ä»…å½“è¯¥ç”¨æˆ·å·²ç»æ˜¯å¦ä¸€è§’è‰²çš„æˆå‘˜ï¼›å¯¹åº”çš„å¯ä»¥åˆ†é…è®¿é—®æƒé™ç»™è§’è‰²ï¼Œä»…å½“è¯¥è§’è‰²å·²ç»æ‹¥æœ‰å¦ä¸€ç§è®¿é—®æƒé™ã€‚æŒ‡è¦æƒ³è·å¾—è¾ƒé«˜çš„æƒé™ï¼Œè¦é¦–å…ˆæ‹¥æœ‰ä½ä¸€çº§çš„æƒé™ã€‚</li><li>è¿è¡Œæ—¶äº’æ–¥ ï¼šä¾‹å¦‚ï¼Œå…è®¸ä¸€ä¸ªç”¨æˆ·å…·æœ‰ä¸¤ä¸ªè§’è‰²çš„æˆå‘˜èµ„æ ¼ï¼Œä½†åœ¨è¿è¡Œä¸­ä¸å¯åŒæ—¶æ¿€æ´»è¿™ä¸¤ä¸ªè§’è‰²ã€‚</li></ul><p>6ã€rbacçš„å®ç°ç†è®ºåˆ†æ</p><p>è¿›å…¥ç™»å½•é¡µé¢ï¼›<br>æ‹¿åˆ°é€šè¿‡postä¼ è¿‡æ¥çš„ç”¨æˆ·åå’Œå¯†ç ï¼›<br>ä½¿ç”¨ormè¿›è¡Œè¿‡æ»¤æŸ¥æ‰¾ï¼›<br>å¦‚æœèƒ½æ‰¾åˆ°å€¼ï¼Œåˆ™è¯´æ˜ç™»å½•æˆåŠŸï¼šç™»å½•æˆåŠŸåè°ƒç”¨rbacåˆå§‹åŒ–å‡½æ•°ï¼Œåˆå§‹åŒ–å‡½æ•°çš„ä¸»è¦åŠŸèƒ½æ˜¯è·å–ç”¨æˆ·çš„æƒé™å’Œèœå•ä¿å­˜åˆ°sessionä¸­ï¼Œå¹¶è·³è½¬å®¢æˆ·åˆ—è¡¨é¡µé¢ï¼›å¦‚æœå¤±è´¥ï¼Œé¡µé¢è¿›è¡Œå‹å¥½æç¤ºï¼›</p><p>7ã€urlæƒé™æ§åˆ¶å…³é”®ä»£ç </p><p><a href="https://imgtu.com/i/jV7Dw6"><img src="https://s1.ax1x.com/2022/06/27/jV7Dw6.jpg" alt="jV7Dw6.jpg"></a></p><h3 id="134ã€è°ˆè°ˆcontrollerï¼Œæ¥å£è°ƒç”¨çš„è·¯å¾„é—®é¢˜"><a href="#134ã€è°ˆè°ˆcontrollerï¼Œæ¥å£è°ƒç”¨çš„è·¯å¾„é—®é¢˜" class="headerlink" title="134ã€è°ˆè°ˆcontrollerï¼Œæ¥å£è°ƒç”¨çš„è·¯å¾„é—®é¢˜"></a>134ã€è°ˆè°ˆcontrollerï¼Œæ¥å£è°ƒç”¨çš„è·¯å¾„é—®é¢˜</h3><p>1ã€Spring MVCå¦‚ä½•åŒ¹é…è¯·æ±‚è·¯å¾„</p><p>@RequestMappingæ˜¯ç”¨æ¥æ˜ å°„è¯·æ±‚çš„ï¼Œæ¯”å¦‚getè¯·æ±‚ã€postè¯·æ±‚ã€æˆ–è€…RESTé£æ ¼ä¸éRESTé£æ ¼çš„ã€‚è¯¥æ³¨è§£å¯ä»¥ç”¨åœ¨ç±»ä¸Šæˆ–æ–¹æ³•ä¸Šï¼Œå¦‚æœç”¨åœ¨ç±»ä¸Šï¼Œè¡¨ç¤ºæ˜¯è¯¥ç±»ä¸­æ‰€æœ‰æ–¹æ³•çš„çˆ¶è·¯å¾„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/springmvc&quot;)</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMVCTest</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/testRequestMapping&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">testRequestMapping</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;testRequestMapping&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> SUCCESS;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ç±»ä¸Šè¿˜æ·»åŠ äº†ä¸€ä¸ª@Controlleræ³¨è§£ï¼Œè¯¥æ³¨è§£åœ¨SpringMVCä¸­è´Ÿè´£å¤„ç†ç”±DispatcherServletåˆ†å‘çš„è¯·æ±‚ï¼Œå®ƒæŠŠç”¨æˆ·è¯·æ±‚çš„æ•°æ®ç»è¿‡ä¸šåŠ¡å¤„ç†å±‚å¤„ç†ä¹‹åå°è£…æˆä¸€ä¸ªmodelï¼Œç„¶åå†æŠŠè¯¥modelè¿”å›ç»™å¯¹åº”çš„viewè¿›è¡Œå±•ç¤ºã€‚</p><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡â€œspringmvc/testRequestMappingâ€è¿™ä¸ªè·¯å¾„æ¥å®šä½åˆ°testRequestMappingè¿™ä¸ªæ–¹æ³•ï¼Œç„¶åæ‰§è¡Œæ–¹æ³•å†…çš„æ–¹æ³•ä½“ã€‚</p><p>RequestMappingå¯ä»¥å®ç°æ¨¡ç³ŠåŒ¹é…è·¯å¾„ï¼Œæ¯”å¦‚ï¼š</p><ol><li>ï¼Ÿè¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼›</li><li>*è¡¨ç¤ºä»»æ„å­—ç¬¦ï¼›</li><li>** åŒ¹é…å¤šå±‚è·¯å¾„ï¼›</li></ol><p>/springmvc/**/testRequestMapping å°±å¯ä»¥åŒ¹é…/springmvc/stu/getStudentInfo/testRequestMapping è¿™æ ·çš„è·¯å¾„äº†ã€‚</p><p>2ã€SpringMVCå¦‚ä½•è·å–è¯·æ±‚çš„å‚æ•°</p><p>ï¼ˆ1ï¼‰@PathVariable</p><p>è¯¥æ³¨è§£ç”¨æ¥æ˜ å°„è¯·æ±‚URLä¸­ç»‘å®šçš„å ä½ç¬¦ã€‚é€šè¿‡@PathVariableå¯ä»¥å°†URLä¸­å ä½ç¬¦çš„å‚æ•°ç»‘å®šåˆ°controllerå¤„ç†æ–¹æ³•çš„å…¥å‚ä¸­ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/testPathVariable/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testPathVariable</span><span class="params">(<span class="meta">@PathVariable(value=&quot;id&quot;)</span> Integer id)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;testPathVariable:&quot;</span> + id);</span><br><span class="line">    <span class="keyword">return</span> SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨index.jspä¸­æˆ‘ä»¬æ·»åŠ ä¸€æ¡è¿æ¥ï¼Œç”¨æ¥è§¦å‘ä¸€ä¸ªè¯·æ±‚ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;springmvc/testPathVariable/1&quot;</span>&gt;</span>testPathVariable<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ï¼ˆ2ï¼‰ @RequestParam</p><p>è¯¥æ³¨è§£ä¹Ÿæ˜¯ç”¨æ¥è·å–è¯·æ±‚å‚æ•°çš„ï¼Œé‚£ä¹ˆè¯¥æ³¨è§£å’Œ@PathVariableæœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value=&quot;/testRequestParam&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRequestParam</span><span class="params">(<span class="meta">@RequestParam(value=&quot;username&quot;)</span> String username, <span class="meta">@RequestParam(value=&quot;age&quot;, required=false, defaultValue=&quot;0&quot;)</span> <span class="type">int</span> age)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;testRequestParam&quot;</span> + <span class="string">&quot; username:&quot;</span> + username + <span class="string">&quot; age:&quot;</span> +age);</span><br><span class="line">    <span class="keyword">return</span> SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨index.jspæ·»åŠ è¶…é“¾æ¥æ ‡ç­¾</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;springmvc/testRequestParam?username=jackie&amp;age=12&quot;</span>&gt;</span>testRequestParam<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>3ã€RESTé£æ ¼çš„è¯·æ±‚</p><p>åœ¨SpringMVCä¸­ä¸šåŠ¡æœ€å¤šçš„åº”è¯¥æ˜¯CRUDäº†</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value=&quot;/testRest/&#123;id&#125;&quot;, method=RequestMethod.PUT)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRestPut</span><span class="params">(<span class="meta">@PathVariable(value=&quot;id&quot;)</span> Integer id)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;test put:&quot;</span> + id);</span><br><span class="line">    <span class="keyword">return</span> SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line">     </span><br><span class="line"><span class="meta">@RequestMapping(value=&quot;/testRest/&#123;id&#125;&quot;, method=RequestMethod.DELETE)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRestDelete</span><span class="params">(<span class="meta">@PathVariable(value=&quot;id&quot;)</span> Integer id)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;test delete:&quot;</span> + id);</span><br><span class="line">    <span class="keyword">return</span> SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line">     </span><br><span class="line"><span class="meta">@RequestMapping(value=&quot;/testRest&quot;, method=RequestMethod.POST)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRest</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;test post&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line">     </span><br><span class="line"><span class="meta">@RequestMapping(value=&quot;/testRest/&#123;id&#125;&quot;, method=RequestMethod.GET)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">testRest</span><span class="params">(<span class="meta">@PathVariable(value=&quot;id&quot;)</span> Integer id)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;test get:&quot;</span> + id);</span><br><span class="line">    <span class="keyword">return</span> SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="135ã€å¦‚ä½•é˜²æ­¢è¡¨å•é‡å¤æäº¤"><a href="#135ã€å¦‚ä½•é˜²æ­¢è¡¨å•é‡å¤æäº¤" class="headerlink" title="135ã€å¦‚ä½•é˜²æ­¢è¡¨å•é‡å¤æäº¤"></a>135ã€å¦‚ä½•é˜²æ­¢è¡¨å•é‡å¤æäº¤</h3><p>1ã€é€šè¿‡JavaScriptå±è”½æäº¤æŒ‰é’®ï¼ˆä¸æ¨èï¼‰</p><p>2ã€ç»™æ•°æ®åº“å¢åŠ å”¯ä¸€é”®çº¦æŸï¼ˆç®€å•ç²—æš´ï¼‰</p><p>3ã€åˆ©ç”¨Sessioné˜²æ­¢è¡¨å•é‡å¤æäº¤ï¼ˆæ¨èï¼‰</p><p>4ã€ä½¿ç”¨AOPè‡ªå®šä¹‰åˆ‡å…¥å®ç°</p><h3 id="136ã€Springä¸­éƒ½åº”ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼"><a href="#136ã€Springä¸­éƒ½åº”ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼" class="headerlink" title="136ã€Springä¸­éƒ½åº”ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼"></a>136ã€Springä¸­éƒ½åº”ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼</h3><h4 id="1ã€ç®€å•å·¥å‚æ¨¡å¼"><a href="#1ã€ç®€å•å·¥å‚æ¨¡å¼" class="headerlink" title="1ã€ç®€å•å·¥å‚æ¨¡å¼"></a>1ã€ç®€å•å·¥å‚æ¨¡å¼</h4><p>ç®€å•å·¥å‚æ¨¡å¼çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå·¥å‚ç±»æ ¹æ®ä¼ å…¥çš„å‚æ•°ï¼ŒåŠ¨æ€çš„å†³å®šå®ä¾‹åŒ–å“ªä¸ªç±»ã€‚</p><p>Springä¸­çš„BeanFactoryå°±æ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„ä½“ç°ï¼Œæ ¹æ®ä¼ å…¥ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†æ¥è·å¾—beanå¯¹è±¡ã€‚</p><h4 id="2ã€å·¥å‚æ–¹æ³•æ¨¡å¼"><a href="#2ã€å·¥å‚æ–¹æ³•æ¨¡å¼" class="headerlink" title="2ã€å·¥å‚æ–¹æ³•æ¨¡å¼"></a>2ã€å·¥å‚æ–¹æ³•æ¨¡å¼</h4><p>åº”ç”¨ç¨‹åºå°†å¯¹è±¡çš„åˆ›å»ºåŠåˆå§‹åŒ–èŒè´£äº¤ç»™å·¥å‚å¯¹è±¡ï¼Œå·¥å‚Beanã€‚</p><p>å®šä¹‰å·¥å‚æ–¹æ³•ï¼Œç„¶åé€šè¿‡config.xmlé…ç½®æ–‡ä»¶ï¼Œå°†å…¶çº³å…¥Springå®¹å™¨æ¥ç®¡ç†ï¼Œéœ€è¦é€šè¿‡factory-methodæŒ‡å®šé™æ€æ–¹æ³•åç§°ã€‚</p><h4 id="3ã€å•ä¾‹æ¨¡å¼"><a href="#3ã€å•ä¾‹æ¨¡å¼" class="headerlink" title="3ã€å•ä¾‹æ¨¡å¼"></a>3ã€å•ä¾‹æ¨¡å¼</h4><p>Springç”¨çš„æ˜¯åŒé‡åˆ¤æ–­åŠ é”çš„å•ä¾‹æ¨¡å¼ï¼Œé€šè¿‡getSingletonæ–¹æ³•ä»singletonObjectsä¸­è·å–beanã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Return the (raw) singleton object registered under the given name.</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;Checks already instantiated singletons and also allows for an early</span></span><br><span class="line"><span class="comment"> * reference to a currently created singleton (resolving a circular reference).</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> beanName the name of the bean to look for</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> allowEarlyReference whether early references should be created or not</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the registered singleton object, or &#123;<span class="doctag">@code</span> null&#125; if none found</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">protected</span> Object <span class="title function_">getSingleton</span><span class="params">(String beanName, <span class="type">boolean</span> allowEarlyReference)</span> &#123;</span><br><span class="line">    <span class="type">Object</span> <span class="variable">singletonObject</span> <span class="operator">=</span> <span class="built_in">this</span>.singletonObjects.get(beanName);</span><br><span class="line">    <span class="keyword">if</span> (singletonObject == <span class="literal">null</span> &amp;&amp; isSingletonCurrentlyInCreation(beanName)) &#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="built_in">this</span>.singletonObjects) &#123;</span><br><span class="line">            singletonObject = <span class="built_in">this</span>.earlySingletonObjects.get(beanName);</span><br><span class="line">            <span class="keyword">if</span> (singletonObject == <span class="literal">null</span> &amp;&amp; allowEarlyReference) &#123;</span><br><span class="line">                ObjectFactory&lt;?&gt; singletonFactory = <span class="built_in">this</span>.singletonFactories.get(beanName);</span><br><span class="line">                <span class="keyword">if</span> (singletonFactory != <span class="literal">null</span>) &#123;</span><br><span class="line">                    singletonObject = singletonFactory.getObject();</span><br><span class="line">                    <span class="built_in">this</span>.earlySingletonObjects.put(beanName, singletonObject);</span><br><span class="line">                    <span class="built_in">this</span>.singletonFactories.remove(beanName);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (singletonObject != NULL_OBJECT ? singletonObject : <span class="literal">null</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4ã€ä»£ç†æ¨¡å¼"><a href="#4ã€ä»£ç†æ¨¡å¼" class="headerlink" title="4ã€ä»£ç†æ¨¡å¼"></a>4ã€ä»£ç†æ¨¡å¼</h4><p>Springçš„AOPä¸­ï¼Œä½¿ç”¨çš„Adviceï¼ˆé€šçŸ¥ï¼‰æ¥å¢å¼ºè¢«ä»£ç†ç±»çš„åŠŸèƒ½ã€‚Springå®ç°AOPåŠŸèƒ½çš„åŸç†å°±æ˜¯ä»£ç†æ¨¡å¼ï¼ˆâ‘  JDKåŠ¨æ€ä»£ç†ï¼Œâ‘¡ CGLIBå­—èŠ‚ç ç”ŸæˆæŠ€æœ¯ä»£ç†ã€‚ï¼‰å¯¹ç±»è¿›è¡Œæ–¹æ³•çº§åˆ«çš„åˆ‡é¢å¢å¼ºã€‚</p><h4 id="5ã€è£…é¥°å™¨æ¨¡å¼"><a href="#5ã€è£…é¥°å™¨æ¨¡å¼" class="headerlink" title="5ã€è£…é¥°å™¨æ¨¡å¼"></a>5ã€è£…é¥°å™¨æ¨¡å¼</h4><p>è£…é¥°å™¨æ¨¡å¼ï¼šåŠ¨æ€çš„ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„åŠŸèƒ½ã€‚</p><p>Springçš„ApplicationContextä¸­é…ç½®æ‰€æœ‰çš„DataSourceã€‚è¿™äº›DataSourceå¯èƒ½æ˜¯ä¸åŒçš„æ•°æ®åº“ï¼Œç„¶åSessionFactoryæ ¹æ®ç”¨æˆ·çš„æ¯æ¬¡è¯·æ±‚ï¼Œå°†DataSourceè®¾ç½®æˆä¸åŒçš„æ•°æ®æºï¼Œä»¥è¾¾åˆ°åˆ‡æ¢æ•°æ®æºçš„ç›®çš„ã€‚</p><p>åœ¨Springä¸­æœ‰ä¸¤ç§è¡¨ç°ï¼š</p><p>ä¸€ç§æ˜¯ç±»åä¸­å«æœ‰Wrapperï¼Œå¦ä¸€ç§æ˜¯ç±»åä¸­å«æœ‰Decoratorã€‚</p><h4 id="6ã€è§‚å¯Ÿè€…æ¨¡å¼"><a href="#6ã€è§‚å¯Ÿè€…æ¨¡å¼" class="headerlink" title="6ã€è§‚å¯Ÿè€…æ¨¡å¼"></a>6ã€è§‚å¯Ÿè€…æ¨¡å¼</h4><p>å®šä¹‰å¯¹è±¡é—´çš„ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚</p><p>Springä¸­è§‚å¯Ÿè€…æ¨¡å¼ä¸€èˆ¬ç”¨åœ¨listenerçš„å®ç°ã€‚</p><h4 id="7ã€ç­–ç•¥æ¨¡å¼"><a href="#7ã€ç­–ç•¥æ¨¡å¼" class="headerlink" title="7ã€ç­–ç•¥æ¨¡å¼"></a>7ã€ç­–ç•¥æ¨¡å¼</h4><p>ç­–ç•¥æ¨¡å¼æ˜¯è¡Œä¸ºæ€§æ¨¡å¼ï¼Œè°ƒç”¨ä¸åŒçš„æ–¹æ³•ï¼Œé€‚åº”è¡Œä¸ºçš„å˜åŒ– ï¼Œå¼ºè°ƒçˆ¶ç±»çš„è°ƒç”¨å­ç±»çš„ç‰¹æ€§ ã€‚</p><p>getHandleræ˜¯HandlerMappingæ¥å£ä¸­çš„å”¯ä¸€æ–¹æ³•ï¼Œç”¨äºæ ¹æ®è¯·æ±‚æ‰¾åˆ°åŒ¹é…çš„å¤„ç†å™¨ã€‚</p><h4 id="8ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼"><a href="#8ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼" class="headerlink" title="8ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼"></a>8ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼</h4><p>Spring JdbcTemplateçš„queryæ–¹æ³•æ€»ä½“ç»“æ„æ˜¯ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•+å›è°ƒå‡½æ•°ï¼Œqueryæ–¹æ³•ä¸­è°ƒç”¨çš„execute()æ˜¯ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•ï¼Œè€Œé¢„æœŸçš„å›è°ƒdoInStatement(Statement state)æ–¹æ³•ä¹Ÿæ˜¯ä¸€ä¸ªæ¨¡æ¿æ–¹æ³•ã€‚</p><h3 id="137ã€è¯·ä¸¾ä¾‹è¯´æ˜å¦‚ä½•åœ¨-Spring-ä¸­æ³¨å…¥ä¸€ä¸ª-Java-Collectionï¼Ÿ"><a href="#137ã€è¯·ä¸¾ä¾‹è¯´æ˜å¦‚ä½•åœ¨-Spring-ä¸­æ³¨å…¥ä¸€ä¸ª-Java-Collectionï¼Ÿ" class="headerlink" title="137ã€è¯·ä¸¾ä¾‹è¯´æ˜å¦‚ä½•åœ¨ Spring ä¸­æ³¨å…¥ä¸€ä¸ª Java Collectionï¼Ÿ"></a>137ã€è¯·ä¸¾ä¾‹è¯´æ˜å¦‚ä½•åœ¨ Spring ä¸­æ³¨å…¥ä¸€ä¸ª Java Collectionï¼Ÿ</h3><p>Springæ³¨å…¥æœ‰å››ç§æ–¹å¼:</p><ol><li>setæ³¨å…¥ï¼›</li><li>æ„é€ å™¨æ³¨å…¥ï¼›</li><li>åŸºäºæ³¨è§£çš„æ³¨å…¥ï¼›</li><li>xmlé…ç½®æ–‡ä»¶æ³¨å…¥ï¼›</li></ol><p>æƒ³è¦æ³¨å…¥java collectionï¼Œå°±æ˜¯æ³¨å…¥é›†åˆç±»ï¼š</p><ol><li>list</li><li>set</li><li>map</li><li>propsï¼šè¯¥æ ‡ç­¾æ”¯æŒæ³¨å…¥é”®å’Œå€¼éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„é”®å€¼å¯¹ã€‚</li></ol><p>listå’Œsetéƒ½ä½¿ç”¨valueæ ‡ç­¾ï¼›mapä½¿ç”¨entryæ ‡ç­¾ï¼›propsä½¿ç”¨propæ ‡ç­¾ï¼›</p><h3 id="138ã€mybatis-ä¸­-å’Œ-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#138ã€mybatis-ä¸­-å’Œ-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="138ã€mybatis ä¸­ #{}å’Œ ${}çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>138ã€mybatis ä¸­ #{}å’Œ ${}çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ol><li><h1 id="å¸¦å¼•å·ï¼Œ-ä¸å¸¦å¼•å·ï¼›"><a href="#å¸¦å¼•å·ï¼Œ-ä¸å¸¦å¼•å·ï¼›" class="headerlink" title="{}å¸¦å¼•å·ï¼Œ${}ä¸å¸¦å¼•å·ï¼›"></a>{}å¸¦å¼•å·ï¼Œ${}ä¸å¸¦å¼•å·ï¼›</h1></li><li><h1 id="å¯ä»¥é˜²æ­¢SQLæ³¨å…¥ï¼›"><a href="#å¯ä»¥é˜²æ­¢SQLæ³¨å…¥ï¼›" class="headerlink" title="{}å¯ä»¥é˜²æ­¢SQLæ³¨å…¥ï¼›"></a>{}å¯ä»¥é˜²æ­¢SQLæ³¨å…¥ï¼›</h1></li><li>${}å¸¸ç”¨äºæ•°æ®åº“è¡¨åã€order byå­å¥ï¼›</li><li>ä¸€èˆ¬èƒ½ç”¨#{}å°±ä¸è¦ä½¿ç”¨${}ï¼›</li></ol><h3 id="139ã€mybatis-æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå»¶è¿ŸåŠ è½½çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#139ã€mybatis-æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå»¶è¿ŸåŠ è½½çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="139ã€mybatis æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå»¶è¿ŸåŠ è½½çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>139ã€mybatis æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿå»¶è¿ŸåŠ è½½çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h3><h4 id="1ã€mybatis-æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿ"><a href="#1ã€mybatis-æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿ" class="headerlink" title="1ã€mybatis æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿ"></a>1ã€mybatis æ˜¯å¦æ”¯æŒå»¶è¿ŸåŠ è½½ï¼Ÿ</h4><p>å»¶è¿ŸåŠ è½½å…¶å®å°±æ˜¯è®²æ•°æ®åŠ è½½æ—¶æœºæ¨è¿Ÿï¼Œæ¯”å¦‚æ¨è¿ŸåµŒå¥—æŸ¥è¯¢çš„æ—¶æœºã€‚</p><p>å»¶è¿ŸåŠ è½½å¯ä»¥å®ç°å…ˆæŸ¥è¯¢ä¸»è¡¨ï¼ŒæŒ‰éœ€å®æ—¶åšå…³è”æŸ¥è¯¢ï¼Œè¿”å›å…³è”è¡¨ç»“æœé›†ï¼Œä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†æ•ˆç‡ã€‚</p><p>mybatisä»…æ”¯æŒå…³è”å¯¹è±¡associationå’Œå…³è”é›†åˆå¯¹è±¡collectionçš„å»¶è¿ŸåŠ è½½ï¼Œassociationæ˜¯ä¸€å¯¹ä¸€ï¼Œcollectionæ˜¯ä¸€å¯¹å¤šæŸ¥è¯¢ï¼Œåœ¨mybatisé…ç½®æ–‡ä»¶ä¸­å¯ä»¥é…ç½®lazyloadingEnable=true/falseã€‚</p><h4 id="2ã€å»¶è¿ŸåŠ è½½çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#2ã€å»¶è¿ŸåŠ è½½çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="2ã€å»¶è¿ŸåŠ è½½çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>2ã€å»¶è¿ŸåŠ è½½çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>ä½¿ç”¨CGLIBä¸ºç›®æ ‡å¯¹è±¡å»ºç«‹ä»£ç†å¯¹è±¡ï¼Œå½“è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•æ—¶è¿›å…¥æ‹¦æˆªå™¨æ–¹æ³•ã€‚</p><p>æ¯”å¦‚è°ƒç”¨a.getB().getName()ï¼Œæ‹¦æˆªå™¨æ–¹æ³•invoke()å‘ç°a.getB()ä¸ºnullï¼Œä¼šå•ç‹¬å‘é€äº‹å…ˆå‡†å¤‡å¥½çš„æŸ¥è¯¢å…³è”Bå¯¹è±¡çš„sqlè¯­å¥ï¼ŒæŠŠBæŸ¥è¯¢å‡ºæ¥ç„¶åè°ƒç”¨a.setB(b)ï¼Œä¹Ÿæ˜¯açš„å¯¹è±¡çš„å±æ€§bå°±æœ‰å€¼äº†ï¼Œç„¶åè°ƒç”¨getName()ï¼Œè¿™å°±æ˜¯å»¶è¿ŸåŠ è½½çš„åŸç†ã€‚</p><h3 id="140ã€è¯´ä¸€ä¸‹-mybatis-çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼Ÿ"><a href="#140ã€è¯´ä¸€ä¸‹-mybatis-çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼Ÿ" class="headerlink" title="140ã€è¯´ä¸€ä¸‹ mybatis çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼Ÿ"></a>140ã€è¯´ä¸€ä¸‹ mybatis çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼Ÿ</h3><p>ä¸€çº§ç¼“å­˜æ˜¯sessionçº§åˆ«çš„ç¼“å­˜ï¼Œé»˜è®¤å¼€å¯ï¼Œå½“æŸ¥è¯¢ä¸€æ¬¡æ•°æ®åº“æ—¶ï¼Œå¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œç¼“å­˜ï¼Œå¦‚æœä¹‹åçš„æŸ¥è¯¢åœ¨ä¸€çº§ç¼“å­˜ä¸­å­˜åœ¨ï¼Œåˆ™æ— éœ€å†è®¿é—®æ•°æ®åº“ï¼›</p><p>äºŒçº§ç¼“å­˜æ˜¯sessionFactoryçº§åˆ«çš„ç¼“å­˜ï¼Œéœ€è¦é…ç½®æ‰ä¼šå¼€å¯ã€‚å½“è¿›è¡Œsqlè¯­å¥æŸ¥è¯¢æ—¶ï¼Œå…ˆæŸ¥çœ‹äºŒçº§ç¼“å­˜ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œè®¿é—®ä¸€çº§ç¼“å­˜ï¼Œé™ä½æ•°æ®åº“è®¿é—®å‹åŠ›ã€‚</p><h3 id="141ã€mybatis-æœ‰å“ªäº›æ‰§è¡Œå™¨ï¼ˆExecutorï¼‰ï¼Ÿ"><a href="#141ã€mybatis-æœ‰å“ªäº›æ‰§è¡Œå™¨ï¼ˆExecutorï¼‰ï¼Ÿ" class="headerlink" title="141ã€mybatis æœ‰å“ªäº›æ‰§è¡Œå™¨ï¼ˆExecutorï¼‰ï¼Ÿ"></a>141ã€mybatis æœ‰å“ªäº›æ‰§è¡Œå™¨ï¼ˆExecutorï¼‰ï¼Ÿ</h3><p>1ã€mybatisæœ‰ä¸‰ç§åŸºæœ¬çš„Executoræ‰§è¡Œå™¨ï¼š</p><p>ï¼ˆ1ï¼‰ã€SimpleExecutor</p><p>æ¯æ‰§è¡Œä¸€æ¬¡updateæˆ–selectï¼Œå°±å¼€å¯ä¸€ä¸ªStatementå¯¹è±¡ï¼Œç”¨å®Œç«‹åˆ»å…³é—­Statementå¯¹è±¡ã€‚</p><p>ï¼ˆ2ï¼‰ã€PauseExecutor</p><p>æ‰§è¡Œupdateæˆ–selectï¼Œä»¥sqlåšä¸ºkeyæŸ¥æ‰¾Statementå¯¹è±¡ï¼Œå­˜åœ¨å°±ä½¿ç”¨ï¼Œä¸å­˜åœ¨å°±åˆ›å»ºï¼Œç”¨å®Œåï¼Œä¸å…³é—­Statementå¯¹è±¡ï¼Œè€Œä¸”æ”¾ç½®äºMapå†…ï¼Œä¾›ä¸‹ä¸€æ¬¡ä½¿ç”¨ã€‚ç®€è¨€ä¹‹ï¼Œå°±æ˜¯é‡å¤ä½¿ç”¨Statementå¯¹è±¡ã€‚</p><p>ï¼ˆ3ï¼‰ã€BatchExecutor</p><p>æ‰§è¡Œupdateï¼Œå°†æ‰€æœ‰sqlé€šè¿‡addBatch()éƒ½æ·»åŠ åˆ°æ‰¹å¤„ç†ä¸­ï¼Œç­‰å¾…ç»Ÿä¸€æ‰§è¡ŒexecuteBatch()ï¼Œå®ƒç¼“å­˜äº†å¤šä¸ªStatementå¯¹è±¡ï¼Œæ¯ä¸ªStatementå¯¹è±¡éƒ½æ˜¯addBatch()å®Œæ¯•åï¼Œç­‰å¾…é€ä¸€æ‰§è¡ŒexecuteBatch()æ‰¹å¤„ç†ã€‚ä¸JDBCæ‰¹å¤„ç†ç›¸åŒã€‚</p><p>2ã€ä½œç”¨èŒƒå›´ï¼š</p><p>Executorçš„è¿™äº›ç‰¹ç‚¹ï¼Œéƒ½ä¸¥æ ¼é™åˆ¶åœ¨SqlSessionç”Ÿå‘½å‘¨æœŸèŒƒå›´å†…ã€‚</p><p>3ã€Mybatisä¸­å¦‚ä½•æŒ‡å®šä½¿ç”¨å“ªä¸€ç§Executoræ‰§è¡Œå™¨ï¼Ÿ</p><p>åœ¨mybatisçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥æŒ‡å®šé»˜è®¤çš„ExecutorTypeæ‰§è¡Œå™¨ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨ç»™DefaultSqlSessionFactoryçš„åˆ›å»ºSqlSessionçš„æ–¹æ³•ä¼ é€’ExecutorTypeç±»å‹å‚æ•°ã€‚</p><h3 id="142ã€mybatis-å’Œ-hibernate-çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ"><a href="#142ã€mybatis-å’Œ-hibernate-çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="142ã€mybatis å’Œ hibernate çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ"></a>142ã€mybatis å’Œ hibernate çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ</h3><p>1ã€ä¸¤è€…æœ€å¤§çš„åŒºåˆ«</p><p>é’ˆå¯¹ç®€å•é€»è¾‘ï¼Œéƒ½æœ‰å¯¹åº”çš„ä»£ç ç”Ÿæˆå·¥å…·ï¼Œå¯ä»¥ç”Ÿæˆç®€å•åŸºæœ¬çš„daoå±‚æ–¹æ³•ï¼›</p><p>é’ˆå¯¹é«˜çº§æŸ¥è¯¢ï¼Œmybatisè¦æ‰‹åŠ¨ç¼–å†™sqlè¯­å¥å’ŒresultMapï¼Œè€Œhibernateæœ‰è‰¯å¥½çš„æ˜ å°„æœºåˆ¶ï¼›</p><p>2ã€å¼€å‘éš¾åº¦å¯¹æ¯”</p><p>hibernate &gt; mybatis </p><p>3ã€æ—¥å¿—ç»Ÿè®¡</p><p>hibernateæœ‰è‡ªå·±çš„æ—¥å¿—ç»Ÿè®¡åŠŸèƒ½ï¼Œè€Œmybatiséœ€è¦å€ŸåŠ©log4jæ¥è®°å½•æ—¥å¿—ã€‚</p><p>4ã€æ•°æ®åº“æ‰©å±•æ¯”è¾ƒ</p><p>hibernate &gt; mybatis </p><p>5ã€ç¼“å­˜æœºåˆ¶æ¯”è¾ƒ</p><p>å› ä¸ºhibernateå¯¹æŸ¥è¯¢å¯¹è±¡æœ‰è‰¯å¥½çš„ç®¡ç†æœºåˆ¶ï¼Œç”¨æˆ·æ— éœ€å…³å¿ƒsqlï¼Œæ‰€ä»¥ä½¿ç”¨äºŒçº§ç¼“å­˜å¦‚æœå‡ºç°è„æ•°æ®ï¼Œç³»ç»Ÿä¼šæŠ¥é”™ã€‚</p><p>è€Œmybatisï¼Œå¦‚æœä¸èƒ½è·å–æœ€æ–°æ•°æ®ï¼Œåº”è¯¥é¿å…ç¼“å­˜çš„ä½¿ç”¨ï¼Œè„æ•°æ®çš„å‡ºç°ä¼šç»™ç³»ç»Ÿçš„æ­£å¸¸è¿è¡Œå¸¦æ¥å¾ˆå¤§çš„éšæ‚£ã€‚</p><p>6ã€å¦‚ä½•é€‰æ‹©</p><p>mybatiséœ€è¦ç¼–å†™sqlå’Œæ˜ å°„è§„åˆ™ï¼Œå·¥ä½œé‡å¤§äºhibernateï¼›<br>mybatisæ”¯æŒçš„å·¥å…·ä¹Ÿæœ‰é™ï¼Œä¸èƒ½åƒhibernateé‚£æ ·æœ‰è®¸å¤šæ’ä»¶å¯ä»¥å¸®åŠ©ç”Ÿæˆæ˜ å°„ä»£ç å’Œå…³è”å…³ç³»ï¼›<br>å¯¹äºæ€§èƒ½è¦æ±‚ä¸å¤ªè‹›åˆ»çš„ç³»ç»Ÿï¼Œæ¯”å¦‚ç®¡ç†ç³»ç»Ÿã€ERPç­‰æ¨èhibernateï¼›<br>å¯¹äºæ€§èƒ½è¦æ±‚é«˜ã€å“åº”å¿«ã€çµæ´»çš„ç³»ç»Ÿï¼Œæ¯”å¦‚ç”µå•†ç³»ç»Ÿï¼Œæ¨èä½¿ç”¨mybatisï¼›</p><h3 id="143ã€myBatisæŸ¥è¯¢å¤šä¸ªidã€myBatiså¸¸ç”¨å±æ€§"><a href="#143ã€myBatisæŸ¥è¯¢å¤šä¸ªidã€myBatiså¸¸ç”¨å±æ€§" class="headerlink" title="143ã€myBatisæŸ¥è¯¢å¤šä¸ªidã€myBatiså¸¸ç”¨å±æ€§"></a>143ã€myBatisæŸ¥è¯¢å¤šä¸ªidã€myBatiså¸¸ç”¨å±æ€§</h3><p>myBatisæŸ¥è¯¢å¤šä¸ªidï¼ˆæˆ‘å±…ç„¶å›ç­”ç”¨å¯¹è±¡æ¥ä¼ é€’â€¦ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Page&lt;UserPoJo&gt;  <span class="title function_">getUserListByIds</span><span class="params">(<span class="meta">@Param(&quot;ids&quot;)</span> List&lt;Integer&gt; ids)</span>;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--æ ¹æ®idåˆ—è¡¨æ‰¹é‡æŸ¥è¯¢user--&gt;</span><br><span class="line">&lt;select id=<span class="string">&quot;getUserListByIds&quot;</span> resultType=<span class="string">&quot;com.guor.UserPoJo&quot;</span>&gt;</span><br><span class="line">    select * from student</span><br><span class="line">    where id in</span><br><span class="line">    &lt;foreach collection=<span class="string">&quot;ids&quot;</span> item=<span class="string">&quot;userid&quot;</span> open=<span class="string">&quot;(&quot;</span> close=<span class="string">&quot;)&quot;</span> separator=<span class="string">&quot;,&quot;</span>&gt;</span><br><span class="line">        #&#123;userid&#125;</span><br><span class="line">    &lt;/foreach&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure><h3 id="144ã€mybatisä¸€çº§ç¼“å­˜ã€äºŒçº§ç¼“å­˜"><a href="#144ã€mybatisä¸€çº§ç¼“å­˜ã€äºŒçº§ç¼“å­˜" class="headerlink" title="144ã€mybatisä¸€çº§ç¼“å­˜ã€äºŒçº§ç¼“å­˜"></a>144ã€mybatisä¸€çº§ç¼“å­˜ã€äºŒçº§ç¼“å­˜</h3><p>1ã€ä¸€çº§ç¼“å­˜ï¼šæŒ‡çš„æ˜¯mybatisä¸­sqlSessionå¯¹è±¡çš„ç¼“å­˜ï¼Œå½“æˆ‘ä»¬æ‰§è¡ŒæŸ¥è¯¢ä»¥åï¼ŒæŸ¥è¯¢çš„ç»“æœä¼šåŒæ—¶å­˜å…¥sqlSessionä¸­ï¼Œå†æ¬¡æŸ¥è¯¢çš„æ—¶å€™ï¼Œå…ˆå»sqlSessionä¸­æŸ¥è¯¢ï¼Œæœ‰çš„è¯ç›´æ¥æ‹¿å‡ºï¼Œå½“sqlSessionæ¶ˆå¤±æ—¶ï¼Œmybatisçš„ä¸€çº§ç¼“å­˜ä¹Ÿå°±æ¶ˆå¤±äº†ï¼Œå½“è°ƒç”¨sqlSessionçš„ä¿®æ”¹ã€æ·»åŠ ã€åˆ é™¤ã€commit()ã€close()ç­‰æ–¹æ³•æ—¶ï¼Œä¼šæ¸…ç©ºä¸€çº§ç¼“å­˜ã€‚</p><p>2ã€äºŒçº§ç¼“å­˜ï¼šæŒ‡çš„æ˜¯mybatisä¸­çš„sqlSessionFactoryå¯¹è±¡çš„ç¼“å­˜ï¼Œç”±åŒä¸€ä¸ªsqlSessionFactoryå¯¹è±¡åˆ›å»ºçš„sqlSessionå…±äº«å…¶ç¼“å­˜ï¼Œä½†æ˜¯å…¶ä¸­ç¼“å­˜çš„æ˜¯æ•°æ®è€Œä¸æ˜¯å¯¹è±¡ã€‚å½“å‘½ä¸­äºŒçº§ç¼“å­˜æ—¶ï¼Œé€šè¿‡å­˜å‚¨çš„æ•°æ®æ„é€ æˆå¯¹è±¡è¿”å›ã€‚æŸ¥è¯¢æ•°æ®çš„æ—¶å€™ï¼ŒæŸ¥è¯¢çš„æµç¨‹æ˜¯äºŒçº§ç¼“å­˜ &gt; ä¸€çº§ç¼“å­˜ &gt; æ•°æ®åº“ã€‚</p><p>3ã€å¦‚æœå¼€å¯äº†äºŒçº§ç¼“å­˜ï¼ŒsqlSessionè¿›è¡Œclose()åï¼Œæ‰ä¼šæŠŠsqlSessionä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®æ·»åŠ åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼Œä¸ºäº†å°†ç¼“å­˜æ•°æ®å–å‡ºæ‰§è¡Œååºåˆ—åŒ–ï¼Œè¿˜éœ€è¦å°†è¦ç¼“å­˜çš„pojoå®ç°Serializableæ¥å£ï¼Œå› ä¸ºäºŒçº§ç¼“å­˜æ•°æ®å­˜å‚¨ä»‹è´¨å¤šç§å¤šæ ·ï¼Œä¸ä¸€å®šåªå­˜åœ¨å†…å­˜ä¸­ï¼Œä¹Ÿå¯èƒ½å­˜åœ¨ç¡¬ç›˜ä¸­ã€‚</p><p>4ã€mybatisæ¡†æ¶ä¸»è¦æ˜¯å›´ç»•sqlSessionFactoryè¿›è¡Œçš„ï¼Œå…·ä½“çš„æ­¥éª¤ï¼š</p><ol><li>å®šä¹‰ä¸€ä¸ªconfigurationå¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«æ•°æ®æºã€äº‹åŠ¡ã€mapperæ–‡ä»¶èµ„æºä»¥åŠå½±å“æ•°æ®åº“è¡Œä¸ºå±æ€§è®¾ç½®settingsã€‚</li><li>é€šè¿‡é…ç½®å¯¹è±¡ï¼Œåˆ™å¯ä»¥åˆ›å»ºä¸€ä¸ªsqlSessionFactoryBuilderå¯¹è±¡ã€‚</li><li>é€šè¿‡sqlSessionFactoryBuilderè·å¾—sqlSessionFactoryå®ä¾‹ã€‚</li><li>é€šè¿‡sqlSessionFactoryå®ä¾‹åˆ›å»ºqlSessionå®ä¾‹ï¼Œé€šè¿‡sqlSessionå¯¹æ•°æ®åº“è¿›è¡Œæ“ä½œã€‚</li></ol><p>5ã€ä»£ç å®ä¾‹</p><p>mybatis-config.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span>  </span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span>  </span></span><br><span class="line"><span class="meta"><span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span>   </span><br><span class="line">    <span class="comment">&lt;!-- åŠ è½½ç±»è·¯å¾„ä¸‹çš„å±æ€§æ–‡ä»¶ --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>/&gt;</span>  </span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è®¾ç½®ç±»å‹åˆ«å --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.atapathy.pojo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è®¾ç½®ä¸€ä¸ªé»˜è®¤çš„è¿æ¥ç¯å¢ƒä¿¡æ¯ --&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;mysql_developer&quot;</span>&gt;</span>  </span><br><span class="line">     </span><br><span class="line">        <span class="comment">&lt;!-- è¿æ¥ç¯å¢ƒä¿¡æ¯ï¼Œå–ä¸€ä¸ªä»»æ„å”¯ä¸€çš„åå­— --&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;mysql_developer&quot;</span>&gt;</span>  </span><br><span class="line">            <span class="comment">&lt;!-- mybatisä½¿ç”¨jdbcäº‹åŠ¡ç®¡ç†æ–¹å¼ --&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;jdbc&quot;</span>/&gt;</span>  </span><br><span class="line">            <span class="comment">&lt;!-- mybatisä½¿ç”¨è¿æ¥æ± æ–¹å¼æ¥è·å–è¿æ¥ --&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;pooled&quot;</span>&gt;</span>  </span><br><span class="line">                <span class="comment">&lt;!-- é…ç½®ä¸æ•°æ®åº“äº¤äº’çš„4ä¸ªå¿…è¦å±æ€§ --&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;mysql.driver&#125;&quot;</span>/&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;mysql.url&#125;&quot;</span>/&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;mysql.username&#125;&quot;</span>/&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;mysql.password&#125;&quot;</span>/&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span>  </span><br><span class="line">     </span><br><span class="line">        <span class="comment">&lt;!-- è¿æ¥ç¯å¢ƒä¿¡æ¯ï¼Œå–ä¸€ä¸ªä»»æ„å”¯ä¸€çš„åå­— --&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;oracle_developer&quot;</span>&gt;</span>  </span><br><span class="line">            <span class="comment">&lt;!-- mybatisä½¿ç”¨jdbcäº‹åŠ¡ç®¡ç†æ–¹å¼ --&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;jdbc&quot;</span>/&gt;</span>  </span><br><span class="line">            <span class="comment">&lt;!-- mybatisä½¿ç”¨è¿æ¥æ± æ–¹å¼æ¥è·å–è¿æ¥ --&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;pooled&quot;</span>&gt;</span>  </span><br><span class="line">                <span class="comment">&lt;!-- é…ç½®ä¸æ•°æ®åº“äº¤äº’çš„4ä¸ªå¿…è¦å±æ€§ --&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;oracle.driver&#125;&quot;</span>/&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;oracle.url&#125;&quot;</span>/&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;oracle.username&#125;&quot;</span>/&gt;</span>  </span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;oracle.password&#125;&quot;</span>/&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span>  </span><br><span class="line">     </span><br><span class="line">    <span class="comment">&lt;!-- åŠ è½½æ˜ å°„æ–‡ä»¶--&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;cn/itcast/javaee/mybatis/app14/StudentMapper.xml&quot;</span>/&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span>  </span><br></pre></td></tr></table></figure><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//è¯»å–mybatis-config.xmlæ–‡ä»¶</span></span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">resourceAsStream</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">            <span class="comment">//åˆå§‹åŒ–mybatis,åˆ›å»ºSqlSessionFactoryç±»çš„å®ä¾‹</span></span><br><span class="line">            <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span>  <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(resourceAsStream);</span><br><span class="line">            <span class="comment">//åˆ›å»ºsessionå®ä¾‹</span></span><br><span class="line">            <span class="type">SqlSession</span> <span class="variable">session</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * æ¥ä¸‹æ¥åœ¨è¿™é‡Œåšå¾ˆå¤šäº‹æƒ…,åˆ°ç›®å‰ä¸ºæ­¢,ç›®çš„å·²ç»è¾¾åˆ°å¾—åˆ°äº†SqlSessionå¯¹è±¡.é€šè¿‡è°ƒç”¨SqlSessioné‡Œé¢çš„æ–¹æ³•,</span></span><br><span class="line"><span class="comment">             * å¯ä»¥æµ‹è¯•MyBatiså’ŒDaoå±‚æ¥å£æ–¹æ³•ä¹‹é—´çš„æ­£ç¡®æ€§,å½“ç„¶ä¹Ÿå¯ä»¥åšåˆ«çš„å¾ˆå¤šäº‹æƒ…,åœ¨è¿™é‡Œå°±ä¸åˆ—ä¸¾äº†</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="comment">//æ’å…¥æ•°æ®</span></span><br><span class="line">            <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">            user.setC_password(<span class="string">&quot;123&quot;</span>);</span><br><span class="line">            user.setC_username(<span class="string">&quot;123&quot;</span>);</span><br><span class="line">            user.setC_salt(<span class="string">&quot;123&quot;</span>);</span><br><span class="line">            <span class="comment">//ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ–¹æ³•çš„å®Œå…¨é™å®šå:ä½ç½®ä¿¡æ¯+æ˜ å°„æ–‡ä»¶å½“ä¸­çš„id</span></span><br><span class="line">            session.insert(<span class="string">&quot;com.cn.dao.UserMapping.insertUserInformation&quot;</span>, user);</span><br><span class="line">            <span class="comment">//æäº¤äº‹åŠ¡</span></span><br><span class="line">            session.commit();</span><br><span class="line">            <span class="comment">//å…³é—­session</span></span><br><span class="line">            session.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="145ã€mybatiså¦‚ä½•é˜²æ­¢sqlæ³¨å…¥"><a href="#145ã€mybatiså¦‚ä½•é˜²æ­¢sqlæ³¨å…¥" class="headerlink" title="145ã€mybatiså¦‚ä½•é˜²æ­¢sqlæ³¨å…¥"></a>145ã€mybatiså¦‚ä½•é˜²æ­¢sqlæ³¨å…¥</h3><p>æ³¨æ„ï¼šä½†å‡¡æ˜¯sqlæ³¨å…¥æ¼æ´çš„ç¨‹åºï¼Œéƒ½æ˜¯å› ä¸ºç¨‹åºè¦æ¥å—æ¥è‡ªå®¢æˆ·ç«¯ç”¨æˆ·è¾“å…¥çš„å˜é‡æˆ–URLä¼ é€’çš„å‚æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªå˜é‡æˆ–å‚æ•°æ˜¯ç»„æˆsqlè¯­å¥çš„ä¸€éƒ¨åˆ†ï¼Œå¯¹äºç”¨æˆ·è¾“å…¥çš„å†…å®¹æˆ–ä¼ é€’çš„å‚æ•°ï¼Œæˆ‘ä»¬åº”è¯¥è¦æ—¶åˆ»ä¿æŒè­¦æƒ•ï¼Œè¿™æ˜¯å®‰å…¨é¢†åŸŸé‡Œçš„ã€å¤–éƒ¨æ•°æ®ä¸å¯ä¿¡ä»»ã€‘çš„åŸåˆ™ï¼Œçºµè§‚webå®‰å…¨é¢†åŸŸçš„å„ç§æ”»å‡»æ–¹å¼ï¼Œå¤§å¤šæ•°éƒ½æ˜¯å› ä¸ºå¼€å‘è€…è¿åäº†è¿™ä¸ªåŸåˆ™è€Œå¯¼è‡´çš„ï¼Œæ‰€ä»¥è‡ªç„¶èƒ½æƒ³åˆ°ï¼Œå°±æ˜¯å˜é‡çš„æ£€æµ‹ã€è¿‡æ»¤ã€éªŒè¯ä¸‹æ‰‹ï¼Œç¡®ä¿å˜é‡æ˜¯å¼€å‘è€…æ‰€é¢„æƒ³çš„ã€‚</p><p>1ã€æ£€æŸ¥å˜é‡æ•°æ®ç±»å‹å’Œæ ¼å¼</p><p>æ•°æ®ç±»å‹æ£€æŸ¥ï¼Œsqlæ‰§è¡Œå‰ï¼Œè¦è¿›è¡Œæ•°æ®ç±»å‹æ£€æŸ¥ï¼Œå¦‚æœæ˜¯é‚®ç®±ï¼Œå‚æ•°å°±å¿…é¡»æ˜¯é‚®ç®±çš„æ ¼å¼ï¼Œå¦‚æœæ˜¯æ—¥æœŸï¼Œå°±å¿…é¡»æ˜¯æ—¥æœŸæ ¼å¼ï¼›</p><p>åªè¦æ˜¯æœ‰å›ºå®šæ ¼å¼çš„å˜é‡ï¼Œåœ¨SQLè¯­å¥æ‰§è¡Œå‰ï¼Œåº”è¯¥ä¸¥æ ¼æŒ‰ç…§å›ºå®šæ ¼å¼å»æ£€æŸ¥ï¼Œç¡®ä¿å˜é‡æ˜¯æˆ‘ä»¬é¢„æƒ³çš„æ ¼å¼ï¼Œè¿™æ ·å¾ˆå¤§ç¨‹åº¦ä¸Šå¯ä»¥é¿å…SQLæ³¨å…¥æ”»å‡»ã€‚</p><p>å¦‚æœä¸Šè¿°ä¾‹å­ä¸­idæ˜¯intå‹çš„ï¼Œæ•ˆæœä¼šæ€æ ·å‘¢ï¼Ÿæ— æ³•æ³¨å…¥ï¼Œå› ä¸ºè¾“å…¥æ³¨å…¥å‚æ•°ä¼šå¤±è´¥ã€‚æ¯”å¦‚ä¸Šè¿°ä¸­çš„nameå­—æ®µï¼Œæˆ‘ä»¬åº”è¯¥åœ¨ç”¨æˆ·æ³¨å†Œçš„æ—¶å€™ï¼Œå°±ç¡®å®šä¸€ä¸ªç”¨æˆ·åè§„åˆ™ï¼Œæ¯”å¦‚5-20ä¸ªå­—ç¬¦ï¼Œåªèƒ½ç”±å¤§å°å†™å­—æ¯ã€æ•°å­—ä»¥åŠæ±‰å­—ç»„æˆï¼Œä¸åŒ…å«ç‰¹æ®Šå­—ç¬¦ã€‚æ­¤æ—¶æˆ‘ä»¬åº”è¯¥æœ‰ä¸€ä¸ªå‡½æ•°æ¥å®Œæˆç»Ÿä¸€çš„ç”¨æˆ·åæ£€æŸ¥ã€‚ä¸è¿‡ï¼Œä»ç„¶æœ‰å¾ˆå¤šåœºæ™¯å¹¶ä¸èƒ½ç”¨åˆ°è¿™ä¸ªæ–¹æ³•ï¼Œæ¯”å¦‚å†™åšå®¢ï¼Œè¯„è®ºç³»ç»Ÿï¼Œå¼¹å¹•ç³»ç»Ÿï¼Œå¿…é¡»å…è®¸ç”¨æˆ·å¯ä»¥æäº¤ä»»æ„å½¢å¼çš„å­—ç¬¦æ‰è¡Œï¼Œå¦åˆ™ç”¨æˆ·ä½“éªŒæ„Ÿå¤ªå·®äº†ã€‚</p><p>2ã€è¿‡æ»¤ç‰¹æ®Šç¬¦å·</p><p>3ã€ç»‘å®šå˜é‡ï¼Œä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥</p><h3 id="146ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-hibernateï¼Ÿ"><a href="#146ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-hibernateï¼Ÿ" class="headerlink" title="146ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ hibernateï¼Ÿ"></a>146ã€ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ hibernateï¼Ÿ</h3><ol><li>hibernateå¯¹jdbcè¿›è¡Œäº†å°è£…ï¼Œç®€åŒ–äº†JDBCçš„é‡å¤æ€§ä»£ç ï¼›</li><li>hibernateå¯¹daoæœ‰ä¸€ä¸ªå°è£…ç±»hibernateTemplateï¼Œå¯ä»¥ç»§æ‰¿å®ƒï¼Œå®ç°ç®€å•çš„CRUDæ¥å£ã€‚</li><li>hibernateä½¿ç”¨æ³¨è§£å’Œé…ç½®æ–‡ä»¶ï¼Œå¯ä»¥å¯¹å®ä½“ç±»å’Œæ˜ å°„æ–‡ä»¶è¿›è¡Œæ˜ å°„ï¼›</li><li>hibernateæœ‰äº‹åŠ¡ç®¡ç†æœºåˆ¶ï¼Œä¿è¯äº†æ•°æ®çš„å®‰å…¨æ€§ï¼›</li><li>hibernateæœ‰ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ï¼›</li></ol><h4 id="146-1ã€hibernate-ä¸­å¦‚ä½•åœ¨æ§åˆ¶å°æŸ¥çœ‹æ‰“å°çš„-sql-è¯­å¥ï¼Ÿ"><a href="#146-1ã€hibernate-ä¸­å¦‚ä½•åœ¨æ§åˆ¶å°æŸ¥çœ‹æ‰“å°çš„-sql-è¯­å¥ï¼Ÿ" class="headerlink" title="146.1ã€hibernate ä¸­å¦‚ä½•åœ¨æ§åˆ¶å°æŸ¥çœ‹æ‰“å°çš„ sql è¯­å¥ï¼Ÿ"></a>146.1ã€hibernate ä¸­å¦‚ä½•åœ¨æ§åˆ¶å°æŸ¥çœ‹æ‰“å°çš„ sql è¯­å¥ï¼Ÿ</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">spring.jpa.properties.hibernate.show_sql=<span class="literal">true</span></span><br><span class="line">spring.jpa.properties.hibernate.format_sql=<span class="literal">true</span></span><br><span class="line">spring.jpa.properties.hibernate.use_sql_comments=<span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="147ã€hibernate-æœ‰å‡ ç§æŸ¥è¯¢æ–¹å¼ï¼Ÿ"><a href="#147ã€hibernate-æœ‰å‡ ç§æŸ¥è¯¢æ–¹å¼ï¼Ÿ" class="headerlink" title="147ã€hibernate æœ‰å‡ ç§æŸ¥è¯¢æ–¹å¼ï¼Ÿ"></a>147ã€hibernate æœ‰å‡ ç§æŸ¥è¯¢æ–¹å¼ï¼Ÿ</h3><p>1ã€å¯¼èˆªå¯¹è±¡å›¾æŸ¥è¯¢ï¼šæ ¹æ®å·²åŠ è½½çš„å¯¹è±¡ï¼Œå¯¼èˆªåˆ°å…¶ä»–å¯¹è±¡ã€‚</p><p>ä¾‹å¦‚ï¼Œå¯¹äºå·²ç»åŠ è½½çš„Customerå¯¹è±¡ï¼Œè°ƒç”¨å®ƒçš„getOrders().iterator()æ–¹æ³•å°±å¯ä»¥å¯¼èˆªåˆ°æ‰€æœ‰å…³è”çš„Orderå¯¹è±¡ï¼Œå‡å¦‚åœ¨å…³è”çº§åˆ«ä½¿ç”¨äº†å»¶è¿ŸåŠ è½½æ£€ç´¢ç­–ç•¥ï¼Œé‚£ä¹ˆé¦–æ¬¡æ‰§è¡Œæ­¤æ–¹æ³•æ—¶ï¼Œhibernateä¼šä»æ•°æ®åº“ä¸­åŠ è½½å…³è”çš„Orderå¯¹è±¡ï¼Œå¦åˆ™å°±ä»ç¼“å­˜ä¸­è·å¾—Orderå¯¹è±¡ã€‚</p><p>2ã€OIDæ–¹å¼ï¼šæŒ‰ç…§å¯¹è±¡çš„OIDæ¥æ£€ç´¢å¯¹è±¡</p><p>Sessionçš„get()å’Œload()æ–¹æ³•æä¾›äº†è¿™ç§åŠŸèƒ½ï¼Œå¦‚æœåœ¨åº”ç”¨ç¨‹åºä¸­å…ˆçŸ¥é“äº†OIDï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼æ£€ç´¢å¯¹è±¡ã€‚</p><p>get()å’Œload()çš„ç”¨æ³•å®Œå…¨ä¸€æ ·ï¼Œéƒ½éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯æŒä¹…åŒ–å¯¹è±¡ç±»åclassï¼Œä¸€ä¸ªæ˜¯è¡Œå·OIDï¼Œè¿”å›å›ºå®šçš„æŸä¸€è¡Œçš„æ•°æ®ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“è¾“å…¥çš„OIDä¸å­˜åœ¨æ—¶ï¼Œget()ä¼šè¿”å›ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œload()åˆ™ç›´æ¥æŠ¥é”™ã€‚</p><p>3ã€HQLæ£€ç´¢æ–¹å¼ï¼šï¼ˆhibernate query languageï¼‰</p><p>ä½¿ç”¨é¢å‘å¯¹è±¡çš„HQLæŸ¥è¯¢è¯­è¨€ï¼Œsessionçš„find()æ–¹æ³•ç”¨äºæ‰§è¡ŒHQLæŸ¥è¯¢è¯­å¥ã€‚æ­¤å¤–ï¼Œhibernateè¿˜æä¾›äº†queryæ¥å£ï¼Œå®ƒæ˜¯hibernateæä¾›çš„ä¸“é—¨çš„HQLæŸ¥è¯¢æ¥å£ï¼Œèƒ½å¤Ÿæ‰§è¡Œå„ç§å¤æ‚çš„HQLæŸ¥è¯¢è¯­å¥ã€‚</p><p>å®ƒå…·å¤‡ä»¥ä¸‹åŠŸèƒ½ï¼š</p><ol><li>åœ¨æŸ¥è¯¢è¯­å¥ä¸­è®¾å®šå„ç§æŸ¥è¯¢æ¡ä»¶ï¼›</li><li>æ”¯æŒæŠ•å½±æŸ¥è¯¢ï¼Œå³ä»…æ£€ç´¢å‡ºå¯¹è±¡çš„éƒ¨åˆ†å±æ€§ï¼›</li><li>æ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼›</li><li>æ”¯æŒè¿æ¥æŸ¥è¯¢ï¼›</li><li>æ”¯æŒåˆ†ç»„æŸ¥è¯¢ï¼›</li><li>æä¾›å†…ç½®å‡½æ•°ï¼›</li><li>èƒ½å¤Ÿè°ƒç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„SQLå‡½æ•°ï¼›</li><li>æ”¯æŒå­æŸ¥è¯¢ï¼›</li><li>æ”¯æŒåŠ¨æ€ç»‘å®šå‚æ•°ï¼›</li></ol><p>ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Query</span> <span class="variable">query</span> <span class="operator">=</span> session.createQuery(â€œfrom UserPoâ€ï¼‰ï¼›</span><br></pre></td></tr></table></figure><p>è·å¾—ä¸€ä¸ªqueryå¯¹è±¡ï¼Œæ³¨æ„å‚æ•°å­—ç¬¦ä¸²ä¸­ä¸æ˜¯ä¸€ä¸ªSQLè¯­å¥ï¼Œfromåé¢çš„æ˜¯æŒä¹…åŒ–å¯¹è±¡åç§°ï¼›</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">List</span> <span class="variable">list</span> <span class="operator">=</span> query.list();</span><br></pre></td></tr></table></figure><p>å°±å¯ä»¥è·å–æ•°æ®åº“ä¸­å¯¹åº”è¡¨çš„æ•°æ®é›†åˆã€‚</p><p>4ã€QBCæ£€ç´¢æ–¹å¼ï¼šQuery By Criteriaçš„APIæ¥æ£€ç´¢å¯¹è±¡</p><p>è¿™ç§APIå°è£…äº†åŸºäºå­—ç¬¦ä¸²å½¢å¼çš„æŸ¥è¯¢è¯­å¥ï¼Œæä¾›äº†æ›´åŠ é¢å‘å¯¹è±¡çš„æ¥å£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ä¾‹ï¼š<span class="type">Criteria</span> <span class="variable">criteria</span> <span class="operator">=</span> session.createCriteria(UserPo.class);</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ªCriteriaå¯¹è±¡ï¼Œå‚æ•°æ˜¯æ‰€å…³è”çš„æŒä¹…åŒ–å¯¹è±¡ï¼Œcriteria.add(Restrictions.ge(â€œidâ€,2));å°†æŸ¥è¯¢æ¡ä»¶åŠ å…¥å¯¹è±¡ä¸­ï¼Œåé¢çš„æ“ä½œå°±å’ŒQueryå¯¹è±¡ä¸€æ ·äº†ã€‚</p><p>5ã€æœ¬åœ°SQL</p><p>ä½¿ç”¨æœ¬åœ°æ•°æ®åº“çš„SQLæŸ¥è¯¢è¯­å¥ï¼Œhibernateä¼šè´Ÿè´£æŠŠæ£€ç´¢åˆ°çš„JDBC ResultSetç»“æœæ˜ å°„ä¸ºæŒä¹…åŒ–å¯¹è±¡å›¾ã€‚</p><h3 id="148ã€hibernate-å®ä½“ç±»å¯ä»¥è¢«å®šä¹‰ä¸º-final-å—ï¼Ÿ"><a href="#148ã€hibernate-å®ä½“ç±»å¯ä»¥è¢«å®šä¹‰ä¸º-final-å—ï¼Ÿ" class="headerlink" title="148ã€hibernate å®ä½“ç±»å¯ä»¥è¢«å®šä¹‰ä¸º final å—ï¼Ÿ"></a>148ã€hibernate å®ä½“ç±»å¯ä»¥è¢«å®šä¹‰ä¸º final å—ï¼Ÿ</h3><p>å¯ä»¥å°†hibernateçš„å®ä½“ç±»å®šä¹‰ä¸ºfinalï¼Œä½†è¿™ç§åšæ³•ä¸å¥½ã€‚</p><p>å› ä¸ºhibernateä¼šä½¿ç”¨ä»£ç†æ¨¡å¼åœ¨å»¶è¿Ÿå…³è”çš„æƒ…å†µä¸‹æé«˜æ€§èƒ½ï¼Œå¦‚æœä½ æŠŠå®ä½“ç±»å®šä¹‰æˆfinalç±»ä¹‹åï¼Œå› ä¸ºJavaä¸å…è®¸å¯¹finalç±»è¿›è¡Œæ‰©å±•ï¼Œæ‰€ä»¥hibernateå°±æ— æ³•å†ä½¿ç”¨ä»£ç†äº†ï¼Œå¦‚æ­¤ä¸€æ¥å°±é™åˆ¶äº†ä½¿ç”¨å¯ä»¥æå‡æ€§èƒ½çš„æ‰‹æ®µã€‚</p><p>ä¸è¿‡ï¼Œå¦‚æœä½ çš„æŒä¹…åŒ–ç±»å®ç°äº†ä¸€ä¸ªæ¥å£ï¼Œè€Œä¸”åœ¨è¯¥æ¥å£ä¸­å£°æ˜äº†æ‰€æœ‰å®šä¹‰äºå®ä½“ç±»ä¸­çš„æ‰€æœ‰publicçš„æ–¹æ³•çš„è¯ï¼Œå°±èƒ½é¿å…å‡ºç°å‰é¢æ‰€è¯´çš„ä¸åˆ©åæœã€‚</p><h3 id="149ã€åœ¨-hibernate-ä¸­ä½¿ç”¨-Integer-å’Œ-int-åšæ˜ å°„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#149ã€åœ¨-hibernate-ä¸­ä½¿ç”¨-Integer-å’Œ-int-åšæ˜ å°„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="149ã€åœ¨ hibernate ä¸­ä½¿ç”¨ Integer å’Œ int åšæ˜ å°„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>149ã€åœ¨ hibernate ä¸­ä½¿ç”¨ Integer å’Œ int åšæ˜ å°„æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>hibernateæ˜¯é¢å‘å¯¹è±¡çš„ORMï¼Œæ‰€ä»¥ä¸€èˆ¬å®šä¹‰æˆå°è£…ç±»å‹ï¼Œè¦çœ‹æ•°æ®åº“ä¸­çš„å®šä¹‰ï¼Œå¦‚æœæ•°æ®åº“ä¸­æœ‰å¯¹åº”å­—æ®µå­˜åœ¨nullå€¼ï¼Œå°±è¦å®šä¹‰Integerã€‚ä¹Ÿå¯ä»¥å®šä¹‰åŸºæœ¬ç±»å‹ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­å†™æ¸…æ¥šå³å¯ã€‚</p><h3 id="150ã€ä»€ä¹ˆæ˜¯-Spring-Bootï¼ŸSpring-Boot-æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ"><a href="#150ã€ä»€ä¹ˆæ˜¯-Spring-Bootï¼ŸSpring-Boot-æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ" class="headerlink" title="150ã€ä»€ä¹ˆæ˜¯ Spring Bootï¼ŸSpring Boot æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ"></a>150ã€ä»€ä¹ˆæ˜¯ Spring Bootï¼ŸSpring Boot æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ</h3><h4 id="1ã€Spring-Bootç®€ä»‹"><a href="#1ã€Spring-Bootç®€ä»‹" class="headerlink" title="1ã€Spring Bootç®€ä»‹"></a>1ã€Spring Bootç®€ä»‹</h4><p>åŸºäºSpring4.0è®¾è®¡ï¼Œä¸ä»…ç»§æ‰¿äº†Springæ¡†æ¶åŸæœ‰çš„ä¼˜ç§€ç‰¹æ€§ï¼Œè€Œä¸”è¿˜é€šè¿‡ç®€åŒ–é…ç½®æ¥è¿›ä¸€æ­¥ç®€åŒ–springåº”ç”¨çš„æ•´ä¸ªæ­å»ºå’Œå¼€å‘è¿‡ç¨‹ã€‚å¦å¤–SpringBooté€šè¿‡é›†æˆå¤§é‡çš„æ¡†æ¶ä½¿å¾—ä¾èµ–åŒ…çš„ç‰ˆæœ¬å†²çªã€å¼•ç”¨çš„ä¸ç¨³å®šæ€§å¾—åˆ°äº†è§£å†³ã€‚</p><h4 id="2ã€Spring-Boot-æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ"><a href="#2ã€Spring-Boot-æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ" class="headerlink" title="2ã€Spring Boot æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ"></a>2ã€Spring Boot æœ‰å“ªäº›ä¼˜ç‚¹ï¼Ÿ</h4><ol><li>å¿«é€Ÿæ„å»ºé¡¹ç›®ï¼Œå¯ä»¥é€‰ä¸€äº›å¿…è¦çš„ç»„ä»¶ï¼›</li><li>å¯¹ä¸»æµæ¡†æ¶çš„æ— é…ç½®é›†æˆï¼›</li><li>å†…åµŒTomcatå®¹å™¨ï¼Œé¡¹ç›®å¯ç‹¬ç«‹è¿è¡Œï¼›</li><li>åˆ é™¤äº†ç¹ççš„xmlé…ç½®æ–‡ä»¶ï¼›</li><li>æå¤§åœ°æé«˜äº†å¼€å‘å’Œéƒ¨ç½²æ•ˆç‡ï¼›</li><li>æä¾›starterï¼Œç®€åŒ–mavené…ç½®ï¼›</li></ol><h4 id="3ã€SpringBootæœ‰å“ªäº›ç¼ºç‚¹ï¼Ÿ"><a href="#3ã€SpringBootæœ‰å“ªäº›ç¼ºç‚¹ï¼Ÿ" class="headerlink" title="3ã€SpringBootæœ‰å“ªäº›ç¼ºç‚¹ï¼Ÿ"></a>3ã€SpringBootæœ‰å“ªäº›ç¼ºç‚¹ï¼Ÿ</h4><ol><li>ç‰ˆæœ¬è¿­ä»£é€Ÿåº¦å¿«ï¼Œä¸€äº›æ¨¡å—æ”¹åŠ¨å¾ˆå¤§ï¼›</li><li>ç”±äºæ— é¡»é…ç½®ï¼ŒæŠ¥é”™æ—¶å¾ˆéš¾å®šä½ï¼›</li></ol><h3 id="151ã€Spring-Boot-ä¸­çš„ç›‘è§†å™¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#151ã€Spring-Boot-ä¸­çš„ç›‘è§†å™¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="151ã€Spring Boot ä¸­çš„ç›‘è§†å™¨æ˜¯ä»€ä¹ˆï¼Ÿ"></a>151ã€Spring Boot ä¸­çš„ç›‘è§†å™¨æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ç›‘å¬å™¨ä¹Ÿå«listenerï¼Œæ˜¯servletçš„ç›‘å¬å™¨ï¼Œå¯ä»¥ç”¨äºç›‘å¬webåº”ç”¨ç¨‹åºä¸­æŸäº›å¯¹è±¡çš„åˆ›å»ºã€é”€æ¯ã€å¢åŠ ã€ä¿®æ”¹ã€åˆ é™¤ç­‰åŠ¨ä½œçš„å‘ç”Ÿï¼Œç„¶ååšå‡ºç›¸åº”çš„å“åº”å¤„ç†ã€‚å½“èŒƒå›´å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒæœåŠ¡å™¨è‡ªåŠ¨è°ƒç”¨ç›‘å¬å™¨å¯¹è±¡ä¸­çš„æ–¹æ³•ï¼Œå¸¸ç”¨äºç³»ç»ŸåŠ è½½æ—¶è¿›è¡Œä¿¡æ¯åˆå§‹åŒ–ï¼Œç»Ÿè®¡åœ¨çº¿äººæ•°å’Œåœ¨çº¿ç”¨æˆ·ï¼Œç»Ÿè®¡ç½‘ç«™çš„è®¿é—®é‡ã€‚</p><p>é…ç½®ç›‘å¬å™¨çš„æ–¹æ³•ï¼š</p><p>é€šè¿‡@ComponentæŠŠç›‘å¬å™¨åŠ å…¥Springå®¹å™¨ä¸­ç®¡ç†ï¼›<br>åœ¨application.propertiesä¸­æ·»åŠ context.listener.classesé…ç½®ï¼›<br>åœ¨æ–¹æ³•ä¸ŠåŠ @EventListeneræ³¨è§£ï¼›</p><h3 id="152ã€ä»€ä¹ˆæ˜¯-YAMLï¼Ÿ"><a href="#152ã€ä»€ä¹ˆæ˜¯-YAMLï¼Ÿ" class="headerlink" title="152ã€ä»€ä¹ˆæ˜¯ YAMLï¼Ÿ"></a>152ã€ä»€ä¹ˆæ˜¯ YAMLï¼Ÿ</h3><p>YAMLæ˜¯JSONçš„ä¸€ä¸ªè¶…é›†ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿åœ°å°†å¤–éƒ¨é…ç½®ä»¥å±‚æ¬¡ç»“æ„å½¢å¼å­˜å‚¨èµ·æ¥ã€‚YAMLå¯ä»¥ä½œä¸ºpropertiesé…ç½®æ–‡ä»¶çš„æ›¿ä»£ã€‚</p><p>YAMLä½¿ç”¨çš„æ³¨æ„äº‹é¡¹ï¼š</p><ol><li>åœ¨propertiesæ–‡ä»¶ä¸­æ˜¯ä»¥â€.â€è¿›è¡Œåˆ†å‰²çš„ï¼Œåœ¨ymlä¸­æ˜¯ç”¨â€.â€è¿›è¡Œåˆ†å‰²çš„ï¼›</li><li>ymlçš„æ•°æ®æ ¼å¼å’Œjsonçš„æ ¼å¼å¾ˆåƒï¼Œéƒ½æ˜¯K-Væ ¼å¼ï¼Œå¹¶ä¸”é€šè¿‡â€:â€è¿›è¡Œèµ‹å€¼ï¼›</li><li>æ¯ä¸ªå†’å·åé¢ä¸€å®šè¦åŠ ä¸€ä¸ªç©ºæ ¼ï¼›</li></ol><h3 id="153ã€å¦‚ä½•ä½¿ç”¨-Spring-Boot-å®ç°åˆ†é¡µå’Œæ’åºï¼Ÿ"><a href="#153ã€å¦‚ä½•ä½¿ç”¨-Spring-Boot-å®ç°åˆ†é¡µå’Œæ’åºï¼Ÿ" class="headerlink" title="153ã€å¦‚ä½•ä½¿ç”¨ Spring Boot å®ç°åˆ†é¡µå’Œæ’åºï¼Ÿ"></a>153ã€å¦‚ä½•ä½¿ç”¨ Spring Boot å®ç°åˆ†é¡µå’Œæ’åºï¼Ÿ</h3><p>ä½¿ç”¨Spring Data Jpaå¯ä»¥å®ç°å°†å¯åˆ†é¡µçš„ä¼ é€’ç»™å­˜å‚¨åº“æ–¹æ³•ã€‚</p><h3 id="154ã€å¦‚ä½•ä½¿ç”¨-Spring-Boot-å®ç°å¼‚å¸¸å¤„ç†ï¼Ÿ"><a href="#154ã€å¦‚ä½•ä½¿ç”¨-Spring-Boot-å®ç°å¼‚å¸¸å¤„ç†ï¼Ÿ" class="headerlink" title="154ã€å¦‚ä½•ä½¿ç”¨ Spring Boot å®ç°å¼‚å¸¸å¤„ç†ï¼Ÿ"></a>154ã€å¦‚ä½•ä½¿ç”¨ Spring Boot å®ç°å¼‚å¸¸å¤„ç†ï¼Ÿ</h3><p>1ã€ä½¿ç”¨ @ExceptionHandler æ³¨è§£å¤„ç†å±€éƒ¨å¼‚å¸¸(åªèƒ½å¤„ç†å½“å‰controllerä¸­çš„ArithmeticExceptionå’ŒNullPointerExceptionå¼‚å¸¸ï¼Œç¼ºç‚¹å°±æ˜¯åªèƒ½å¤„ç†å•ä¸ªcontrollerçš„å¼‚å¸¸)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExceptionHandlerController</span> &#123;</span><br><span class="line"><span class="meta">@RequestMapping(&quot;/excep&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">exceptionMethod</span><span class="params">(Model model)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">String a=<span class="literal">null</span>;</span><br><span class="line">System.out.println(a.charAt(<span class="number">1</span>));</span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">model.addAttribute(<span class="string">&quot;message&quot;</span>, <span class="string">&quot;æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@ExceptionHandler(value = &#123;ArithmeticException.class,NullPointerException.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">arithmeticExceptionHandle</span><span class="params">(Model model, Exception e)</span> &#123;</span><br><span class="line">model.addAttribute(<span class="string">&quot;message&quot;</span>, <span class="string">&quot;@ExceptionHandler&quot;</span> + e.getMessage());</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>2ã€ä½¿ç”¨ @ControllerAdvice + @ExceptionHandler æ³¨è§£å¤„ç†å…¨å±€å¼‚å¸¸(valueåé¢å¯ä»¥å¡«å†™æ•°ç»„)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ControllerAdviceException</span> &#123;<span class="meta">@ExceptionHandler(value = &#123;NullPointerException.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">NullPointerExceptionHandler</span><span class="params">(Model model, Exception e)</span> &#123;</span><br><span class="line">model.addAttribute(<span class="string">&quot;message&quot;</span>, <span class="string">&quot;@ControllerAdvice + @ExceptionHandler :&quot;</span> + e.getMessage());</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">                                       &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>3ã€é…ç½® SimpleMappingExceptionResolver ç±»å¤„ç†å¼‚å¸¸ï¼ˆé…ç½®ç±»ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SimpleMappingException</span> &#123;</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> SimpleMappingExceptionResolver <span class="title function_">getSimpleMappingExceptionResolver</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="type">SimpleMappingExceptionResolver</span> <span class="variable">resolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleMappingExceptionResolver</span>();</span><br><span class="line"><span class="type">Properties</span> <span class="variable">mappings</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line"><span class="comment">//ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå¼‚å¸¸å…¨é™å®šåï¼Œç¬¬äºŒä¸ªä¸ºè·³è½¬è§†å›¾åç§°</span></span><br><span class="line">mappings.put(<span class="string">&quot;java.lang.NullPointerException&quot;</span>, <span class="string">&quot;index&quot;</span>);</span><br><span class="line">mappings.put(<span class="string">&quot;java.lang.ArithmeticException&quot;</span>, <span class="string">&quot;index&quot;</span>);</span><br><span class="line"><span class="comment">//è®¾ç½®å¼‚å¸¸ä¸è§†å›¾æ˜ å°„ä¿¡æ¯çš„</span></span><br><span class="line">resolver.setExceptionMappings(mappings);</span><br><span class="line"><span class="keyword">return</span> resolver;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>4ã€å®ç° HandlerExceptionResolver æ¥å£å¤„ç†å¼‚å¸¸</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HandlerException</span> <span class="keyword">implements</span> <span class="title class_">HandlerExceptionResolver</span> &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">resolveException</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> &#123;</span><br><span class="line"><span class="type">ModelAndView</span> <span class="variable">modelAndView</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">modelAndView.addObject(<span class="string">&quot;message&quot;</span>, <span class="string">&quot;å®ç°HandlerExceptionResolveræ¥å£&quot;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//åˆ¤æ–­ä¸åŒå¼‚å¸¸ç±»å‹ï¼Œåšä¸åŒè§†å›¾è·³è½¬</span></span><br><span class="line"><span class="keyword">if</span>(ex <span class="keyword">instanceof</span> NullPointerException)&#123;</span><br><span class="line">modelAndView.setViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(ex <span class="keyword">instanceof</span> ArithmeticException)&#123;</span><br><span class="line">modelAndView.setViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> modelAndView;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="155ã€å•ç‚¹ç™»å½•"><a href="#155ã€å•ç‚¹ç™»å½•" class="headerlink" title="155ã€å•ç‚¹ç™»å½•"></a>155ã€å•ç‚¹ç™»å½•</h3><h4 id="1ã€æ¦‚å¿µ"><a href="#1ã€æ¦‚å¿µ" class="headerlink" title="1ã€æ¦‚å¿µ"></a>1ã€æ¦‚å¿µ</h4><p>å•ç‚¹ç™»å½•SSOï¼Œè¯´çš„æ˜¯åœ¨ä¸€ä¸ªå¤šç³»ç»Ÿå…±å­˜çš„ç¯å¢ƒä¸‹ï¼Œç”¨æˆ·åœ¨ä¸€å¤„ç™»å½•åï¼Œå°±ä¸ç”¨åœ¨å…¶ä»–ç³»ç»Ÿä¸­ç™»å½•ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·çš„ä¸€æ¬¡ç™»å½•èƒ½å¾—åˆ°å…¶ä»–æ‰€æœ‰ç³»ç»Ÿçš„ä¿¡ä»»ã€‚</p><h4 id="2ã€å•ç‚¹ç™»å½•çš„è¦ç‚¹"><a href="#2ã€å•ç‚¹ç™»å½•çš„è¦ç‚¹" class="headerlink" title="2ã€å•ç‚¹ç™»å½•çš„è¦ç‚¹"></a>2ã€å•ç‚¹ç™»å½•çš„è¦ç‚¹</h4><p>å­˜å‚¨ä¿¡ä»»ï¼›<br>éªŒè¯ä¿¡ä»»ï¼›</p><h4 id="3ã€å®ç°å•ç‚¹ç™»å½•çš„ä¸‰ç§æ–¹å¼"><a href="#3ã€å®ç°å•ç‚¹ç™»å½•çš„ä¸‰ç§æ–¹å¼" class="headerlink" title="3ã€å®ç°å•ç‚¹ç™»å½•çš„ä¸‰ç§æ–¹å¼"></a>3ã€å®ç°å•ç‚¹ç™»å½•çš„ä¸‰ç§æ–¹å¼</h4><p>ï¼ˆ1ï¼‰ä»¥cookieä½œä¸ºå‡­è¯</p><p>æœ€ç®€å•çš„å•ç‚¹ç™»å½•å®ç°æ–¹å¼ï¼Œæ˜¯ä½¿ç”¨cookieä½œä¸ºåª’ä»‹ï¼Œå­˜æ”¾ç”¨æˆ·å‡­è¯ã€‚</p><p>ç”¨æˆ·ç™»å½•çˆ¶åº”ç”¨ä¹‹åï¼Œåº”ç”¨è¿”å›ä¸€ä¸ªåŠ å¯†çš„cookieï¼Œå½“ç”¨æˆ·è®¿é—®å­åº”ç”¨çš„æ—¶å€™ï¼Œæºå¸¦ä¸Šè¿™ä¸ªcookieï¼Œæˆæƒåº”ç”¨è§£å¯†cookieè¿›è¡Œæ ¡éªŒï¼Œæ ¡éªŒé€šè¿‡åˆ™ç™»å½•å½“å‰ç”¨æˆ·ã€‚</p><p>ç¼ºç‚¹ï¼š</p><p>cookieä¸å®‰å…¨</p><p>é€šè¿‡åŠ å¯†å¯ä»¥ä¿è¯å®‰å…¨æ€§ï¼Œä½†å¦‚æœå¯¹æ–¹æŒæ¡äº†è§£å¯†ç®—æ³•å°±å®Œè›‹äº†ã€‚</p><p>ä¸èƒ½è·¨åŸŸå®ç°å…ç™»</p><p>ï¼ˆ2ï¼‰é€šè¿‡JSONPå®ç°</p><p>å¯¹äºè·¨åŸŸé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨JSONPå®ç°ã€‚ç”¨æˆ·åœ¨çˆ¶åº”ç”¨ä¸­ç™»å½•åï¼Œè·ŸsessionåŒ¹é…çš„cookieä¼šå­˜åˆ°å®¢æˆ·ç«¯ä¸­ï¼Œå½“ç”¨æˆ·éœ€è¦ç™»å½•å­åº”ç”¨çš„æ—¶å€™ï¼Œæˆæƒåº”ç”¨è®¿é—®çˆ¶åº”ç”¨æä¾›çš„JSONPæ¥å£ï¼Œå¹¶åœ¨è¯·æ±‚ä¸­å¸¦ä¸Šçˆ¶åº”ç”¨åŸŸåä¸‹çš„cookieï¼Œçˆ¶åº”ç”¨æ¥æ”¶åˆ°è¯·æ±‚ï¼ŒéªŒè¯ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼Œè¿”å›åŠ å¯†çš„ä¿¡æ¯ï¼Œå­åº”ç”¨é€šè¿‡è§£æè¿”å›æ¥çš„åŠ å¯†ä¿¡æ¯æ¥éªŒè¯ç”¨æˆ·ï¼Œå¦‚æœé€šè¿‡éªŒè¯åˆ™ç™»å½•ç”¨æˆ·ã€‚</p><p>ç¼ºç‚¹ï¼š</p><p>è¿™ç§æ–¹æ³•è™½ç„¶èƒ½è§£å†³è·¨åŸŸé—®é¢˜ï¼Œä½†æ˜¯æ²»æ ‡ä¸æ²»æœ¬ï¼Œæ²¡æœ‰è§£å†³cookieå®‰å…¨æ€§çš„é—®é¢˜ã€‚</p><p>ï¼ˆ3ï¼‰é€šè¿‡é¡µé¢é‡å®šå‘çš„æ–¹å¼</p><p>æœ€åä¸€ç§ä»‹ç»çš„æ–¹å¼ï¼Œæ˜¯é€šè¿‡çˆ¶åº”ç”¨å’Œå­åº”ç”¨æ¥å›é‡å®šå‘è¿›è¡Œé€šä¿¡ï¼Œå®ç°ä¿¡æ¯çš„å®‰å…¨ä¼ é€’ã€‚</p><p>çˆ¶åº”ç”¨æä¾›ä¸€ä¸ªGETæ–¹å¼çš„ç™»å½•æ¥å£Aï¼ˆæ­¤æ—¶çš„çˆ¶åº”ç”¨æ¥å£å›ºå®šï¼Œæ”»å‡»è€…æ— æ³•å»ä¼ªé€ ï¼‰ï¼Œç”¨æˆ·é€šè¿‡å­åº”ç”¨é‡å®šå‘è¿æ¥çš„æ–¹å¼è®¿é—®è¿™ä¸ªæ¥å£ï¼Œå¦‚æœç”¨æˆ·è¿˜æ²¡æœ‰ç™»å½•ï¼Œåˆ™è¿”å›ä¸€ä¸ªç™»å½•é¡µé¢ï¼Œç”¨æˆ·è¾“å…¥è´¦å·å¯†ç è¿›è¡Œç™»å½•ï¼Œå¦‚æœç”¨æˆ·å·²ç»ç™»å½•äº†ï¼Œåˆ™ç”ŸæˆåŠ å¯†çš„tokenï¼Œå¹¶ä¸”é‡å®šå‘åˆ°å­åº”ç”¨æä¾›çš„éªŒè¯tokençš„æ¥å£Bï¼ˆæ­¤æ—¶çš„å­åº”ç”¨æ¥å£å›ºå®šï¼Œæ”»å‡»è€…æ— æ³•å»ä¼ªé€ ï¼‰ï¼Œé€šè¿‡è§£å¯†å’Œæ ¡éªŒä¹‹åï¼Œå­åº”ç”¨ç™»å½•å½“å‰ç”¨æˆ·ã€‚</p><p>ç¼ºç‚¹ï¼š</p><p>è¿™ç§æ–¹å¼è¾ƒå‰é¢çš„ä¸¤ç§æ–¹å¼ï¼Œæ˜¯è§£å†³äº†å®‰å…¨æ€§å’Œè·¨åŸŸçš„é—®é¢˜ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å‰é¢ä¸¤ç§æ–¹å¼ç®€å•ï¼Œå®‰å…¨ä¸æ–¹ä¾¿ï¼Œæœ¬æ¥å°±æ˜¯çŸ›ç›¾çš„ã€‚</p><h4 id="4ã€ä½¿ç”¨ç‹¬ç«‹ç™»å½•ç³»ç»Ÿ"><a href="#4ã€ä½¿ç”¨ç‹¬ç«‹ç™»å½•ç³»ç»Ÿ" class="headerlink" title="4ã€ä½¿ç”¨ç‹¬ç«‹ç™»å½•ç³»ç»Ÿ"></a>4ã€ä½¿ç”¨ç‹¬ç«‹ç™»å½•ç³»ç»Ÿ</h4><p>ä¸€èˆ¬æ¥è¯´ï¼Œå¤§å‹åº”ç”¨ä¼šæŠŠæˆæƒçš„é€»è¾‘å’Œç”¨æˆ·ä¿¡æ¯çš„ç›¸å…³é€»è¾‘ç‹¬ç«‹æˆä¸€ä¸ªåº”ç”¨ï¼Œç§°ä¸ºç”¨æˆ·ä¸­å¿ƒã€‚ç”¨æˆ·ä¸­å¿ƒä¸å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œåªæ˜¯å¤„ç†ç”¨æˆ·ä¿¡æ¯çš„ç®¡ç†ä»¥åŠæˆæƒç»™ç¬¬ä¸‰æ–¹åº”ç”¨ã€‚ç¬¬ä¸‰æ–¹åº”ç”¨éœ€è¦ç™»å½•çš„æ—¶å€™ï¼Œåˆ™æŠŠç”¨æˆ·çš„ç™»å½•è¯·æ±‚è½¬å‘ç»™ç”¨æˆ·ä¸­å¿ƒè¿›è¡Œå¤„ç†ï¼Œç”¨æˆ·å¤„ç†å®Œæ¯•åè¿”å›å‡­è¯ï¼Œç¬¬ä¸‰æ–¹åº”ç”¨éªŒè¯å‡­è¯ï¼Œé€šè¿‡åå°±ç™»å½•ç”¨æˆ·ã€‚</p><h4 id="5ã€ssoï¼ˆå•ç‚¹ç™»å½•ï¼‰ä¸OAuth2-0ï¼ˆæˆæƒï¼‰çš„åŒºåˆ«ï¼Ÿ"><a href="#5ã€ssoï¼ˆå•ç‚¹ç™»å½•ï¼‰ä¸OAuth2-0ï¼ˆæˆæƒï¼‰çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="5ã€ssoï¼ˆå•ç‚¹ç™»å½•ï¼‰ä¸OAuth2.0ï¼ˆæˆæƒï¼‰çš„åŒºåˆ«ï¼Ÿ"></a>5ã€ssoï¼ˆå•ç‚¹ç™»å½•ï¼‰ä¸OAuth2.0ï¼ˆæˆæƒï¼‰çš„åŒºåˆ«ï¼Ÿ</h4><p>ï¼ˆ1ï¼‰ssoï¼ˆå•ç‚¹ç™»å½•ï¼‰</p><p>é€šå¸¸å¤„ç†çš„æ˜¯ä¸€ä¸ªå…¬å¸çš„ä¸åŒåº”ç”¨é—´çš„è®¿é—®ç™»å½•é—®é¢˜ï¼Œå¦‚ä¼ä¸šåº”ç”¨æœ‰å¾ˆå¤šå­ç³»ç»Ÿï¼Œåªéœ€ç™»å½•ä¸€ä¸ªç³»ç»Ÿï¼Œå°±å¯ä»¥å®ç°ä¸åŒå­ç³»ç»Ÿé—´çš„è·³è½¬ï¼Œè€Œé¿å…äº†ç™»å½•æ“ä½œï¼›<br>é€šè¿‡cookieã€jsonpã€é‡å®šå‘æ¥å®ç°ï¼›</p><p>ï¼ˆ2ï¼‰OAuth2.0ï¼ˆæˆæƒï¼‰</p><p>è§£å†³çš„æ˜¯æœåŠ¡æä¾›æ–¹ï¼ˆå¦‚å¾®ä¿¡ï¼‰ç»™ç¬¬ä¸‰æ–¹åº”ç”¨æˆæƒçš„é—®é¢˜ï¼Œç®€ç§°å¾®ä¿¡ç™»å½•ï¼›<br>æ˜¯ä¸€ç§å…·ä½“çš„åè®®ï¼Œåªæ˜¯ä¸ºç”¨æˆ·èµ„æºçš„æˆæƒæä¾›äº†ä¸€ä¸ªå®‰å…¨çš„ã€å¼€æ”¾çš„è€Œåˆç®€æ˜“çš„æ ‡å‡†ï¼ŒOAuth2.0ï¼ˆæˆæƒï¼‰ä¸ºå®¢æˆ·å¼€å‘è€…å¼€å‘webåº”ç”¨ï¼Œæ¡Œé¢åº”ç”¨ç¨‹åºï¼Œç§»åŠ¨åº”ç”¨åŠå®¢å…è®¾å¤‡æä¾›ç‰¹å®šçš„æˆæƒæµç¨‹ã€‚</p><h3 id="156ã€Spring-Bootæ¯”Springå¤šå“ªäº›æ³¨è§£"><a href="#156ã€Spring-Bootæ¯”Springå¤šå“ªäº›æ³¨è§£" class="headerlink" title="156ã€Spring Bootæ¯”Springå¤šå“ªäº›æ³¨è§£"></a>156ã€Spring Bootæ¯”Springå¤šå“ªäº›æ³¨è§£</h3><p><a href="https://blog.csdn.net/guorui_java/article/details/107379648">Spring Bootå¸¸ç”¨æ³¨è§£ï¼ˆç»å¯¹ç»å…¸ï¼‰</a></p><h3 id="157ã€æ‰“åŒ…å’Œéƒ¨ç½²"><a href="#157ã€æ‰“åŒ…å’Œéƒ¨ç½²" class="headerlink" title="157ã€æ‰“åŒ…å’Œéƒ¨ç½²"></a>157ã€æ‰“åŒ…å’Œéƒ¨ç½²</h3><p>Springå’ŒSpring Bootéƒ½æ”¯æŒmavenå’ŒGradleé€šç”¨æ‰“åŒ…ç®¡ç†æŠ€æœ¯ã€‚</p><p>Spring Bootç›¸å¯¹Springçš„ä¸€äº›ä¼˜ç‚¹ï¼š</p><p>æä¾›åµŒå…¥å¼å®¹å™¨æ”¯æŒï¼›<br>ä½¿ç”¨å‘½ä»¤java -jarç‹¬ç«‹è¿è¡Œjarï¼›<br>éƒ¨ç½²æ—¶å¯ä»¥çµæ´»æŒ‡å®šé…ç½®æ–‡ä»¶ï¼›<br>æœ€è¿‘é¡¹ç›®æ˜¯åˆ†å¸ƒå¼çš„é¡¹ç›®ï¼Œéƒ½æ˜¯é€šè¿‡åˆ†é¡¹ç›®æ‰“åŒ…éƒ¨ç½²ï¼Œç„¶åéƒ¨ç½²åœ¨dockerä¸­è¿è¡Œã€‚</p><h3 id="158ã€Spring-Bootå¦‚ä½•è®¿é—®ä¸åŒçš„æ•°æ®åº“"><a href="#158ã€Spring-Bootå¦‚ä½•è®¿é—®ä¸åŒçš„æ•°æ®åº“" class="headerlink" title="158ã€Spring Bootå¦‚ä½•è®¿é—®ä¸åŒçš„æ•°æ®åº“"></a>158ã€Spring Bootå¦‚ä½•è®¿é—®ä¸åŒçš„æ•°æ®åº“</h3><p>å¯ä»¥ä½¿ç”¨druidDataSourceåˆ›å»ºDataSourceï¼Œç„¶åé€šè¿‡jdbcTemplateæ‰§è¡Œsqlã€‚</p><h3 id="159ã€æŸ¥è¯¢ç½‘ç«™åœ¨çº¿äººæ•°"><a href="#159ã€æŸ¥è¯¢ç½‘ç«™åœ¨çº¿äººæ•°" class="headerlink" title="159ã€æŸ¥è¯¢ç½‘ç«™åœ¨çº¿äººæ•°"></a>159ã€æŸ¥è¯¢ç½‘ç«™åœ¨çº¿äººæ•°</h3><p>é€šè¿‡ç›‘å¬sessionå¯¹è±¡çš„æ–¹å¼æ¥å®ç°åœ¨çº¿äººæ•°çš„ç»Ÿè®¡å’Œåœ¨çº¿äººä¿¡æ¯å±•ç¤ºï¼Œå¹¶ä¸”è®©è¶…æ—¶çš„è‡ªåŠ¨é”€æ¯ã€‚</p><blockquote><p>å¯¹sessionå¯¹è±¡å®ç°ç›‘å¬ï¼Œé¦–å…ˆå¿…é¡»ç»§æ‰¿HttpSessionListenerç±»ï¼Œè¯¥ç¨‹åºçš„åŸºæœ¬åŸç†å°±æ˜¯å½“æµè§ˆå™¨è®¿é—®é¡µé¢çš„æ—¶å€™å¿…å®šä¼šäº§ç”Ÿä¸€ä¸ªsessionå¯¹è±¡ï¼Œå½“å…³é—­è¯¥é¡µé¢çš„æ—¶å€™å¿…ç„¶ä¼šåˆ é™¤sessionå¯¹è±¡ã€‚æ‰€ä»¥æ¯å½“äº§ç”Ÿä¸€ä¸ªæ–°çš„sessionå¯¹è±¡å°±è®©åœ¨çº¿äººæ•°+1ï¼Œå½“åˆ é™¤ä¸€ä¸ªsessionå¯¹è±¡å°±è®©åœ¨çº¿äººæ•°-1ã€‚</p><p>è¿˜è¦ç»§æ‰¿ä¸€ä¸ªHttpSessionAttributeListenerï¼Œæ¥å®ç°å¯¹å…¶å±æ€§çš„ç›‘å¬ã€‚åˆ†åˆ«å®ç°attributeAddedæ–¹æ³•ï¼ŒattributeReplaceæ–¹æ³•ä»¥åŠattributeRemoveæ–¹æ³•ã€‚</p><p>sessionCreated//æ–°å»ºä¸€ä¸ªä¼šè¯çš„æ—¶å€™è§¦å‘ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡å–æœåŠ¡å™¨äº¤äº’æ—¶è§¦å‘ã€‚</p><p>sessionDestroyed//é”€æ¯ä¼šè¯çš„æ—¶å€™ï¼Œä¸€èˆ¬æ¥è¯´åªæœ‰æŸä¸ªæŒ‰é’®è§¦å‘è¿›è¡Œé”€æ¯ï¼Œæˆ–è€…é…ç½®å®šæ—¶é”€æ¯ã€‚</p><p>HttpSessionAttributeListeneræœ‰ä¸‰ä¸ªæ–¹æ³•éœ€è¦å®ç°</p><p>attributeAdded//åœ¨sessionä¸­æ·»åŠ å¯¹è±¡æ—¶è§¦å‘æ­¤æ“ä½œ ç¬¼ç»Ÿçš„è¯´å°±æ˜¯è°ƒç”¨setAttributeè¿™ä¸ªæ–¹æ³•æ—¶å€™ä¼šè§¦å‘çš„<br>attributeRemoved//ä¿®æ”¹ã€åˆ é™¤sessionä¸­æ·»åŠ å¯¹è±¡æ—¶è§¦å‘æ­¤æ“ä½œ  ç¬¼ç»Ÿçš„è¯´å°±æ˜¯è°ƒç”¨ removeAttributeè¿™ä¸ªæ–¹æ³•æ—¶å€™ä¼šè§¦å‘çš„<br>attributeReplaced//åœ¨Sessionå±æ€§è¢«é‡æ–°è®¾ç½®æ—¶ã€‚</p></blockquote><h3 id="160ã€easyExcelå¦‚ä½•å®ç°"><a href="#160ã€easyExcelå¦‚ä½•å®ç°" class="headerlink" title="160ã€easyExcelå¦‚ä½•å®ç°"></a>160ã€easyExcelå¦‚ä½•å®ç°</h3><p>å¼‚æ­¥è¯»å–<br>æ–°å»ºä¸€ä¸ª  ExcelModelListener ç›‘å¬ç±»å‡ºæ¥ï¼Œå¹¶ä¸” ç»§æ‰¿ AnalysisEventListener ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zh.oukele.listener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.context.AnalysisContext;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.excel.event.AnalysisEventListener;</span><br><span class="line"><span class="keyword">import</span> com.zh.oukele.model.ExcelMode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/***</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> * ç›‘å¬å™¨</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExcelModelListener</span> <span class="keyword">extends</span> <span class="title class_">AnalysisEventListener</span>&lt;ExcelMode&gt; &#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    * æ¯éš”5æ¡å­˜å‚¨æ•°æ®åº“ï¼Œå®é™…ä½¿ç”¨ä¸­å¯ä»¥3000æ¡ï¼Œç„¶åæ¸…ç†list ï¼Œæ–¹ä¾¿å†…å­˜å›æ”¶</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">BATCH_COUNT</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">      List&lt;ExcelMode&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;ExcelMode&gt;();</span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">invoke</span><span class="params">(ExcelMode data, AnalysisContext context)</span> &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;è§£æåˆ°ä¸€æ¡æ•°æ®:&#123; &quot;</span>+ data.toString() +<span class="string">&quot; &#125;&quot;</span>);</span><br><span class="line">      list.add(data);</span><br><span class="line">      count ++;</span><br><span class="line">      <span class="keyword">if</span> (list.size() &gt;= BATCH_COUNT) &#123;</span><br><span class="line">          saveData( count );</span><br><span class="line">          list.clear();</span><br><span class="line">      &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doAfterAllAnalysed</span><span class="params">(AnalysisContext context)</span> &#123;</span><br><span class="line">       saveData( count );</span><br><span class="line">       System.out.println(<span class="string">&quot;æ‰€æœ‰æ•°æ®è§£æå®Œæˆï¼&quot;</span>);</span><br><span class="line">       System.out.println(<span class="string">&quot; count ï¼š&quot;</span> + count);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    * åŠ ä¸Šå­˜å‚¨æ•°æ®åº“</span></span><br><span class="line"><span class="comment">      */</span></span><br><span class="line">      <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">saveData</span><span class="params">(<span class="type">int</span> count)</span> &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;&#123; &quot;</span>+ count +<span class="string">&quot; &#125;æ¡æ•°æ®ï¼Œå¼€å§‹å­˜å‚¨æ•°æ®åº“ï¼&quot;</span> + list.size());</span><br><span class="line">      System.out.println(<span class="string">&quot;å­˜å‚¨æ•°æ®åº“æˆåŠŸï¼&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="161ã€ä»€ä¹ˆæ˜¯-Swaggerï¼Ÿä½ ç”¨-Spring-Boot-å®ç°äº†å®ƒå—ï¼Ÿ"><a href="#161ã€ä»€ä¹ˆæ˜¯-Swaggerï¼Ÿä½ ç”¨-Spring-Boot-å®ç°äº†å®ƒå—ï¼Ÿ" class="headerlink" title="161ã€ä»€ä¹ˆæ˜¯ Swaggerï¼Ÿä½ ç”¨ Spring Boot å®ç°äº†å®ƒå—ï¼Ÿ"></a>161ã€ä»€ä¹ˆæ˜¯ Swaggerï¼Ÿä½ ç”¨ Spring Boot å®ç°äº†å®ƒå—ï¼Ÿ</h3><p>Swaggeræ˜¯ç”¨äºç”ŸæˆRestFul WebæœåŠ¡çš„å¯è§†åŒ–è¡¨ç¤ºå·¥å…·ï¼Œå®ƒä½¿æ–‡æ¡£å’ŒæœåŠ¡å™¨å¯è§†åŒ–æ›´æ–°ï¼›</p><p>å½“å®šä¹‰å¥½Swaggeråï¼Œå¯ä»¥è°ƒç”¨æœåŠ¡ç«¯æ¥å£ï¼Œæ¥æŸ¥çœ‹æ¥å£çš„è¿”å›å€¼ï¼ŒéªŒè¯è¿”å›æ•°æ®çš„æ­£ç¡®æ€§ï¼›</p><h3 id="162ã€æ•°æ®åº“çš„ä¸‰èŒƒå¼æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#162ã€æ•°æ®åº“çš„ä¸‰èŒƒå¼æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="162ã€æ•°æ®åº“çš„ä¸‰èŒƒå¼æ˜¯ä»€ä¹ˆï¼Ÿ"></a>162ã€æ•°æ®åº“çš„ä¸‰èŒƒå¼æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>1ã€åˆ—ä¸å¯å†åˆ†ï¼›</p><p>2ã€æ¯ä¸€è¡Œæ•°æ®åªåšä¸€ä»¶äº‹ï¼Œåªä¸ä¸€åˆ—ç›¸å…³ï¼Œä¸»é”®ï¼›</p><p>3ã€æ¯ä¸ªå±æ€§éƒ½ä¸ä¸»é”®æœ‰ç›´æ¥å…³ç³»ï¼Œè€Œä¸æ˜¯é—´æ¥å…³ç³»ï¼›</p><p>ä¸‰å¤§èŒƒå¼åªæ˜¯è®¾è®¡æ•°æ®åº“çš„åŸºæœ¬ç†å¿µï¼Œå¯ä»¥å»ºç«‹å†—ä½™è¾ƒå°ã€ç»“æ„åˆç†çš„æ•°æ®åº“ã€‚å¦‚æœæœ‰ç‰¹æ®Šæƒ…ç»“ï¼Œå½“ç„¶è¦ç‰¹æ®Šå¯¹å¾…ï¼Œæ•°æ®åº“è®¾è®¡æœ€é‡è¦çš„æ˜¯çœ‹éœ€æ±‚å’Œæ€§èƒ½ï¼Œéœ€æ±‚&gt;æ€§èƒ½&gt;è¡¨ç»“æ„ã€‚</p><p>æ‰€ä»¥ä¸èƒ½ä¸€å‘³çš„è¿½æ±‚ä¸‰èŒƒå¼å»ºç«‹æ•°æ®åº“ã€‚</p><h3 id="163ã€ä¸€å¼ è‡ªå¢è¡¨é‡Œé¢æ€»å…±æœ‰-7-æ¡æ•°æ®ï¼Œåˆ é™¤äº†æœ€å-2-æ¡æ•°æ®ï¼Œé‡å¯-mysql-æ•°æ®åº“ï¼Œåˆæ’å…¥äº†ä¸€æ¡æ•°æ®ï¼Œæ­¤æ—¶-id-æ˜¯å‡ ï¼Ÿ"><a href="#163ã€ä¸€å¼ è‡ªå¢è¡¨é‡Œé¢æ€»å…±æœ‰-7-æ¡æ•°æ®ï¼Œåˆ é™¤äº†æœ€å-2-æ¡æ•°æ®ï¼Œé‡å¯-mysql-æ•°æ®åº“ï¼Œåˆæ’å…¥äº†ä¸€æ¡æ•°æ®ï¼Œæ­¤æ—¶-id-æ˜¯å‡ ï¼Ÿ" class="headerlink" title="163ã€ä¸€å¼ è‡ªå¢è¡¨é‡Œé¢æ€»å…±æœ‰ 7 æ¡æ•°æ®ï¼Œåˆ é™¤äº†æœ€å 2 æ¡æ•°æ®ï¼Œé‡å¯ mysql æ•°æ®åº“ï¼Œåˆæ’å…¥äº†ä¸€æ¡æ•°æ®ï¼Œæ­¤æ—¶ id æ˜¯å‡ ï¼Ÿ"></a>163ã€ä¸€å¼ è‡ªå¢è¡¨é‡Œé¢æ€»å…±æœ‰ 7 æ¡æ•°æ®ï¼Œåˆ é™¤äº†æœ€å 2 æ¡æ•°æ®ï¼Œé‡å¯ mysql æ•°æ®åº“ï¼Œåˆæ’å…¥äº†ä¸€æ¡æ•°æ®ï¼Œæ­¤æ—¶ id æ˜¯å‡ ï¼Ÿ</h3><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆ›å»ºçš„è¡¨ç±»å‹æ˜¯InnoDBã€‚</p><p>ä¸é‡å¯MySQLï¼Œå¦‚æœæ–°å¢ä¸€æ¡è®°å½•ï¼Œidæ˜¯8ï¼›<br>é‡å¯ï¼ŒIDæ˜¯6ï¼›å› ä¸ºInnoDBè¡¨åªæŠŠè‡ªå¢ä¸»é”®çš„æœ€å¤§IDè®°å½•åœ¨å†…å­˜ä¸­ï¼Œå¦‚æœé‡å¯ï¼Œå·²åˆ é™¤çš„æœ€å¤§IDä¼šä¸¢å¤±ã€‚<br>å¦‚æœè¡¨ç±»å‹æ˜¯MyISAMï¼Œé‡å¯ä¹‹åï¼Œæœ€å¤§IDä¹Ÿä¸ä¼šä¸¢å¤±ï¼ŒIDæ˜¯8ï¼›</p><p>InnoDBå¿…é¡»æœ‰ä¸»é”®ï¼ˆå»ºè®®ä½¿ç”¨è‡ªå¢ä¸»é”®ï¼Œä¸ç”¨UUIDï¼Œè‡ªå¢ä¸»é”®ç´¢å¼•æŸ¥è¯¢æ•ˆç‡é«˜ï¼‰ã€æ”¯æŒå¤–é”®ã€æ”¯æŒäº‹åŠ¡ã€æ”¯æŒè¡Œçº§é”ã€‚</p><p>ç³»ç»Ÿå´©æºƒåï¼ŒMyISAMå¾ˆéš¾æ¢å¤ï¼›</p><p>ç»¼åˆè€ƒè™‘ï¼Œä¼˜å…ˆé€‰æ‹©InnoDBï¼ŒMySQLé»˜è®¤ä¹Ÿæ˜¯InnoDBã€‚</p><h3 id="164ã€å¦‚ä½•è·å–å½“å‰æ•°æ®åº“ç‰ˆæœ¬ï¼Ÿ"><a href="#164ã€å¦‚ä½•è·å–å½“å‰æ•°æ®åº“ç‰ˆæœ¬ï¼Ÿ" class="headerlink" title="164ã€å¦‚ä½•è·å–å½“å‰æ•°æ®åº“ç‰ˆæœ¬ï¼Ÿ"></a>164ã€å¦‚ä½•è·å–å½“å‰æ•°æ®åº“ç‰ˆæœ¬ï¼Ÿ</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">/</span>MySQL,,mysql <span class="operator">-</span>v</span><br><span class="line"><span class="keyword">select</span> version();</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>Oracle </span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> v$version;</span><br></pre></td></tr></table></figure><h3 id="165ã€è¯´ä¸€ä¸‹-ACID-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#165ã€è¯´ä¸€ä¸‹-ACID-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="165ã€è¯´ä¸€ä¸‹ ACID æ˜¯ä»€ä¹ˆï¼Ÿ"></a>165ã€è¯´ä¸€ä¸‹ ACID æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>ACIDæ˜¯æ•°æ®åº“äº‹åŠ¡æ‰§è¡Œçš„å››å¤§åŸºæœ¬è¦ç´ ï¼ŒåŒ…æ‹¬åŸå­æ€§ï¼ˆAtomicityï¼‰ã€ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€éš”ç¦»æ€§ï¼ˆIsolationï¼‰ã€æŒä¹…æ€§ï¼ˆDurabilityï¼‰ã€‚</p><p>1ã€åŸå­æ€§</p><p>æ•´ä¸ªäº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¸å…¨éƒ¨ä¸å®Œæˆï¼Œä¸å¯èƒ½åœæ»åœ¨ä¸­é—´æŸä¸ªç¯èŠ‚ã€‚äº‹åŠ¡åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œä¼šè¢«roolbackå›æ»šåˆ°äº‹åŠ¡å¼€å§‹å‰çš„çŠ¶æ€ï¼Œå°±åƒè¿™ä¸ªäº‹åŠ¡ä»æœªæ‰§è¡Œè¿‡ä¸€æ ·ã€‚</p><p>2ã€ä¸€è‡´æ€§</p><p>äº‹åŠ¡å¿…é¡»å§‹ç»ˆä¿æŒç³»ç»Ÿå¤„äºä¸€è‡´çš„çŠ¶æ€ï¼Œä¸ç®¡åœ¨ä»»ä½•ç»™å®šçš„æ—¶é—´å¹¶å‘äº‹åŠ¡æœ‰å¤šå°‘ã€‚</p><p>3ã€éš”ç¦»æ€§</p><p>éš”ç¦»çŠ¶æ€æ‰§è¡Œäº‹åŠ¡ï¼Œä½¿ä»–ä»¬å¥½åƒæ˜¯ç³»ç»Ÿåœ¨ç»™å®šæ—¶é—´å†…æ‰§è¡Œçš„å”¯ä¸€æ“ä½œã€‚</p><p>å¦‚æœæœ‰ä¸¤ä¸ªäº‹åŠ¡ï¼Œè¿è¡Œåœ¨ç›¸åŒçš„æ—¶é—´å†…ï¼Œæ‰§è¡Œç›¸åŒçš„åŠŸèƒ½ï¼Œäº‹åŠ¡çš„éš”ç¦»æ€§ç¡®ä¿æ¯ä¸€ä¸ªäº‹åŠ¡åœ¨ç³»ç»Ÿä¸­è®¤ä¸ºåªæœ‰è‡ªå·±åœ¨ä½¿ç”¨ç³»ç»Ÿã€‚è¿™ç§å±æ€§ç§°ä¸ºä¸²è¡ŒåŒ–ï¼Œä¸ºäº†é˜²æ­¢äº‹åŠ¡æ“ä½œé—´çš„æ··æ·†ï¼Œå¿…é¡»ä¸²è¡ŒåŒ–æˆ–åºåˆ—åŒ–è¯·æ±‚ï¼Œä½¿å¾—åœ¨åŒä¸€æ—¶é—´ä»…æœ‰ä¸€ä¸ªè¯·æ±‚ç”¨äºåŒä¸€æ•°æ®ã€‚</p><p>4ã€æŒä¹…æ€§</p><p>ä¸€ä¸ªæˆåŠŸçš„äº‹åŠ¡å°†æ°¸ä¹…çš„æ”¹å˜ç³»ç»Ÿçš„çŠ¶æ€ã€‚</p><h3 id="166ã€char-å’Œ-varchar-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#166ã€char-å’Œ-varchar-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="166ã€char å’Œ varchar çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>166ã€char å’Œ varchar çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><ol><li>charçš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œvarcharçš„é•¿åº¦çš„å¯å˜çš„ï¼›</li><li>charçš„æ•ˆç‡æ¯”varcharçš„æ•ˆç‡é«˜ï¼›</li><li>charå ç”¨ç©ºé—´æ¯”varcharå¤§ï¼Œcharåœ¨æŸ¥è¯¢æ—¶éœ€è¦ä½¿ç”¨trimï¼›</li></ol><h3 id="167ã€float-å’Œ-double-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#167ã€float-å’Œ-double-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="167ã€float å’Œ double çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>167ã€float å’Œ double çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>1ã€float å’Œ double çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</p><p>ï¼ˆ1ï¼‰å†…å­˜ä¸­å æœ‰çš„å­—èŠ‚æ•°ä¸åŒ</p><p>å•ç²¾åº¦æµ®ç‚¹æ•°åœ¨å†…å­˜ä¸­å æœ‰4ä¸ªå­—èŠ‚ï¼›</p><p>åŒç²¾åº¦æµ®ç‚¹æ•°åœ¨å†…å­˜ä¸­å æœ‰8ä¸ªå­—èŠ‚ï¼›</p><p>ï¼ˆ2ï¼‰æœ‰æ•ˆæ•°å­—ä½æ•°ä¸åŒ</p><p>å•ç²¾åº¦æµ®ç‚¹æ•°æœ‰æ•ˆæ•°å­—8ä½ï¼›</p><p>åŒç²¾åº¦æµ®ç‚¹æ•°æœ‰æ•ˆæ•°å­—16ä½ï¼›</p><p>ï¼ˆ3ï¼‰æ•°å€¼å–å€¼èŒƒå›´ä¸åŒ</p><p>å•ç²¾åº¦æµ®ç‚¹æ•°çš„è¡¨ç¤ºèŒƒå›´ï¼š-3.40E+38~3.40E+38</p><p>åŒç²¾åº¦æµ®ç‚¹æ•°çš„è¡¨ç¤ºèŒƒå›´ï¼š-1.79E+308~-1.79E+308</p><p>ï¼ˆ4ï¼‰åœ¨ç¨‹åºä¸­å¤„ç†é€Ÿåº¦ä¸åŒ</p><p>ä¸€èˆ¬æ¥è¯´ï¼ŒCPUå¤„ç†å•ç²¾åº¦æµ®ç‚¹æ•°çš„é€Ÿåº¦æ¯”åŒç²¾åº¦æµ®ç‚¹æ•°çš„é€Ÿåº¦å¿«</p><p>å¦‚æœä¸å£°æ˜ï¼Œé»˜è®¤å°æ•°æ˜¯doubleç±»å‹ï¼Œå¦‚æœæƒ³ç”¨floatï¼Œè¦è¿›è¡Œå¼ºè½¬ï¼›</p><p>2ã€ä¾‹å¦‚</p><p>float f = 1.3ï¼›ä¼šç¼–è¯‘æŠ¥é”™ï¼Œæ­£ç¡®çš„å†™æ³•æ˜¯float f = (float)1.3;æˆ–è€…float a = 1.3f;ï¼ˆfæˆ–Féƒ½å¯ä»¥ä¸åŒºåˆ†å¤§å°å†™ï¼‰</p><p>3ã€æ³¨æ„</p><p>floatæ˜¯å…«ä½æœ‰æ•ˆæ•°å­—ï¼Œç¬¬ä¸ƒä½ä¼šå››èˆäº”å…¥ï¼›</p><p>4ã€é¢è¯•é¢˜</p><p>ï¼ˆ1ï¼‰javaä¸­3*0.1==0.3å°†ä¼šè¿”å›ä»€ä¹ˆï¼Ÿtrueè¿˜æ˜¯falseï¼Ÿ</p><p>ç­”ï¼šè¿”å›falseï¼Œå› ä¸ºæµ®ç‚¹æ•°ä¸èƒ½å®Œå…¨ç²¾ç¡®çš„è¡¨ç¤ºå‡ºæ¥ï¼Œä¸€èˆ¬ä¼šæŸå¤±ç²¾åº¦ï¼›</p><p>ï¼ˆ2ï¼‰javaä¸­float f = 3.4;æ˜¯å¦æ­£ç¡®ï¼Ÿ</p><p>ç­”ï¼šä¸æ­£ç¡®ã€‚å› ä¸º3.4æ˜¯åŒç²¾åº¦æµ®ç‚¹æ•°ï¼Œå°†åŒç²¾åº¦èµ‹ç»™å•ç²¾åº¦å±äºå‘ä¸‹è½¬å‹ï¼Œä¼šé€ æˆç²¾åº¦æŸå¤±ï¼Œå› æ­¤éœ€è¦å¼ºåˆ¶ç±»å‹è½¬æ¢float=ï¼ˆfloatï¼‰3.4;æˆ–è€…å†™æˆfloat f = 3.4f;</p><h3 id="168ã€Oracleåˆ†é¡µsql"><a href="#168ã€Oracleåˆ†é¡µsql" class="headerlink" title="168ã€Oracleåˆ†é¡µsql"></a>168ã€Oracleåˆ†é¡µsql</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#ä¸å¸¦æ’åºçš„</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> (</span><br><span class="line"><span class="keyword">SELECT</span> ROWNUM <span class="keyword">AS</span> rowno, t.<span class="operator">*</span> <span class="keyword">FROM</span> worker t <span class="keyword">where</span> ROWNUM <span class="operator">&lt;=</span><span class="number">20</span>) table_alias </span><br><span class="line"><span class="keyword">WHERE</span> table_alias.rowno <span class="operator">&gt;</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#å¸¦æ’åºçš„</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> (</span><br><span class="line"><span class="keyword">SELECT</span> tt.<span class="operator">*</span>, ROWNUM <span class="keyword">AS</span> rowno <span class="keyword">FROM</span> (  </span><br><span class="line"><span class="keyword">SELECT</span> t.<span class="operator">*</span> <span class="keyword">FROM</span> worker t <span class="keyword">ORDER</span> <span class="keyword">BY</span> wkid <span class="keyword">aSC</span>) tt <span class="keyword">WHERE</span> ROWNUM <span class="operator">&lt;=</span> <span class="number">20</span>) table_alias </span><br><span class="line"><span class="keyword">WHERE</span> table_alias.rowno <span class="operator">&gt;=</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure><h3 id="169ã€æ•°æ®åº“å¦‚ä½•ä¿è¯ä¸»é”®å”¯ä¸€æ€§"><a href="#169ã€æ•°æ®åº“å¦‚ä½•ä¿è¯ä¸»é”®å”¯ä¸€æ€§" class="headerlink" title="169ã€æ•°æ®åº“å¦‚ä½•ä¿è¯ä¸»é”®å”¯ä¸€æ€§"></a>169ã€æ•°æ®åº“å¦‚ä½•ä¿è¯ä¸»é”®å”¯ä¸€æ€§</h3><p>1ã€ä¸»é”®çº¦æŸ</p><p>ä¸»é”®åˆ—ä¸Šæ²¡æœ‰ä»»ä½•ä¸¤è¡Œå…·æœ‰ç›¸åŒå€¼ï¼ˆå³é‡å¤å€¼ï¼‰ï¼Œä¸å…è®¸ç©ºï¼ˆNULLï¼‰ï¼›</p><p>2ã€å”¯ä¸€æ€§çº¦æŸ</p><p>ä¿è¯ä¸€ä¸ªå­—æ®µæˆ–è€…ä¸€ç»„å­—æ®µé‡Œçš„æ•°æ®éƒ½ä¸è¡¨ä¸­å…¶å®ƒè¡Œçš„å¯¹åº”æ•°æ®ä¸åŒã€‚å’Œä¸»é”®çº¦æŸä¸åŒï¼Œå”¯ä¸€æ€§çº¦æŸå…è®¸ä¸ºnullï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€è¡Œï¼›</p><p>3ã€å”¯ä¸€æ€§ç´¢å¼•</p><p>ä¸å…è®¸å…·æœ‰ç´¢å¼•å€¼ç›¸åŒçš„è¡Œï¼Œä»è€Œç¦æ­¢é‡å¤çš„ç´¢å¼•å’Œé”®å€¼ï¼›</p><p>4ã€ä¸‰è€…çš„åŒºåˆ«</p><p>çº¦æŸæ˜¯ç”¨æ¥æ£€æŸ¥æ•°æ®çš„æ­£ç¡®æ€§ï¼›<br>ç´¢å¼•æ˜¯ç”¨æ¥ä¼˜åŒ–æŸ¥è¯¢çš„ï¼›<br>åˆ›å»ºå”¯ä¸€æ€§çº¦æŸä¼šåˆ›å»ºä¸€ä¸ªçº¦æŸå’Œä¸€ä¸ªå”¯ä¸€æ€§ç´¢å¼•ï¼›<br>åˆ›å»ºå”¯ä¸€æ€§ç´¢å¼•åªä¼šåˆ›å»ºä¸€ä¸ªå”¯ä¸€æ€§ç´¢å¼•ï¼›<br>ä¸»é”®çº¦æŸå’Œå”¯ä¸€æ€§çº¦æŸéƒ½ä¼šåˆ›å»ºä¸€ä¸ªå”¯ä¸€æ€§ç´¢å¼•ã€‚</p><h3 id="170ã€å¦‚ä½•è®¾è®¡æ•°æ®åº“"><a href="#170ã€å¦‚ä½•è®¾è®¡æ•°æ®åº“" class="headerlink" title="170ã€å¦‚ä½•è®¾è®¡æ•°æ®åº“"></a>170ã€å¦‚ä½•è®¾è®¡æ•°æ®åº“</h3><p>1ã€æ•°æ®åº“è®¾è®¡æœ€èµ·ç è¦å ç”¨è¿™ä¸ªé¡¹ç›®å¼€å‘çš„40%ä»¥ä¸Šçš„æ—¶é—´</p><p>2ã€æ•°æ®åº“è®¾è®¡ä¸ä»…ä»…åœç•™åœ¨é¡µé¢demoçš„è¡¨é¢</p><p>é¡µé¢å†…å®¹æ‰€éœ€å­—æ®µï¼Œåœ¨æ•°æ®åº“è®¾è®¡ä¸­åªæ˜¯ä¸€éƒ¨åˆ†ï¼Œè¿˜æœ‰ç³»ç»Ÿè¿è½¬ã€æ¨¡å—äº¤äº’ã€ä¸­è½¬æ•°æ®ã€è¡¨ä¹‹é—´çš„è”ç³»ç­‰ç­‰æ‰€éœ€è¦çš„å­—æ®µï¼Œå› æ­¤æ•°æ®åº“è®¾è®¡ç»å¯¹ä¸æ˜¯ç®€å•çš„åŸºæœ¬æ•°æ®å­˜å‚¨ï¼Œè¿˜æœ‰é€»è¾‘æ•°æ®å­˜å‚¨ã€‚</p><p>3ã€æ•°æ®åº“è®¾è®¡å®Œæˆåï¼Œé¡¹ç›®80%çš„è®¾è®¡å¼€å‘éƒ½è¦å­˜åœ¨ä½ çš„è„‘æµ·ä¸­</p><p>æ¯ä¸ªå­—æ®µçš„è®¾è®¡éƒ½è¦æœ‰ä»–å­˜åœ¨çš„æ„ä¹‰ï¼Œè¦æ¸…æ¥šçš„çŸ¥é“ç¨‹åºä¸­å¦‚ä½•å»è¿ç”¨è¿™äº›å­—æ®µï¼Œå¤šå¼ è¡¨çš„è”ç³»åœ¨ç¨‹åºä¸­æ˜¯å¦‚ä½•ä½“ç°çš„ã€‚</p><p>4ã€æ•°æ®åº“è®¾è®¡æ—¶å°±è¦è€ƒè™‘æ•ˆç‡å’Œä¼˜åŒ–é—®é¢˜</p><p>æ•°æ®é‡å¤§çš„è¡¨ç¤ºç²—ç²’åº¦çš„ï¼Œä¼šå†—ä½™ä¸€äº›å¿…è¦å­—æ®µï¼Œè¾¾åˆ°ç”¨æœ€å°‘çš„è¡¨ï¼Œæœ€å¼±çš„è¡¨å…³ç³»å»å­˜å‚¨æµ·é‡çš„æ•°æ®ã€‚å¤§æ•°æ®çš„è¡¨è¦å»ºç«‹ç´¢å¼•ï¼Œæ–¹ä¾¿æŸ¥è¯¢ã€‚å¯¹äºå«æœ‰è®¡ç®—ã€æ•°æ®äº¤äº’ã€ç»Ÿè®¡è¿™ç±»éœ€æ±‚æ—¶ï¼Œè¿˜æœ‰è€ƒè™‘æ˜¯å¦æœ‰å¿…è¦é‡‡ç”¨å­˜å‚¨è¿‡ç¨‹ã€‚</p><p>5ã€æ·»åŠ å¿…è¦çš„å†—ä½™å­—æ®µ</p><p>åƒåˆ›å»ºæ—¶é—´ã€ä¿®æ”¹æ—¶é—´ã€æ“ä½œç”¨æˆ·IPã€å¤‡æ³¨è¿™äº›å­—æ®µï¼Œåœ¨æ¯å¼ è¡¨ä¸­æœ€å¥½éƒ½æœ‰ï¼Œä¸€äº›å†—ä½™çš„å­—æ®µä¾¿äºæ—¥åç»´æŠ¤ã€åˆ†æã€æ‹“å±•è€Œæ·»åŠ ã€‚</p><p>6ã€è®¾è®¡åˆç†çš„è¡¨å…³è” </p><p>è‹¥ä¸¤å¼ è¡¨ä¹‹é—´çš„å…³ç³»å¤æ‚ï¼Œå»ºè®®é‡‡ç”¨ç¬¬ä¸‰å¼ æ˜ å°„è¡¨æ¥å…³è”ç»´æŠ¤ä¸¤å¼ è¡¨ä¹‹é—´çš„å…³ç³»ï¼Œä»¥é™ä½è¡¨ä¹‹é—´çš„ç›´æ¥è€¦åˆåº¦ã€‚</p><p>7ã€è®¾è®¡è¡¨æ—¶ä¸åŠ ä¸»å¤–é”®ç­‰çº¦æŸå…³è”ï¼Œç³»ç»Ÿç¼–ç é˜¶æ®µå®Œæˆåå†æ·»åŠ çº¦æŸæ€§å…³è”</p><p>8ã€é€‰æ‹©åˆé€‚çš„ä¸»é”®ç”Ÿæˆç­–ç•¥</p><p>æ•°æ®åº“çš„è®¾è®¡éš¾åº¦å…¶å®æ¯”å•çº¯çš„æŠ€æœ¯å®ç°éš¾å¾ˆå¤šï¼Œä»–å……åˆ†ä½“ç°äº†ä¸€ä¸ªäººçš„å…¨å±€è®¾è®¡èƒ½åŠ›å’ŒæŒæ§èƒ½åŠ›ï¼Œæœ€åè¯´ä¸€å¥ï¼Œæ•°æ®åº“è®¾è®¡ï¼Œå¾ˆé‡è¦ï¼Œå¾ˆå¤æ‚ã€‚</p><h3 id="171ã€æ€§åˆ«æ˜¯å¦é€‚åˆåšç´¢å¼•"><a href="#171ã€æ€§åˆ«æ˜¯å¦é€‚åˆåšç´¢å¼•" class="headerlink" title="171ã€æ€§åˆ«æ˜¯å¦é€‚åˆåšç´¢å¼•"></a>171ã€æ€§åˆ«æ˜¯å¦é€‚åˆåšç´¢å¼•</h3><p>åŒºåˆ†åº¦ä¸é«˜çš„å­—æ®µä¸é€‚åˆåšç´¢å¼•ï¼Œå› ä¸ºç´¢å¼•é¡µæ˜¯éœ€è¦æœ‰å¼€é”€çš„ï¼Œéœ€è¦å­˜å‚¨çš„ï¼Œä¸è¿‡è¿™ç±»å­—æ®µå¯ä»¥åšè”åˆç´¢å¼•çš„ä¸€éƒ¨åˆ†ã€‚</p><h3 id="172ã€å¦‚ä½•æŸ¥è¯¢é‡å¤çš„æ•°æ®"><a href="#172ã€å¦‚ä½•æŸ¥è¯¢é‡å¤çš„æ•°æ®" class="headerlink" title="172ã€å¦‚ä½•æŸ¥è¯¢é‡å¤çš„æ•°æ®"></a>172ã€å¦‚ä½•æŸ¥è¯¢é‡å¤çš„æ•°æ®</h3><p>1ã€æŸ¥è¯¢é‡å¤çš„å•ä¸ªå­—æ®µï¼ˆgroup byï¼‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> é‡å¤å­—æ®µA, <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> è¡¨ <span class="keyword">group</span> <span class="keyword">by</span> é‡å¤å­—æ®µA <span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">&gt;</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><p>2ã€æŸ¥è¯¢é‡å¤çš„å¤šä¸ªå­—æ®µï¼ˆgroup byï¼‰</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> é‡å¤å­—æ®µA, é‡å¤å­—æ®µB, <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> è¡¨ <span class="keyword">group</span> <span class="keyword">by</span> é‡å¤å­—æ®µA, é‡å¤å­—æ®µB <span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">&gt;</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="173ã€æ•°æ®åº“ä¸€èˆ¬ä¼šé‡‡å–ä»€ä¹ˆæ ·çš„ä¼˜åŒ–æ–¹æ³•ï¼Ÿ"><a href="#173ã€æ•°æ®åº“ä¸€èˆ¬ä¼šé‡‡å–ä»€ä¹ˆæ ·çš„ä¼˜åŒ–æ–¹æ³•ï¼Ÿ" class="headerlink" title="173ã€æ•°æ®åº“ä¸€èˆ¬ä¼šé‡‡å–ä»€ä¹ˆæ ·çš„ä¼˜åŒ–æ–¹æ³•ï¼Ÿ"></a>173ã€æ•°æ®åº“ä¸€èˆ¬ä¼šé‡‡å–ä»€ä¹ˆæ ·çš„ä¼˜åŒ–æ–¹æ³•ï¼Ÿ</h3><p>1ã€é€‰å–é€‚åˆçš„å­—æ®µå±æ€§</p><ul><li>ä¸ºäº†è·å–æ›´å¥½çš„æ€§èƒ½ï¼Œå¯ä»¥å°†è¡¨ä¸­çš„å­—æ®µå®½åº¦è®¾å¾—å°½å¯èƒ½å°ã€‚</li><li>å°½é‡æŠŠå­—æ®µè®¾ç½®æˆnot null</li><li>æ‰§è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œæ•°æ®åº“ä¸ç”¨å»æ¯”è¾ƒnullå€¼ã€‚</li><li>å¯¹æŸäº›çœä»½æˆ–è€…æ€§åˆ«å­—æ®µï¼Œå°†ä»–ä»¬å®šä¹‰ä¸ºenumç±»å‹ï¼Œenumç±»å‹è¢«å½“åšæ•°å€¼å‹æ•°æ®æ¥å¤„ç†ï¼Œè€Œæ•°å€¼å‹æ•°æ®è¢«å¤„ç†èµ·æ¥çš„é€Ÿåº¦è¦æ¯”æ–‡æœ¬ç±»å‹å—å¾ˆå¤šã€‚</li></ul><p>2ã€ä½¿ç”¨joinè¿æ¥ä»£æ›¿å­æŸ¥è¯¢</p><p>3ã€ä½¿ç”¨è”åˆunionæ¥ä»£æ›¿æ‰‹åŠ¨åˆ›å»ºçš„ä¸´æ—¶è¡¨</p><p>æ³¨æ„ï¼šunionç”¨æ³•ä¸­ï¼Œä¸¤ä¸ªselectè¯­å¥çš„å­—æ®µç±»å‹è¦åŒ¹é…ï¼Œè€Œä¸”å­—æ®µä¸ªæ•°è¦ç›¸åŒã€‚</p><p>4ã€äº‹åŠ¡</p><p>è¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ã€‚</p><p>å¯ä»¥ä¿è¯æ•°æ®åº“ä¸­æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚äº‹åŠ¡ä»¥beginå¼€å§‹ï¼Œcommitå…³é”®å­—ç»“æŸã€‚</p><p>å¦‚æœå‡ºé”™ï¼Œrollbackå‘½ä»¤å¯ä»¥å°†æ•°æ®åº“æ¢å¤åˆ°beginå¼€å§‹ä¹‹å‰çš„çŠ¶æ€ã€‚</p><p>äº‹åŠ¡çš„å¦ä¸€ä¸ªé‡è¦ä½œç”¨æ˜¯å½“å¤šä¸ªç”¨æˆ·åŒæ—¶ä½¿ç”¨ç›¸åŒçš„æ•°æ®æºæ—¶ï¼Œå®ƒå¯ä»¥åˆ©ç”¨é”å®šæ•°æ®åº“çš„æ–¹å¼ä¸ºç”¨æˆ·æä¾›ä¸€ç§å®‰å…¨çš„è®¿é—®æ–¹å¼ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯ç”¨æˆ·çš„æ“ä½œä¸è¢«å…¶ä»–çš„ç”¨æˆ·å¹²æ‰°ã€‚</p><p>5ã€é”å®šè¡¨</p><p>å°½ç®¡äº‹åŠ¡æ˜¯ç»´æŠ¤æ•°æ®åº“å®Œæ•´æ€§çš„ä¸€ä¸ªéå¸¸å¥½çš„æ–¹æ³•ï¼Œä½†å´å› ä¸ºå®ƒçš„ç‹¬å æ€§ï¼Œæœ‰æ—¶ä¼šå½±å“æ•°æ®åº“çš„æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨å¤§åº”ç”¨ä¸­ã€‚</p><p>ç”±äºåœ¨äº‹åŠ¡æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæ•°æ®åº“ä¼šè¢«é”å®šï¼Œå› æ­¤å…¶å®ƒç”¨æˆ·åªèƒ½æš‚æ—¶ç­‰å¾…ç›´åˆ°äº‹åŠ¡ç»“æŸã€‚</p><p>æœ‰çš„æ—¶å€™å¯ä»¥ç”¨é”å®šè¡¨çš„æ–¹æ³•æ¥è·å¾—æ›´å¥½çš„æ€§èƒ½ï¼Œ</p><p>å…±äº«é”ï¼šå…¶å®ƒç”¨æˆ·åªèƒ½çœ‹ï¼Œä¸èƒ½ä¿®æ”¹</p><p>lock table person in share modeï¼›</p><p>å¯¹äºé€šè¿‡lock table å‘½ä»¤ä¸»åŠ¨æ·»åŠ çš„é”æ¥è¯´ï¼Œå¦‚æœè¦é‡Šæ”¾å®ƒä»¬ï¼Œåªéœ€å‘å‡ºrollbackå‘½ä»¤å³å¯ã€‚</p><p>6ã€ä½¿ç”¨å¤–é”®</p><p>é”å®šè¡¨çš„æ–¹æ³•å¯ä»¥ç»´æŠ¤æ•°æ®çš„å®Œæ•´æ€§ï¼Œä½†æ˜¯å®ƒå´ä¸èƒ½ä¿è¯æ•°æ®çš„å…³è”æ€§ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨å¤–é”®ã€‚</p><p>7ã€ä½¿ç”¨ç´¢å¼•</p><p>ç´¢å¼•æ˜¯æé«˜æ•°æ®åº“æŸ¥è¯¢é€Ÿåº¦çš„å¸¸ç”¨æ–¹æ³•ï¼Œå°¤å…¶æ˜¯æŸ¥è¯¢è¯­å¥ä¸­åŒ…å«max()ã€min()ã€order byè¿™äº›å‘½ä»¤çš„æ—¶å€™ï¼Œæ€§èƒ½æé«˜æ›´ä¸ºæ˜¾è‘—ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ç´¢å¼•åº”è¯¥å»ºåœ¨å¸¸ç”¨äºjoinã€whereã€order byçš„å­—æ®µä¸Šã€‚å°½é‡ä¸è¦å¯¹æ•°æ®åº“ä¸­å«æœ‰å¤§é‡é‡å¤çš„å€¼å¾—å­—æ®µå»ºç«‹ç´¢å¼•ã€‚</p><p>8ã€ä¼˜åŒ–çš„æŸ¥è¯¢è¯­å¥</p><p>åœ¨ç´¢å¼•çš„å­—æ®µä¸Šå°½é‡ä¸è¦ä½¿ç”¨å‡½æ•°è¿›è¡Œæ“ä½œã€‚</p><p>å°½é‡ä¸è¦ä½¿ç”¨likeå…³é”®å­—å’Œé€šé…ç¬¦ï¼Œè¿™æ ·åšæ³•å¾ˆç®€å•ï¼Œä½†å´æ˜¯ä»¥ç‰ºç‰²æ€§èƒ½ä¸ºä»£ä»·çš„ã€‚</p><p>é¿å…åœ¨æŸ¥è¯¢ä¸­è¿›è¡Œè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œå› ä¸ºç±»å‹è½¬æ¢ä¹Ÿä¼šä½¿ç´¢å¼•å¤±æ•ˆã€‚</p><h3 id="174ã€ç´¢å¼•æ€ä¹ˆå®šä¹‰ï¼Œåˆ†å“ªå‡ ç§"><a href="#174ã€ç´¢å¼•æ€ä¹ˆå®šä¹‰ï¼Œåˆ†å“ªå‡ ç§" class="headerlink" title="174ã€ç´¢å¼•æ€ä¹ˆå®šä¹‰ï¼Œåˆ†å“ªå‡ ç§"></a>174ã€ç´¢å¼•æ€ä¹ˆå®šä¹‰ï¼Œåˆ†å“ªå‡ ç§</h3><ol><li>b-treeç´¢å¼•ï¼Œå¦‚æœä¸å»ºç«‹ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œoracleå°±è‡ªåŠ¨ç»™æ¯ä¸€åˆ—éƒ½åŠ ä¸€ä¸ªB æ ‘ç´¢å¼•;</li><li>normalï¼šæ™®é€šç´¢å¼•</li><li>uniqueï¼šå”¯ä¸€ç´¢å¼•</li><li>bitmapï¼šä½å›¾ç´¢å¼•ï¼Œä½å›¾ç´¢å¼•ç‰¹å®šäºåªæœ‰å‡ ä¸ªæšä¸¾å€¼çš„æƒ…å†µï¼Œæ¯”å¦‚æ€§åˆ«å­—æ®µï¼›</li><li>åŸºäºå‡½æ•°çš„ç´¢å¼•</li></ol><h3 id="175ã€mysql-çš„å†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#175ã€mysql-çš„å†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="175ã€mysql çš„å†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>175ã€mysql çš„å†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><ol><li>å†…è¿æ¥,æ˜¾ç¤ºä¸¤ä¸ªè¡¨ä¸­æœ‰è”ç³»çš„æ‰€æœ‰æ•°æ®;</li><li>å·¦é“¾æ¥,ä»¥å·¦è¡¨ä¸ºå‚ç…§,æ˜¾ç¤ºæ‰€æœ‰æ•°æ®,å³è¡¨ä¸­æ²¡æœ‰åˆ™ä»¥nullæ˜¾ç¤º</li><li>å³é“¾æ¥,ä»¥å³è¡¨ä¸ºå‚ç…§æ˜¾ç¤ºæ•°æ®ï¼Œ,å·¦è¡¨ä¸­æ²¡æœ‰åˆ™ä»¥nullæ˜¾ç¤º</li></ol><h3 id="176ã€RabbitMQçš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ"><a href="#176ã€RabbitMQçš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="176ã€RabbitMQçš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ"></a>176ã€RabbitMQçš„ä½¿ç”¨åœºæ™¯æœ‰å“ªäº›ï¼Ÿ</h3><p>1ã€è§£å†³å¼‚æ­¥é—®é¢˜</p><p>ä¾‹å¦‚ç”¨æˆ·æ³¨å†Œï¼Œå‘é€é‚®ä»¶å’ŒçŸ­ä¿¡åé¦ˆæ³¨å†ŒæˆåŠŸï¼Œå¯ä»¥ä½¿ç”¨RabbitMQæ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”¨æˆ·æ— éœ€ç­‰å¾…åé¦ˆã€‚</p><p>2ã€æœåŠ¡é—´è§£è€¦</p><p>è®¢å•ç³»ç»Ÿå’Œåº“å­˜ç³»ç»Ÿï¼Œä¸­é—´åŠ å…¥RabbitMQæ¶ˆæ¯é˜Ÿåˆ—ï¼Œå½“åº“å­˜ç³»ç»Ÿå‡ºç°é—®é¢˜æ—¶ï¼Œè®¢å•ç³»ç»Ÿä¾æ—§èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œé™ä½æœåŠ¡é—´è€¦åˆåº¦ã€‚</p><p>3ã€ç§’æ€ç³»ç»Ÿ</p><p>åˆ©ç”¨RabbitMQçš„æœ€å¤§å€¼ï¼Œå®ç°ç§’æ€ç³»ç»Ÿã€‚</p><h3 id="177ã€RabbitMQæœ‰å“ªäº›é‡è¦çš„è§’è‰²ï¼Ÿæœ‰å“ªäº›é‡è¦çš„ç»„ä»¶ï¼Ÿ"><a href="#177ã€RabbitMQæœ‰å“ªäº›é‡è¦çš„è§’è‰²ï¼Ÿæœ‰å“ªäº›é‡è¦çš„ç»„ä»¶ï¼Ÿ" class="headerlink" title="177ã€RabbitMQæœ‰å“ªäº›é‡è¦çš„è§’è‰²ï¼Ÿæœ‰å“ªäº›é‡è¦çš„ç»„ä»¶ï¼Ÿ"></a>177ã€RabbitMQæœ‰å“ªäº›é‡è¦çš„è§’è‰²ï¼Ÿæœ‰å“ªäº›é‡è¦çš„ç»„ä»¶ï¼Ÿ</h3><p>1ã€RabbitMQæœ‰å“ªäº›é‡è¦çš„è§’è‰²ï¼Ÿ</p><p>å®¢æˆ·ç«¯ã€RabbitMQã€æœåŠ¡ç«¯ã€‚</p><p>2ã€æœ‰å“ªäº›é‡è¦çš„ç»„ä»¶ï¼Ÿ</p><p>ï¼ˆ1ï¼‰connectionFactoryï¼ˆè¿æ¥ç®¡ç†å™¨ï¼‰</p><p>åº”ç”¨ç¨‹åºä¸RabbitMQä¹‹é—´å»ºç«‹è¿æ¥çš„ç®¡ç†å™¨ã€‚</p><p>ï¼ˆ2ï¼‰Channelï¼ˆä¿¡é“ï¼‰</p><p>æ¶ˆæ¯æ¨é€ä½¿ç”¨çš„ä¿¡é“ã€‚</p><p>ï¼ˆ3ï¼‰RoutingKeyï¼ˆè·¯ç”±é”®ï¼‰</p><p>ç”¨äºæŠŠç”Ÿäº§è€…çš„æ•°æ®åˆ†é…åˆ°äº¤æ¢æœºä¸Šã€‚</p><p>ï¼ˆ4ï¼‰Exchangeï¼ˆäº¤æ¢æœºï¼‰</p><p>ç”¨äºæ¥å—å’Œåˆ†é…æ¶ˆæ¯ã€‚</p><p>ï¼ˆ5ï¼‰BindKeyï¼ˆç»‘å®šé”®ï¼‰</p><p>ç”¨äºæŠŠäº¤æ¢æœºçš„æ¶ˆæ¯ç»‘å®šåˆ°é˜Ÿåˆ—ä¸Š</p><p>ï¼ˆ6ï¼‰Queueï¼ˆé˜Ÿåˆ—ï¼‰</p><p>ç”¨äºå­˜å‚¨ç”Ÿäº§è€…æ¶ˆæ¯ã€‚</p><h3 id="178ã€RabbitMQä¸­-vhost-çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#178ã€RabbitMQä¸­-vhost-çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="178ã€RabbitMQä¸­ vhost çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"></a>178ã€RabbitMQä¸­ vhost çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>vhostå¯ä»¥ç†è§£ä¸ºminiç‰ˆçš„RabbitMQï¼Œå…¶å†…éƒ¨å‡å«æœ‰ç‹¬ç«‹çš„äº¤æ¢æœºã€ç»‘å®šã€é˜Ÿåˆ—ï¼Œæœ€é‡è¦çš„æ˜¯æ‹¥æœ‰ç‹¬ç«‹çš„æƒé™ç³»ç»Ÿï¼Œå¯ä»¥åšåˆ°vhostèŒƒå›´å†…çš„ç”¨æˆ·æ§åˆ¶ã€‚ä»RabbitMQå…¨å±€è€ƒè™‘ï¼Œä¸åŒçš„åº”ç”¨å¯ä»¥è·‘åœ¨ä¸åŒçš„vhostä¸Šï¼Œä½œä¸ºä¸åŒæƒé™éš”ç¦»çš„æ‰‹æ®µã€‚</p><h3 id="179ã€è¯´ä¸€ä¸‹-jvm-çš„ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼ŸåŠå…¶ä½œç”¨ï¼Ÿ"><a href="#179ã€è¯´ä¸€ä¸‹-jvm-çš„ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼ŸåŠå…¶ä½œç”¨ï¼Ÿ" class="headerlink" title="179ã€è¯´ä¸€ä¸‹ jvm çš„ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼ŸåŠå…¶ä½œç”¨ï¼Ÿ"></a>179ã€è¯´ä¸€ä¸‹ jvm çš„ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼ŸåŠå…¶ä½œç”¨ï¼Ÿ</h3><p>JVMåŒ…æ‹¬ç±»åŠ è½½å­ç³»ç»Ÿã€å †ã€æ–¹æ³•åŒºã€æ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€ç¨‹åºè®¡æ•°å™¨ã€ç›´æ¥å†…å­˜ã€åƒåœ¾å›æ”¶å™¨ã€æ‰§è¡Œå¼•æ“ã€‚</p><p>1ã€ç±»åŠ è½½å­ç³»ç»Ÿ</p><p>ç±»åŠ è½½å­ç³»ç»Ÿè´Ÿè´£åŠ è½½classä¿¡æ¯ï¼ŒåŠ è½½çš„ç±»ä¿¡æ¯å­˜æ”¾äºæ–¹æ³•åŒºä¸­ã€‚</p><p>2ã€ç›´æ¥å†…å­˜</p><p>ç›´æ¥å†…å­˜æ˜¯åœ¨Javaå †å¤–çš„ã€ç›´æ¥å‘ç³»ç»Ÿç”³è¯·çš„å†…å­˜ç©ºé—´ã€‚è®¿é—®ç›´æ¥å†…å­˜çš„é€Ÿåº¦ä¼šç”±äºJavaå †ã€‚å‡ºäºæ€§èƒ½çš„è€ƒè™‘ï¼Œè¯»å†™é¢‘ç¹çš„åœºåˆå¯èƒ½ä¼šè€ƒè™‘ä½¿ç”¨ç›´æ¥å†…å­˜ã€‚</p><p>3ã€åƒåœ¾å›æ”¶å™¨</p><p>åƒåœ¾å›æ”¶å™¨å¯ä»¥å¯¹å †ã€æ–¹æ³•åŒºã€ç›´æ¥å†…å­˜è¿›è¡Œå›æ”¶ã€‚</p><p>4ã€æ‰§è¡Œå¼•æ“</p><p>æ‰§è¡Œå¼•æ“è´Ÿè´£æ‰§è¡Œè™šæ‹Ÿæœºçš„å­—èŠ‚ç ï¼Œè™šæ‹Ÿæœºä¼šä½¿ç”¨å³æ—¶ç¼–è¯‘æŠ€æœ¯å°†æ–¹æ³•ç¼–è¯‘æˆæœºå™¨ç åå†æ‰§è¡Œã€‚</p><h3 id="180ã€è¯´ä¸€ä¸‹-jvm-è¿è¡Œæ—¶æ•°æ®åŒºï¼Ÿ"><a href="#180ã€è¯´ä¸€ä¸‹-jvm-è¿è¡Œæ—¶æ•°æ®åŒºï¼Ÿ" class="headerlink" title="180ã€è¯´ä¸€ä¸‹ jvm è¿è¡Œæ—¶æ•°æ®åŒºï¼Ÿ"></a>180ã€è¯´ä¸€ä¸‹ jvm è¿è¡Œæ—¶æ•°æ®åŒºï¼Ÿ</h3><p>è¿è¡Œæ—¶æ•°æ®åŒºåŒ…æ‹¬å †ã€æ–¹æ³•åŒºã€æ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€ç¨‹åºè®¡æ•°å™¨ã€‚</p><p>1ã€å †</p><p>å †è§£å†³çš„æ˜¯å¯¹è±¡å®ä¾‹å­˜å‚¨çš„é—®é¢˜ï¼Œåƒåœ¾å›æ”¶å™¨ç®¡ç†çš„ä¸»è¦åŒºåŸŸã€‚</p><p>2ã€æ–¹æ³•åŒº</p><p>æ–¹æ³•åŒºå¯ä»¥è®¤ä¸ºæ˜¯å †çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ä¿¡æ¯ï¼Œå¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ã€‚</p><p>3ã€æ ˆ</p><p>æ ˆè§£å†³çš„æ˜¯ç¨‹åºè¿è¡Œçš„é—®é¢˜ï¼Œæ ˆé‡Œé¢å­˜çš„æ˜¯æ ˆå¸§ï¼Œæ ˆå¸§é‡Œé¢å­˜çš„æ˜¯å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚</p><p>ï¼ˆ1ï¼‰æ ˆå¸§</p><p>æ¯ä¸ªæ–¹æ³•ä»è°ƒç”¨åˆ°æ‰§è¡Œçš„è¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</p><p>ï¼ˆ2ï¼‰å±€éƒ¨å˜é‡è¡¨</p><p>ç”¨äºä¿å­˜å‡½æ•°çš„å‚æ•°å’Œå±€éƒ¨å˜é‡ã€‚</p><p>ï¼ˆ3ï¼‰æ“ä½œæ•°æ ˆ</p><p>æ“ä½œæ•°æ ˆåˆç§°æ“ä½œæ ˆï¼Œå¤§å¤šæ•°æŒ‡ä»¤éƒ½æ˜¯ä»è¿™é‡Œå¼¹å‡ºæ•°æ®ï¼Œæ‰§è¡Œè¿ç®—ï¼Œç„¶åæŠŠç»“æœå‹å›æ“ä½œæ•°æ ˆã€‚</p><p>4ã€æœ¬åœ°æ–¹æ³•æ ˆ</p><p>ä¸æ ˆåŠŸèƒ½ç›¸åŒï¼Œæœ¬åœ°æ–¹æ³•æ ˆæ‰§è¡Œçš„æ˜¯æœ¬åœ°æ–¹æ³•ï¼Œä¸€ä¸ªJavaè°ƒç”¨éJavaä»£ç çš„æ¥å£ã€‚</p><p>5ã€ç¨‹åºè®¡æ•°å™¨ï¼ˆPCå¯„å­˜å™¨ï¼‰</p><p>ç¨‹åºè®¡æ•°å™¨ä¸­å­˜æ”¾çš„æ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œæ•°ã€‚JVMå·¥ä½œæ—¶å°±æ˜¯é€šè¿‡æ”¹å˜è¿™ä¸ªè®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€ä¸ªéœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ã€‚</p><h3 id="181ã€ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ï¼Œç±»åŠ è½½å™¨æœ‰å“ªäº›ï¼Ÿ"><a href="#181ã€ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ï¼Œç±»åŠ è½½å™¨æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="181ã€ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ï¼Œç±»åŠ è½½å™¨æœ‰å“ªäº›ï¼Ÿ"></a>181ã€ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ï¼Œç±»åŠ è½½å™¨æœ‰å“ªäº›ï¼Ÿ</h3><p><a href="https://imgtu.com/i/jVqiLR"><img src="https://s1.ax1x.com/2022/06/27/jVqiLR.jpg" alt="jVqiLR.jpg"></a></p><p>1ã€ä»€ä¹ˆæ˜¯ç±»åŠ è½½å™¨ï¼Ÿ</p><p>ç±»åŠ è½½å™¨è´Ÿè´£åŠ è½½æ‰€æœ‰çš„ç±»ï¼Œå…¶ä¸ºæ‰€æœ‰è¢«è½½å…¥å†…å­˜çš„ç±»ç”Ÿæˆä¸€ä¸ªjava.lang.Classå®ä¾‹å¯¹è±¡ã€‚</p><p>2ã€ç±»åŠ è½½å™¨æœ‰å“ªäº›ï¼Ÿ</p><p>JVMæœ‰ä¸‰ç§ç±»åŠ è½½å™¨ï¼š</p><p>ï¼ˆ1ï¼‰å¯åŠ¨ç±»åŠ è½½å™¨</p><p>è¯¥ç±»æ²¡æœ‰çˆ¶åŠ è½½å™¨ï¼Œç”¨æ¥åŠ è½½Javaçš„æ ¸å¿ƒç±»ï¼Œå¯åŠ¨ç±»åŠ è½½å™¨çš„å®ç°ä¾èµ–äºåº•å±‚æ“ä½œç³»ç»Ÿï¼Œå±äºè™šæ‹Ÿæœºå®ç°çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒå¹¶ä¸ç»§æ‰¿è‡ªjava.lang.classLoaderã€‚</p><p>ï¼ˆ2ï¼‰æ‰©å±•ç±»åŠ è½½å™¨</p><p>å®ƒçš„çˆ¶ç±»ä¸ºå¯åŠ¨ç±»åŠ è½½å™¨ï¼Œæ‰©å±•ç±»åŠ è½½å™¨æ˜¯çº¯javaç±»ï¼Œæ˜¯ClassLoaderç±»çš„å­ç±»ï¼Œè´Ÿè´£åŠ è½½JREçš„æ‰©å±•ç›®å½•ã€‚</p><p>ï¼ˆ3ï¼‰åº”ç”¨ç¨‹åºç±»åŠ è½½å™¨</p><p>å®ƒçš„çˆ¶ç±»ä¸ºæ‰©å±•ç±»åŠ è½½å™¨ï¼Œå®ƒä»ç¯å¢ƒå˜é‡classpathæˆ–è€…ç³»ç»Ÿå±æ€§java.lang.pathæ‰€æŒ‡å®šçš„ç›®å½•ä¸­åŠ è½½ç±»ï¼Œå®ƒæ˜¯è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨çš„çˆ¶åŠ è½½å™¨ã€‚</p><h3 id="182ã€è¯´ä¸€ä¸‹ç±»åŠ è½½çš„æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ"><a href="#182ã€è¯´ä¸€ä¸‹ç±»åŠ è½½çš„æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ" class="headerlink" title="182ã€è¯´ä¸€ä¸‹ç±»åŠ è½½çš„æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ"></a>182ã€è¯´ä¸€ä¸‹ç±»åŠ è½½çš„æ‰§è¡Œè¿‡ç¨‹ï¼Ÿ</h3><p>å½“ç¨‹åºä¸»åŠ¨ä½¿ç”¨æŸä¸ªç±»æ—¶ï¼Œå¦‚æœè¯¥ç±»è¿˜æœªè¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼ŒJVMä¼šé€šè¿‡åŠ è½½ã€è¿æ¥ã€åˆå§‹åŒ–3ä¸ªæ­¥éª¤å¯¹è¯¥ç±»è¿›è¡Œç±»åŠ è½½ã€‚</p><p>1ã€åŠ è½½</p><p>åŠ è½½æŒ‡çš„æ˜¯å°†ç±»çš„classæ–‡ä»¶è¯»å…¥åˆ°å†…å­˜ä¸­ï¼Œå¹¶ä¸ºä¹‹åˆ›å»ºä¸€ä¸ªjava.lang.Classå¯¹è±¡ã€‚</p><p>ç±»çš„åŠ è½½ç”±ç±»åŠ è½½å™¨å®Œæˆï¼Œç±»åŠ è½½å™¨ç”±JVMæä¾›ï¼Œå¼€å‘è€…ä¹Ÿå¯ä»¥é€šè¿‡ç»§æ‰¿ClassLoaderåŸºç±»æ¥åˆ›å»ºè‡ªå·±çš„ç±»åŠ è½½å™¨ã€‚</p><p>é€šè¿‡ä½¿ç”¨ä¸åŒçš„ç±»åŠ è½½å™¨å¯ä»¥ä»ä¸åŒæ¥æºåŠ è½½ç±»çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œé€šå¸¸æœ‰å¦‚ä¸‹å‡ ç§æ¥æºï¼š</p><ol><li>ä»æœ¬åœ°æ–‡ä»¶ç³»ç»ŸåŠ è½½</li><li>ä»jaråŒ…åŠ è½½</li><li>é€šè¿‡ç½‘ç»œåŠ è½½</li><li>æŠŠä¸€ä¸ªJavaæºæ–‡ä»¶åŠ¨æ€ç¼–è¯‘ï¼Œå¹¶æ‰§è¡ŒåŠ è½½</li></ol><p>2ã€è¿æ¥</p><p>å½“ç±»è¢«åŠ è½½ä¹‹åï¼Œç³»ç»Ÿä¸ºä¹‹ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„Classå¯¹è±¡ï¼Œæ¥ç€è¿›å…¥è¿æ¥é˜¶æ®µï¼Œè¿æ¥é˜¶æ®µè´Ÿè´£å°†ç±»çš„äºŒè¿›åˆ¶æ•°æ®åˆå¹¶åˆ°JREä¸­ã€‚</p><p>ç±»è¿æ¥åˆå¯åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p><p>ï¼ˆ1ï¼‰éªŒè¯</p><p>æ–‡ä»¶æ ¼å¼éªŒè¯<br>å…ƒæ•°æ®éªŒè¯<br>å­—èŠ‚ç éªŒè¯<br>ç¬¦å·å¼•ç”¨éªŒè¯</p><p>ï¼ˆ2ï¼‰å‡†å¤‡</p><p>ä¸ºç±»çš„é™æ€å˜é‡åˆ†é…å†…å­˜ï¼Œå¹¶è®¾ç½®é»˜è®¤åˆå§‹å€¼ã€‚</p><p>ï¼ˆ3ï¼‰è§£æ</p><p>å°†ç±»çš„äºŒè¿›åˆ¶æ•°æ®ä¸­çš„ç¬¦å·å¼•ç”¨æ›¿æ¢æˆç›´æ¥å¼•ç”¨ã€‚</p><p>3ã€åˆå§‹åŒ–</p><p>ä¸ºç±»çš„é™æ€å˜é‡èµ‹äºˆåˆå§‹å€¼ã€‚</p><h3 id="183ã€JVMçš„ç±»åŠ è½½æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#183ã€JVMçš„ç±»åŠ è½½æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="183ã€JVMçš„ç±»åŠ è½½æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ"></a>183ã€JVMçš„ç±»åŠ è½½æœºåˆ¶æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>JVMç±»åŠ è½½æœºåˆ¶ä¸»è¦æœ‰ä¸‰ç§ï¼š</p><p>1ã€å…¨ç›˜è´Ÿè´£</p><p>ç±»åŠ è½½å™¨åŠ è½½æŸä¸ªclassæ—¶ï¼Œè¯¥classæ‰€ä¾èµ–çš„å’Œå¼•ç”¨å…¶å®ƒçš„classä¹Ÿç”±è¯¥ç±»åŠ è½½å™¨è½½å…¥ã€‚</p><p>2ã€åŒäº²å§”æ´¾</p><p>å…ˆè®©çˆ¶åŠ è½½å™¨åŠ è½½è¯¥classï¼Œçˆ¶åŠ è½½å™¨æ— æ³•åŠ è½½æ—¶æ‰è€ƒè™‘è‡ªå·±åŠ è½½ã€‚</p><p>3ã€ç¼“å­˜æœºåˆ¶</p><p>ç¼“å­˜æœºåˆ¶ä¿è¯æ‰€æœ‰åŠ è½½è¿‡çš„classéƒ½ä¼šè¢«ç¼“å­˜ï¼Œå½“ç¨‹åºä¸­éœ€è¦æŸä¸ªclassæ—¶ï¼Œå…ˆä»ç¼“å­˜åŒºä¸­æœç´¢ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œæ‰ä¼šè¯»å–è¯¥ç±»å¯¹åº”çš„äºŒè¿›åˆ¶æ•°æ®ï¼Œå¹¶å°†å…¶è½¬æ¢æˆclasså¯¹è±¡ï¼Œå­˜å…¥ç¼“å­˜åŒºä¸­ã€‚</p><p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¿®æ”¹äº†classåï¼Œå¿…é¡»é‡å¯JVMï¼Œç¨‹åºæ‰€åšçš„ä¿®æ”¹æ‰ä¼šç”Ÿæ•ˆçš„åŸå› ã€‚</p><h3 id="184ã€ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æ¨¡å‹ï¼Ÿ"><a href="#184ã€ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æ¨¡å‹ï¼Ÿ" class="headerlink" title="184ã€ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æ¨¡å‹ï¼Ÿ"></a>184ã€ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æ¨¡å‹ï¼Ÿ</h3><p>å¦‚æœä¸€ä¸ªç±»æ”¶åˆ°äº†ç±»åŠ è½½è¯·æ±‚ï¼Œå®ƒå¹¶ä¸ä¼šè‡ªå·±å…ˆå»åŠ è½½ï¼Œè€Œæ˜¯æŠŠè¿™ä¸ªè¯·æ±‚å§”æ‰˜ç»™çˆ¶ç±»çš„åŠ è½½å™¨æ‰§è¡Œï¼Œå¦‚æœçˆ¶åŠ è½½å™¨è¿˜å­˜åœ¨å…¶çˆ¶åŠ è½½å™¨ï¼Œåˆ™è¿›ä¸€æ­¥å‘ä¸Šå§”æ‰˜ï¼Œä¾æ¬¡é€’å½’ï¼Œè¯·æ±‚å°†æœ€ç»ˆåˆ°è¾¾é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨ï¼Œå¦‚æœçˆ¶ç±»åŠ è½½å™¨å¯ä»¥å®Œæˆçˆ¶åŠ è½½ä»»åŠ¡ï¼Œå°±æˆåŠŸè¿”å›ï¼Œå¦‚æœçˆ¶åŠ è½½å™¨æ— æ³•å®ŒæˆåŠ è½½ä»»åŠ¡ï¼Œå­åŠ è½½å™¨æ‰ä¼šå°è¯•è‡ªå·±å»åŠ è½½ï¼Œè¿™å°±æ˜¯åŒäº²å§”æ´¾æ¨¡å‹ã€‚</p><p>åŒäº²å§”æ´¾æ¨¡å¼çš„ä¼˜åŠ¿ï¼š</p><ol><li>é¿å…é‡å¤åŠ è½½ï¼›</li><li>è€ƒè™‘åˆ°å®‰å…¨å› ç´ ï¼Œjavaæ ¸å¿ƒapiä¸­å®šä¹‰ç±»å‹ä¸ä¼šè¢«éšæ„æ›¿æ¢ï¼Œå‡è®¾é€šè¿‡ç½‘ç»œä¼ é€’ä¸€ä¸ªåä¸ºjava.lang.Integerçš„ç±»ï¼Œé€šè¿‡åŒäº²å§”æ´¾æ¨¡å¼ä¼ é€’åˆ°å¯åŠ¨åŠ è½½å™¨ï¼Œè€Œå¯åŠ¨åŠ è½½å™¨åœ¨æ ¸å¿ƒJava APIä¸­å‘ç°åŒåçš„ç±»ï¼Œå‘ç°è¯¥ç±»å·²ç»è¢«åŠ è½½ï¼Œå°±ä¸ä¼šé‡æ–°åŠ è½½ç½‘ç»œä¼ é€’çš„Integerç±»ï¼Œè€Œç›´æ¥è¿”å›å·²åŠ è½½è¿‡çš„Integer.classï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢æ ¸å¿ƒAPIåº“è¢«éšæ„ç¯¡æ”¹ã€‚</li></ol><h3 id="185ã€æ€ä¹ˆåˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶ï¼Ÿ"><a href="#185ã€æ€ä¹ˆåˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶ï¼Ÿ" class="headerlink" title="185ã€æ€ä¹ˆåˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶ï¼Ÿ"></a>185ã€æ€ä¹ˆåˆ¤æ–­å¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶ï¼Ÿ</h3><p>1ã€å¼•ç”¨è®¡æ•°ç®—æ³•</p><p>ï¼ˆ1ï¼‰åˆ¤æ–­å¯¹è±¡çš„å¼•ç”¨æ•°é‡</p><p>é€šè¿‡åˆ¤æ–­å¯¹è±¡çš„å¼•ç”¨æ•°é‡æ¥å†³å®šå¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶ï¼›<br>æ¯ä¸ªå¯¹è±¡å®ä¾‹éƒ½æœ‰ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œè¢«å¼•ç”¨+1ï¼Œå®Œæˆå¼•ç”¨-1ï¼›<br>ä»»ä½•å¼•ç”¨è®¡æ•°ä¸º0çš„å¯¹è±¡å®ä¾‹å¯ä»¥è¢«å½“åšåƒåœ¾å›æ”¶ï¼›</p><p>ï¼ˆ2ï¼‰ä¼˜ç¼ºç‚¹</p><p>ä¼˜ç‚¹ï¼šæ‰§è¡Œæ•ˆç‡é«˜ï¼Œç¨‹åºå—å½±å“è¾ƒå°ï¼›<br>ç¼ºç‚¹ï¼šæ— æ³•æ£€æµ‹å‡ºå¾ªç¯å¼•ç”¨çš„æƒ…å†µï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ï¼›</p><p>2ã€å¯è¾¾æ€§åˆ†æç®—æ³•</p><p>é€šè¿‡åˆ¤æ–­å¯¹è±¡çš„å¼•ç”¨é“¾æ˜¯å¦å¯è¾¾æ¥å†³å®šå¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶ã€‚</p><p>å¦‚æœç¨‹åºæ— æ³•å†å¼•ç”¨è¯¥å¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡è‚¯å®šå¯ä»¥è¢«å›æ”¶ï¼Œè¿™ä¸ªçŠ¶æ€ç§°ä¸ºä¸å¯è¾¾ã€‚</p><p>é‚£ä¹ˆä¸å¯è¾¾çŠ¶æ€å¦‚ä½•åˆ¤æ–­å‘¢ï¼Ÿ</p><p>ç­”æ¡ˆæ˜¯GC rootsï¼Œä¹Ÿå°±æ˜¯æ ¹å¯¹è±¡ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡æ— æ³•åˆ°è¾¾æ ¹å¯¹è±¡çš„è·¯å¾„ï¼Œæˆ–è€…è¯´ä»æ ¹å¯¹è±¡æ— æ³•å¼•ç”¨åˆ°è¯¥å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°±æ˜¯ä¸å¯è¾¾çš„ã€‚</p><p>ä»¥ä¸‹ä¸‰ç§å¯¹è±¡åœ¨JVMä¸­è¢«ç§°ä¸ºGC rootsï¼Œæ¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å¯ä»¥è¢«å›æ”¶ã€‚</p><p>ï¼ˆ1ï¼‰è™šæ‹Ÿæœºæ ˆçš„æ ˆå¸§</p><p>æ¯ä¸ªæ–¹æ³•åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼ŒJVMéƒ½ä¼šåˆ›å»ºä¸€ä¸ªç›¸åº”çš„æ ˆå¸§ï¼ˆæ“ä½œæ•°æ ˆã€å±€éƒ¨å˜é‡è¡¨ã€è¿è¡Œæ—¶å¸¸é‡æ± çš„å¼•ç”¨ï¼‰ï¼Œå½“æ–¹æ³•æ‰§è¡Œå®Œï¼Œè¯¥æ ˆå¸§å°±ä»æ ˆä¸­å¼¹å‡ºï¼Œè¿™æ ·ä¸€æ¥ï¼Œæ–¹æ³•ä¸­ä¸´æ—¶åˆ›å»ºçš„ç‹¬äº«å°±ä¸å­˜åœ¨äº†ï¼Œæˆ–è€…è¯´æ²¡æœ‰ä»»ä½•GC rootsæŒ‡å‘è¿™äº›ä¸´æ—¶å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡åœ¨ä¸‹ä¸€æ¬¡GCçš„æ—¶å€™ä¾¿ä¼šè¢«å›æ”¶ã€‚</p><p>ï¼ˆ2ï¼‰æ–¹æ³•åŒºä¸­çš„é™æ€å±æ€§</p><p>é™æ€å±æ€§æ•°æ®ç±»å±æ€§ï¼Œä¸å±äºä»»ä½•å®ä¾‹ï¼Œå› æ­¤è¯¥å±æ€§è‡ªç„¶ä¼šä½œä¸ºGC rootsã€‚è¿™è¦è¿™ä¸ªclassåœ¨ï¼Œè¯¥å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡å°±ä¸€ç›´å­˜åœ¨ï¼Œclassä¹Ÿç”±è¢«å›æ”¶çš„æ—¶å€™ã€‚</p><p>classä½•æ—¶ä¼šè¢«å›æ”¶ï¼Ÿ</p><p>å †ä¸­ä¸å­˜åœ¨è¯¥ç±»çš„ä»»ä½•å®ä¾‹<br>åŠ è½½è¯¥ç±»çš„classLoaderå·²ç»è¢«å›æ”¶<br>è¯¥ç±»çš„java.lang.classå¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„ä¿¡æ¯<br>ï¼ˆ3ï¼‰æœ¬åœ°æ–¹æ³•æ ˆå¼•ç”¨çš„å¯¹è±¡</p><h3 id="186ã€è¯´ä¸€ä¸‹-jvm-æœ‰å“ªäº›åƒåœ¾å›æ”¶ç®—æ³•ï¼Ÿ"><a href="#186ã€è¯´ä¸€ä¸‹-jvm-æœ‰å“ªäº›åƒåœ¾å›æ”¶ç®—æ³•ï¼Ÿ" class="headerlink" title="186ã€è¯´ä¸€ä¸‹ jvm æœ‰å“ªäº›åƒåœ¾å›æ”¶ç®—æ³•ï¼Ÿ"></a>186ã€è¯´ä¸€ä¸‹ jvm æœ‰å“ªäº›åƒåœ¾å›æ”¶ç®—æ³•ï¼Ÿ</h3><p>1ã€å¯¹è±¡æ˜¯å¦å·²æ­»ç®—æ³•</p><ul><li>å¼•ç”¨è®¡æ•°å™¨ç®—æ³•</li><li>å¯è¾¾æ€§åˆ†æç®—æ³•</li></ul><p>2ã€GCç®—æ³•</p><p>ï¼ˆ1ï¼‰æ ‡è®°æ¸…é™¤ç®—æ³•</p><p>å¦‚æœå¯¹è±¡è¢«æ ‡è®°åè¿›è¡Œæ¸…é™¤ï¼Œä¼šå¸¦æ¥ä¸€ä¸ªæ–°çš„é—®é¢˜â€”å†…å­˜ç¢ç‰‡åŒ–ã€‚å¦‚æœä¸‹æ¬¡æœ‰æ¯”è¾ƒå¤§çš„å¯¹è±¡å®ä¾‹éœ€è¦åœ¨å †ä¸Šåˆ†é…è¾ƒå¤§çš„å†…å­˜ç©ºé—´æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°æ— æ³•æ‰¾åˆ°è¶³å¤Ÿçš„è¿ç»­å†…å­˜è€Œä¸å¾—ä¸å†æ¬¡è§¦å‘åƒåœ¾å›æ”¶ã€‚</p><p>ï¼ˆ2ï¼‰å¤åˆ¶ç®—æ³•ï¼ˆJavaå †ä¸­æ–°ç”Ÿä»£çš„åƒåœ¾å›æ”¶ç®—æ³•ï¼‰</p><ol><li>å…ˆæ ‡è®°å¾…å›æ”¶å†…å­˜å’Œä¸ç”¨å›æ”¶å†…å­˜ï¼›</li><li>å°†ä¸ç”¨å›æ”¶çš„å†…å­˜å¤åˆ¶åˆ°æ–°çš„å†…å­˜åŒºåŸŸï¼›</li><li>å°±çš„å†…å­˜åŒºåŸŸå°±å¯ä»¥è¢«å…¨éƒ¨å›æ”¶äº†ï¼Œè€Œæ–°çš„å†…å­˜åŒºåŸŸä¹Ÿæ˜¯è¿ç»­çš„ï¼›</li></ol><p>ç¼ºç‚¹æ˜¯æŸå¤±éƒ¨åˆ†ç³»ç»Ÿå†…å­˜ï¼Œå› ä¸ºè…¾å‡ºéƒ¨åˆ†å†…å­˜è¿›è¡Œå¤åˆ¶ã€‚</p><p>ï¼ˆ3ï¼‰æ ‡è®°å‹ç¼©ç®—æ³•ï¼ˆJavaå †ä¸­è€å¹´ä»£çš„åƒåœ¾å›æ”¶ç®—æ³•ï¼‰</p><p>å¯¹äºæ–°ç”Ÿä»£ï¼Œå¤§éƒ¨åˆ†å¯¹è±¡éƒ½ä¸ä¼šå­˜æ´»ï¼Œæ‰€ä»¥å¤åˆ¶ç®—æ³•è¾ƒé«˜æ•ˆï¼Œä½†å¯¹äºè€å¹´ä»£ï¼Œå¤§éƒ¨åˆ†å¯¹è±¡å¯èƒ½è¦ç»§ç»­å­˜æ´»ï¼Œå¦‚æœæ­¤æ—¶ä½¿ç”¨å¤åˆ¶ç®—æ³•ï¼Œæ•ˆç‡ä¼šé™ä½ã€‚</p><p>æ ‡è®°å‹ç¼©ç®—æ³•é¦–å…ˆè¿˜æ˜¯æ ‡è®°ï¼Œå°†ä¸ç”¨å›æ”¶çš„å†…å­˜å¯¹è±¡å‹ç¼©åˆ°å†…å­˜ä¸€ç«¯ï¼Œæ­¤æ—¶å³å¯æ¸…é™¤è¾¹ç•Œå¤„çš„å†…å­˜ï¼Œè¿™æ ·å°±èƒ½é¿å…å¤åˆ¶ç®—æ³•å¸¦æ¥çš„æ•ˆç‡é—®é¢˜ï¼ŒåŒæ—¶ä¹Ÿèƒ½é¿å…å†…å­˜ç¢ç‰‡åŒ–çš„é—®é¢˜ã€‚</p><p>è€å¹´ä»£çš„åƒåœ¾å›æ”¶ç®—æ³•ç§°ä¸ºâ€œMajor GCâ€ã€‚</p><h3 id="187ã€è¯´ä¸€ä¸‹-jvm-æœ‰å“ªäº›åƒåœ¾å›æ”¶å™¨ï¼Ÿ"><a href="#187ã€è¯´ä¸€ä¸‹-jvm-æœ‰å“ªäº›åƒåœ¾å›æ”¶å™¨ï¼Ÿ" class="headerlink" title="187ã€è¯´ä¸€ä¸‹ jvm æœ‰å“ªäº›åƒåœ¾å›æ”¶å™¨ï¼Ÿ"></a>187ã€è¯´ä¸€ä¸‹ jvm æœ‰å“ªäº›åƒåœ¾å›æ”¶å™¨ï¼Ÿ</h3><p><a href="https://blog.csdn.net/guorui_java/article/details/108405844">è¯´ä¸€ä¸‹ jvm æœ‰å“ªäº›åƒåœ¾å›æ”¶å™¨ï¼Ÿ</a></p><h3 id="188ã€JVMæ ˆå †æ¦‚å¿µï¼Œä½•æ—¶é”€æ¯å¯¹è±¡"><a href="#188ã€JVMæ ˆå †æ¦‚å¿µï¼Œä½•æ—¶é”€æ¯å¯¹è±¡" class="headerlink" title="188ã€JVMæ ˆå †æ¦‚å¿µï¼Œä½•æ—¶é”€æ¯å¯¹è±¡"></a>188ã€JVMæ ˆå †æ¦‚å¿µï¼Œä½•æ—¶é”€æ¯å¯¹è±¡</h3><ol><li>ç±»åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™å°±ä¼šè¢«åŠ è½½ï¼Œæ–¹æ³•æ˜¯åœ¨æ‰§è¡Œçš„æ—¶å€™æ‰ä¼šè¢«åŠ è½½ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•å¼•ç”¨äº†ï¼ŒJavaè‡ªåŠ¨åƒåœ¾å›æ”¶ï¼Œä¹Ÿå¯ä»¥ç”¨System.gc()å¼€å¯å›æ”¶å™¨ï¼Œä½†æ˜¯å›æ”¶å™¨ä¸ä¸€å®šä¼šé©¬ä¸Šå›æ”¶ã€‚</li><li>é™æ€å˜é‡åœ¨ç±»è£…è½½çš„æ—¶å€™è¿›è¡Œåˆ›å»ºï¼Œåœ¨æ•´ä¸ªç¨‹åºç»“æŸæ—¶æŒ‰åºé”€æ¯ï¼›</li><li>å®ä¾‹å˜é‡åœ¨ç±»å®ä¾‹åŒ–å¯¹è±¡æ—¶åˆ›å»ºï¼Œåœ¨å¯¹è±¡é”€æ¯çš„æ—¶å€™é”€æ¯ï¼›</li><li>å±€éƒ¨å˜é‡åœ¨å±€éƒ¨èŒƒå›´å†…ä½¿ç”¨æ—¶åˆ›å»ºï¼Œè·³å‡ºå±€éƒ¨èŒƒå›´æ—¶é”€æ¯ï¼›</li></ol><h3 id="189ã€æ–°ç”Ÿä»£åƒåœ¾å›æ”¶å™¨å’Œè€ç”Ÿä»£åƒåœ¾å›æ”¶å™¨éƒ½æœ‰å“ªäº›ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#189ã€æ–°ç”Ÿä»£åƒåœ¾å›æ”¶å™¨å’Œè€ç”Ÿä»£åƒåœ¾å›æ”¶å™¨éƒ½æœ‰å“ªäº›ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="189ã€æ–°ç”Ÿä»£åƒåœ¾å›æ”¶å™¨å’Œè€ç”Ÿä»£åƒåœ¾å›æ”¶å™¨éƒ½æœ‰å“ªäº›ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>189ã€æ–°ç”Ÿä»£åƒåœ¾å›æ”¶å™¨å’Œè€ç”Ÿä»£åƒåœ¾å›æ”¶å™¨éƒ½æœ‰å“ªäº›ï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>æ–°ç”Ÿä»£å›æ”¶å™¨ï¼šSerialã€ParNewã€Parallel Scavenge</p><p>è€å¹´ä»£å›æ”¶å™¨ï¼šSerial Oldã€Parallel Oldã€CMS</p><p>æ–°ç”Ÿä»£å›æ”¶å™¨ä¸€èˆ¬é‡‡ç”¨çš„æ˜¯å¤åˆ¶ç®—æ³•ï¼Œå¤åˆ¶ç®—æ³•æ•ˆç‡è¾ƒé«˜ï¼Œä½†æ˜¯æµªè´¹å†…å­˜ï¼›</p><p>è€ç”Ÿä»£å›æ”¶å™¨ä¸€èˆ¬é‡‡ç”¨æ ‡è®°æ¸…æ¥šç®—æ³•ï¼Œæ¯”å¦‚æœ€å¸¸ç”¨çš„CMSï¼›</p><h3 id="190ã€è¯¦ç»†ä»‹ç»ä¸€ä¸‹-CMS-åƒåœ¾å›æ”¶å™¨ï¼Ÿ"><a href="#190ã€è¯¦ç»†ä»‹ç»ä¸€ä¸‹-CMS-åƒåœ¾å›æ”¶å™¨ï¼Ÿ" class="headerlink" title="190ã€è¯¦ç»†ä»‹ç»ä¸€ä¸‹ CMS åƒåœ¾å›æ”¶å™¨ï¼Ÿ"></a>190ã€è¯¦ç»†ä»‹ç»ä¸€ä¸‹ CMS åƒåœ¾å›æ”¶å™¨ï¼Ÿ</h3><p>CMS åƒåœ¾å›æ”¶å™¨æ˜¯Concurrent Mark Sweepï¼Œæ˜¯ä¸€ç§åŒæ­¥çš„æ ‡è®°-æ¸…é™¤ï¼ŒCMSåˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼š</p><p>åˆå§‹æ ‡è®°ï¼Œæ ‡è®°ä¸€ä¸‹GC Rootèƒ½ç›´æ¥å…³è”åˆ°çš„å¯¹è±¡ï¼Œä¼šè§¦å‘â€œStop The Worldâ€ï¼›<br>å¹¶å‘æ ‡è®°ï¼Œé€šè¿‡GC Roots Tracingåˆ¤æ–­å¯¹è±¡æ˜¯å¦åœ¨ä½¿ç”¨ä¸­ï¼›<br>é‡æ–°æ ‡è®°ï¼Œæ ‡è®°æœŸé—´äº§ç”Ÿå¯¹è±¡çš„å†æ¬¡åˆ¤æ–­ï¼Œæ‰§è¡Œæ—¶é—´è¾ƒçŸ­ï¼Œä¼šè§¦å‘â€œStop The Worldâ€ï¼›<br>å¹¶å‘æ¸…é™¤ï¼Œæ¸…é™¤å¯¹è±¡ï¼Œå¯ä»¥å’Œç”¨æˆ·çº¿ç¨‹å¹¶å‘è¿›è¡Œï¼›</p><h3 id="191ã€ç®€è¿°åˆ†ä»£åƒåœ¾å›æ”¶å™¨æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ"><a href="#191ã€ç®€è¿°åˆ†ä»£åƒåœ¾å›æ”¶å™¨æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ" class="headerlink" title="191ã€ç®€è¿°åˆ†ä»£åƒåœ¾å›æ”¶å™¨æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ"></a>191ã€ç®€è¿°åˆ†ä»£åƒåœ¾å›æ”¶å™¨æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ</h3><p>åˆ†ä»£å›æ”¶å™¨åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼Œæ–°ç”Ÿä»£å¤§æ¦‚å 1/3ï¼Œè€å¹´ä»£å¤§æ¦‚å 2/3ï¼›</p><p>æ–°ç”Ÿä»£åŒ…æ‹¬Edenã€From Survivorã€To Survivorï¼›</p><p>EdenåŒºå’Œä¸¤ä¸ªsurvivoråŒºçš„ çš„ç©ºé—´æ¯”ä¾‹ ä¸º8ï¼š1ï¼š1 ï¼›</p><p>åƒåœ¾å›æ”¶å™¨çš„æ‰§è¡Œæµç¨‹ï¼š</p><p>æŠŠ Eden + From Survivor å­˜æ´»çš„å¯¹è±¡æ”¾å…¥ To Survivor åŒºï¼›<br>æ¸…ç©º Eden + From Survivor åˆ†åŒºï¼ŒFrom Survivor å’Œ To Survivor åˆ†åŒºäº¤æ¢ï¼›<br>æ¯æ¬¡äº¤æ¢åå­˜æ´»çš„å¯¹è±¡å¹´é¾„+1ï¼Œåˆ°è¾¾15ï¼Œå‡çº§ä¸ºè€å¹´ä»£ï¼Œå¤§å¯¹è±¡ä¼šç›´æ¥è¿›å…¥è€å¹´ä»£ï¼›<br>è€å¹´ä»£ä¸­å½“ç©ºé—´åˆ°è¾¾ä¸€å®šå æ¯”ï¼Œä¼šè§¦å‘å…¨å±€å›æ”¶ï¼Œè€å¹´ä»£ä¸€èˆ¬é‡‡å–æ ‡è®°-æ¸…é™¤ç®—æ³•ï¼›</p><h3 id="192ã€Redisæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#192ã€Redisæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="192ã€Redisæ˜¯ä»€ä¹ˆï¼Ÿ"></a>192ã€Redisæ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Redisæ˜¯ä¸€ä¸ªkey-valueå­˜å‚¨ç³»ç»Ÿï¼Œå®ƒæ”¯æŒå­˜å‚¨çš„valueç±»å‹ç›¸å¯¹æ›´å¤šï¼ŒåŒ…æ‹¬stringã€listã€setã€zsetï¼ˆsorted set â€”æœ‰åºé›†åˆï¼‰å’Œhashã€‚è¿™äº›æ•°æ®ç»“æ„éƒ½æ”¯æŒpush/popã€add/removeåŠå–äº¤é›†å¹¶é›†å’Œå·®é›†åŠæ›´ä¸°å¯Œçš„æ“ä½œï¼Œè€Œä¸”è¿™äº›æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒRedisæ”¯æŒå„ç§ä¸åŒæ–¹å¼çš„æ’åºã€‚ä¸ºäº†ä¿è¯æ•ˆç‡ï¼Œæ•°æ®éƒ½æ˜¯ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼ŒRedisä¼šå‘¨æœŸæ€§çš„æŠŠæ›´æ–°çš„æ•°æ®å†™å…¥ç£ç›˜æˆ–è€…æŠŠä¿®æ”¹æ“ä½œå†™å…¥è¿½åŠ çš„è®°å½•æ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šå®ç°äº†master-slaveï¼ˆä¸»ä»ï¼‰åŒæ­¥ã€‚</p><h3 id="193ã€Rediséƒ½æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ"><a href="#193ã€Rediséƒ½æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ" class="headerlink" title="193ã€Rediséƒ½æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ"></a>193ã€Rediséƒ½æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ</h3><ol><li>Redisæ˜¯åŸºäºå†…å­˜çš„nosqlæ•°æ®åº“ï¼Œå¯ä»¥é€šè¿‡æ–°å»ºçº¿ç¨‹çš„å½¢å¼è¿›è¡ŒæŒä¹…åŒ–ï¼Œä¸å½±å“Rediså•çº¿ç¨‹çš„è¯»å†™æ“ä½œ</li><li>é€šè¿‡listå–æœ€æ–°çš„Næ¡æ•°æ®</li><li>æ¨¡æ‹Ÿç±»ä¼¼äºtokenè¿™ç§éœ€è¦è®¾ç½®è¿‡æœŸæ—¶é—´çš„åœºæ™¯</li><li>å‘å¸ƒè®¢é˜…æ¶ˆæ¯ç³»ç»Ÿ</li><li>å®šæ—¶å™¨ã€è®¡æ•°å™¨</li></ol><h3 id="194ã€Redisæœ‰å“ªäº›åŠŸèƒ½ï¼Ÿ"><a href="#194ã€Redisæœ‰å“ªäº›åŠŸèƒ½ï¼Ÿ" class="headerlink" title="194ã€Redisæœ‰å“ªäº›åŠŸèƒ½ï¼Ÿ"></a>194ã€Redisæœ‰å“ªäº›åŠŸèƒ½ï¼Ÿ</h3><p>1ã€åŸºäºæœ¬æœºå†…å­˜çš„ç¼“å­˜</p><p>å½“è°ƒç”¨apiè®¿é—®æ•°æ®åº“æ—¶ï¼Œå‡å¦‚æ­¤è¿‡ç¨‹éœ€è¦2ç§’ï¼Œå¦‚æœæ¯æ¬¡è¯·æ±‚éƒ½è¦è®¿é—®æ•°æ®åº“ï¼Œé‚£å°†å¯¹æœåŠ¡å™¨é€ æˆå·¨å¤§çš„å‹åŠ›ï¼Œå¦‚æœå°†æ­¤sqlçš„æŸ¥è¯¢ç»“æœå­˜åˆ°Redisä¸­ï¼Œå†æ¬¡è¯·æ±‚æ—¶ï¼Œç›´æ¥ä»Redisä¸­å–å¾—ï¼Œè€Œä¸æ˜¯è®¿é—®æ•°æ®åº“ï¼Œæ•ˆç‡å°†å¾—åˆ°å·¨å¤§çš„æå‡ï¼ŒRediså¯ä»¥å®šæ—¶å»æ›´æ–°æ•°æ®ï¼ˆæ¯”å¦‚1åˆ†é’Ÿï¼‰ã€‚</p><p>2ã€å¦‚æœç”µè„‘é‡å¯ï¼Œå†™å…¥å†…å­˜çš„æ•°æ®æ˜¯ä¸æ˜¯å°±å¤±æ•ˆäº†å‘¢ï¼Œè¿™æ—¶Redisè¿˜æä¾›äº†æŒä¹…åŒ–çš„åŠŸèƒ½ã€‚</p><p>3ã€å“¨å…µï¼ˆSentinelï¼‰å’Œå¤åˆ¶</p><p>Sentinelå¯ä»¥ç®¡ç†å¤šä¸ªRedisæœåŠ¡å™¨ï¼Œå®ƒæä¾›äº†ç›‘æ§ã€æé†’ä»¥åŠè‡ªåŠ¨çš„æ•…éšœè½¬ç§»åŠŸèƒ½ï¼›</p><p>å¤åˆ¶åˆ™æ˜¯è®©RedisæœåŠ¡å™¨å¯ä»¥é…å¤‡å¤‡ä»½çš„æœåŠ¡å™¨ï¼›</p><p>Redisä¹Ÿæ˜¯é€šè¿‡è¿™ä¸¤ä¸ªåŠŸèƒ½ä¿è¯Redisçš„é«˜å¯ç”¨ï¼›</p><p>4ã€é›†ç¾¤ï¼ˆClusterï¼‰</p><p>å•å°æœåŠ¡å™¨èµ„æºæ€»æ˜¯æœ‰ä¸Šé™çš„ï¼ŒCPUå’ŒIOèµ„æºå¯ä»¥é€šè¿‡ä¸»ä»å¤åˆ¶ï¼Œè¿›è¡Œè¯»å†™åˆ†ç¦»ï¼ŒæŠŠä¸€éƒ¨åˆ†CPUå’ŒIOçš„å‹åŠ›è½¬ç§»åˆ°ä»æœåŠ¡å™¨ä¸Šï¼Œä½†æ˜¯å†…å­˜èµ„æºæ€ä¹ˆåŠï¼Œä¸»ä»æ¨¡å¼åªæ˜¯æ•°æ®çš„å¤‡ä»½ï¼Œå¹¶ä¸èƒ½æ‰©å……å†…å­˜ï¼›</p><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥æ¨ªå‘æ‰©å±•ï¼Œè®©æ¯å°æœåŠ¡å™¨åªè´Ÿè´£ä¸€éƒ¨åˆ†ä»»åŠ¡ï¼Œç„¶åå°†è¿™äº›æœåŠ¡å™¨æ„æˆä¸€ä¸ªæ•´ä½“ï¼Œå¯¹å¤–ç•Œæ¥è¯´ï¼Œè¿™ä¸€ç»„æœåŠ¡å™¨å°±åƒæ˜¯é›†ç¾¤ä¸€æ ·ã€‚</p><h3 id="195ã€Redisæ”¯æŒçš„æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ"><a href="#195ã€Redisæ”¯æŒçš„æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="195ã€Redisæ”¯æŒçš„æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ"></a>195ã€Redisæ”¯æŒçš„æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ</h3><ol><li>å­—ç¬¦ä¸²</li><li>hash</li><li>list</li><li>set</li><li>zset</li></ol><h3 id="196ã€Rediså–å€¼å­˜å€¼é—®é¢˜"><a href="#196ã€Rediså–å€¼å­˜å€¼é—®é¢˜" class="headerlink" title="196ã€Rediså–å€¼å­˜å€¼é—®é¢˜"></a>196ã€Rediså–å€¼å­˜å€¼é—®é¢˜</h3><p>1ã€å…ˆæŠŠRedisçš„è¿æ¥æ± æ‹¿å‡ºæ¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">JedisPool</span> <span class="variable">pool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JedisPool</span>(<span class="keyword">new</span> <span class="title class_">JedisPoolConfig</span>(),<span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> pool.getResource();</span><br></pre></td></tr></table></figure><p>2ã€å­˜å–å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">jedis.set(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;value&quot;</span>);</span><br><span class="line">jedis.get(<span class="string">&quot;key&quot;</span>);</span><br><span class="line">jedis.del(<span class="string">&quot;key&quot;</span>);</span><br><span class="line"><span class="comment">//ç»™ä¸€ä¸ªkeyå åŠ value</span></span><br><span class="line">jedis.append(<span class="string">&quot;key&quot;</span>,<span class="string">&quot;value2&quot;</span>);<span class="comment">//æ­¤æ—¶keyçš„å€¼å°±æ˜¯value + value2;</span></span><br><span class="line"><span class="comment">//åŒæ—¶ç»™å¤šä¸ªkeyè¿›è¡Œèµ‹å€¼ï¼š</span></span><br><span class="line">jedis.mset(<span class="string">&quot;key1&quot;</span>,<span class="string">&quot;value1&quot;</span>,<span class="string">&quot;key2&quot;</span>,<span class="string">&quot;value2&quot;</span>);</span><br></pre></td></tr></table></figure><p>3ã€å¯¹mapè¿›è¡Œæ“ä½œ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String,String&gt; user = <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">user.put(<span class="string">&quot;key1&quot;</span>,<span class="string">&quot;value1&quot;</span>);</span><br><span class="line">user.put(<span class="string">&quot;key2&quot;</span>,<span class="string">&quot;value2&quot;</span>);</span><br><span class="line">user.put(<span class="string">&quot;key3&quot;</span>,<span class="string">&quot;value3&quot;</span>);</span><br><span class="line"><span class="comment">//å­˜å…¥</span></span><br><span class="line">jedis.hmset(<span class="string">&quot;user&quot;</span>,user);</span><br><span class="line"><span class="comment">//å–å‡ºuserä¸­key1 </span></span><br><span class="line">List&lt;String&gt; nameMap = jedis.hmget(<span class="string">&quot;user&quot;</span>,<span class="string">&quot;key1&quot;</span>);</span><br><span class="line"><span class="comment">//åˆ é™¤å…¶ä¸­ä¸€ä¸ªé”®å€¼</span></span><br><span class="line">jedis.hdel(<span class="string">&quot;user&quot;</span>,<span class="string">&quot;key2&quot;</span>);</span><br><span class="line"><span class="comment">//æ˜¯å¦å­˜åœ¨ä¸€ä¸ªé”®</span></span><br><span class="line">jedis.exists(<span class="string">&quot;user&quot;</span>);</span><br><span class="line"><span class="comment">//å–å‡ºæ‰€æœ‰çš„Mapä¸­çš„å€¼ï¼š</span></span><br><span class="line">Iterator&lt;String&gt; iter = jedis.hkeys(<span class="string">&quot;user&quot;</span>).iterator();</span><br><span class="line"><span class="keyword">while</span>(iter.next())&#123;</span><br><span class="line">    jedis.hmget(<span class="string">&quot;user&quot;</span>,iter.next());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="197ã€Redisä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹çš„ï¼Ÿ"><a href="#197ã€Redisä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹çš„ï¼Ÿ" class="headerlink" title="197ã€Redisä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹çš„ï¼Ÿ"></a>197ã€Redisä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹çš„ï¼Ÿ</h3><ol><li>ä»£ç æ›´æ¸…æ™°ï¼Œå¤„ç†é€»è¾‘æ›´ç®€å•ï¼›</li><li>ä¸ç”¨è€ƒè™‘å„ç§é”çš„é—®é¢˜ï¼Œä¸å­˜åœ¨åŠ é”å’Œé‡Šæ”¾é”çš„æ“ä½œï¼Œæ²¡æœ‰å› ä¸ºå¯èƒ½å‡ºç°æ­»é”è€Œå¯¼è‡´çš„æ€§èƒ½é—®é¢˜ï¼›</li><li>ä¸å­˜åœ¨å¤šçº¿ç¨‹åˆ‡æ¢è€Œæ¶ˆè€—CPUï¼›</li><li>æ— æ³•å‘æŒ¥å¤šæ ¸CPUçš„ä¼˜åŠ¿ï¼Œä½†å¯ä»¥é‡‡ç”¨å¤šå¼€å‡ ä¸ªRediså®ä¾‹æ¥å®Œå–„ï¼›</li></ol><h3 id="198ã€RedisçœŸçš„æ˜¯å•çº¿ç¨‹çš„å—ï¼Ÿ"><a href="#198ã€RedisçœŸçš„æ˜¯å•çº¿ç¨‹çš„å—ï¼Ÿ" class="headerlink" title="198ã€RedisçœŸçš„æ˜¯å•çº¿ç¨‹çš„å—ï¼Ÿ"></a>198ã€RedisçœŸçš„æ˜¯å•çº¿ç¨‹çš„å—ï¼Ÿ</h3><p>Redis6.0ä¹‹å‰æ˜¯å•çº¿ç¨‹çš„ï¼ŒRedis6.0ä¹‹åå¼€å§‹æ”¯æŒå¤šçº¿ç¨‹ï¼›<br>rediså†…éƒ¨ä½¿ç”¨äº†åŸºäº<a href="https://baike.baidu.com/item/epoll/10738144?fr=aladdin">epoll</a>çš„å¤šè·¯æœç”¨ï¼Œä¹Ÿå¯ä»¥å¤šéƒ¨ç½²å‡ ä¸ªredisæœåŠ¡å™¨è§£å†³å•çº¿ç¨‹çš„é—®é¢˜ï¼›<br>redisä¸»è¦çš„æ€§èƒ½ç“¶é¢ˆæ˜¯å†…å­˜å’Œç½‘ç»œï¼›<br>å†…å­˜å¥½è¯´ï¼ŒåŠ å†…å­˜æ¡å°±è¡Œäº†ï¼Œè€Œç½‘ç»œæ‰æ˜¯å¤§éº»çƒ¦ï¼Œæ‰€ä»¥redis6å†…å­˜å¥½è¯´ï¼ŒåŠ å†…å­˜æ¡å°±è¡Œäº†ï¼›<br>è€Œç½‘ç»œæ‰æ˜¯å¤§éº»çƒ¦ï¼Œæ‰€ä»¥redis6.0å¼•å…¥äº†å¤šçº¿ç¨‹çš„æ¦‚å¿µï¼Œ<br>redis6.0åœ¨ç½‘ç»œIOå¤„ç†æ–¹é¢å¼•å…¥äº†å¤šçº¿ç¨‹ï¼Œå¦‚ç½‘ç»œæ•°æ®çš„è¯»å†™å’Œåè®®è§£æç­‰ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‰§è¡Œå‘½ä»¤çš„æ ¸å¿ƒæ¨¡å—è¿˜æ˜¯å•çº¿ç¨‹çš„ã€‚</p><h3 id="199ã€RedisæŒä¹…åŒ–æœ‰å‡ ç§æ–¹å¼ï¼Ÿ"><a href="#199ã€RedisæŒä¹…åŒ–æœ‰å‡ ç§æ–¹å¼ï¼Ÿ" class="headerlink" title="199ã€RedisæŒä¹…åŒ–æœ‰å‡ ç§æ–¹å¼ï¼Ÿ"></a>199ã€RedisæŒä¹…åŒ–æœ‰å‡ ç§æ–¹å¼ï¼Ÿ</h3><p>redisæä¾›äº†ä¸¤ç§æŒä¹…åŒ–çš„æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯RDBï¼ˆRedis DataBaseï¼‰å’ŒAOFï¼ˆAppend Only Fileï¼‰ã€‚</p><p>RDBï¼Œç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯åœ¨ä¸åŒçš„æ—¶é—´ç‚¹ï¼Œå°†rediså­˜å‚¨çš„æ•°æ®ç”Ÿæˆå¿«ç…§å¹¶å­˜å‚¨åˆ°ç£ç›˜ç­‰ä»‹è´¨ä¸Šï¼›</p><p>AOFï¼Œåˆ™æ˜¯æ¢äº†ä¸€ä¸ªè§’åº¦æ¥å®ç°æŒä¹…åŒ–ï¼Œé‚£å°±æ˜¯å°†redisæ‰§è¡Œè¿‡çš„æ‰€æœ‰å†™æŒ‡ä»¤è®°å½•ä¸‹æ¥ï¼Œåœ¨ä¸‹æ¬¡redisé‡æ–°å¯åŠ¨æ—¶ï¼Œåªè¦æŠŠè¿™äº›å†™æŒ‡ä»¤ä»å‰åˆ°åå†é‡å¤æ‰§è¡Œä¸€éï¼Œå°±å¯ä»¥å®ç°æ•°æ®æ¢å¤äº†ã€‚</p><p>å…¶å®RDBå’ŒAOFä¸¤ç§æ–¹å¼ä¹Ÿå¯ä»¥åŒæ—¶ä½¿ç”¨ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœredisé‡å¯çš„è¯ï¼Œåˆ™ä¼šä¼˜å…ˆé‡‡ç”¨AOFæ–¹å¼æ¥è¿›è¡Œæ•°æ®æ¢å¤ï¼Œè¿™æ˜¯å› ä¸ºAOFæ–¹å¼çš„æ•°æ®æ¢å¤å®Œæ•´åº¦æ›´é«˜ã€‚</p><p>å¦‚æœä½ æ²¡æœ‰æ•°æ®æŒä¹…åŒ–çš„éœ€æ±‚ï¼Œä¹Ÿå®Œå…¨å¯ä»¥å…³é—­RDBå’ŒAOFæ–¹å¼ï¼Œè¿™æ ·çš„è¯ï¼Œrediså°†å˜æˆä¸€ä¸ªçº¯å†…å­˜æ•°æ®åº“ï¼Œå°±åƒmemcacheä¸€æ ·ã€‚</p><h3 id="200ã€Rediså’Œ-memecache-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#200ã€Rediså’Œ-memecache-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="200ã€Rediså’Œ memecache æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>200ã€Rediså’Œ memecache æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h3><p>1ã€Redisç›¸æ¯”memecacheï¼Œæ‹¥æœ‰æ›´å¤šçš„æ•°æ®ç»“æ„å’Œæ”¯æŒæ›´ä¸°å¯Œçš„æ•°æ®æ“ä½œã€‚</p><p>ï¼ˆ1ï¼‰Redisæ”¯æŒkey-valueï¼Œå¸¸ç”¨çš„æ•°æ®ç±»å‹ä¸»è¦æœ‰Stringã€Hashã€Listã€Setã€Sorted Setã€‚</p><p>ï¼ˆ2ï¼‰memecacheåªæ”¯æŒkey-valueã€‚</p><p>2ã€å†…å­˜ä½¿ç”¨ç‡å¯¹æ¯”ï¼ŒRedisé‡‡ç”¨hashç»“æ„æ¥åškey-valueå­˜å‚¨ï¼Œç”±äºå…¶ç»„åˆå¼çš„å‹ç¼©ï¼Œå…¶å†…å­˜åˆ©ç”¨ç‡ä¼šé«˜äºmemecacheã€‚</p><p>3ã€æ€§èƒ½å¯¹æ¯”ï¼šRedisåªä½¿ç”¨å•æ ¸ï¼Œmemecacheä½¿ç”¨å¤šæ ¸ã€‚</p><p>4ã€Redisæ”¯æŒç£ç›˜æŒä¹…åŒ–ï¼Œmemecacheä¸æ”¯æŒã€‚</p><p>Rediså¯ä»¥å°†ä¸€äº›å¾ˆä¹…æ²¡ç”¨åˆ°çš„valueé€šè¿‡swapæ–¹æ³•äº¤æ¢åˆ°ç£ç›˜ã€‚</p><p>5ã€Redisæ”¯æŒåˆ†å¸ƒå¼é›†ç¾¤ï¼Œmemecacheä¸æ”¯æŒã€‚</p><h3 id="201ã€Redisæ”¯æŒçš„-java-å®¢æˆ·ç«¯éƒ½æœ‰å“ªäº›ï¼Ÿ"><a href="#201ã€Redisæ”¯æŒçš„-java-å®¢æˆ·ç«¯éƒ½æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="201ã€Redisæ”¯æŒçš„ java å®¢æˆ·ç«¯éƒ½æœ‰å“ªäº›ï¼Ÿ"></a>201ã€Redisæ”¯æŒçš„ java å®¢æˆ·ç«¯éƒ½æœ‰å“ªäº›ï¼Ÿ</h3><p>Redissonã€Jedisã€lettuce ç­‰ç­‰ï¼Œå®˜æ–¹æ¨èä½¿ç”¨ Redissonã€‚</p><h3 id="202ã€jedis-å’Œ-redisson-æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ"><a href="#202ã€jedis-å’Œ-redisson-æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ" class="headerlink" title="202ã€jedis å’Œ redisson æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ"></a>202ã€jedis å’Œ redisson æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ</h3><p>Jedis å’Œ Redisson éƒ½æ˜¯Javaä¸­å¯¹Redisæ“ä½œçš„å°è£…ã€‚Jedis åªæ˜¯ç®€å•çš„å°è£…äº† Redis çš„APIåº“ï¼Œå¯ä»¥çœ‹ä½œæ˜¯Rediså®¢æˆ·ç«¯ï¼Œå®ƒçš„æ–¹æ³•å’ŒRedis çš„å‘½ä»¤å¾ˆç±»ä¼¼ã€‚Redisson ä¸ä»…å°è£…äº† redis ï¼Œè¿˜å°è£…äº†å¯¹æ›´å¤šæ•°æ®ç»“æ„çš„æ”¯æŒï¼Œä»¥åŠé”ç­‰åŠŸèƒ½ï¼Œç›¸æ¯”äºJedis æ›´åŠ å¤§ã€‚ä½†Jedisç›¸æ¯”äºRedisson æ›´åŸç”Ÿä¸€äº›ï¼Œæ›´çµæ´»ã€‚</p><h3 id="203ã€Redisä¸­ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ"><a href="#203ã€Redisä¸­ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ" class="headerlink" title="203ã€Redisä¸­ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ"></a>203ã€Redisä¸­ä»€ä¹ˆæ˜¯ç¼“å­˜ç©¿é€ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ</h3><p>1ã€ç¼“å­˜ç©¿é€</p><p>ä¸€èˆ¬çš„ç¼“å­˜ç³»ç»Ÿï¼Œéƒ½æ˜¯æŒ‰ç…§keyå»ç¼“å­˜æŸ¥è¯¢ï¼Œå¦‚æœä¸å­˜åœ¨å¯¹ç”¨çš„valueï¼Œå°±åº”è¯¥å»åç«¯ç³»ç»ŸæŸ¥æ‰¾ï¼ˆæ¯”å¦‚DBæ•°æ®åº“ï¼‰ã€‚ä¸€äº›æ¶æ„çš„è¯·æ±‚ä¼šæ•…æ„æŸ¥è¯¢ä¸å­˜åœ¨çš„keyï¼Œè¯·æ±‚é‡å¾ˆå¤§ï¼Œå°±ä¼šå¯¹åç«¯ç³»ç»Ÿé€ æˆå¾ˆå¤§çš„å‹åŠ›ã€‚è¿™å°±å«åšç¼“å­˜ç©¿é€ã€‚</p><p>2ã€æ€ä¹ˆè§£å†³ï¼Ÿ</p><p>å¯¹æŸ¥è¯¢ç»“æœä¸ºç©ºçš„æƒ…å†µä¹Ÿè¿›è¡Œç¼“å­˜ï¼Œç¼“å­˜æ—¶é—´è®¾ç½®çŸ­ä¸€ç‚¹ï¼Œæˆ–è€…è¯¥keyå¯¹åº”çš„æ•°æ®insertä¹‹åæ¸…ç†ç¼“å­˜ã€‚</p><p>å¯¹ä¸€å®šä¸å­˜åœ¨çš„keyè¿›è¡Œè¿‡æ»¤ã€‚å¯ä»¥æŠŠæ‰€æœ‰çš„å¯èƒ½å­˜åœ¨çš„keyæ”¾åˆ°ä¸€ä¸ªå¤§çš„Bitmapä¸­ï¼ŒæŸ¥è¯¢æ—¶é€šè¿‡è¯¥Bitmapè¿‡æ»¤ã€‚</p><h3 id="204ã€æ€ä¹ˆä¿è¯ç¼“å­˜å’Œæ•°æ®åº“æ•°æ®çš„ä¸€è‡´æ€§ï¼Ÿ"><a href="#204ã€æ€ä¹ˆä¿è¯ç¼“å­˜å’Œæ•°æ®åº“æ•°æ®çš„ä¸€è‡´æ€§ï¼Ÿ" class="headerlink" title="204ã€æ€ä¹ˆä¿è¯ç¼“å­˜å’Œæ•°æ®åº“æ•°æ®çš„ä¸€è‡´æ€§ï¼Ÿ"></a>204ã€æ€ä¹ˆä¿è¯ç¼“å­˜å’Œæ•°æ®åº“æ•°æ®çš„ä¸€è‡´æ€§ï¼Ÿ</h3><p>1ã€æ·˜æ±°ç¼“å­˜</p><p>æ•°æ®å¦‚æœä¸ºè¾ƒä¸ºå¤æ‚çš„æ•°æ®æ—¶ï¼Œè¿›è¡Œç¼“å­˜çš„æ›´æ–°æ“ä½œå°±ä¼šå˜å¾—å¼‚å¸¸å¤æ‚ï¼Œå› æ­¤ä¸€èˆ¬æ¨èé€‰æ‹©æ·˜æ±°ç¼“å­˜ï¼Œè€Œä¸æ˜¯æ›´æ–°ç¼“å­˜ã€‚</p><p>2ã€é€‰æ‹©å…ˆæ·˜æ±°ç¼“å­˜ï¼Œå†æ›´æ–°æ•°æ®åº“</p><p>å‡å¦‚å…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†æ·˜æ±°ç¼“å­˜ï¼Œå¦‚æœæ·˜æ±°ç¼“å­˜å¤±è´¥ï¼Œé‚£ä¹ˆåé¢çš„è¯·æ±‚éƒ½ä¼šå¾—åˆ°è„æ•°æ®ï¼Œç›´è‡³ç¼“å­˜è¿‡æœŸã€‚</p><p>å‡å¦‚å…ˆæ·˜æ±°ç¼“å­˜å†æ›´æ–°æ•°æ®åº“ï¼Œå¦‚æœæ›´æ–°æ•°æ®åº“å¤±è´¥ï¼Œåªä¼šäº§ç”Ÿä¸€æ¬¡ç¼“å­˜ç©¿é€ï¼Œç›¸æ¯”è¾ƒè€Œè¨€ï¼Œåè€…å¯¹ä¸šåŠ¡åˆ™æ²¡æœ‰æœ¬è´¨ä¸Šçš„å½±å“ã€‚</p><p>3ã€å»¶æ—¶åŒåˆ ç­–ç•¥</p><p>å¦‚ä¸‹åœºæ™¯ï¼šåŒæ—¶æœ‰ä¸€ä¸ªè¯·æ±‚Aè¿›è¡Œæ›´æ–°æ“ä½œï¼Œå¦ä¸€ä¸ªè¯·æ±‚Bè¿›è¡ŒæŸ¥è¯¢æ“ä½œã€‚</p><ol><li>è¯·æ±‚Aè¿›è¡Œå†™æ“ä½œï¼Œåˆ é™¤ç¼“å­˜</li><li>è¯·æ±‚BæŸ¥è¯¢å‘ç°ç¼“å­˜ä¸å­˜åœ¨</li><li>è¯·æ±‚Bå»æ•°æ®åº“æŸ¥è¯¢å¾—åˆ°æ—§å€¼</li><li>è¯·æ±‚Bå°†æ—§å€¼å†™å…¥ç¼“å­˜</li><li>è¯·æ±‚Aå°†æ–°å€¼å†™å…¥æ•°æ®åº“</li></ol><p>æ¬¡æ•°ä¾¿å‡ºç°äº†æ•°æ®ä¸ä¸€è‡´é—®é¢˜ã€‚é‡‡ç”¨å»¶æ—¶åŒåˆ ç­–ç•¥å¾—ä»¥è§£å†³:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">write</span><span class="params">(String key,Object data)</span>&#123;</span><br><span class="line">    redisUtils.del(key);</span><br><span class="line">    db.update(data);</span><br><span class="line">    Thread.Sleep(<span class="number">100</span>);</span><br><span class="line">    redisUtils.del(key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¹ˆåšï¼Œå¯ä»¥å°†1ç§’å†…æ‰€é€ æˆçš„ç¼“å­˜è„æ•°æ®ï¼Œå†æ¬¡åˆ é™¤ã€‚è¿™ä¸ªæ—¶é—´è®¾å®šå¯æ ¹æ®ä¿„ä¸šåŠ¡åœºæ™¯è¿›è¡Œä¸€ä¸ªè°ƒèŠ‚ã€‚</p><p>4ã€æ•°æ®åº“è¯»å†™åˆ†ç¦»çš„åœºæ™¯</p><p>ä¸¤ä¸ªè¯·æ±‚ï¼Œä¸€ä¸ªè¯·æ±‚Aè¿›è¡Œæ›´æ–°æ“ä½œï¼Œå¦ä¸€ä¸ªè¯·æ±‚Bè¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼š</p><ol><li>è¯·æ±‚Aè¿›è¡Œå†™æ“ä½œï¼Œåˆ é™¤ç¼“å­˜</li><li>è¯·æ±‚Aå°†æ•°æ®å†™å…¥æ•°æ®åº“äº†</li><li>è¯·æ±‚BæŸ¥è¯¢ç¼“å­˜å‘ç°ï¼Œç¼“å­˜æ²¡æœ‰å€¼</li><li>è¯·æ±‚Bå»ä»åº“æŸ¥è¯¢ï¼Œè¿™æ—¶ï¼Œè¿˜æ²¡æœ‰å®Œæˆä¸»ä»åŒæ­¥ï¼Œå› æ­¤æŸ¥è¯¢åˆ°çš„æ˜¯æ—§å€¼</li><li>è¯·æ±‚Bå°†æ—§å€¼å†™å…¥ç¼“å­˜</li><li>æ•°æ®åº“å®Œæˆä¸»ä»åŒæ­¥ï¼Œä»åº“å˜ä¸ºæ–°å€¼</li></ol><p>ä¾æ—§é‡‡ç”¨å»¶æ—¶åŒåˆ ç­–ç•¥è§£å†³æ­¤é—®é¢˜ã€‚</p><h3 id="205ã€Redisä¸­ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ"><a href="#205ã€Redisä¸­ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ" class="headerlink" title="205ã€Redisä¸­ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ"></a>205ã€Redisä¸­ä»€ä¹ˆæ˜¯ç¼“å­˜é›ªå´©ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ</h3><p>1ã€ç¼“å­˜é›ªå´©</p><p>å½“ç¼“å­˜æœåŠ¡å™¨é‡å¯æˆ–è€…å¤§é‡ç¼“å­˜é›†ä¸­åœ¨æŸä¸€æ—¶é—´æ®µå¤±æ•ˆï¼Œè¿™æ ·åœ¨å¤±æ•ˆçš„æ—¶å€™ï¼Œä¼šç»™åç«¯ç³»ç»Ÿå¸¦æ¥å¾ˆå¤§çš„å‹åŠ›ï¼Œå¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚</p><p>2ã€å¦‚ä½•è§£å†³ï¼Ÿ</p><ol><li>åœ¨ç¼“å­˜å¤±æ•ˆåï¼Œé€šè¿‡åŠ é”æˆ–è€…é˜Ÿåˆ—æ¥æ§åˆ¶è¯»æ•°æ®åº“å†™ç¼“å­˜çš„çº¿ç¨‹æ•°é‡ã€‚æ¯”å¦‚å¯¹æŸä¸ªkeyåªå…è®¸ä¸€ä¸ªçº¿ç¨‹æŸ¥è¯¢æ•°æ®å’Œå†™ç¼“å­˜ï¼Œå…¶å®ƒçº¿ç¨‹ç­‰å¾…ï¼›</li><li>åšäºŒçº§ç¼“å­˜ï¼›</li><li>ä¸åŒçš„keyï¼Œè®¾ç½®ä¸åŒçš„è¿‡æœŸæ—¶é—´ï¼Œè®©ç¼“å­˜å¤±æ•ˆçš„æ—¶é—´å°½é‡å‡åŒ€ï¼›</li></ol><h3 id="206ã€Redisæ€ä¹ˆå®ç°åˆ†å¸ƒå¼é”ï¼Ÿ"><a href="#206ã€Redisæ€ä¹ˆå®ç°åˆ†å¸ƒå¼é”ï¼Ÿ" class="headerlink" title="206ã€Redisæ€ä¹ˆå®ç°åˆ†å¸ƒå¼é”ï¼Ÿ"></a>206ã€Redisæ€ä¹ˆå®ç°åˆ†å¸ƒå¼é”ï¼Ÿ</h3><p>ä½¿ç”¨Rediså®ç°åˆ†å¸ƒå¼é”</p><p>rediså‘½ä»¤ï¼šset users 10 nx ex 12   åŸå­æ€§å‘½ä»¤</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä½¿ç”¨uuidï¼Œè§£å†³é”é‡Šæ”¾çš„é—®é¢˜</span></span><br><span class="line"><span class="meta">@GetMapping</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testLock</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">uuid</span> <span class="operator">=</span> UUID.randomUUID().toString();</span><br><span class="line">    <span class="type">Boolean</span> <span class="variable">b_lock</span> <span class="operator">=</span> redisTemplate.opsForValue().setIfAbsent(<span class="string">&quot;lock&quot;</span>, uuid, <span class="number">10</span>, TimeUnit.SECONDS);</span><br><span class="line">    <span class="keyword">if</span>(b_lock)&#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> redisTemplate.opsForValue().get(<span class="string">&quot;num&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(StringUtils.isEmpty(value))&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> Integer.parseInt(value + <span class="string">&quot;&quot;</span>);</span><br><span class="line">        redisTemplate.opsForValue().set(<span class="string">&quot;num&quot;</span>,++num);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">lockUUID</span> <span class="operator">=</span> redisTemplate.opsForValue().get(<span class="string">&quot;lock&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(uuid.equals(lockUUID.toString()))&#123;</span><br><span class="line">            redisTemplate.delete(<span class="string">&quot;lock&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        testLock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤‡æ³¨ï¼šå¯ä»¥é€šè¿‡luaè„šæœ¬ï¼Œä¿è¯åˆ†å¸ƒå¼é”çš„åŸå­æ€§ã€‚</p><h3 id="207ã€Redisåˆ†å¸ƒå¼é”æœ‰ä»€ä¹ˆç¼ºé™·ï¼Ÿ"><a href="#207ã€Redisåˆ†å¸ƒå¼é”æœ‰ä»€ä¹ˆç¼ºé™·ï¼Ÿ" class="headerlink" title="207ã€Redisåˆ†å¸ƒå¼é”æœ‰ä»€ä¹ˆç¼ºé™·ï¼Ÿ"></a>207ã€Redisåˆ†å¸ƒå¼é”æœ‰ä»€ä¹ˆç¼ºé™·ï¼Ÿ</h3><p>Redis åˆ†å¸ƒå¼é”ä¸èƒ½è§£å†³è¶…æ—¶çš„é—®é¢˜ï¼Œåˆ†å¸ƒå¼é”æœ‰ä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼Œç¨‹åºçš„æ‰§è¡Œå¦‚æœè¶…å‡ºäº†é”çš„è¶…æ—¶æ—¶é—´å°±ä¼šå‡ºç°é—®é¢˜ã€‚</p><p>Rediså®¹æ˜“äº§ç”Ÿçš„å‡ ä¸ªé—®é¢˜ï¼š</p><ol><li>é”æœªè¢«é‡Šæ”¾</li><li>Bé”è¢«Aé”é‡Šæ”¾äº†</li><li>æ•°æ®åº“äº‹åŠ¡è¶…æ—¶</li><li>é”è¿‡æœŸäº†ï¼Œä¸šåŠ¡è¿˜æ²¡æ‰§è¡Œå®Œ</li><li>Redisä¸»ä»å¤åˆ¶çš„é—®é¢˜</li></ol><h3 id="208ã€Rediså¦‚ä½•åšå†…å­˜ä¼˜åŒ–ï¼Ÿ"><a href="#208ã€Rediså¦‚ä½•åšå†…å­˜ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="208ã€Rediså¦‚ä½•åšå†…å­˜ä¼˜åŒ–ï¼Ÿ"></a>208ã€Rediså¦‚ä½•åšå†…å­˜ä¼˜åŒ–ï¼Ÿ</h3><p>1ã€ç¼©çŸ­é”®å€¼çš„é•¿åº¦</p><ol><li>ç¼©çŸ­å€¼çš„é•¿åº¦æ‰æ˜¯å…³é”®ï¼Œå¦‚æœå€¼æ˜¯ä¸€ä¸ªå¤§çš„ä¸šåŠ¡å¯¹è±¡ï¼Œå¯ä»¥å°†å¯¹è±¡åºåˆ—åŒ–æˆäºŒè¿›åˆ¶æ•°ç»„ï¼›</li><li>é¦–å…ˆåº”è¯¥åœ¨ä¸šåŠ¡ä¸Šè¿›è¡Œç²¾ç®€ï¼Œå»æ‰ä¸å¿…è¦çš„å±æ€§ï¼Œé¿å…å­˜å‚¨ä¸€äº›æ²¡ç”¨çš„æ•°æ®ï¼›</li><li>å…¶æ¬¡æ˜¯åºåˆ—åŒ–çš„å·¥å…·é€‰æ‹©ä¸Šï¼Œåº”è¯¥é€‰æ‹©æ›´é«˜æ•ˆçš„åºåˆ—åŒ–å·¥å…·æ¥é™ä½å­—èŠ‚æ•°ç»„å¤§å°ï¼›</li><li>ä»¥JAVAä¸ºä¾‹ï¼Œå†…ç½®çš„åºåˆ—åŒ–æ–¹å¼æ— è®ºä»é€Ÿåº¦è¿˜æ˜¯å‹ç¼©æ¯”éƒ½ä¸å°½å¦‚äººæ„ï¼Œè¿™æ—¶å¯ä»¥é€‰æ‹©æ›´é«˜æ•ˆçš„åºåˆ—åŒ–å·¥å…·ï¼Œå¦‚: protostuffï¼Œkryoç­‰</li></ol><p>2ã€å…±äº«å¯¹è±¡æ± </p><p>å¯¹è±¡å…±äº«æ± æŒ‡Rediså†…éƒ¨ç»´æŠ¤[0-9999]çš„æ•´æ•°å¯¹è±¡æ± ã€‚åˆ›å»ºå¤§é‡çš„æ•´æ•°ç±»å‹redisObjectå­˜åœ¨å†…å­˜å¼€é”€ï¼Œæ¯ä¸ªredisObjectå†…éƒ¨ç»“æ„è‡³å°‘å 16å­—èŠ‚ï¼Œç”šè‡³è¶…è¿‡äº†æ•´æ•°è‡ªèº«ç©ºé—´æ¶ˆè€—ã€‚æ‰€ä»¥Rediså†…å­˜ç»´æŠ¤ä¸€ä¸ª[0-9999]çš„æ•´æ•°å¯¹è±¡æ± ï¼Œç”¨äºèŠ‚çº¦å†…å­˜ã€‚ é™¤äº†æ•´æ•°å€¼å¯¹è±¡ï¼Œå…¶ä»–ç±»å‹å¦‚list,hash,set,zsetå†…éƒ¨å…ƒç´ ä¹Ÿå¯ä»¥ä½¿ç”¨æ•´æ•°å¯¹è±¡æ± ã€‚å› æ­¤å¼€å‘ä¸­åœ¨æ»¡è¶³éœ€æ±‚çš„å‰æä¸‹ï¼Œå°½é‡ä½¿ç”¨æ•´æ•°å¯¹è±¡ä»¥èŠ‚çœå†…å­˜ã€‚</p><p>3ã€å­—ç¬¦ä¸²ä¼˜åŒ–</p><p>4ã€ç¼–ç ä¼˜åŒ–</p><p>5ã€æ§åˆ¶keyçš„æ•°é‡</p><hr><p>æœ¬æ–‡ä¸ºCSDNåšä¸»ã€Œå“ª å’ã€çš„åŸåˆ›æ–‡ç« ï¼Œæœ¬ç¯‡ä»…ä¾›å­¦ä¹ ä½¿ç”¨ï¼Œå°Šé‡åŸåˆ›</p><p>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.csdn.net/guorui_java/article/details/119299329">https://blog.csdn.net/guorui_java/article/details/119299329</a></p>]]></content>
      
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> é¢è¯•é¢˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå¿«é€Ÿå…¥é—¨</title>
      <link href="/article/502a6bfe.html"/>
      <url>/article/502a6bfe.html</url>
      
        <content type="html"><![CDATA[<p>linuxæ˜¯ä¸€ä¸ªå¼€æºã€å…è´¹çš„æ“ä½œç³»ç»Ÿï¼Œå…¶ç¨³å®šæ€§ã€å®‰å…¨æ€§ã€å¤„ç†å¤šå¹¶å‘èƒ½åŠ›å·²ç»å¾—åˆ°ä¸šç•Œçš„è®¤å¯ï¼Œç›®å‰å¤§å¤šæ•°ä¼ä¸šçº§åº”ç”¨ç”šè‡³æ˜¯é›†ç¾¤é¡¹ç›®éƒ½éƒ¨ç½²è¿è¡Œåœ¨linuxæ“ä½œç³»ç»Ÿä¹‹ä¸Šï¼Œå¾ˆå¤šè½¯ä»¶å…¬å¸è€ƒè™‘åˆ°å¼€å‘æˆæœ¬éƒ½é¦–é€‰linuxï¼Œåœ¨ä¸­å›½è½¯ä»¶å…¬å¸å¾—åˆ°å¹¿æ³›çš„ä½¿ç”¨ã€‚</p><hr><h1 id="æœåŠ¡å™¨ç›¸å…³çŸ¥è¯†"><a href="#æœåŠ¡å™¨ç›¸å…³çŸ¥è¯†" class="headerlink" title="æœåŠ¡å™¨ç›¸å…³çŸ¥è¯†"></a>æœåŠ¡å™¨ç›¸å…³çŸ¥è¯†</h1><h2 id="ä¸ºä»€ä¹ˆç¨‹åºå‘˜éƒ½éœ€è¦ä¸€ä¸ªè‡ªå·±çš„æœåŠ¡å™¨ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆç¨‹åºå‘˜éƒ½éœ€è¦ä¸€ä¸ªè‡ªå·±çš„æœåŠ¡å™¨ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆç¨‹åºå‘˜éƒ½éœ€è¦ä¸€ä¸ªè‡ªå·±çš„æœåŠ¡å™¨ï¼Ÿ"></a>ä¸ºä»€ä¹ˆç¨‹åºå‘˜éƒ½éœ€è¦ä¸€ä¸ªè‡ªå·±çš„æœåŠ¡å™¨ï¼Ÿ</h2><ol><li>ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œå¿…é¡»è¦å­¦ä¼šå‘å¸ƒè‡ªå·±çš„ç½‘ç«™å’Œé¡¹ç›®!</li><li>ç»ƒä¹ Linuxæ“ä½œ</li><li>æŠŠè‡ªå·±çš„è¿œç¨‹ä»“åº“ã€è¿œç¨‹æ•°æ®åº“ã€è¿œç¨‹tomcatç­‰æ­å»ºåœ¨æœåŠ¡å™¨ä¸Š</li><li>ç»ƒä¹ Linuxè¿›è¡Œä»»æ„çš„ç¯å¢ƒéƒ¨ç½²æ“ä½œ! å¤§éƒ¨äººéƒ½æ˜¯Windowä¸‹å¼€å‘ï¼Œä¸ç†Ÿæ‚‰Linux</li></ol><h2 id="å¦‚ä½•è´­ä¹°æœåŠ¡å™¨ï¼Ÿ"><a href="#å¦‚ä½•è´­ä¹°æœåŠ¡å™¨ï¼Ÿ" class="headerlink" title="å¦‚ä½•è´­ä¹°æœåŠ¡å™¨ï¼Ÿ"></a>å¦‚ä½•è´­ä¹°æœåŠ¡å™¨ï¼Ÿ</h2><p>æ–°æ‰‹å¯ä»¥å…ˆå»é˜¿é‡Œäº‘é¢†ä¸€ä¸ªå…è´¹çš„æœåŠ¡å™¨å…ˆç”¨ç€</p><p>é˜¿é‡Œäº‘æ–°äººæœåŠ¡å™¨é¢†å–åœ°å€ï¼š<br><a href="https://imgtu.com/i/jFDbm6"><img src="https://s1.ax1x.com/2022/06/25/jFDbm6.jpg" alt="jFDbm6.jpg"></a><br>å­¦ç”Ÿçš„è¯åæœŸå¯ä»¥è´­ä¹°å­¦ç”Ÿæœºï¼Œé˜¿é‡Œäº‘åªæœ‰æœªæ»¡24å‘¨å²éƒ½å¯ä»¥äº«å—å­¦ç”Ÿæœºä¼˜æƒ </p><p>ä¼˜æƒ åœ°å€ï¼š<a href="https://www.aliyun.com/minisite/goods?userCode=0phtycgr">https://www.aliyun.com/minisite/goods?userCode=0phtycgr</a></p><p>è´­ä¹°æœåŠ¡å™¨æ—¶ç³»ç»Ÿé€‰æ‹©CentOS æ¨èç‰ˆæœ¬7.Xï¼Œå› ä¸º8.0ä¹‹åæ”¹äº†å¥½å¤šå‘½ä»¤ï¼Œäº‘ç›˜çš„è¯é€‰æ‹©40Gå°±å¤Ÿç”¨äº†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><a href="https://imgtu.com/i/jFDzpd"><img src="https://s1.ax1x.com/2022/06/25/jFDzpd.jpg" alt="jFDzpd.jpg"></a></p><h2 id="ä¹°å®ŒæœåŠ¡å™¨ä¹‹åè¯¥å¹²ä»€ä¹ˆï¼Ÿ"><a href="#ä¹°å®ŒæœåŠ¡å™¨ä¹‹åè¯¥å¹²ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ä¹°å®ŒæœåŠ¡å™¨ä¹‹åè¯¥å¹²ä»€ä¹ˆï¼Ÿ"></a>ä¹°å®ŒæœåŠ¡å™¨ä¹‹åè¯¥å¹²ä»€ä¹ˆï¼Ÿ</h2><p>é¦–å…ˆæœåŠ¡å™¨å°±æ˜¯ä¸€ä¸ªè¿œç¨‹çš„Linux</p><ol><li>åœ¨é˜¿é‡Œäº‘è´­ä¹°æœåŠ¡å™¨éœ€è¦å¼€é€šå®‰å…¨ç»„è®¾ç½®å»è¿›è¡Œç«¯å£çš„æ˜ å°„ï¼Œæ¯”å¦‚8080æˆ–è€…3306<br><a href="https://imgtu.com/i/jFcwxH"><img src="https://s1.ax1x.com/2022/06/25/jFcwxH.jpg" alt="jFcwxH.jpg"></a></li><li>è·å–æœåŠ¡å™¨çš„å…¬ç½‘ipåœ°å€ï¼Œä¿®æ”¹å®ä¾‹åç§°å’Œå¯†ç ï¼Œè®°ä½ç¬¬ä¸€æ¬¡ä¿®æ”¹éœ€è¦é‡å¯ï¼Œä¿®æ”¹åå°±å¯ä»¥ä½¿ç”¨Xshellè¿›è¡Œè¿œç¨‹è¿æ¥äº†</li></ol><p><a href="https://imgtu.com/i/jmFkJe"><img src="https://s1.ax1x.com/2022/06/28/jmFkJe.jpg" alt="jmFkJe.jpg"></a></p><h2 id="è¿æ¥åˆ°æœåŠ¡å™¨ä¹‹åï¼Œæˆ‘ä»¬å°±éœ€è¦æ­å»ºç¯å¢ƒäº†"><a href="#è¿æ¥åˆ°æœåŠ¡å™¨ä¹‹åï¼Œæˆ‘ä»¬å°±éœ€è¦æ­å»ºç¯å¢ƒäº†" class="headerlink" title="è¿æ¥åˆ°æœåŠ¡å™¨ä¹‹åï¼Œæˆ‘ä»¬å°±éœ€è¦æ­å»ºç¯å¢ƒäº†"></a>è¿æ¥åˆ°æœåŠ¡å™¨ä¹‹åï¼Œæˆ‘ä»¬å°±éœ€è¦æ­å»ºç¯å¢ƒäº†</h2><p>æ­å»ºç¯å¢ƒæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><p>1ã€å‚»ç“œå¼(ä½¿ç”¨å®å¡”é¢æ¿)</p><p>å®‰è£…ç½‘ç«™ï¼š<a href="https://www.bt.cn/new/download.html">https://www.bt.cn/new/download.html</a></p><p>åˆ‡è®°å®‰è£…å‰è®°å¾—å…ˆåœ¨å®‰å…¨ç»„ä¸­å¼€å‘å¦‚ä¸‹ç«¯å£ï¼š</p><p><a href="https://imgtu.com/i/jmFPIO"><img src="https://s1.ax1x.com/2022/06/28/jmFPIO.jpg" alt="jmFPIO.jpg"></a></p><p>å®‰è£…å‘½ä»¤ï¼š </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y wget &amp;&amp; wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh ed8484bec</span><br></pre></td></tr></table></figure><p>ä¸‹è½½å®Œæ¯•ä¹‹åï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªåœ°å€ï¼šå®å¡”çš„ç®¡ç†é¢æ¿</p><ul><li>urlï¼š</li><li>usernameï¼š</li><li>passwordï¼š</li></ul><p><a href="https://imgtu.com/i/jmF9Z6"><img src="https://s1.ax1x.com/2022/06/28/jmF9Z6.jpg" alt="jmF9Z6.jpg"></a></p><p><a href="https://imgtu.com/i/jmFCdK"><img src="https://s1.ax1x.com/2022/06/28/jmFCdK.jpg" alt="jmFCdK.jpg"></a></p><h2 id="è‡ªå®šä¹‰å®‰è£…æœåŠ¡å™¨ç¯å¢ƒ"><a href="#è‡ªå®šä¹‰å®‰è£…æœåŠ¡å™¨ç¯å¢ƒ" class="headerlink" title="è‡ªå®šä¹‰å®‰è£…æœåŠ¡å™¨ç¯å¢ƒ"></a>è‡ªå®šä¹‰å®‰è£…æœåŠ¡å™¨ç¯å¢ƒ</h2><p><a href="https://imgtu.com/i/jmFARH"><img src="https://s1.ax1x.com/2022/06/28/jmFARH.jpg" alt="jmFARH.jpg"></a></p><blockquote><p>ä¸€é”®éƒ¨ç½²åº”ç”¨</p></blockquote><p><a href="https://imgtu.com/i/jmFEzd"><img src="https://s1.ax1x.com/2022/06/28/jmFEzd.jpg" alt="jmFEzd.jpg"></a></p><blockquote><p>ç«¯å£å¼€å¯</p></blockquote><p><a href="https://imgtu.com/i/jmFZQA"><img src="https://s1.ax1x.com/2022/06/28/jmFZQA.jpg" alt="jmFZQA.jpg"></a></p><blockquote><p>æ”¾å…¥ç½‘ç«™è¿›è¡Œè®¿é—®</p></blockquote><p>æ¯”å¦‚TomCatå°±ç›´æ¥æ”¾åˆ°webappsç›®å½•ä¸‹</p><p>ç‰¹æ®Šçš„ç½‘ç«™ï¼šå¼€æºé¡¹ç›®ï¼Œå°±å®‰è£…è‡ªå·±çš„æ“ä½œæ¥</p><p>æ³¨æ„ï¼šä¸Šä¼ æ–‡ä»¶å°½é‡ä½¿ç”¨XFTP</p><blockquote><p>SpringBooté¡¹ç›®æ€ä¹ˆéƒ¨ç½²ï¼Ÿ</p></blockquote><p>æ‰“æˆwaråŒ…æˆ–è€…jaråŒ…</p><ul><li>waråŒ…ç›´æ¥ä¸¢åˆ°Tomcatå³å¯</li><li>jaråŒ…ç›´æ¥ç”¨java-jaræ‰§è¡Œå³å¯è®¿é—®</li></ul><p>æ³¨æ„ï¼šç½‘ç«™å¦‚æœè®¿é—®å¤±è´¥ï¼Œä¸€å®šæ˜¯é˜²ç«å¢™é—®é¢˜ï¼Œè¿™ä¸ªæ—¶å€™å»æ£€æŸ¥LinuxæœåŠ¡å™¨å’Œé˜¿é‡Œäº‘å®‰å…¨ç»„é¢æ¿</p><p>2ã€å‘½ä»¤å¼(åŸç”Ÿ)</p><h1 id="Linuxå…¥é—¨æ¦‚è¿°"><a href="#Linuxå…¥é—¨æ¦‚è¿°" class="headerlink" title="Linuxå…¥é—¨æ¦‚è¿°"></a>Linuxå…¥é—¨æ¦‚è¿°</h1><h2 id="æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å­¦ä¹ Linux"><a href="#æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å­¦ä¹ Linux" class="headerlink" title="æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å­¦ä¹ Linux?"></a>æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦å­¦ä¹ Linux?</h2><blockquote><p>linuxè¯ç”Ÿäº†è¿™ä¹ˆå¤šå¹´ï¼Œä»¥å‰è¿˜å–Šç€å¦‚ä½•èƒ½å–ä»£windowsç³»ç»Ÿï¼Œç°åœ¨è¿™ä¸ªå£å·å·²ç»å°å¤šäº†ï¼Œä»»ä½•äº‹ç‰©å‘å±•éƒ½æœ‰å…¶å±€é™æ€§éƒ½æœ‰å…¶å¤©èŠ±æ¿ã€‚å°±å¦‚åŒåœ¨å›½å†…å†æä¸€ä¸ªç¤¾äº¤è½¯ä»¶å–ä»£è…¾è®¯ä¸€æ ·ï¼Œæƒ³æƒ³è€Œå·²åŸºæœ¬ä¸å¯èƒ½ï¼Œå› ä¸ºç”¨æˆ·å·²ç»ä¹ æƒ¯äºä½¿ç”¨å¾®ä¿¡äº¤æµï¼Œä¸æ˜¯è¯´æŠ€æœ¯ä¸Šå®ç°ä¸äº†è§£è€Œæ˜¯è€ç™¾å§“å·²ç»ä¹ æƒ¯äº†ï¼Œæƒ³è®©ä»–ä»¬ä¸ç”¨ï¼Œå³ä½¿ä»–ä»¬è‡ªå·±ä¸ç”¨äº²æˆšæœ‹å‹è¿˜æ˜¯è¦ç”¨ï¼Œæ²¡æœ‰åŠæ³•çš„äº‹æƒ…ã€‚</p><p>ç”¨ä¹ æƒ¯äº†windowsæ“ä½œç³»ç»Ÿï¼Œå†è®©å¤§å®¶åˆ‡æ¢åˆ°åˆ«çš„æ“ä½œç³»ç»ŸåŸºæœ¬ä¸Šæ˜¯ä¸å¯èƒ½çš„äº‹æƒ…ï¼Œæ”¹å˜ä¸€ä¸ªäººå·²ç»å…»æˆçš„ä¹ æƒ¯å¤ªéš¾ã€‚æ²¡æœ‰åŠæ³•æ·±å…¥åˆ°æ™®é€šè€ç™¾å§“çš„ç”Ÿæ´»ä¸­ï¼Œå¹¶ä¸æ„å‘³ç€linuxå°±æ²¡æœ‰ç”¨æ­¦ä¹‹åœ°äº†ã€‚åœ¨æœåŠ¡å™¨ç«¯ï¼Œåœ¨å¼€å‘é¢†åŸŸlinuxå€’æ˜¯è¶Šæ¥è¶Šå—æ¬¢è¿ï¼Œå¾ˆå¤šç¨‹åºå‘˜éƒ½è§‰å¾—ä¸æ‡‚ç‚¹linuxéƒ½è§‰å¾—ä¸å¥½æ„æ€ï¼Œlinuxåœ¨å¼€æºç¤¾åŒºçš„åœ°ä½ä¾ç„¶å²¿ç„¶ä¸åŠ¨ã€‚</p><p>å°¤å…¶æ˜¯ä½œä¸ºä¸€ä¸ªåç«¯ç¨‹åºå‘˜ï¼Œæ˜¯å¿…é¡»è¦æŒæ¡Linuxçš„ï¼Œå› ä¸ºè¿™éƒ½æˆä¸ºäº†ä½ æ‰¾å·¥ä½œçš„åŸºç¡€é—¨æ§›äº†ï¼Œæ‰€ä»¥ä¸å¾—ä¸å­¦ä¹ ï¼</p></blockquote><h2 id="Linux-ç®€ä»‹"><a href="#Linux-ç®€ä»‹" class="headerlink" title="Linux ç®€ä»‹"></a>Linux ç®€ä»‹</h2><blockquote><p>Linux å†…æ ¸æœ€åˆåªæ˜¯ç”±èŠ¬å…°äººæ—çº³æ–¯Â·æ‰˜ç“¦å…¹ï¼ˆLinus Torvaldsï¼‰åœ¨èµ«å°”è¾›åŸºå¤§å­¦ä¸Šå­¦æ—¶å‡ºäºä¸ªäººçˆ±å¥½è€Œç¼–å†™çš„ã€‚</p><p>Linux æ˜¯ä¸€å¥—å…è´¹ä½¿ç”¨å’Œè‡ªç”±ä¼ æ’­çš„ç±» Unix æ“ä½œç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªåŸºäº POSIXï¼ˆå¯ç§»æ¤æ“ä½œç³»ç»Ÿæ¥å£ï¼‰ å’Œ UNIX çš„å¤šç”¨æˆ·ã€å¤šä»»åŠ¡ã€æ”¯æŒå¤šçº¿ç¨‹å’Œå¤š CPU çš„æ“ä½œç³»ç»Ÿã€‚</p><p>Linux èƒ½è¿è¡Œä¸»è¦çš„ UNIX å·¥å…·è½¯ä»¶ã€åº”ç”¨ç¨‹åºå’Œç½‘ç»œåè®®ã€‚å®ƒæ”¯æŒ 32 ä½å’Œ 64 ä½ç¡¬ä»¶ã€‚Linux ç»§æ‰¿äº† Unix ä»¥ç½‘ç»œä¸ºæ ¸å¿ƒçš„è®¾è®¡æ€æƒ³ï¼Œæ˜¯ä¸€ä¸ªæ€§èƒ½ç¨³å®šçš„å¤šç”¨æˆ·ç½‘ç»œæ“ä½œç³»ç»Ÿã€‚</p></blockquote><h2 id="Linux-å‘è¡Œç‰ˆ"><a href="#Linux-å‘è¡Œç‰ˆ" class="headerlink" title="Linux å‘è¡Œç‰ˆ"></a>Linux å‘è¡Œç‰ˆ</h2><blockquote><p>Linux çš„å‘è¡Œç‰ˆè¯´ç®€å•ç‚¹å°±æ˜¯å°† Linux å†…æ ¸ä¸åº”ç”¨è½¯ä»¶åšä¸€ä¸ªæ‰“åŒ…</p></blockquote><p>Kali linuxï¼šåšå®‰å…¨æ¸—é€æµ‹è¯•ä½¿ç”¨çš„</p><p><a href="https://imgtu.com/i/juu9oj"><img src="https://s1.ax1x.com/2022/06/30/juu9oj.png" alt="juu9oj.png"></a></p><p>ç›®å‰å¸‚é¢ä¸Šè¾ƒçŸ¥åçš„å‘è¡Œç‰ˆæœ‰ï¼šUbuntuã€RedHatã€CentOSã€Debianã€Fedoraã€SuSEã€OpenSUSEã€Arch Linuxã€SolusOS ç­‰ã€‚</p><p><a href="https://imgtu.com/i/juupwQ"><img src="https://s1.ax1x.com/2022/06/30/juupwQ.png" alt="juupwQ.png"></a></p><p>æœ‰æ¡ä»¶ä½¿ç”¨Redhatçš„äººå¯ä»¥è€ƒè™‘è€ƒä¸€ä¸ªçº¢å¸½å­å·¥ç¨‹å¸ˆï¼Œå¯ä»¥è®©ä½ åœ¨é¢è¯•çš„æ—¶å€™æ›´çªå‡ºä¸€ç‚¹</p><blockquote><p>Linuxåº”ç”¨é¢†åŸŸ</p></blockquote><p>ä»Šå¤©å„ç§åœºåˆéƒ½æœ‰ä½¿ç”¨å„ç§ Linux å‘è¡Œç‰ˆï¼Œä»åµŒå…¥å¼è®¾å¤‡åˆ°è¶…çº§è®¡ç®—æœºï¼Œå¹¶ä¸”åœ¨æœåŠ¡å™¨é¢†åŸŸç¡®å®šäº†åœ°ä½ï¼Œé€šå¸¸æœåŠ¡å™¨ä½¿ç”¨ LAMPï¼ˆLinux + Apache + MySQL + PHPï¼‰æˆ– LNMPï¼ˆLinux + Nginx+ MySQL + PHPï¼‰ç»„åˆã€‚</p><p>ç›®å‰ Linux ä¸ä»…åœ¨å®¶åº­ä¸ä¼ä¸šä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”åœ¨æ”¿åºœä¸­ä¹Ÿå¾ˆå—æ¬¢è¿ã€‚</p><ul><li>å·´è¥¿è”é‚¦æ”¿åºœç”±äºæ”¯æŒ Linux è€Œä¸–ç•Œé—»åã€‚</li><li>æœ‰æ–°é—»æŠ¥é“ä¿„ç½—æ–¯å†›é˜Ÿè‡ªå·±åˆ¶é€ çš„ Linux å‘å¸ƒç‰ˆçš„ï¼Œåšä¸º G.H.ost é¡¹ç›®å·²ç»å–å¾—æˆæœã€‚</li><li>å°åº¦çš„ Kerala è”é‚¦è®¡åˆ’åœ¨å‘å…¨è”é‚¦çš„é«˜ä¸­æ¨å¹¿ä½¿ç”¨ Linuxã€‚</li><li>ä¸­åäººæ°‘å…±å’Œå›½ä¸ºå–å¾—æŠ€æœ¯ç‹¬ç«‹ï¼Œåœ¨é¾™èŠ¯å¤„ç†å™¨ä¸­æ’ä»–æ€§åœ°ä½¿ç”¨ Linuxã€‚</li><li>åœ¨è¥¿ç­ç‰™çš„ä¸€äº›åœ°åŒºå¼€å‘äº†è‡ªå·±çš„ Linux å‘å¸ƒç‰ˆï¼Œå¹¶ä¸”åœ¨æ”¿åºœä¸æ•™è‚²é¢†åŸŸå¹¿æ³›ä½¿ç”¨ï¼Œå¦‚ Extremadura åœ°åŒºçš„ gnuLinEx å’Œ Andalusia åœ°åŒºçš„ Guadalinexã€‚</li><li>è‘¡è„ç‰™åŒæ ·ä½¿ç”¨è‡ªå·±çš„ Linux å‘å¸ƒç‰ˆ Caixa MÃ¡gicaï¼Œç”¨äº Magalh?es ç¬”è®°æœ¬ç”µè„‘å’Œ e-escola æ”¿åºœè½¯ä»¶ã€‚</li><li>æ³•å›½å’Œå¾·å›½åŒæ ·å¼€å§‹é€æ­¥é‡‡ç”¨ Linuxã€‚</li></ul><blockquote><p>Linux vs Windows</p></blockquote><p><a href="https://imgtu.com/i/juuPFs"><img src="https://s1.ax1x.com/2022/06/30/juuPFs.png" alt="juuPFs.png"></a></p><h1 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h1><p>Linux çš„å®‰è£…ï¼Œå®‰è£…æ­¥éª¤æ¯”è¾ƒç¹çï¼Œç°åœ¨å…¶å®äº‘æœåŠ¡å™¨æŒºæ™®éçš„ï¼Œä»·æ ¼ä¹Ÿä¾¿å®œï¼Œå¦‚æœç›´æ¥ä¸æƒ³æ­å»ºï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¹°ä¸€å°å­¦ä¹ ç”¨ç”¨ï¼</p><blockquote><p>å®‰è£…CentOSï¼ˆè™šæ‹Ÿæœºå®‰è£…ï¼Œè€—èµ„æºï¼‰</p></blockquote><p>è¿™é‡Œæ¨èä½¿ç”¨VMware Workstation å¯¹æ–°æ‰‹ä¼šæ¯”è¾ƒå‹å¥½ä¸€ç‚¹ï¼Œå®‰è£…å®Œåéœ€è¦æ¿€æ´»ç ï¼Œè¿™é‡Œå°±ä¸æ•™ç ´è§£æ–¹æ³•äº†ï¼Œè‡ªè¡Œç™¾åº¦å³å¯</p><p>VMware Workstationå®˜ç½‘ï¼š<a href="https://www.vmware.com/cn/products/workstation-pro.html">https://www.vmware.com/cn/products/workstation-pro.html</a></p><p>ä¸‹è½½æ¿€æ´»å¥½åè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</p><p>å¯ä»¥é€šè¿‡é•œåƒè¿›è¡Œå®‰è£…ï¼å®˜æ–¹ç½‘å€ï¼š<a href="https://www.centos.org/download/">https://www.centos.org/download/</a></p><p><a href="https://blog.csdn.net/SDAU_LGX/article/details/120669344?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165647175016782246484602%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=165647175016782246484602&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-2-120669344-null-null.142^v25^pc_rank_34,157^v15^new_3&amp;utm_term=centos7%E9%95%9C%E5%83%8F&amp;spm=1018.2226.3001.4187">å®‰è£…æ•™ç¨‹</a></p><blockquote><p>è´­ä¹°äº‘æœåŠ¡å™¨ï¼ˆæ¨èï¼‰</p></blockquote><p>äº‘æœåŠ¡å™¨å°±æ˜¯ä¸€ä¸ªè¿œç¨‹ç”µè„‘ï¼ŒæœåŠ¡å™¨ä¸€èˆ¬ä¸ä¼šå…³æœº</p><p>è™šæ‹Ÿæœºå®‰è£…åå ç”¨ç©ºé—´ï¼Œä¹Ÿä¼šæœ‰äº›å¡é¡¿ï¼Œæˆ‘ä»¬ä½œä¸ºç¨‹åºå‘˜å…¶å®å¯ä»¥é€‰æ‹©è´­ä¹°ä¸€å°è‡ªå·±çš„æœåŠ¡å™¨ï¼Œè¿™æ ·çš„è¯æ›´åŠ æ¥è¿‘çœŸå®çº¿ä¸Šå·¥ä½œï¼›</p><p>1ã€é˜¿é‡Œäº‘è´­ä¹°æœåŠ¡å™¨ï¼š<a href="https://www.aliyun.com/minisite/goods?userCode=0phtycgr">https://www.aliyun.com/minisite/goods?userCode=0phtycgr</a></p><p>2ã€è´­ä¹°å®Œæ¯•åï¼Œè·å–æœåŠ¡å™¨çš„ipåœ°å€ï¼Œé‡ç½®æœåŠ¡å™¨å¯†ç ï¼Œå°±å¯ä»¥è¿œç¨‹ç™»å½•äº†</p><p>3ã€ä¸‹è½½ xShellï¼ˆè¿œç¨‹è¿æ¥ä½¿ç”¨ï¼‰å’ŒXftp å·¥å…·ï¼ˆæ–‡ä»¶ä¸Šä¼ ä½¿ç”¨ï¼‰</p><p>è¿™é‡Œæˆ‘ç»™å¤§å®¶æä¾›äº†æˆ‘çš„å…è´¹ä¸‹è½½åœ°å€ï¼š</p><p>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/19yBxIyCP69tHzm8Y2NogNw">https://pan.baidu.com/s/19yBxIyCP69tHzm8Y2NogNw</a><br>æå–ç ï¼šp73z </p><p>è¿æ¥æˆåŠŸæ•ˆæœå¦‚ä¸‹ï¼š</p><p><a href="https://imgtu.com/i/juuSeg"><img src="https://s1.ax1x.com/2022/06/30/juuSeg.png" alt="juuSeg.png"></a></p><p>è¿™é‡Œå°±æ˜¯æˆ‘ä»¬çš„Linuxæ“ä½œç³»ç»Ÿäº†!ä»¥åçš„æ“ä½œéƒ½åœ¨è¿™é‡Œæ“ä½œï¼Œé¡¹ç›®ä¹Ÿåœ¨è¿™é‡Œè¿›è¡Œå‘å¸ƒ!</p><p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p><p>å¦‚æœè¦æ‰“å¼€ç«¯å£ï¼Œéœ€è¦åœ¨é˜¿é‡Œäº‘çš„å®‰å…¨ç»„é¢æ¿ä¸­å¼€å¯å¯¹åº”çš„å‡ºå…¥è§„åˆ™ï¼Œä¸ç„¶çš„è¯ä¼šè¢«é˜¿é‡Œæ‹¦æˆªï¼</p><h1 id="èµ°è¿‘Linuxç³»ç»Ÿ"><a href="#èµ°è¿‘Linuxç³»ç»Ÿ" class="headerlink" title="èµ°è¿‘Linuxç³»ç»Ÿ"></a>èµ°è¿‘Linuxç³»ç»Ÿ</h1><blockquote><p>å¼€æœºç™»å½•</p></blockquote><p>å¼€æœºä¼šå¯åŠ¨è®¸å¤šç¨‹åºã€‚å®ƒä»¬åœ¨Windowså«åšâ€æœåŠ¡â€ï¼ˆserviceï¼‰ï¼Œåœ¨Linuxå°±å«åšâ€<strong>å®ˆæŠ¤è¿›ç¨‹</strong>â€œï¼ˆdaemonï¼‰ã€‚</p><p>å¼€æœºæˆåŠŸåï¼Œå®ƒä¼šæ˜¾ç¤ºä¸€ä¸ªæ–‡æœ¬ç™»å½•ç•Œé¢ï¼Œè¿™ä¸ªç•Œé¢å°±æ˜¯æˆ‘ä»¬ç»å¸¸çœ‹åˆ°çš„ç™»å½•ç•Œé¢ï¼Œåœ¨è¿™ä¸ªç™»å½•ç•Œé¢ä¸­ä¼šæç¤ºç”¨æˆ·è¾“å…¥ç”¨æˆ·åï¼Œè€Œç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·å°†ä½œä¸ºå‚æ•°ä¼ ç»™loginç¨‹åºæ¥éªŒè¯ç”¨æˆ·çš„èº«ä»½ï¼Œå¯†ç æ˜¯ä¸æ˜¾ç¤ºçš„ï¼Œè¾“å®Œå›è½¦å³å¯ï¼</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œç”¨æˆ·çš„ç™»å½•æ–¹å¼æœ‰ä¸‰ç§ï¼š</p><ul><li>å‘½ä»¤è¡Œç™»å½•</li><li>sshç™»å½•</li><li>å›¾å½¢ç•Œé¢ç™»å½•</li></ul><p>æœ€é«˜æƒé™è´¦æˆ·ä¸º rootï¼Œå¯ä»¥æ“ä½œä¸€åˆ‡ï¼</p><blockquote><p>å…³æœº</p></blockquote><p>åœ¨linuxé¢†åŸŸå†…å¤§å¤šç”¨åœ¨æœåŠ¡å™¨ä¸Šï¼Œå¾ˆå°‘é‡åˆ°å…³æœºçš„æ“ä½œã€‚æ¯•ç«ŸæœåŠ¡å™¨ä¸Šè·‘ä¸€ä¸ªæœåŠ¡æ˜¯æ°¸æ— æ­¢å¢ƒçš„ï¼Œé™¤éç‰¹æ®Šæƒ…å†µä¸‹ï¼Œä¸å¾—å·²æ‰ä¼šå…³æœºã€‚</p><p>å…³æœºæŒ‡ä»¤ä¸ºï¼šshutdown ï¼›</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sync</span> <span class="comment"># å°†æ•°æ®ç”±å†…å­˜åŒæ­¥åˆ°ç¡¬ç›˜ä¸­ã€‚</span></span><br><span class="line"></span><br><span class="line">shutdown <span class="comment"># å…³æœºæŒ‡ä»¤ï¼Œä½ å¯ä»¥man shutdown æ¥çœ‹ä¸€ä¸‹å¸®åŠ©æ–‡æ¡£ã€‚ä¾‹å¦‚ä½ å¯ä»¥è¿è¡Œå¦‚ä¸‹å‘½ä»¤å…³æœºï¼š</span></span><br><span class="line"></span><br><span class="line">shutdown â€“h 10 <span class="comment"># è¿™ä¸ªå‘½ä»¤å‘Šè¯‰å¤§å®¶ï¼Œè®¡ç®—æœºå°†åœ¨10åˆ†é’Ÿåå…³æœº</span></span><br><span class="line"></span><br><span class="line">shutdown â€“h now <span class="comment"># ç«‹é©¬å…³æœº</span></span><br><span class="line"></span><br><span class="line">shutdown â€“h 20:25 <span class="comment"># ç³»ç»Ÿä¼šåœ¨ä»Šå¤©20:25å…³æœº</span></span><br><span class="line"></span><br><span class="line">shutdown â€“h +10 <span class="comment"># ååˆ†é’Ÿåå…³æœº</span></span><br><span class="line"></span><br><span class="line">shutdown â€“r now <span class="comment"># ç³»ç»Ÿç«‹é©¬é‡å¯</span></span><br><span class="line"></span><br><span class="line">shutdown â€“r +10 <span class="comment"># ç³»ç»Ÿååˆ†é’Ÿåé‡å¯</span></span><br><span class="line"></span><br><span class="line">reboot <span class="comment"># å°±æ˜¯é‡å¯ï¼Œç­‰åŒäº shutdown â€“r now</span></span><br><span class="line"></span><br><span class="line">halt <span class="comment"># å…³é—­ç³»ç»Ÿï¼Œç­‰åŒäºshutdown â€“h now å’Œ poweroff</span></span><br></pre></td></tr></table></figure><p>æœ€åæ€»ç»“ä¸€ä¸‹ï¼Œä¸ç®¡æ˜¯é‡å¯ç³»ç»Ÿè¿˜æ˜¯å…³é—­ç³»ç»Ÿï¼Œé¦–å…ˆè¦è¿è¡Œ <strong>sync</strong> å‘½ä»¤ï¼ŒæŠŠå†…å­˜ä¸­çš„æ•°æ®å†™åˆ°ç£ç›˜ä¸­ã€‚</p><blockquote><p>ç³»ç»Ÿç›®å½•ç»“æ„</p></blockquote><p>1ã€åœ¨Linuxä¸­ä¸€åˆ‡çš†æ–‡ä»¶<br>2ã€æ ¹ç›®å½•/ï¼Œæ‰€æœ‰çš„æ–‡ä»¶éƒ½æŒ‚è½½åœ¨è¿™ä¸ªèŠ‚ç‚¹ä¸‹</p><p>ç™»å½•ç³»ç»Ÿåï¼Œåœ¨å½“å‰å‘½ä»¤çª—å£ä¸‹è¾“å…¥å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> /</span><br></pre></td></tr></table></figure><p>ä½ ä¼šçœ‹åˆ°å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><a href="https://imgtu.com/i/junxOS"><img src="https://s1.ax1x.com/2022/06/30/junxOS.png" alt="junxOS.png"></a></p><p>æ ‘çŠ¶ç›®å½•ç»“æ„ï¼šï¼ˆLinuxçš„ä¸€åˆ‡èµ„æºéƒ½æŒ‚è½½åœ¨è¿™ä¸ª / æ ¹èŠ‚ç‚¹ä¸‹ï¼‰</p><p><a href="https://imgtu.com/i/juuiYn"><img src="https://s1.ax1x.com/2022/06/30/juuiYn.png" alt="juuiYn.png"></a></p><p><strong>ä»¥ä¸‹æ˜¯å¯¹è¿™äº›ç›®å½•çš„è§£é‡Šï¼š</strong></p><ul><li><strong>/bin</strong>ï¼šbinæ˜¯Binaryçš„ç¼©å†™, è¿™ä¸ªç›®å½•å­˜æ”¾ç€æœ€ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤ã€‚</li><li><strong>/bootï¼š</strong> è¿™é‡Œå­˜æ”¾çš„æ˜¯å¯åŠ¨Linuxæ—¶ä½¿ç”¨çš„ä¸€äº›æ ¸å¿ƒæ–‡ä»¶ï¼ŒåŒ…æ‹¬ä¸€äº›è¿æ¥æ–‡ä»¶ä»¥åŠé•œåƒæ–‡ä»¶ã€‚ï¼ˆåˆ‡è®°ä¸è¦åŠ¨ä»–ï¼‰</li><li><strong>/dev ï¼š</strong> devæ˜¯Device(è®¾å¤‡)çš„ç¼©å†™, å­˜æ”¾çš„æ˜¯Linuxçš„å¤–éƒ¨è®¾å¤‡ï¼Œåœ¨Linuxä¸­è®¿é—®è®¾å¤‡çš„æ–¹å¼å’Œè®¿é—®æ–‡ä»¶çš„æ–¹å¼æ˜¯ç›¸åŒçš„ã€‚</li><li><strong>/etcï¼š</strong> è¿™ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾æ‰€æœ‰çš„ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶å’Œå­ç›®å½•ã€‚ï¼ˆ<strong>é‡ç‚¹</strong>ï¼‰</li><li><strong>/home</strong>ï¼šç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œåœ¨Linuxä¸­ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ç›®å½•ï¼Œä¸€èˆ¬è¯¥ç›®å½•åæ˜¯ä»¥ç”¨æˆ·çš„è´¦å·å‘½åçš„ã€‚ï¼ˆ<strong>é‡ç‚¹</strong>ï¼‰</li><li><strong>/lib</strong>ï¼šè¿™ä¸ªç›®å½•é‡Œå­˜æ”¾ç€ç³»ç»Ÿæœ€åŸºæœ¬çš„åŠ¨æ€è¿æ¥å…±äº«åº“ï¼Œå…¶ä½œç”¨ç±»ä¼¼äºWindowsé‡Œçš„DLLæ–‡ä»¶ã€‚ï¼ˆåˆ‡è®°ä¸è¦åŠ¨ä»–ï¼‰</li><li><strong>/lost+found</strong>ï¼šè¿™ä¸ªç›®å½•ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ç©ºçš„ï¼Œå½“ç³»ç»Ÿéæ³•å…³æœºåï¼Œè¿™é‡Œå°±å­˜æ”¾äº†ä¸€äº›æ–‡ä»¶ã€‚ï¼ˆå­˜æ”¾çªç„¶å…³æœºçš„ä¸€äº›æ–‡ä»¶ï¼‰</li><li><strong>/media</strong>ï¼šlinuxç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ä¸€äº›è®¾å¤‡ï¼Œä¾‹å¦‚Uç›˜ã€å…‰é©±ç­‰ç­‰ï¼Œå½“è¯†åˆ«åï¼Œlinuxä¼šæŠŠè¯†åˆ«çš„è®¾å¤‡æŒ‚è½½åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚</li><li><strong>/mnt</strong>ï¼šç³»ç»Ÿæä¾›è¯¥ç›®å½•æ˜¯ä¸ºäº†è®©ç”¨æˆ·ä¸´æ—¶æŒ‚è½½åˆ«çš„æ–‡ä»¶ç³»ç»Ÿçš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…‰é©±æŒ‚è½½åœ¨/mnt/ä¸Šï¼Œç„¶åè¿›å…¥è¯¥ç›®å½•å°±å¯ä»¥æŸ¥çœ‹å…‰é©±é‡Œçš„å†…å®¹äº†ã€‚ï¼ˆæˆ‘ä»¬åé¢ä¼šæŠŠä¸€äº›æœ¬åœ°æ–‡ä»¶æŒ‚è½½åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼‰</li><li><strong>/opt</strong>ï¼šè¿™æ˜¯ç»™ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶æ‰€æ‘†æ”¾çš„ç›®å½•ã€‚æ¯”å¦‚ä½ å®‰è£…ä¸€ä¸ªORACLEæ•°æ®åº“åˆ™å°±å¯ä»¥æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚é»˜è®¤æ˜¯ç©ºçš„ã€‚(<strong>éå¸¸é‡è¦</strong>)</li><li><strong>/proc</strong>ï¼šè¿™ä¸ªç›®å½•æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„ç›®å½•ï¼Œå®ƒæ˜¯ç³»ç»Ÿå†…å­˜çš„æ˜ å°„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç›´æ¥è®¿é—®è¿™ä¸ªç›®å½•æ¥è·å–ç³»ç»Ÿä¿¡æ¯ã€‚ï¼ˆä¸ç”¨ç®¡ï¼‰</li><li><strong>/root</strong>ï¼šè¯¥ç›®å½•ä¸ºç³»ç»Ÿç®¡ç†å‘˜ï¼Œä¹Ÿç§°ä½œè¶…çº§æƒé™è€…çš„ç”¨æˆ·ä¸»ç›®å½•ã€‚ï¼ˆ<strong>é‡ç‚¹</strong>ï¼‰</li><li><strong>/sbin</strong>ï¼šså°±æ˜¯Super Userçš„æ„æ€ï¼Œè¿™é‡Œå­˜æ”¾çš„æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„ç³»ç»Ÿç®¡ç†ç¨‹åºã€‚</li><li><strong>/srv</strong>ï¼šè¯¥ç›®å½•å­˜æ”¾ä¸€äº›æœåŠ¡å¯åŠ¨ä¹‹åéœ€è¦æå–çš„æ•°æ®ã€‚</li><li><strong>/sys</strong>ï¼šè¿™æ˜¯linux2.6å†…æ ¸çš„ä¸€ä¸ªå¾ˆå¤§çš„å˜åŒ–ã€‚è¯¥ç›®å½•ä¸‹å®‰è£…äº†2.6å†…æ ¸ä¸­æ–°å‡ºç°çš„ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ sysfs ã€‚</li><li><strong>/tmp</strong>ï¼šè¿™ä¸ªç›®å½•æ˜¯ç”¨æ¥å­˜æ”¾ä¸€äº›ä¸´æ—¶æ–‡ä»¶çš„ã€‚ç”¨å®Œå³ä¸¢çš„æ–‡ä»¶ï¼Œå¯ä»¥æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œæ¯”å¦‚å®‰è£…åŒ…ã€‚ï¼ˆ<strong>å¸¸ç”¨</strong>ï¼‰</li><li><strong>/usr</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç›®å½•ï¼Œç”¨æˆ·çš„å¾ˆå¤šåº”ç”¨ç¨‹åºå’Œæ–‡ä»¶éƒ½æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œç±»ä¼¼äºwindowsä¸‹çš„program filesç›®å½•ã€‚ï¼ˆ<strong>é‡ç‚¹</strong>ï¼‰</li><li><strong>/usr/binï¼š</strong> ç³»ç»Ÿç”¨æˆ·ä½¿ç”¨çš„åº”ç”¨ç¨‹åºã€‚</li><li><strong>/usr/sbinï¼š</strong> è¶…çº§ç”¨æˆ·ä½¿ç”¨çš„æ¯”è¾ƒé«˜çº§çš„ç®¡ç†ç¨‹åºå’Œç³»ç»Ÿå®ˆæŠ¤ç¨‹åºã€‚</li><li><strong>/usr/srcï¼š</strong> å†…æ ¸æºä»£ç é»˜è®¤çš„æ”¾ç½®ç›®å½•ã€‚</li><li><strong>/var</strong>ï¼šè¿™ä¸ªç›®å½•ä¸­å­˜æ”¾ç€åœ¨ä¸æ–­æ‰©å……ç€çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬ä¹ æƒ¯å°†é‚£äº›ç»å¸¸è¢«ä¿®æ”¹çš„ç›®å½•æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚åŒ…æ‹¬å„ç§æ—¥å¿—æ–‡ä»¶ã€‚</li><li><strong>/run</strong>ï¼šæ˜¯ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿï¼Œå­˜å‚¨ç³»ç»Ÿå¯åŠ¨ä»¥æ¥çš„ä¿¡æ¯ã€‚å½“ç³»ç»Ÿé‡å¯æ—¶ï¼Œè¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶åº”è¯¥è¢«åˆ æ‰æˆ–æ¸…é™¤ã€‚</li><li><strong>/www:</strong>å­˜æ”¾æœåŠ¡å™¨ç½‘ç«™ç›¸å…³çš„èµ„æºï¼Œç¯å¢ƒï¼Œç½‘ç«™çš„é¡¹ç›®ï¼Œè¿™ä¸ªæ˜¯åªæœ‰æœåŠ¡å™¨æ‰æœ‰çš„ï¼ˆ<strong>é‡ç‚¹</strong>ï¼‰</li></ul><p><a href="https://imgtu.com/i/juuFWq"><img src="https://s1.ax1x.com/2022/06/30/juuFWq.png" alt="juuFWq.png"></a></p><h1 id="å¸¸ç”¨çš„åŸºæœ¬å‘½ä»¤ï¼ˆé‡ç‚¹ï¼‰"><a href="#å¸¸ç”¨çš„åŸºæœ¬å‘½ä»¤ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="å¸¸ç”¨çš„åŸºæœ¬å‘½ä»¤ï¼ˆé‡ç‚¹ï¼‰"></a>å¸¸ç”¨çš„åŸºæœ¬å‘½ä»¤ï¼ˆé‡ç‚¹ï¼‰</h1><h2 id="ç›®å½•ç®¡ç†"><a href="#ç›®å½•ç®¡ç†" class="headerlink" title="ç›®å½•ç®¡ç†"></a>ç›®å½•ç®¡ç†</h2><h3 id="ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„"><a href="#ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„" class="headerlink" title="ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„"></a>ç»å¯¹è·¯å¾„å’Œç›¸å¯¹è·¯å¾„</h3><p>æˆ‘ä»¬çŸ¥é“Linuxçš„ç›®å½•ç»“æ„ä¸ºæ ‘çŠ¶ç»“æ„ï¼Œæœ€é¡¶çº§çš„ç›®å½•ä¸ºæ ¹ç›®å½• /ã€‚</p><p>å…¶ä»–ç›®å½•é€šè¿‡æŒ‚è½½å¯ä»¥å°†å®ƒä»¬æ·»åŠ åˆ°æ ‘ä¸­ï¼Œé€šè¿‡è§£é™¤æŒ‚è½½å¯ä»¥ç§»é™¤å®ƒä»¬ã€‚</p><p><strong>ç»å¯¹è·¯å¾„ï¼š</strong></p><p>è·¯å¾„çš„å†™æ³•ï¼Œç”±æ ¹ç›®å½• / å†™èµ·ï¼Œä¾‹å¦‚ï¼š/usr/share/doc è¿™ä¸ªç›®å½•ã€‚</p><p><strong>ç›¸å¯¹è·¯å¾„ï¼š</strong></p><p>è·¯å¾„çš„å†™æ³•ï¼Œä¸æ˜¯ç”± / å†™èµ·ï¼Œä¾‹å¦‚ç”± /usr/share/doc è¦åˆ° /usr/share/man åº•ä¸‹æ—¶ï¼Œå¯ä»¥å†™æˆï¼šcd ../man è¿™å°±æ˜¯ç›¸å¯¹è·¯å¾„çš„å†™æ³•å•¦ï¼</p><ul><li>cd :åˆ‡æ¢ç›®å½•å‘½ä»¤!</li><li>./ :å½“å‰ç›®å½•</li><li>cd .. :è¿”å›ä¸Šä¸€çº§ç›®å½•</li></ul><h3 id="å¤„ç†ç›®å½•çš„å¸¸ç”¨å‘½ä»¤"><a href="#å¤„ç†ç›®å½•çš„å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¤„ç†ç›®å½•çš„å¸¸ç”¨å‘½ä»¤"></a>å¤„ç†ç›®å½•çš„å¸¸ç”¨å‘½ä»¤</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹å‡ ä¸ªå¸¸è§çš„å¤„ç†ç›®å½•çš„å‘½ä»¤å§ï¼š</p><ul><li>ls: åˆ—å‡ºç›®å½•</li><li>cdï¼šåˆ‡æ¢ç›®å½•</li><li>pwdï¼šæ˜¾ç¤ºç›®å‰çš„ç›®å½•</li><li>mkdirï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•</li><li>rmdirï¼šåˆ é™¤ä¸€ä¸ªç©ºçš„ç›®å½•</li><li>cp: å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•</li><li>rm: ç§»é™¤æ–‡ä»¶æˆ–ç›®å½•</li><li>mv: ç§»åŠ¨æ–‡ä»¶ä¸ç›®å½•ï¼Œæˆ–ä¿®æ”¹æ–‡ä»¶ä¸ç›®å½•çš„åç§°</li></ul><p>ä½ å¯ä»¥ä½¿ç”¨ <em>man [å‘½ä»¤]</em> æ¥æŸ¥çœ‹å„ä¸ªå‘½ä»¤çš„ä½¿ç”¨æ–‡æ¡£ï¼Œå¦‚ ï¼šman cpã€‚</p><h4 id="ls-ï¼ˆåˆ—å‡ºç›®å½•ï¼‰"><a href="#ls-ï¼ˆåˆ—å‡ºç›®å½•ï¼‰" class="headerlink" title="ls ï¼ˆåˆ—å‡ºç›®å½•ï¼‰"></a>ls ï¼ˆåˆ—å‡ºç›®å½•ï¼‰</h4><p>åœ¨Linuxç³»ç»Ÿå½“ä¸­ï¼Œ ls å‘½ä»¤å¯èƒ½æ˜¯æœ€å¸¸è¢«è¿è¡Œçš„ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># ls [-aAdfFhilnrRSt] ç›®å½•åç§°</span></span><br></pre></td></tr></table></figure><p>é€‰é¡¹ä¸å‚æ•°ï¼š</p><ul><li>-a ï¼šå…¨éƒ¨çš„æ–‡ä»¶ï¼Œè¿åŒéšè—æ–‡ä»¶( å¼€å¤´ä¸º . çš„æ–‡ä»¶) ä¸€èµ·åˆ—å‡ºæ¥(å¸¸ç”¨)</li><li>-l ï¼šé•¿æ•°æ®ä¸²åˆ—å‡ºï¼ŒåŒ…å«æ–‡ä»¶çš„å±æ€§ä¸æƒé™ç­‰ç­‰æ•°æ®ï¼›(å¸¸ç”¨)</li></ul><p>æ³¨æ„ï¼šæ‰€æœ‰çš„Linuxå‘½ä»¤éƒ½å¯ä»¥è¿›è¡Œç»„åˆä½¿ç”¨!</p><p>æ¯”å¦‚ï¼šå°†ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ—å‡ºæ¥(å«å±æ€§ä¸éšè—æ¡£)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># ls -al ~</span></span><br></pre></td></tr></table></figure><h4 id="cd-ï¼ˆåˆ‡æ¢ç›®å½•ï¼‰"><a href="#cd-ï¼ˆåˆ‡æ¢ç›®å½•ï¼‰" class="headerlink" title="cd ï¼ˆåˆ‡æ¢ç›®å½•ï¼‰"></a>cd ï¼ˆåˆ‡æ¢ç›®å½•ï¼‰</h4><p>cd+ç›®å½•åï¼ˆç»å¯¹è·¯å¾„éƒ½æ˜¯ä»¥/å¼€å¤´ï¼Œç›¸å¯¹è·¯å¾„ï¼Œå¯¹äºå½“å‰ç›®å½•è¯¥å¦‚ä½•å¯»æ‰¾../ ../ï¼‰</p><p><a href="https://imgtu.com/i/juuAS0"><img src="https://s1.ax1x.com/2022/06/30/juuAS0.png" alt="juuAS0.png"></a></p><p>cdæ˜¯Change Directoryçš„ç¼©å†™ï¼Œè¿™æ˜¯ç”¨æ¥å˜æ¢å·¥ä½œç›®å½•çš„å‘½ä»¤ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> [ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„]</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢åˆ°ç”¨æˆ·ç›®å½•ä¸‹</span></span><br><span class="line">[root@apathy /]<span class="comment"># cd home  </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ mkdir å‘½ä»¤åˆ›å»º apathystudy ç›®å½•</span></span><br><span class="line">[root@apathy home]<span class="comment"># mkdir apathystudy</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿›å…¥ kuangstudy ç›®å½•</span></span><br><span class="line">[root@apathy home]<span class="comment"># cd apathystudy</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å›åˆ°ä¸Šä¸€çº§</span></span><br><span class="line">[root@apathy apathystudy]<span class="comment"># cd ..</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å›åˆ°æ ¹ç›®å½•</span></span><br><span class="line">[root@apathy apathystudy]<span class="comment"># cd /</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¡¨ç¤ºå›åˆ°è‡ªå·±çš„å®¶ç›®å½•ï¼Œäº¦å³æ˜¯ /root è¿™ä¸ªç›®å½•</span></span><br><span class="line">[root@apathy apathystudy]<span class="comment"># cd ~</span></span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å¤§å®¶å¤šæ“ä½œå‡ æ¬¡åº”è¯¥å°±å¯ä»¥å¾ˆå¥½çš„ç†è§£ cd å‘½ä»¤çš„ã€‚</p><h4 id="pwd-æ˜¾ç¤ºç›®å‰æ‰€åœ¨çš„ç›®å½•"><a href="#pwd-æ˜¾ç¤ºç›®å‰æ‰€åœ¨çš„ç›®å½•" class="headerlink" title="pwd ( æ˜¾ç¤ºç›®å‰æ‰€åœ¨çš„ç›®å½• )"></a>pwd ( æ˜¾ç¤ºç›®å‰æ‰€åœ¨çš„ç›®å½• )</h4><p>pwd æ˜¯ <strong>Print Working Directory</strong> çš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯æ˜¾ç¤ºç›®å‰æ‰€åœ¨ç›®å½•çš„å‘½ä»¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@apathy apathystudy]<span class="comment">#pwd [-P]</span></span><br></pre></td></tr></table></figure><p>é€‰é¡¹ä¸å‚æ•°ï¼š<strong>-P</strong> ï¼šæ˜¾ç¤ºå‡ºç¡®å®çš„è·¯å¾„ï¼Œè€Œéä½¿ç”¨è¿æ¥(link) è·¯å¾„ã€‚</p><p>æµ‹è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å•çº¯æ˜¾ç¤ºå‡ºç›®å‰çš„å·¥ä½œç›®å½•</span></span><br><span class="line">[root@apathy ~]<span class="comment"># pwd</span></span><br><span class="line">/root</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœæ˜¯é“¾æ¥ï¼Œè¦æ˜¾ç¤ºçœŸå®åœ°å€ï¼Œå¯ä»¥ä½¿ç”¨ -På‚æ•°</span></span><br><span class="line">[root@apathy /]<span class="comment"># cd bin</span></span><br><span class="line">[root@apathy bin]<span class="comment"># pwd -P</span></span><br><span class="line">/usr/bin</span><br></pre></td></tr></table></figure><h4 id="mkdir-ï¼ˆåˆ›å»ºæ–°ç›®å½•ï¼‰"><a href="#mkdir-ï¼ˆåˆ›å»ºæ–°ç›®å½•ï¼‰" class="headerlink" title="mkdir ï¼ˆåˆ›å»ºæ–°ç›®å½•ï¼‰"></a>mkdir ï¼ˆåˆ›å»ºæ–°ç›®å½•ï¼‰</h4><p>å¦‚æœæƒ³è¦åˆ›å»ºæ–°çš„ç›®å½•çš„è¯ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨mkdir (make directory)å§ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> [-mp] ç›®å½•åç§°</span><br></pre></td></tr></table></figure><p>é€‰é¡¹ä¸å‚æ•°ï¼š</p><ul><li>-m ï¼šé…ç½®æ–‡ä»¶çš„æƒé™å–”ï¼ç›´æ¥é…ç½®ï¼Œä¸éœ€è¦çœ‹é»˜è®¤æƒé™ (umask) çš„è„¸è‰²ï½</li><li>-p ï¼šå¸®åŠ©ä½ ç›´æ¥å°†æ‰€éœ€è¦çš„ç›®å½•(åŒ…å«ä¸Šä¸€çº§ç›®å½•)é€’å½’åˆ›å»ºèµ·æ¥ï¼</li></ul><p>æµ‹è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿›å…¥æˆ‘ä»¬ç”¨æˆ·ç›®å½•ä¸‹</span></span><br><span class="line">[root@apathy /]<span class="comment"># cd /home</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ª test æ–‡ä»¶å¤¹</span></span><br><span class="line">[root@apathy home]<span class="comment"># mkdir test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå¤šå±‚çº§ç›®å½•</span></span><br><span class="line">[root@apathy home]<span class="comment"># mkdir test1/test2/test3/test4</span></span><br><span class="line"><span class="built_in">mkdir</span>: cannot create directory â€˜test1/test2/test3/test4â€™:</span><br><span class="line">No such file or directory  <span class="comment"># &lt;== æ²¡åŠæ³•ç›´æ¥åˆ›å»ºæ­¤ç›®å½•å•Šï¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ äº†è¿™ä¸ª -p çš„é€‰é¡¹ï¼Œå¯ä»¥è‡ªè¡Œå¸®ä½ åˆ›å»ºå¤šå±‚ç›®å½•ï¼</span></span><br><span class="line">[root@apathy home]<span class="comment"># mkdir -p test1/test2/test3/test4</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæƒé™ä¸º rwx--x--x çš„ç›®å½•ã€‚</span></span><br><span class="line">[root@apathy home]<span class="comment"># mkdir -m 711 test2</span></span><br><span class="line">[root@apathy home]<span class="comment"># ls -l</span></span><br><span class="line">drwxr-xr-x 2 root root  4096 Mar 12 21:55 <span class="built_in">test</span></span><br><span class="line">drwxr-xr-x 3 root root  4096 Mar 12 21:56 test1</span><br><span class="line">drwx--x--x 2 root root  4096 Mar 12 21:58 test2</span><br></pre></td></tr></table></figure><h4 id="rmdir-åˆ é™¤ç©ºçš„ç›®å½•"><a href="#rmdir-åˆ é™¤ç©ºçš„ç›®å½•" class="headerlink" title="rmdir ( åˆ é™¤ç©ºçš„ç›®å½• )"></a>rmdir ( åˆ é™¤ç©ºçš„ç›®å½• )</h4><p>è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rmdir</span> [-p] ç›®å½•åç§°</span><br></pre></td></tr></table></figure><p>é€‰é¡¹ä¸å‚æ•°ï¼š<strong>-p ï¼š</strong>è¿åŒä¸Šä¸€çº§ã€ç©ºçš„ã€ç›®å½•ä¹Ÿä¸€èµ·åˆ é™¤</p><p>æµ‹è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># çœ‹çœ‹æœ‰å¤šå°‘ç›®å½•å­˜åœ¨ï¼Ÿ</span></span><br><span class="line">[root@apathy home]<span class="comment"># ls -l</span></span><br><span class="line">drwxr-xr-x 2 root root  4096 Mar 12 21:55 <span class="built_in">test</span></span><br><span class="line">drwxr-xr-x 3 root root  4096 Mar 12 21:56 test1</span><br><span class="line">drwx--x--x 2 root root  4096 Mar 12 21:58 test2</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ç›´æ¥åˆ é™¤æ‰ï¼Œæ²¡é—®é¢˜</span></span><br><span class="line">[root@apathy home]<span class="comment"># rmdir test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å› ä¸ºå°šæœ‰å†…å®¹ï¼Œæ‰€ä»¥æ— æ³•åˆ é™¤ï¼</span></span><br><span class="line">[root@apathy home]<span class="comment"># rmdir test1</span></span><br><span class="line"><span class="built_in">rmdir</span>: failed to remove â€˜test1â€™: Directory not empty</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ©ç”¨ -p è¿™ä¸ªé€‰é¡¹ï¼Œç«‹åˆ»å°±å¯ä»¥å°† test1/test2/test3/test4 ä¾æ¬¡åˆ é™¤ã€‚</span></span><br><span class="line">[root@apathy home]<span class="comment"># rmdir -p test1/test2/test3/test4</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šrmdirä»…èƒ½åˆ é™¤ç©ºçš„ç›®å½•ï¼Œå¦‚æœä¸‹é¢å­˜åœ¨æ–‡ä»¶ï¼Œéœ€è¦å…ˆåˆ é™¤æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é€’å½’åˆ é™¤å¤šä¸ªç›®å½•-på‚æ•°å³å¯</p><h4 id="cp-å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•"><a href="#cp-å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•" class="headerlink" title="cp ( å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½• )"></a>cp ( å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½• )</h4><p>è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># cp [-adfilprsu] æ¥æºæ¡£(source) ç›®æ ‡æ¡£(destination)</span></span><br><span class="line">[root@www ~]<span class="comment"># cp [options] source1 source2 source3 .... directory</span></span><br></pre></td></tr></table></figure><p>é€‰é¡¹ä¸å‚æ•°ï¼š</p><ul><li><strong>-aï¼š</strong>ç›¸å½“äº -pdr çš„æ„æ€ï¼Œè‡³äº pdr è¯·å‚è€ƒä¸‹åˆ—è¯´æ˜ï¼›(å¸¸ç”¨)</li><li><strong>-pï¼š</strong>è¿åŒæ–‡ä»¶çš„å±æ€§ä¸€èµ·å¤åˆ¶è¿‡å»ï¼Œè€Œéä½¿ç”¨é»˜è®¤å±æ€§(å¤‡ä»½å¸¸ç”¨)ï¼›</li><li><strong>-dï¼š</strong>è‹¥æ¥æºæ¡£ä¸ºè¿ç»“æ¡£çš„å±æ€§(link file)ï¼Œåˆ™å¤åˆ¶è¿ç»“æ¡£å±æ€§è€Œéæ–‡ä»¶æœ¬èº«ï¼›</li><li><strong>-rï¼š</strong>é€’å½’æŒç»­å¤åˆ¶ï¼Œç”¨äºç›®å½•çš„å¤åˆ¶è¡Œä¸ºï¼›(å¸¸ç”¨)</li><li><strong>-fï¼š</strong>ä¸ºå¼ºåˆ¶(force)çš„æ„æ€ï¼Œè‹¥ç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ä¸”æ— æ³•å¼€å¯ï¼Œåˆ™ç§»é™¤åå†å°è¯•ä¸€æ¬¡ï¼›</li><li><strong>-iï¼š</strong>è‹¥ç›®æ ‡æ¡£(destination)å·²ç»å­˜åœ¨æ—¶ï¼Œåœ¨è¦†ç›–æ—¶ä¼šå…ˆè¯¢é—®åŠ¨ä½œçš„è¿›è¡Œ(å¸¸ç”¨)</li><li><strong>-lï¼š</strong>è¿›è¡Œç¡¬å¼è¿ç»“(hard link)çš„è¿ç»“æ¡£åˆ›å»ºï¼Œè€Œéå¤åˆ¶æ–‡ä»¶æœ¬èº«ã€‚</li><li><strong>-sï¼š</strong>å¤åˆ¶æˆä¸ºç¬¦å·è¿ç»“æ¡£ (symbolic link)ï¼Œäº¦å³ã€æ·å¾„ã€æ–‡ä»¶ï¼›</li><li><strong>-uï¼š</strong>è‹¥ destination æ¯” source æ—§æ‰å‡çº§ destination ï¼</li></ul><p>æµ‹è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰¾ä¸€ä¸ªæœ‰æ–‡ä»¶çš„ç›®å½•ï¼Œæˆ‘è¿™é‡Œæ‰¾åˆ° rootç›®å½•</span></span><br><span class="line">[root@apathy home]<span class="comment"># cd /root</span></span><br><span class="line">[root@apathy ~]<span class="comment"># ls</span></span><br><span class="line">install.sh</span><br><span class="line">[root@apathy ~]<span class="comment"># cd /home</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤åˆ¶ rootç›®å½•ä¸‹çš„install.sh åˆ° homeç›®å½•ä¸‹</span></span><br><span class="line">[root@apathy home]<span class="comment"># cp /root/install.sh /home</span></span><br><span class="line">[root@apathy home]<span class="comment"># ls</span></span><br><span class="line">install.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†æ¬¡å¤åˆ¶ï¼ŒåŠ ä¸Š-iå‚æ•°ï¼Œå¢åŠ è¦†ç›–è¯¢é—®ï¼Ÿ</span></span><br><span class="line">[root@apathy home]<span class="comment"># cp -i /root/install.sh /home</span></span><br><span class="line"><span class="built_in">cp</span>: overwrite â€˜/home/install.shâ€™? y <span class="comment"># nä¸è¦†ç›–ï¼Œyä¸ºè¦†ç›–</span></span><br></pre></td></tr></table></figure><h4 id="rm-ç§»é™¤æ–‡ä»¶æˆ–ç›®å½•"><a href="#rm-ç§»é™¤æ–‡ä»¶æˆ–ç›®å½•" class="headerlink" title="rm ( ç§»é™¤æ–‡ä»¶æˆ–ç›®å½• )"></a>rm ( ç§»é™¤æ–‡ä»¶æˆ–ç›®å½• )</h4><p>è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> [-fir] æ–‡ä»¶æˆ–ç›®å½•</span><br></pre></td></tr></table></figure><p>é€‰é¡¹ä¸å‚æ•°ï¼š</p><ul><li>-f ï¼šå°±æ˜¯ force çš„æ„æ€ï¼Œå¿½ç•¥ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œä¸ä¼šå‡ºç°è­¦å‘Šä¿¡æ¯ï¼Œç›¸å½“äºå¼ºåˆ¶åˆ é™¤ï¼›</li><li>-i ï¼šäº’åŠ¨æ¨¡å¼ï¼Œåœ¨åˆ é™¤å‰ä¼šè¯¢é—®ä½¿ç”¨è€…æ˜¯å¦åŠ¨ä½œ</li><li>-r ï¼šé€’å½’åˆ é™¤å•Šï¼æœ€å¸¸ç”¨åœ¨ç›®å½•çš„åˆ é™¤äº†ï¼è¿™æ˜¯éå¸¸å±é™©çš„é€‰é¡¹ï¼ï¼ï¼</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf /<span class="comment">#ç³»ç»Ÿä¸­æ‰€æœ‰çš„æ–‡ä»¶å°±è¢«åˆ é™¤äº†ï¼Œåˆ åº“è·‘è·¯å°±æ˜¯è¿™ä¹ˆæ“ä½œçš„!</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†åˆšåˆšåœ¨ cp çš„å®ä¾‹ä¸­åˆ›å»ºçš„ install.shåˆ é™¤æ‰ï¼</span></span><br><span class="line">[root@apathy home]<span class="comment"># rm -i install.sh</span></span><br><span class="line"><span class="built_in">rm</span>: remove regular file â€˜install.shâ€™? y</span><br><span class="line"><span class="comment"># å¦‚æœåŠ ä¸Š -i çš„é€‰é¡¹å°±ä¼šä¸»åŠ¨è¯¢é—®å–”ï¼Œé¿å…ä½ åˆ é™¤åˆ°é”™è¯¯çš„æ¡£åï¼</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°½é‡ä¸è¦åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨ rm -rf /</span></span><br></pre></td></tr></table></figure><h4 id="mv-ç§»åŠ¨æ–‡ä»¶ä¸ç›®å½•ï¼Œæˆ–ä¿®æ”¹åç§°"><a href="#mv-ç§»åŠ¨æ–‡ä»¶ä¸ç›®å½•ï¼Œæˆ–ä¿®æ”¹åç§°" class="headerlink" title="mv  ( ç§»åŠ¨æ–‡ä»¶ä¸ç›®å½•ï¼Œæˆ–ä¿®æ”¹åç§° )"></a>mv  ( ç§»åŠ¨æ–‡ä»¶ä¸ç›®å½•ï¼Œæˆ–ä¿®æ”¹åç§° )</h4><p>è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># mv [-fiu] source destination</span></span><br><span class="line">[root@www ~]<span class="comment"># mv [options] source1 source2 source3 .... directory</span></span><br></pre></td></tr></table></figure><p>é€‰é¡¹ä¸å‚æ•°ï¼š</p><ul><li>-f ï¼šforce å¼ºåˆ¶çš„æ„æ€ï¼Œå¦‚æœç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œä¸ä¼šè¯¢é—®è€Œç›´æ¥è¦†ç›–ï¼›</li><li>-i ï¼šè‹¥ç›®æ ‡æ–‡ä»¶ (destination) å·²ç»å­˜åœ¨æ—¶ï¼Œå°±ä¼šè¯¢é—®æ˜¯å¦è¦†ç›–ï¼</li><li>-u ï¼šè‹¥ç›®æ ‡æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œä¸” source æ¯”è¾ƒæ–°ï¼Œæ‰ä¼šå‡çº§ (update)</li></ul><p>æµ‹è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¤åˆ¶ä¸€ä¸ªæ–‡ä»¶åˆ°å½“å‰ç›®å½•</span></span><br><span class="line">[root@apathy home]<span class="comment"># cp /root/install.sh /home</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ test</span></span><br><span class="line">[root@apathy home]<span class="comment"># mkdir test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†å¤åˆ¶è¿‡æ¥çš„æ–‡ä»¶ç§»åŠ¨åˆ°æˆ‘ä»¬åˆ›å»ºçš„ç›®å½•ï¼Œå¹¶æŸ¥çœ‹</span></span><br><span class="line">[root@apathy home]<span class="comment"># mv install.sh test</span></span><br><span class="line">[root@apathy home]<span class="comment"># ls</span></span><br><span class="line"><span class="built_in">test</span></span><br><span class="line">[root@apathy home]<span class="comment"># cd test</span></span><br><span class="line">[root@apathy <span class="built_in">test</span>]<span class="comment"># ls</span></span><br><span class="line">install.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æ–‡ä»¶å¤¹é‡å‘½åï¼Œç„¶åå†æ¬¡æŸ¥çœ‹ï¼</span></span><br><span class="line">[root@apathy <span class="built_in">test</span>]<span class="comment"># cd ..</span></span><br><span class="line">[root@apathy home]<span class="comment"># mv test mvtest</span></span><br><span class="line">[root@apathy home]<span class="comment"># ls</span></span><br><span class="line">mvtest</span><br></pre></td></tr></table></figure><h2 id="åŸºæœ¬å±æ€§"><a href="#åŸºæœ¬å±æ€§" class="headerlink" title="åŸºæœ¬å±æ€§"></a>åŸºæœ¬å±æ€§</h2><h4 id="çœ‹æ‡‚æ–‡ä»¶å±æ€§"><a href="#çœ‹æ‡‚æ–‡ä»¶å±æ€§" class="headerlink" title="çœ‹æ‡‚æ–‡ä»¶å±æ€§"></a>çœ‹æ‡‚æ–‡ä»¶å±æ€§</h4><p>Linuxç³»ç»Ÿæ˜¯ä¸€ç§å…¸å‹çš„å¤šç”¨æˆ·ç³»ç»Ÿï¼Œä¸åŒçš„ç”¨æˆ·å¤„äºä¸åŒçš„åœ°ä½ï¼Œæ‹¥æœ‰ä¸åŒçš„æƒé™ã€‚ä¸ºäº†ä¿æŠ¤ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼ŒLinuxç³»ç»Ÿå¯¹ä¸åŒçš„ç”¨æˆ·è®¿é—®åŒä¸€æ–‡ä»¶ï¼ˆåŒ…æ‹¬ç›®å½•æ–‡ä»¶ï¼‰çš„æƒé™åšäº†ä¸åŒçš„è§„å®šã€‚</p><p>åœ¨Linuxä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>ll</code>æˆ–è€…<code>ls â€“l</code>å‘½ä»¤æ¥æ˜¾ç¤ºä¸€ä¸ªæ–‡ä»¶çš„å±æ€§ä»¥åŠæ–‡ä»¶æ‰€å±çš„ç”¨æˆ·å’Œç»„ï¼Œå¦‚ï¼š</p><p><a href="https://imgtu.com/i/jGNug1"><img src="https://s1.ax1x.com/2022/07/04/jGNug1.png" alt="jGNug1.png"></a></p><p>å®ä¾‹ä¸­ï¼Œbootæ–‡ä»¶çš„ç¬¬ä¸€ä¸ªå±æ€§ç”¨â€dâ€è¡¨ç¤ºã€‚â€dâ€åœ¨Linuxä¸­ä»£è¡¨è¯¥æ–‡ä»¶æ˜¯ä¸€ä¸ªç›®å½•æ–‡ä»¶ã€‚</p><p>åœ¨Linuxä¸­ç¬¬ä¸€ä¸ªå­—ç¬¦ä»£è¡¨è¿™ä¸ªæ–‡ä»¶æ˜¯ç›®å½•ã€æ–‡ä»¶æˆ–é“¾æ¥æ–‡ä»¶ç­‰ç­‰ï¼š</p><ul><li>å½“ä¸º[ <strong>d</strong> ]åˆ™æ˜¯ç›®å½•ï¼›ï¼ˆ<strong>å¸¸ç”¨</strong>ï¼‰</li><li>å½“ä¸º[ <strong>-</strong> ]åˆ™æ˜¯æ–‡ä»¶ï¼›ï¼ˆ<strong>å¸¸ç”¨</strong>ï¼‰</li><li>è‹¥æ˜¯[ <strong>l</strong> ]åˆ™è¡¨ç¤ºä¸ºé“¾æ¥æ–‡æ¡£ ( link file )ï¼›ï¼ˆ<strong>å¸¸ç”¨</strong>ï¼‰</li><li>è‹¥æ˜¯[ <strong>b</strong> ]åˆ™è¡¨ç¤ºä¸ºè£…ç½®æ–‡ä»¶é‡Œé¢çš„å¯ä¾›å‚¨å­˜çš„æ¥å£è®¾å¤‡ ( å¯éšæœºå­˜å–è£…ç½® )ï¼›</li><li>è‹¥æ˜¯[ <strong>c</strong> ]åˆ™è¡¨ç¤ºä¸ºè£…ç½®æ–‡ä»¶é‡Œé¢çš„ä¸²è¡Œç«¯å£è®¾å¤‡ï¼Œä¾‹å¦‚é”®ç›˜ã€é¼ æ ‡ ( ä¸€æ¬¡æ€§è¯»å–è£…ç½® )ã€‚</li></ul><p>æ¥ä¸‹æ¥çš„å­—ç¬¦ä¸­ï¼Œä»¥ä¸‰ä¸ªä¸ºä¸€ç»„ï¼Œä¸”å‡ä¸ºã€rwxã€ çš„ä¸‰ä¸ªå‚æ•°çš„ç»„åˆã€‚</p><p>å…¶ä¸­ï¼Œ[ r ]ä»£è¡¨å¯è¯»(read)ã€[ w ]ä»£è¡¨å¯å†™(write)ã€[ x ]ä»£è¡¨å¯æ‰§è¡Œ(execute)ã€‚</p><p>è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸‰ä¸ªæƒé™çš„ä½ç½®ä¸ä¼šæ”¹å˜ï¼Œå¦‚æœæ²¡æœ‰æƒé™ï¼Œå°±ä¼šå‡ºç°å‡å·[ - ]è€Œå·²ã€‚</p><p>æ¯ä¸ªæ–‡ä»¶çš„å±æ€§ç”±å·¦è¾¹ç¬¬ä¸€éƒ¨åˆ†çš„10ä¸ªå­—ç¬¦æ¥ç¡®å®šï¼ˆå¦‚ä¸‹å›¾ï¼‰ï¼š</p><p><a href="https://imgtu.com/i/jGNQu6"><img src="https://s1.ax1x.com/2022/07/04/jGNQu6.png" alt="jGNQu6.png"></a></p><p>ä»å·¦è‡³å³ç”¨0-9è¿™äº›æ•°å­—æ¥è¡¨ç¤ºã€‚</p><p>ç¬¬0ä½ç¡®å®šæ–‡ä»¶ç±»å‹ï¼Œç¬¬1-3ä½ç¡®å®šå±ä¸»ï¼ˆè¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼‰æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ã€‚ç¬¬4-6ä½ç¡®å®šå±ç»„ï¼ˆæ‰€æœ‰è€…çš„åŒç»„ç”¨æˆ·ï¼‰æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ï¼Œç¬¬7-9ä½ç¡®å®šå…¶ä»–ç”¨æˆ·æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ã€‚</p><p>å…¶ä¸­ï¼š</p><p>ç¬¬1ã€4ã€7ä½è¡¨ç¤ºè¯»æƒé™ï¼Œå¦‚æœç”¨â€râ€å­—ç¬¦è¡¨ç¤ºï¼Œåˆ™æœ‰è¯»æƒé™ï¼Œå¦‚æœç”¨â€-â€œå­—ç¬¦è¡¨ç¤ºï¼Œåˆ™æ²¡æœ‰è¯»æƒé™ï¼›</p><p>ç¬¬2ã€5ã€8ä½è¡¨ç¤ºå†™æƒé™ï¼Œå¦‚æœç”¨â€wâ€å­—ç¬¦è¡¨ç¤ºï¼Œåˆ™æœ‰å†™æƒé™ï¼Œå¦‚æœç”¨â€-â€œå­—ç¬¦è¡¨ç¤ºæ²¡æœ‰å†™æƒé™ï¼›</p><p>ç¬¬3ã€6ã€9ä½è¡¨ç¤ºå¯æ‰§è¡Œæƒé™ï¼Œå¦‚æœç”¨â€xâ€å­—ç¬¦è¡¨ç¤ºï¼Œåˆ™æœ‰æ‰§è¡Œæƒé™ï¼Œå¦‚æœç”¨â€-â€œå­—ç¬¦è¡¨ç¤ºï¼Œåˆ™æ²¡æœ‰æ‰§è¡Œæƒé™ã€‚</p><p>å¯¹äºæ–‡ä»¶æ¥è¯´ï¼Œå®ƒéƒ½æœ‰ä¸€ä¸ªç‰¹å®šçš„æ‰€æœ‰è€…ï¼Œä¹Ÿå°±æ˜¯å¯¹è¯¥æ–‡ä»¶å…·æœ‰æ‰€æœ‰æƒçš„ç”¨æˆ·ã€‚</p><p>åŒæ—¶ï¼Œåœ¨Linuxç³»ç»Ÿä¸­ï¼Œç”¨æˆ·æ˜¯æŒ‰ç»„åˆ†ç±»çš„ï¼Œä¸€ä¸ªç”¨æˆ·å±äºä¸€ä¸ªæˆ–å¤šä¸ªç»„ã€‚</p><p>æ–‡ä»¶æ‰€æœ‰è€…ä»¥å¤–çš„ç”¨æˆ·åˆå¯ä»¥åˆ†ä¸ºæ–‡ä»¶æ‰€æœ‰è€…çš„åŒç»„ç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·ã€‚</p><p>å› æ­¤ï¼ŒLinuxç³»ç»ŸæŒ‰æ–‡ä»¶æ‰€æœ‰è€…ã€æ–‡ä»¶æ‰€æœ‰è€…åŒç»„ç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·æ¥è§„å®šäº†ä¸åŒçš„æ–‡ä»¶è®¿é—®æƒé™ã€‚</p><p>åœ¨ä»¥ä¸Šå®ä¾‹ä¸­ï¼Œboot æ–‡ä»¶æ˜¯ä¸€ä¸ªç›®å½•æ–‡ä»¶ï¼Œå±ä¸»å’Œå±ç»„éƒ½ä¸º rootã€‚</p><h4 id="ä¿®æ”¹æ–‡ä»¶å±æ€§"><a href="#ä¿®æ”¹æ–‡ä»¶å±æ€§" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶å±æ€§"></a>ä¿®æ”¹æ–‡ä»¶å±æ€§</h4><p><strong>1ã€chgrpï¼šæ›´æ”¹æ–‡ä»¶å±ç»„</strong>ï¼ˆå°½é‡ä¸è¦ä¿®æ”¹ï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chgrp</span> [-R] å±ç»„å æ–‡ä»¶å</span><br></pre></td></tr></table></figure><p>-Rï¼šé€’å½’æ›´æ”¹æ–‡ä»¶å±ç»„ï¼Œå°±æ˜¯åœ¨æ›´æ”¹æŸä¸ªç›®å½•æ–‡ä»¶çš„å±ç»„æ—¶ï¼Œå¦‚æœåŠ ä¸Š-Rçš„å‚æ•°ï¼Œé‚£ä¹ˆè¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶çš„å±ç»„éƒ½ä¼šæ›´æ”¹ã€‚</p><p><strong>2ã€chownï¼šæ›´æ”¹æ–‡ä»¶å±ä¸»ï¼Œä¹Ÿå¯ä»¥åŒæ—¶æ›´æ”¹æ–‡ä»¶å±ç»„</strong>ï¼ˆå°½é‡ä¸è¦ä¿®æ”¹ï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chown</span> [â€“R] å±ä¸»å æ–‡ä»¶å</span><br><span class="line"><span class="built_in">chown</span> [-R] å±ä¸»åï¼šå±ç»„å æ–‡ä»¶å</span><br></pre></td></tr></table></figure><p><strong>3ã€chmodï¼šæ›´æ”¹æ–‡ä»¶9ä¸ªå±æ€§</strong>ï¼ˆå¸¸ç”¨ï¼Œå¿…é¡»æŒæ¡ï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> [-R] xyz æ–‡ä»¶æˆ–ç›®å½•</span><br></pre></td></tr></table></figure><p>Linuxæ–‡ä»¶å±æ€§æœ‰ä¸¤ç§è®¾ç½®æ–¹æ³•ï¼Œä¸€ç§æ˜¯æ•°å­—ï¼ˆå¸¸ç”¨çš„ï¼‰ï¼Œä¸€ç§æ˜¯ç¬¦å·ã€‚</p><p>Linuxæ–‡ä»¶çš„åŸºæœ¬æƒé™å°±æœ‰ä¹ä¸ªï¼Œåˆ†åˆ«æ˜¯owner/group/othersä¸‰ç§èº«ä»½å„æœ‰è‡ªå·±çš„read/write/executeæƒé™ã€‚</p><p>å…ˆå¤ä¹ ä¸€ä¸‹åˆšåˆšä¸Šé¢æåˆ°çš„æ•°æ®ï¼šæ–‡ä»¶çš„æƒé™å­—ç¬¦ä¸ºï¼šã€-rwxrwxrwxã€ï¼Œ è¿™ä¹ä¸ªæƒé™æ˜¯ä¸‰ä¸ªä¸‰ä¸ªä¸€ç»„çš„ï¼å…¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•°å­—æ¥ä»£è¡¨å„ä¸ªæƒé™ï¼Œå„æƒé™çš„åˆ†æ•°å¯¹ç…§è¡¨å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">r:4     w:2         x:1</span><br><span class="line"></span><br><span class="line">å¯è¯»å¯å†™ä¸å¯æ‰§è¡Œ   rw-   6</span><br><span class="line"></span><br><span class="line">å¯è¯»å¯å†™å¯æ‰§è¡Œ     rwx   7</span><br><span class="line"></span><br><span class="line">chomd 777æ–‡ä»¶èµ‹äºˆæ‰€æœ‰ç”¨æˆ·å¯è¯»å¯å†™å¯æ‰§è¡Œ</span><br></pre></td></tr></table></figure><p>æ¯ç§èº«ä»½(owner/group/others)å„è‡ªçš„ä¸‰ä¸ªæƒé™(r/w/x)åˆ†æ•°æ˜¯éœ€è¦ç´¯åŠ çš„ï¼Œä¾‹å¦‚å½“æƒé™ä¸ºï¼š[-rwxrwxâ€”-] åˆ†æ•°åˆ™æ˜¯ï¼š</p><ul><li>owner = rwx = 4+2+1 = 7</li><li>group = rwx = 4+2+1 = 7</li><li>others= â€”- = 0+0+0 = 0</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> 770 filename</span><br></pre></td></tr></table></figure><p>å¯ä»¥è‡ªå·±ä¸‹å»å¤šè¿›è¡Œæµ‹è¯•ï¼</p><h2 id="æ–‡ä»¶å†…å®¹æŸ¥çœ‹ï¼ˆå¿…é¡»æŒæ¡ï¼‰"><a href="#æ–‡ä»¶å†…å®¹æŸ¥çœ‹ï¼ˆå¿…é¡»æŒæ¡ï¼‰" class="headerlink" title="æ–‡ä»¶å†…å®¹æŸ¥çœ‹ï¼ˆå¿…é¡»æŒæ¡ï¼‰"></a>æ–‡ä»¶å†…å®¹æŸ¥çœ‹ï¼ˆå¿…é¡»æŒæ¡ï¼‰</h2><h4 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h4><p>Linuxç³»ç»Ÿä¸­ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æ–‡ä»¶çš„å†…å®¹ï¼š</p><ul><li>cat ç”±ç¬¬ä¸€è¡Œå¼€å§‹æ˜¾ç¤ºæ–‡ä»¶å†…å®¹</li><li>tac ä»æœ€åä¸€è¡Œå¼€å§‹æ˜¾ç¤ºï¼Œå¯ä»¥çœ‹å‡º tac æ˜¯ cat çš„å€’ç€å†™ï¼</li></ul><p><a href="https://imgtu.com/i/jGNn3R"><img src="https://s1.ax1x.com/2022/07/04/jGNn3R.png" alt="jGNn3R.png"></a></p><ul><li>nl  æ˜¾ç¤ºçš„æ—¶å€™ï¼Œé¡ºé“è¾“å‡ºè¡Œå·ï¼  çœ‹ä»£ç çš„æ—¶å€™ï¼Œå¸Œæœ›æ˜¾ç¤ºè¡Œå·!ï¼ˆå¸¸ç”¨ï¼‰</li></ul><p><a href="https://imgtu.com/i/jGNZ4J"><img src="https://s1.ax1x.com/2022/07/04/jGNZ4J.png" alt="jGNZ4J.png"></a></p><ul><li>more ä¸€é¡µä¸€é¡µçš„æ˜¾ç¤ºæ–‡ä»¶å†…å®¹ï¼Œå¸¦ä½™ä¸‹å†…å®¹çš„ï¼ˆç©ºæ ¼ä»£è¡¨ç¿»é¡µï¼Œenterä»£è¡¨å‘ä¸‹çœ‹ä¸€è¡Œï¼Œ:fè¡Œå·)</li></ul><p><a href="https://imgtu.com/i/jGNKjx"><img src="https://s1.ax1x.com/2022/07/04/jGNKjx.png" alt="jGNKjx.png"></a></p><ul><li>less ä¸ more ç±»ä¼¼ï¼Œä½†æ˜¯æ¯” more æ›´å¥½çš„æ˜¯ï¼Œä»–å¯ä»¥å¾€å‰ç¿»é¡µï¼(ç©ºæ ¼ä¸‹ç¿»é¡µï¼Œä¸Šä¸‹é”®ä»£è¡¨ç¿»åŠ¨é¡µé¢!é€€å‡ºå‘½ä»¤ä¸ºï¼šqï¼ŒæŸ¥æ‰¾å­—ç¬¦ä¸²ï¼š/è¦æŸ¥è¯¢çš„å­—ç¬¦å‘ä¸‹æŸ¥è¯¢ï¼Œå‘ä¸ŠæŸ¥è¯¢ä½¿ç”¨?è¦æŸ¥è¯¢çš„å­—ç¬¦ä¸²ï¼Œnç»§ç»­æœå¯»ä¸‹ä¸€ä¸ªï¼Œå‘ä¸Šå¯»æ‰¾ä½¿ç”¨Nï¼‰</li><li>head åªçœ‹å¤´å‡ è¡Œ  é€šè¿‡-nå‚æ•°æ¥æ§åˆ¶æ˜¾ç¤ºå‡ è¡Œ!</li><li><a href="https://imgtu.com/i/jGNlDK"><img src="https://s1.ax1x.com/2022/07/04/jGNlDK.png" alt="jGNlDK.png"></a></li><li>tail åªçœ‹å°¾å·´å‡ è¡Œ  é€šè¿‡-nå‚æ•°æ¥æ§åˆ¶æ˜¾ç¤ºå‡ è¡Œ!</li></ul><p>ä½ å¯ä»¥ä½¿ç”¨ <em>man [å‘½ä»¤]</em>æ¥æŸ¥çœ‹å„ä¸ªå‘½ä»¤çš„ä½¿ç”¨æ–‡æ¡£ï¼Œå¦‚ ï¼šman cpã€‚</p><p>ç½‘ç»œé…ç½®ç›®å½•:cd /etc/sysconfig/network-scripts     ç³»ç»Ÿç‰ˆæœ¬å¿…é¡»æ˜¯CentOS7</p><p><a href="https://imgtu.com/i/jGNmC9"><img src="https://s1.ax1x.com/2022/07/04/jGNmC9.png" alt="jGNmC9.png"></a></p><p>ifconfigå‘½ä»¤æŸ¥çœ‹ç½‘ç»œé…ç½®!</p><h4 id="cat-ç”±ç¬¬ä¸€è¡Œå¼€å§‹æ˜¾ç¤ºæ–‡ä»¶å†…å®¹"><a href="#cat-ç”±ç¬¬ä¸€è¡Œå¼€å§‹æ˜¾ç¤ºæ–‡ä»¶å†…å®¹" class="headerlink" title="cat ç”±ç¬¬ä¸€è¡Œå¼€å§‹æ˜¾ç¤ºæ–‡ä»¶å†…å®¹"></a>cat ç”±ç¬¬ä¸€è¡Œå¼€å§‹æ˜¾ç¤ºæ–‡ä»¶å†…å®¹</h4><p>è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> [-AbEnTv]</span><br></pre></td></tr></table></figure><p>é€‰é¡¹ä¸å‚æ•°ï¼š</p><ul><li>-A ï¼šç›¸å½“æ–¼ -vET çš„æ•´åˆé€‰é¡¹ï¼Œå¯åˆ—å‡ºä¸€äº›ç‰¹æ®Šå­—ç¬¦è€Œä¸æ˜¯ç©ºç™½è€Œå·²ï¼›</li><li>-b ï¼šåˆ—å‡ºè¡Œå·ï¼Œä»…é’ˆå¯¹éç©ºç™½è¡Œåšè¡Œå·æ˜¾ç¤ºï¼Œç©ºç™½è¡Œä¸æ ‡è¡Œå·ï¼</li><li>-E ï¼šå°†ç»“å°¾çš„æ–­è¡Œå­—èŠ‚ $ æ˜¾ç¤ºå‡ºæ¥ï¼›</li><li>-n ï¼šåˆ—å°å‡ºè¡Œå·ï¼Œè¿åŒç©ºç™½è¡Œä¹Ÿä¼šæœ‰è¡Œå·ï¼Œä¸ -b çš„é€‰é¡¹ä¸åŒï¼›</li><li>-T ï¼šå°† [tab] æŒ‰é”®ä»¥ ^I æ˜¾ç¤ºå‡ºæ¥ï¼›</li><li>-v ï¼šåˆ—å‡ºä¸€äº›çœ‹ä¸å‡ºæ¥çš„ç‰¹æ®Šå­—ç¬¦</li></ul><p>æµ‹è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹ç½‘ç»œé…ç½®: æ–‡ä»¶åœ°å€ /etc/sysconfig/network-scripts/</span></span><br><span class="line">[root@apathy ~]<span class="comment"># cat /etc/sysconfig/network-scripts/ifcfg-eth0</span></span><br><span class="line">DEVICE=eth0</span><br><span class="line">BOOTPROTO=dhcp</span><br><span class="line">ONBOOT=<span class="built_in">yes</span></span><br></pre></td></tr></table></figure><h4 id="tac"><a href="#tac" class="headerlink" title="tac"></a>tac</h4><p>tacä¸catå‘½ä»¤åˆšå¥½ç›¸åï¼Œæ–‡ä»¶å†…å®¹ä»æœ€åä¸€è¡Œå¼€å§‹æ˜¾ç¤ºï¼Œå¯ä»¥çœ‹å‡º tac æ˜¯ cat çš„å€’ç€å†™ï¼å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@apathy ~]<span class="comment"># tac /etc/sysconfig/network-scripts/ifcfg-eth0</span></span><br><span class="line">ONBOOT=<span class="built_in">yes</span></span><br><span class="line">BOOTPROTO=dhcp</span><br><span class="line">DEVICE=eth0</span><br></pre></td></tr></table></figure><h4 id="nl-æ˜¾ç¤ºè¡Œå·"><a href="#nl-æ˜¾ç¤ºè¡Œå·" class="headerlink" title="nl  æ˜¾ç¤ºè¡Œå·"></a>nl  æ˜¾ç¤ºè¡Œå·</h4><p>è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">nl</span> [-bnw] æ–‡ä»¶</span><br></pre></td></tr></table></figure><p>é€‰é¡¹ä¸å‚æ•°ï¼š</p><ul><li>-b ï¼šæŒ‡å®šè¡Œå·æŒ‡å®šçš„æ–¹å¼ï¼Œä¸»è¦æœ‰ä¸¤ç§ï¼š-b a ï¼šè¡¨ç¤ºä¸è®ºæ˜¯å¦ä¸ºç©ºè¡Œï¼Œä¹ŸåŒæ ·åˆ—å‡ºè¡Œå·(ç±»ä¼¼ cat -n)ï¼›-b t ï¼šå¦‚æœæœ‰ç©ºè¡Œï¼Œç©ºçš„é‚£ä¸€è¡Œä¸è¦åˆ—å‡ºè¡Œå·(é»˜è®¤å€¼)ï¼›</li><li>-n ï¼šåˆ—å‡ºè¡Œå·è¡¨ç¤ºçš„æ–¹æ³•ï¼Œä¸»è¦æœ‰ä¸‰ç§ï¼š-n ln ï¼šè¡Œå·åœ¨è§å¹•çš„æœ€å·¦æ–¹æ˜¾ç¤ºï¼›-n rn ï¼šè¡Œå·åœ¨è‡ªå·±æ ä½çš„æœ€å³æ–¹æ˜¾ç¤ºï¼Œä¸”ä¸åŠ  0 ï¼›-n rz ï¼šè¡Œå·åœ¨è‡ªå·±æ ä½çš„æœ€å³æ–¹æ˜¾ç¤ºï¼Œä¸”åŠ  0 ï¼›</li><li>-w ï¼šè¡Œå·æ ä½çš„å ç”¨çš„ä½æ•°ã€‚</li></ul><p>æµ‹è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@apathy ~]<span class="comment"># nl /etc/sysconfig/network-scripts/ifcfg-eth0</span></span><br><span class="line">1DEVICE=eth0</span><br><span class="line">2BOOTPROTO=dhcp</span><br><span class="line">3ONBOOT=<span class="built_in">yes</span></span><br></pre></td></tr></table></figure><h4 id="more-ä¸€é¡µä¸€é¡µç¿»åŠ¨"><a href="#more-ä¸€é¡µä¸€é¡µç¿»åŠ¨" class="headerlink" title="more  ä¸€é¡µä¸€é¡µç¿»åŠ¨"></a>more  ä¸€é¡µä¸€é¡µç¿»åŠ¨</h4><p>åœ¨ more è¿™ä¸ªç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä½ æœ‰å‡ ä¸ªæŒ‰é”®å¯ä»¥æŒ‰çš„ï¼š</p><ul><li>ç©ºç™½é”® (space)ï¼šä»£è¡¨å‘ä¸‹ç¿»ä¸€é¡µï¼›</li><li>Enter   ï¼šä»£è¡¨å‘ä¸‹ç¿»ã€ä¸€è¡Œã€ï¼›</li><li>/å­—ä¸²   ï¼šä»£è¡¨åœ¨è¿™ä¸ªæ˜¾ç¤ºçš„å†…å®¹å½“ä¸­ï¼Œå‘ä¸‹æœå¯»ã€å­—ä¸²ã€è¿™ä¸ªå…³é”®å­—ï¼›</li><li>:f    ï¼šç«‹åˆ»æ˜¾ç¤ºå‡ºæ¡£åä»¥åŠç›®å‰æ˜¾ç¤ºçš„è¡Œæ•°ï¼›</li><li>q    ï¼šä»£è¡¨ç«‹åˆ»ç¦»å¼€ more ï¼Œä¸å†æ˜¾ç¤ºè¯¥æ–‡ä»¶å†…å®¹ã€‚</li><li>b æˆ– [ctrl]-b ï¼šä»£è¡¨å¾€å›ç¿»é¡µï¼Œä¸è¿‡è¿™åŠ¨ä½œåªå¯¹æ–‡ä»¶æœ‰ç”¨ï¼Œå¯¹ç®¡çº¿æ— ç”¨ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@apathy etc]<span class="comment"># more /etc/csh.login</span></span><br><span class="line">....(ä¸­é—´çœç•¥)....</span><br><span class="line">--More--(28%) <span class="comment"># é‡ç‚¹åœ¨è¿™ä¸€è¡Œå–”ï¼ä½ çš„å…‰æ ‡ä¹Ÿä¼šåœ¨è¿™é‡Œç­‰å¾…ä½ çš„å‘½ä»¤</span></span><br></pre></td></tr></table></figure><h4 id="less-ä¸€é¡µä¸€é¡µç¿»åŠ¨ï¼Œä»¥ä¸‹å®ä¾‹è¾“å‡º-etc-man-configæ–‡ä»¶çš„å†…å®¹ï¼š"><a href="#less-ä¸€é¡µä¸€é¡µç¿»åŠ¨ï¼Œä»¥ä¸‹å®ä¾‹è¾“å‡º-etc-man-configæ–‡ä»¶çš„å†…å®¹ï¼š" class="headerlink" title="less  ä¸€é¡µä¸€é¡µç¿»åŠ¨ï¼Œä»¥ä¸‹å®ä¾‹è¾“å‡º/etc/man.configæ–‡ä»¶çš„å†…å®¹ï¼š"></a>less  ä¸€é¡µä¸€é¡µç¿»åŠ¨ï¼Œä»¥ä¸‹å®ä¾‹è¾“å‡º/etc/man.configæ–‡ä»¶çš„å†…å®¹ï¼š</h4><p>lessè¿è¡Œæ—¶å¯ä»¥è¾“å…¥çš„å‘½ä»¤æœ‰ï¼š</p><ul><li>ç©ºç™½é”®  ï¼šå‘ä¸‹ç¿»åŠ¨ä¸€é¡µï¼›</li><li>[pagedown]ï¼šå‘ä¸‹ç¿»åŠ¨ä¸€é¡µï¼›</li><li>[pageup] ï¼šå‘ä¸Šç¿»åŠ¨ä¸€é¡µï¼›</li><li>/å­—ä¸²  ï¼šå‘ä¸‹æœå¯»ã€å­—ä¸²ã€çš„åŠŸèƒ½ï¼›</li><li>?å­—ä¸²  ï¼šå‘ä¸Šæœå¯»ã€å­—ä¸²ã€çš„åŠŸèƒ½ï¼›</li><li>n   ï¼šé‡å¤å‰ä¸€ä¸ªæœå¯» (ä¸ / æˆ– ? æœ‰å…³ï¼)</li><li>N   ï¼šåå‘çš„é‡å¤å‰ä¸€ä¸ªæœå¯» (ä¸ / æˆ– ? æœ‰å…³ï¼)</li><li>q   ï¼šç¦»å¼€ less è¿™ä¸ªç¨‹åºï¼›</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@apathy etc]<span class="comment"># more /etc/csh.login</span></span><br><span class="line">....(ä¸­é—´çœç•¥)....</span><br><span class="line">:   <span class="comment"># è¿™é‡Œå¯ä»¥ç­‰å¾…ä½ è¾“å…¥å‘½ä»¤ï¼</span></span><br></pre></td></tr></table></figure><h4 id="head-å–å‡ºæ–‡ä»¶å‰é¢å‡ è¡Œ"><a href="#head-å–å‡ºæ–‡ä»¶å‰é¢å‡ è¡Œ" class="headerlink" title="head  å–å‡ºæ–‡ä»¶å‰é¢å‡ è¡Œ"></a>head  å–å‡ºæ–‡ä»¶å‰é¢å‡ è¡Œ</h4><p>è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">head</span> [-n number] æ–‡ä»¶</span><br></pre></td></tr></table></figure><p>é€‰é¡¹ä¸å‚æ•°ï¼š<strong>-n</strong> åé¢æ¥æ•°å­—ï¼Œä»£è¡¨æ˜¾ç¤ºå‡ è¡Œçš„æ„æ€ï¼</p><p>é»˜è®¤çš„æƒ…å†µä¸­ï¼Œæ˜¾ç¤ºå‰é¢ 10 è¡Œï¼è‹¥è¦æ˜¾ç¤ºå‰ 20 è¡Œï¼Œå°±å¾—è¦è¿™æ ·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@apathy etc]<span class="comment"># head -n 20 /etc/csh.login</span></span><br></pre></td></tr></table></figure><h4 id="tail-å–å‡ºæ–‡ä»¶åé¢å‡ è¡Œ"><a href="#tail-å–å‡ºæ–‡ä»¶åé¢å‡ è¡Œ" class="headerlink" title="tail  å–å‡ºæ–‡ä»¶åé¢å‡ è¡Œ"></a>tail  å–å‡ºæ–‡ä»¶åé¢å‡ è¡Œ</h4><p>è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> [-n number] æ–‡ä»¶</span><br></pre></td></tr></table></figure><p>é€‰é¡¹ä¸å‚æ•°ï¼š</p><ul><li>-n ï¼šåé¢æ¥æ•°å­—ï¼Œä»£è¡¨æ˜¾ç¤ºå‡ è¡Œçš„æ„æ€</li></ul><p>é»˜è®¤çš„æƒ…å†µä¸­ï¼Œæ˜¾ç¤ºæœ€å 10 è¡Œï¼è‹¥è¦æ˜¾ç¤ºæœ€å 20 è¡Œï¼Œå°±å¾—è¦è¿™æ ·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@apathy etc]<span class="comment"># tail -n 20 /etc/csh.login</span></span><br></pre></td></tr></table></figure><h4 id="æ‹“å±•ï¼šLinux-é“¾æ¥æ¦‚å¿µ"><a href="#æ‹“å±•ï¼šLinux-é“¾æ¥æ¦‚å¿µ" class="headerlink" title="æ‹“å±•ï¼šLinux é“¾æ¥æ¦‚å¿µ"></a>æ‹“å±•ï¼šLinux é“¾æ¥æ¦‚å¿µ</h4><p>Linux é“¾æ¥åˆ†ä¸¤ç§ï¼Œä¸€ç§è¢«ç§°ä¸ºç¡¬é“¾æ¥ï¼ˆHard Linkï¼‰ï¼Œå¦ä¸€ç§è¢«ç§°ä¸ºç¬¦å·é“¾æ¥ï¼ˆSymbolic Linkï¼‰ã€‚</p><p>Linuxçš„é“¾æ¥åˆ†ä¸ºä¸¤ç§âˆ¶ç¡¬é“¾æ¥ã€è½¯é“¾æ¥!</p><p><strong>ç¡¬é“¾æ¥âˆ¶</strong>Aâ€”Bï¼Œå‡è®¾Bæ˜¯Açš„ç¡¬é“¾æ¥ï¼Œé‚£ä¹ˆä»–ä»¬ä¸¤ä¸ªæŒ‡å‘äº†åŒä¸€ä¸ªæ–‡ä»¶!å…è®¸ä¸€ä¸ªæ–‡ä»¶æ‹¥æœ‰å¤šä¸ªè·¯å¾„ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è¿™ç§<br>ç¡¬é“¾æ¥åˆ°ä¸€äº›é‡è¦æ–‡ä»¶ä¸Šï¼Œé˜²æ­¢è¯¯åˆ !<br><strong>è½¯é“¾æ¥ï¸°</strong>ç±»ä¼¼Windowä¸‹çš„å¿«æ·æ–¹å¼ï¼Œåˆ é™¤çš„æºæ–‡ä»¶ï¼Œå¿«æ·æ–¹å¼ä¹Ÿè®¿é—®ä¸äº†!</p><p>åˆ›å»ºè¿æ¥Inå‘½ä»¤!</p><p>touchå‘½ä»¤åˆ›å»ºæ–‡ä»¶!</p><p>echoè¾“å…¥å­—ç¬¦ä¸²,ä¹Ÿå¯ä»¥è¾“å…¥åˆ°æ–‡ä»¶ä¸­!</p><p><strong>ç¡¬è¿æ¥</strong></p><p>ç¡¬è¿æ¥æŒ‡é€šè¿‡ç´¢å¼•èŠ‚ç‚¹æ¥è¿›è¡Œè¿æ¥ã€‚åœ¨ Linux çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œä¿å­˜åœ¨ç£ç›˜åˆ†åŒºä¸­çš„æ–‡ä»¶ä¸ç®¡æ˜¯ä»€ä¹ˆç±»å‹éƒ½ç»™å®ƒåˆ†é…ä¸€ä¸ªç¼–å·ï¼Œç§°ä¸ºç´¢å¼•èŠ‚ç‚¹å·(Inode Index)ã€‚åœ¨ Linux ä¸­ï¼Œå¤šä¸ªæ–‡ä»¶åæŒ‡å‘åŒä¸€ç´¢å¼•èŠ‚ç‚¹æ˜¯å­˜åœ¨çš„ã€‚æ¯”å¦‚ï¼šA æ˜¯ B çš„ç¡¬é“¾æ¥ï¼ˆA å’Œ B éƒ½æ˜¯æ–‡ä»¶åï¼‰ï¼Œåˆ™ A çš„ç›®å½•é¡¹ä¸­çš„ inode èŠ‚ç‚¹å·ä¸ B çš„ç›®å½•é¡¹ä¸­çš„ inode èŠ‚ç‚¹å·ç›¸åŒï¼Œå³ä¸€ä¸ª inode èŠ‚ç‚¹å¯¹åº”ä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶åï¼Œä¸¤ä¸ªæ–‡ä»¶åæŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶ï¼ŒA å’Œ B å¯¹æ–‡ä»¶ç³»ç»Ÿæ¥è¯´æ˜¯å®Œå…¨å¹³ç­‰çš„ã€‚åˆ é™¤å…¶ä¸­ä»»ä½•ä¸€ä¸ªéƒ½ä¸ä¼šå½±å“å¦å¤–ä¸€ä¸ªçš„è®¿é—®ã€‚</p><p>ç¡¬è¿æ¥çš„ä½œç”¨æ˜¯å…è®¸ä¸€ä¸ªæ–‡ä»¶æ‹¥æœ‰å¤šä¸ªæœ‰æ•ˆè·¯å¾„åï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥å»ºç«‹ç¡¬è¿æ¥åˆ°é‡è¦æ–‡ä»¶ï¼Œä»¥é˜²æ­¢â€œè¯¯åˆ â€çš„åŠŸèƒ½ã€‚å…¶åŸå› å¦‚ä¸Šæ‰€è¿°ï¼Œå› ä¸ºå¯¹åº”è¯¥ç›®å½•çš„ç´¢å¼•èŠ‚ç‚¹æœ‰ä¸€ä¸ªä»¥ä¸Šçš„è¿æ¥ã€‚åªåˆ é™¤ä¸€ä¸ªè¿æ¥å¹¶ä¸å½±å“ç´¢å¼•èŠ‚ç‚¹æœ¬èº«å’Œå…¶å®ƒçš„è¿æ¥ï¼Œåªæœ‰å½“æœ€åä¸€ä¸ªè¿æ¥è¢«åˆ é™¤åï¼Œæ–‡ä»¶çš„æ•°æ®å—åŠç›®å½•çš„è¿æ¥æ‰ä¼šè¢«é‡Šæ”¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–‡ä»¶çœŸæ­£åˆ é™¤çš„æ¡ä»¶æ˜¯ä¸ä¹‹ç›¸å…³çš„æ‰€æœ‰ç¡¬è¿æ¥æ–‡ä»¶å‡è¢«åˆ é™¤ã€‚</p><p><strong>è½¯è¿æ¥</strong></p><p>å¦å¤–ä¸€ç§è¿æ¥ç§°ä¹‹ä¸ºç¬¦å·è¿æ¥ï¼ˆSymbolic Linkï¼‰ï¼Œä¹Ÿå«è½¯è¿æ¥ã€‚è½¯é“¾æ¥æ–‡ä»¶æœ‰ç±»ä¼¼äº Windows çš„å¿«æ·æ–¹å¼ã€‚å®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ã€‚åœ¨ç¬¦å·è¿æ¥ä¸­ï¼Œæ–‡ä»¶å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«çš„æœ‰å¦ä¸€æ–‡ä»¶çš„ä½ç½®ä¿¡æ¯ã€‚æ¯”å¦‚ï¼šA æ˜¯ B çš„è½¯é“¾æ¥ï¼ˆA å’Œ B éƒ½æ˜¯æ–‡ä»¶åï¼‰ï¼ŒA çš„ç›®å½•é¡¹ä¸­çš„ inode èŠ‚ç‚¹å·ä¸ B çš„ç›®å½•é¡¹ä¸­çš„ inode èŠ‚ç‚¹å·ä¸ç›¸åŒï¼ŒA å’Œ B æŒ‡å‘çš„æ˜¯ä¸¤ä¸ªä¸åŒçš„ inodeï¼Œç»§è€ŒæŒ‡å‘ä¸¤å—ä¸åŒçš„æ•°æ®å—ã€‚ä½†æ˜¯ A çš„æ•°æ®å—ä¸­å­˜æ”¾çš„åªæ˜¯ B çš„è·¯å¾„åï¼ˆå¯ä»¥æ ¹æ®è¿™ä¸ªæ‰¾åˆ° B çš„ç›®å½•é¡¹ï¼‰ã€‚A å’Œ B ä¹‹é—´æ˜¯â€œä¸»ä»â€å…³ç³»ï¼Œå¦‚æœ B è¢«åˆ é™¤äº†ï¼ŒA ä»ç„¶å­˜åœ¨ï¼ˆå› ä¸ºä¸¤ä¸ªæ˜¯ä¸åŒçš„æ–‡ä»¶ï¼‰ï¼Œä½†æŒ‡å‘çš„æ˜¯ä¸€ä¸ªæ— æ•ˆçš„é“¾æ¥ã€‚</p><p><strong>æµ‹è¯•ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@apathy /]<span class="comment"># cd /home</span></span><br><span class="line">[root@apathy home]<span class="comment"># touch f1 # åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ–‡ä»¶f1</span></span><br><span class="line">[root@apathy home]<span class="comment"># ls</span></span><br><span class="line">f1</span><br><span class="line">[root@apathy home]<span class="comment"># ln f1 f2     # åˆ›å»ºf1çš„ä¸€ä¸ªç¡¬è¿æ¥æ–‡ä»¶f2</span></span><br><span class="line">[root@apathy home]<span class="comment"># ln -s f1 f3   # åˆ›å»ºf1çš„ä¸€ä¸ªç¬¦å·è¿æ¥æ–‡ä»¶f3</span></span><br><span class="line">[root@apathy home]<span class="comment"># ls -li       # -iå‚æ•°æ˜¾ç¤ºæ–‡ä»¶çš„inodeèŠ‚ç‚¹ä¿¡æ¯</span></span><br><span class="line">397247 -rw-r--r-- 2 root root     0 Mar 13 00:50 f1</span><br><span class="line">397247 -rw-r--r-- 2 root root     0 Mar 13 00:50 f2</span><br><span class="line">397248 lrwxrwxrwx 1 root root     2 Mar 13 00:50 f3 -&gt; f1</span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼Œç¡¬è¿æ¥æ–‡ä»¶ f2 ä¸åŸæ–‡ä»¶ f1 çš„ inode èŠ‚ç‚¹ç›¸åŒï¼Œå‡ä¸º 397247ï¼Œç„¶è€Œç¬¦å·è¿æ¥æ–‡ä»¶çš„ inode èŠ‚ç‚¹ä¸åŒã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># echo å­—ç¬¦ä¸²è¾“å‡º &gt;&gt; f1 è¾“å‡ºåˆ° f1æ–‡ä»¶</span></span><br><span class="line">[root@apathy home]<span class="comment"># echo &quot;I am f1 file&quot; &gt;&gt;f1</span></span><br><span class="line">[root@apathy home]<span class="comment"># cat f1</span></span><br><span class="line">I am f1 file</span><br><span class="line">[root@apathy home]<span class="comment"># cat f2</span></span><br><span class="line">I am f1 file</span><br><span class="line">[root@apathy home]<span class="comment"># cat f3</span></span><br><span class="line">I am f1 file</span><br><span class="line">[root@apathy home]<span class="comment"># rm -f f1</span></span><br><span class="line">[root@apathy home]<span class="comment"># cat f2</span></span><br><span class="line">I am f1 file</span><br><span class="line">[root@apathy home]<span class="comment"># cat f3</span></span><br><span class="line"><span class="built_in">cat</span>: f3: No such file or directory</span><br></pre></td></tr></table></figure><p>é€šè¿‡ä¸Šé¢çš„æµ‹è¯•å¯ä»¥çœ‹å‡ºï¼šå½“åˆ é™¤åŸå§‹æ–‡ä»¶ f1 åï¼Œç¡¬è¿æ¥ f2 ä¸å—å½±å“ï¼Œä½†æ˜¯ç¬¦å·è¿æ¥ f1 æ–‡ä»¶æ— æ•ˆï¼›</p><p>ä¾æ­¤æ‚¨å¯ä»¥åšä¸€äº›ç›¸å…³çš„æµ‹è¯•ï¼Œå¯ä»¥å¾—åˆ°ä»¥ä¸‹å…¨éƒ¨ç»“è®ºï¼š</p><ul><li>åˆ é™¤ç¬¦å·è¿æ¥f3,å¯¹f1,f2æ— å½±å“ï¼›</li><li>åˆ é™¤ç¡¬è¿æ¥f2ï¼Œå¯¹f1,f3ä¹Ÿæ— å½±å“ï¼›</li><li>åˆ é™¤åŸæ–‡ä»¶f1ï¼Œå¯¹ç¡¬è¿æ¥f2æ²¡æœ‰å½±å“ï¼Œå¯¼è‡´ç¬¦å·è¿æ¥f3å¤±æ•ˆï¼›</li><li>åŒæ—¶åˆ é™¤åŸæ–‡ä»¶f1,ç¡¬è¿æ¥f2ï¼Œæ•´ä¸ªæ–‡ä»¶ä¼šçœŸæ­£çš„è¢«åˆ é™¤ã€‚</li></ul><h2 id="Vimç¼–è¾‘å™¨"><a href="#Vimç¼–è¾‘å™¨" class="headerlink" title="Vimç¼–è¾‘å™¨"></a>Vimç¼–è¾‘å™¨</h2><h3 id="ä»€ä¹ˆæ˜¯Vimç¼–è¾‘å™¨"><a href="#ä»€ä¹ˆæ˜¯Vimç¼–è¾‘å™¨" class="headerlink" title="ä»€ä¹ˆæ˜¯Vimç¼–è¾‘å™¨"></a>ä»€ä¹ˆæ˜¯Vimç¼–è¾‘å™¨</h3><p>Vimæ˜¯ä» vi å‘å±•å‡ºæ¥çš„ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ã€‚ä»£ç è¡¥å®Œã€ç¼–è¯‘åŠé”™è¯¯è·³è½¬ç­‰æ–¹ä¾¿ç¼–ç¨‹çš„åŠŸèƒ½ç‰¹åˆ«ä¸°å¯Œï¼Œåœ¨ç¨‹åºå‘˜ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚å°¤å…¶æ˜¯Linuxä¸­ï¼Œå¿…é¡»è¦ä¼šä½¿ç”¨Vimï¼ˆ<strong>æŸ¥çœ‹å†…å®¹ï¼Œç¼–è¾‘å†…å®¹ï¼Œä¿å­˜å†…å®¹</strong>!)</p><p>ç®€å•çš„æ¥è¯´ï¼Œ vi æ˜¯è€å¼çš„å­—å¤„ç†å™¨ï¼Œä¸è¿‡åŠŸèƒ½å·²ç»å¾ˆé½å…¨äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰å¯ä»¥è¿›æ­¥çš„åœ°æ–¹ã€‚</p><p>vim åˆ™å¯ä»¥è¯´æ˜¯ç¨‹åºå¼€å‘è€…çš„ä¸€é¡¹å¾ˆå¥½ç”¨çš„å·¥å…·ã€‚</p><p>æ‰€æœ‰çš„ Unix Like ç³»ç»Ÿéƒ½ä¼šå†…å»º vi æ–‡ä¹¦ç¼–è¾‘å™¨ï¼Œå…¶ä»–çš„æ–‡ä¹¦ç¼–è¾‘å™¨åˆ™ä¸ä¸€å®šä¼šå­˜åœ¨ã€‚</p><p>è¿ vim çš„å®˜æ–¹ç½‘ç«™ (<a href="http://www.vim.org">http://www.vim.org</a>) è‡ªå·±ä¹Ÿè¯´ vim æ˜¯ä¸€ä¸ªç¨‹åºå¼€å‘å·¥å…·è€Œä¸æ˜¯æ–‡å­—å¤„ç†è½¯ä»¶ã€‚</p><p>vim é”®ç›˜å›¾ï¼š</p><p><a href="https://imgtu.com/i/jGN22n"><img src="https://s1.ax1x.com/2022/07/04/jGN22n.png" alt="jGN22n.png"></a></p><h3 id="ä¸‰ç§ä½¿ç”¨æ¨¡å¼"><a href="#ä¸‰ç§ä½¿ç”¨æ¨¡å¼" class="headerlink" title="ä¸‰ç§ä½¿ç”¨æ¨¡å¼"></a>ä¸‰ç§ä½¿ç”¨æ¨¡å¼</h3><p>åŸºæœ¬ä¸Š vi/vim å…±åˆ†ä¸ºä¸‰ç§æ¨¡å¼ï¼Œåˆ†åˆ«æ˜¯<strong>å‘½ä»¤æ¨¡å¼ï¼ˆCommand modeï¼‰</strong>ï¼Œ<strong>è¾“å…¥æ¨¡å¼ï¼ˆInsert modeï¼‰</strong>å’Œ<strong>åº•çº¿å‘½ä»¤æ¨¡å¼ï¼ˆLast line modeï¼‰</strong>ã€‚è¿™ä¸‰ç§æ¨¡å¼çš„ä½œç”¨åˆ†åˆ«æ˜¯ï¼š</p><p><strong>å‘½ä»¤æ¨¡å¼ï¼š</strong></p><p>ç”¨æˆ·åˆšåˆšå¯åŠ¨ vi/vimï¼Œä¾¿è¿›å…¥äº†å‘½ä»¤æ¨¡å¼ã€‚</p><p><a href="https://imgtu.com/i/jGNrVS"><img src="https://s1.ax1x.com/2022/07/04/jGNrVS.png" alt="jGNrVS.png"></a></p><p>æ­¤çŠ¶æ€ä¸‹æ•²å‡»é”®ç›˜åŠ¨ä½œä¼šè¢«Vimè¯†åˆ«ä¸ºå‘½ä»¤ï¼Œè€Œéè¾“å…¥å­—ç¬¦ã€‚æ¯”å¦‚æˆ‘ä»¬æ­¤æ—¶æŒ‰ä¸‹iï¼Œå¹¶ä¸ä¼šè¾“å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œiè¢«å½“ä½œäº†ä¸€ä¸ªå‘½ä»¤ã€‚</p><p>ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„å‡ ä¸ªå‘½ä»¤ï¼š</p><ul><li><strong>i</strong> åˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼ï¼Œä»¥è¾“å…¥å­—ç¬¦ã€‚</li><li><strong>x</strong> åˆ é™¤å½“å‰å…‰æ ‡æ‰€åœ¨å¤„çš„å­—ç¬¦ã€‚</li><li><strong>:</strong> åˆ‡æ¢åˆ°åº•çº¿å‘½ä»¤æ¨¡å¼ï¼Œä»¥åœ¨æœ€åº•ä¸€è¡Œè¾“å…¥å‘½ä»¤ã€‚å¦‚æœæ˜¯ç¼–è¾‘æ¨¡å¼ï¼Œéœ€è¦å…ˆé€€å‡ºç¼–è¾‘æ¨¡å¼!æŒ‰ESC</li></ul><p>è‹¥æƒ³è¦ç¼–è¾‘æ–‡æœ¬ï¼šå¯åŠ¨Vimï¼Œè¿›å…¥äº†å‘½ä»¤æ¨¡å¼ï¼ŒæŒ‰ä¸‹iï¼Œåˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼ã€‚</p><p>å‘½ä»¤æ¨¡å¼åªæœ‰ä¸€äº›æœ€åŸºæœ¬çš„å‘½ä»¤ï¼Œå› æ­¤ä»è¦ä¾é åº•çº¿å‘½ä»¤æ¨¡å¼è¾“å…¥æ›´å¤šå‘½ä»¤ã€‚</p><p><strong>è¾“å…¥æ¨¡å¼ï¼š</strong></p><p>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹æŒ‰ä¸‹iå°±è¿›å…¥äº†è¾“å…¥æ¨¡å¼ï¼š</p><p><a href="https://imgtu.com/i/jGNsUg"><img src="https://s1.ax1x.com/2022/07/04/jGNsUg.png" alt="jGNsUg.png"></a></p><p>åœ¨è¾“å…¥æ¨¡å¼ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æŒ‰é”®ï¼š</p><ul><li><strong>å­—ç¬¦æŒ‰é”®ä»¥åŠShiftç»„åˆ</strong>ï¼Œè¾“å…¥å­—ç¬¦</li><li><strong>ENTER</strong>ï¼Œå›è½¦é”®ï¼Œæ¢è¡Œ</li><li><strong>BACK SPACE</strong>ï¼Œé€€æ ¼é”®ï¼Œåˆ é™¤å…‰æ ‡å‰ä¸€ä¸ªå­—ç¬¦</li><li><strong>DEL</strong>ï¼Œåˆ é™¤é”®ï¼Œåˆ é™¤å…‰æ ‡åä¸€ä¸ªå­—ç¬¦</li><li><strong>æ–¹å‘é”®</strong>ï¼Œåœ¨æ–‡æœ¬ä¸­ç§»åŠ¨å…‰æ ‡</li><li><strong>HOME</strong>/<strong>END</strong>ï¼Œç§»åŠ¨å…‰æ ‡åˆ°è¡Œé¦–/è¡Œå°¾</li><li><strong>Page Up</strong>/<strong>Page Down</strong>ï¼Œä¸Š/ä¸‹ç¿»é¡µ</li><li><strong>Insert</strong>ï¼Œåˆ‡æ¢å…‰æ ‡ä¸ºè¾“å…¥/æ›¿æ¢æ¨¡å¼ï¼Œå…‰æ ‡å°†å˜æˆç«–çº¿/ä¸‹åˆ’çº¿</li><li><strong>ESC</strong>ï¼Œé€€å‡ºè¾“å…¥æ¨¡å¼ï¼Œåˆ‡æ¢åˆ°å‘½ä»¤æ¨¡å¼</li></ul><p><strong>åº•çº¿å‘½ä»¤æ¨¡å¼</strong></p><p>åœ¨å‘½ä»¤æ¨¡å¼ä¸‹æŒ‰ä¸‹:ï¼ˆè‹±æ–‡å†’å·ï¼‰å°±è¿›å…¥äº†åº•çº¿å‘½ä»¤æ¨¡å¼ã€‚å…‰æ ‡å°±ç§»åŠ¨åˆ°äº†æœ€åº•ä¸‹ï¼Œå°±å¯ä»¥åœ¨è¿™é‡Œè¾“å…¥ä¸€äº›åº•çº¿å‘½ä»¤äº†!</p><p><a href="https://imgtu.com/i/jGN0Df"><img src="https://s1.ax1x.com/2022/07/04/jGN0Df.png" alt="jGN0Df.png"></a></p><p>åº•çº¿å‘½ä»¤æ¨¡å¼å¯ä»¥è¾“å…¥å•ä¸ªæˆ–å¤šä¸ªå­—ç¬¦çš„å‘½ä»¤ï¼Œå¯ç”¨çš„å‘½ä»¤éå¸¸å¤šã€‚</p><p>åœ¨åº•çº¿å‘½ä»¤æ¨¡å¼ä¸­ï¼ŒåŸºæœ¬çš„å‘½ä»¤æœ‰ï¼ˆå·²ç»çœç•¥äº†å†’å·ï¼‰ï¼š</p><ul><li>q é€€å‡ºç¨‹åº</li><li>w ä¿å­˜æ–‡ä»¶</li></ul><p>æŒ‰ESCé”®å¯éšæ—¶é€€å‡ºåº•çº¿å‘½ä»¤æ¨¡å¼ã€‚</p><p><a href="https://imgtu.com/i/jGNBb8"><img src="https://s1.ax1x.com/2022/07/04/jGNBb8.png" alt="jGNBb8.png"></a></p><p>ç®€å•çš„è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸‰ä¸ªæ¨¡å¼æƒ³æˆåº•ä¸‹çš„å›¾æ ‡æ¥è¡¨ç¤ºï¼š</p><p><a href="https://imgtu.com/i/jGNg8s"><img src="https://s1.ax1x.com/2022/07/04/jGNg8s.png" alt="jGNg8s.png"></a></p><h3 id="å®Œæ•´æ¼”ç¤ºè¯´æ˜"><a href="#å®Œæ•´æ¼”ç¤ºè¯´æ˜" class="headerlink" title="å®Œæ•´æ¼”ç¤ºè¯´æ˜"></a>å®Œæ•´æ¼”ç¤ºè¯´æ˜</h3><p>æ–°å»ºæˆ–è€…ç¼–è¾‘æ–‡ä»¶ï¼ŒæŒ‰iè¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œç¼–å†™å†…å®¹ï¼Œç¼–å†™å®Œæˆåé€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œescï¼Œé€€å‡ºä¹‹åè¿›å…¥åº•çº¿å‘½ä»¤æ¨¡å¼ï¸° wq<br>ä¿å­˜é€€å‡º!</p><p>å¦‚æœä½ æƒ³è¦ä½¿ç”¨ vi æ¥å»ºç«‹ä¸€ä¸ªåä¸º kuangstudy.txt çš„æ–‡ä»¶æ—¶ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@apathy home]<span class="comment"># vim apathystudy.txt</span></span><br></pre></td></tr></table></figure><p>ç„¶åå°±ä¼šè¿›å…¥æ–‡ä»¶</p><p><a href="https://imgtu.com/i/jGNy5Q"><img src="https://s1.ax1x.com/2022/07/04/jGNy5Q.png" alt="jGNy5Q.png"></a></p><p><strong>æŒ‰ä¸‹ i è¿›å…¥è¾“å…¥æ¨¡å¼(ä¹Ÿç§°ä¸ºç¼–è¾‘æ¨¡å¼)ï¼Œå¼€å§‹ç¼–è¾‘æ–‡å­—</strong></p><p>åœ¨ä¸€èˆ¬æ¨¡å¼ä¹‹ä¸­ï¼Œåªè¦æŒ‰ä¸‹ i, o, a ç­‰å­—ç¬¦å°±å¯ä»¥è¿›å…¥è¾“å…¥æ¨¡å¼äº†ï¼</p><p>åœ¨ç¼–è¾‘æ¨¡å¼å½“ä¸­ï¼Œä½ å¯ä»¥å‘ç°åœ¨å·¦ä¸‹è§’çŠ¶æ€æ ä¸­ä¼šå‡ºç° â€“INSERT- çš„å­—æ ·ï¼Œé‚£å°±æ˜¯å¯ä»¥è¾“å…¥ä»»æ„å­—ç¬¦çš„æç¤ºã€‚</p><p>è¿™ä¸ªæ—¶å€™ï¼Œé”®ç›˜ä¸Šé™¤äº† <strong>Esc</strong> è¿™ä¸ªæŒ‰é”®ä¹‹å¤–ï¼Œå…¶ä»–çš„æŒ‰é”®éƒ½å¯ä»¥è§†ä½œä¸ºä¸€èˆ¬çš„è¾“å…¥æŒ‰é’®äº†ï¼Œæ‰€ä»¥ä½ å¯ä»¥è¿›è¡Œä»»ä½•çš„ç¼–è¾‘ã€‚</p><p><a href="https://imgtu.com/i/jGNcCj"><img src="https://s1.ax1x.com/2022/07/04/jGNcCj.png" alt="jGNcCj.png"></a></p><p><strong>æŒ‰ä¸‹ ESC æŒ‰é’®å›åˆ°ä¸€èˆ¬æ¨¡å¼</strong></p><p>å¥½äº†ï¼Œå‡è®¾æˆ‘å·²ç»æŒ‰ç…§ä¸Šé¢çš„æ ·å¼ç»™ä»–ç¼–è¾‘å®Œæ¯•äº†ï¼Œé‚£ä¹ˆåº”è¯¥è¦å¦‚ä½•é€€å‡ºå‘¢ï¼Ÿæ˜¯çš„ï¼æ²¡é”™ï¼å°±æ˜¯ç»™ä»–æŒ‰ä¸‹ <strong>Esc</strong> è¿™ä¸ªæŒ‰é’®å³å¯ï¼é©¬ä¸Šä½ å°±ä¼šå‘ç°ç”»é¢å·¦ä¸‹è§’çš„ â€“ INSERT â€“ ä¸è§äº†ï¼</p><p>åœ¨ä¸€èˆ¬æ¨¡å¼ä¸­æŒ‰ä¸‹ <strong>:wq</strong> å‚¨å­˜åç¦»å¼€ vimï¼</p><p><a href="https://imgtu.com/i/jGNRvq"><img src="https://s1.ax1x.com/2022/07/04/jGNRvq.png" alt="jGNRvq.png"></a></p><p>OK! è¿™æ ·æˆ‘ä»¬å°±æˆåŠŸåˆ›å»ºäº†ä¸€ä¸ª kuangstudy.txt çš„æ–‡ä»¶ã€‚</p><h3 id="Vim-æŒ‰é”®è¯´æ˜"><a href="#Vim-æŒ‰é”®è¯´æ˜" class="headerlink" title="Vim æŒ‰é”®è¯´æ˜"></a>Vim æŒ‰é”®è¯´æ˜</h3><p>é™¤äº†ä¸Šé¢ç®€æ˜“èŒƒä¾‹çš„ i, Esc, :wq ä¹‹å¤–ï¼Œå…¶å® vim è¿˜æœ‰éå¸¸å¤šçš„æŒ‰é”®å¯ä»¥ä½¿ç”¨ã€‚</p><p><strong>ç¬¬ä¸€éƒ¨åˆ†ï¼šä¸€èˆ¬æ¨¡å¼å¯ç”¨çš„å…‰æ ‡ç§»åŠ¨ã€å¤åˆ¶ç²˜è´´ã€æœç´¢æ›¿æ¢ç­‰</strong></p><div class="table-container"><table><thead><tr><th style="text-align:left">ç§»åŠ¨å…‰æ ‡çš„æ–¹æ³•</th><th></th></tr></thead><tbody><tr><td style="text-align:left">h æˆ– å‘å·¦ç®­å¤´é”®(â†)</td><td>å…‰æ ‡å‘å·¦ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:left">j æˆ– å‘ä¸‹ç®­å¤´é”®(â†“)</td><td>å…‰æ ‡å‘ä¸‹ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:left">k æˆ– å‘ä¸Šç®­å¤´é”®(â†‘)</td><td>å…‰æ ‡å‘ä¸Šç§»åŠ¨ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:left">l æˆ– å‘å³ç®­å¤´é”®(â†’)</td><td>å…‰æ ‡å‘å³ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:left">[Ctrl] + [f]</td><td>å±å¹•ã€å‘ä¸‹ã€ç§»åŠ¨ä¸€é¡µï¼Œç›¸å½“äº [Page Down]æŒ‰é”® (å¸¸ç”¨)</td></tr><tr><td style="text-align:left">[Ctrl] + [b]</td><td>å±å¹•ã€å‘ä¸Šã€ç§»åŠ¨ä¸€é¡µï¼Œç›¸å½“äº [Page Up] æŒ‰é”® (å¸¸ç”¨)</td></tr><tr><td style="text-align:left">[Ctrl] + [d]</td><td>å±å¹•ã€å‘ä¸‹ã€ç§»åŠ¨åŠé¡µ</td></tr><tr><td style="text-align:left">[Ctrl] + [u]</td><td>å±å¹•ã€å‘ä¸Šã€ç§»åŠ¨åŠé¡µ</td></tr><tr><td style="text-align:left">+</td><td>å…‰æ ‡ç§»åŠ¨åˆ°éç©ºæ ¼ç¬¦çš„ä¸‹ä¸€è¡Œ</td></tr><tr><td style="text-align:left">-</td><td>å…‰æ ‡ç§»åŠ¨åˆ°éç©ºæ ¼ç¬¦çš„ä¸Šä¸€è¡Œ</td></tr><tr><td style="text-align:left"><strong>n(æ•°å­—)&lt; space&gt;</strong></td><td>é‚£ä¸ª n è¡¨ç¤ºã€æ•°å­—ã€ï¼Œä¾‹å¦‚ 20 ã€‚æŒ‰ä¸‹æ•°å­—åå†æŒ‰ç©ºæ ¼é”®ï¼Œå…‰æ ‡ä¼šå‘å³ç§»åŠ¨è¿™ä¸€è¡Œçš„ n ä¸ªå­—ç¬¦ã€‚</td></tr><tr><td style="text-align:left">0 æˆ–åŠŸèƒ½é”®[Home]</td><td>è¿™æ˜¯æ•°å­—ã€ 0 ã€ï¼šç§»åŠ¨åˆ°è¿™ä¸€è¡Œçš„æœ€å‰é¢å­—ç¬¦å¤„ (å¸¸ç”¨)</td></tr><tr><td style="text-align:left">$ æˆ–åŠŸèƒ½é”®[End]</td><td>ç§»åŠ¨åˆ°è¿™ä¸€è¡Œçš„æœ€åé¢å­—ç¬¦å¤„(å¸¸ç”¨)</td></tr><tr><td style="text-align:left">H</td><td>å…‰æ ‡ç§»åŠ¨åˆ°è¿™ä¸ªå±å¹•çš„æœ€ä¸Šæ–¹é‚£ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:left">M</td><td>å…‰æ ‡ç§»åŠ¨åˆ°è¿™ä¸ªå±å¹•çš„ä¸­å¤®é‚£ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:left">L</td><td>å…‰æ ‡ç§»åŠ¨åˆ°è¿™ä¸ªå±å¹•çš„æœ€ä¸‹æ–¹é‚£ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:left">G</td><td>ç§»åŠ¨åˆ°è¿™ä¸ªæ¡£æ¡ˆçš„æœ€åä¸€è¡Œ(å¸¸ç”¨)</td></tr><tr><td style="text-align:left">nG</td><td>n ä¸ºæ•°å­—ã€‚ç§»åŠ¨åˆ°è¿™ä¸ªæ¡£æ¡ˆçš„ç¬¬ n è¡Œã€‚ä¾‹å¦‚ 20G åˆ™ä¼šç§»åŠ¨åˆ°è¿™ä¸ªæ¡£æ¡ˆçš„ç¬¬ 20 è¡Œ(å¯é…åˆ :set nu)</td></tr><tr><td style="text-align:left">gg</td><td>ç§»åŠ¨åˆ°è¿™ä¸ªæ¡£æ¡ˆçš„ç¬¬ä¸€è¡Œï¼Œç›¸å½“äº 1G å•Šï¼(å¸¸ç”¨)</td></tr><tr><td style="text-align:left"><strong>n&lt; Enter&gt;</strong></td><td>n ä¸ºæ•°å­—ã€‚å…‰æ ‡å‘ä¸‹ç§»åŠ¨ n è¡Œ(å¸¸ç”¨)</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th style="text-align:left">æœç´¢æ›¿æ¢</th><th></th></tr></thead><tbody><tr><td style="text-align:left">/word</td><td>å‘å…‰æ ‡ä¹‹ä¸‹å¯»æ‰¾ä¸€ä¸ªåç§°ä¸º word çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚è¦åœ¨æ¡£æ¡ˆå†…æœå¯» vbird è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå°±è¾“å…¥ /vbird å³å¯ï¼(å¸¸ç”¨)</td></tr><tr><td style="text-align:left">?word</td><td>å‘å…‰æ ‡ä¹‹ä¸Šå¯»æ‰¾ä¸€ä¸ªå­—ç¬¦ä¸²åç§°ä¸º word çš„å­—ç¬¦ä¸²ã€‚</td></tr><tr><td style="text-align:left">n</td><td>è¿™ä¸ª n æ˜¯è‹±æ–‡æŒ‰é”®ã€‚ä»£è¡¨é‡å¤å‰ä¸€ä¸ªæœå¯»çš„åŠ¨ä½œã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œ å¦‚æœåˆšåˆšæˆ‘ä»¬æ‰§è¡Œ /vbird å»å‘ä¸‹æœå¯» vbird è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™æŒ‰ä¸‹ n åï¼Œä¼šå‘ä¸‹ç»§ç»­æœå¯»ä¸‹ä¸€ä¸ªåç§°ä¸º vbird çš„å­—ç¬¦ä¸²ã€‚å¦‚æœæ˜¯æ‰§è¡Œ ?vbird çš„è¯ï¼Œé‚£ä¹ˆæŒ‰ä¸‹ n åˆ™ä¼šå‘ä¸Šç»§ç»­æœå¯»åç§°ä¸º vbird çš„å­—ç¬¦ä¸²ï¼</td></tr><tr><td style="text-align:left">N</td><td>è¿™ä¸ª N æ˜¯è‹±æ–‡æŒ‰é”®ã€‚ä¸ n åˆšå¥½ç›¸åï¼Œä¸ºã€åå‘ã€è¿›è¡Œå‰ä¸€ä¸ªæœå¯»åŠ¨ä½œã€‚ä¾‹å¦‚ /vbird åï¼ŒæŒ‰ä¸‹ N åˆ™è¡¨ç¤ºã€å‘ä¸Šã€æœå¯» vbird ã€‚</td></tr></tbody></table></div><div class="table-container"><table><thead><tr><th style="text-align:left">åˆ é™¤ã€å¤åˆ¶ä¸ç²˜è´´</th><th></th></tr></thead><tbody><tr><td style="text-align:left">x, X</td><td>åœ¨ä¸€è¡Œå­—å½“ä¸­ï¼Œx ä¸ºå‘ååˆ é™¤ä¸€ä¸ªå­—ç¬¦ (ç›¸å½“äº [del] æŒ‰é”®)ï¼Œ X ä¸ºå‘å‰åˆ é™¤ä¸€ä¸ªå­—ç¬¦(ç›¸å½“äº [backspace] äº¦å³æ˜¯é€€æ ¼é”®) (å¸¸ç”¨)</td></tr><tr><td style="text-align:left">nx</td><td>n ä¸ºæ•°å­—ï¼Œè¿ç»­å‘ååˆ é™¤ n ä¸ªå­—ç¬¦ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘è¦è¿ç»­åˆ é™¤ 10 ä¸ªå­—ç¬¦ï¼Œ ã€10xã€ã€‚</td></tr><tr><td style="text-align:left">dd</td><td>åˆ é™¤æ¸¸æ ‡æ‰€åœ¨çš„é‚£ä¸€æ•´è¡Œ(å¸¸ç”¨)</td></tr><tr><td style="text-align:left">ndd</td><td>n ä¸ºæ•°å­—ã€‚åˆ é™¤å…‰æ ‡æ‰€åœ¨çš„å‘ä¸‹ n è¡Œï¼Œä¾‹å¦‚ 20dd åˆ™æ˜¯åˆ é™¤ 20 è¡Œ (å¸¸ç”¨)</td></tr><tr><td style="text-align:left">d1G</td><td>åˆ é™¤å…‰æ ‡æ‰€åœ¨åˆ°ç¬¬ä¸€è¡Œçš„æ‰€æœ‰æ•°æ®</td></tr><tr><td style="text-align:left">dG</td><td>åˆ é™¤å…‰æ ‡æ‰€åœ¨åˆ°æœ€åä¸€è¡Œçš„æ‰€æœ‰æ•°æ®</td></tr><tr><td style="text-align:left">d$</td><td>åˆ é™¤æ¸¸æ ‡æ‰€åœ¨å¤„ï¼Œåˆ°è¯¥è¡Œçš„æœ€åä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:left">d0</td><td>é‚£ä¸ªæ˜¯æ•°å­—çš„ 0 ï¼Œåˆ é™¤æ¸¸æ ‡æ‰€åœ¨å¤„ï¼Œåˆ°è¯¥è¡Œçš„æœ€å‰é¢ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:left">yy</td><td>å¤åˆ¶æ¸¸æ ‡æ‰€åœ¨çš„é‚£ä¸€è¡Œ(å¸¸ç”¨)</td></tr><tr><td style="text-align:left">nyy</td><td>n ä¸ºæ•°å­—ã€‚å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„å‘ä¸‹ n è¡Œï¼Œä¾‹å¦‚ 20yy åˆ™æ˜¯å¤åˆ¶ 20 è¡Œ(å¸¸ç”¨)</td></tr><tr><td style="text-align:left">y1G</td><td>å¤åˆ¶æ¸¸æ ‡æ‰€åœ¨è¡Œåˆ°ç¬¬ä¸€è¡Œçš„æ‰€æœ‰æ•°æ®</td></tr><tr><td style="text-align:left">yG</td><td>å¤åˆ¶æ¸¸æ ‡æ‰€åœ¨è¡Œåˆ°æœ€åä¸€è¡Œçš„æ‰€æœ‰æ•°æ®</td></tr><tr><td style="text-align:left">y0</td><td>å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„é‚£ä¸ªå­—ç¬¦åˆ°è¯¥è¡Œè¡Œé¦–çš„æ‰€æœ‰æ•°æ®</td></tr><tr><td style="text-align:left">y$</td><td>å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„é‚£ä¸ªå­—ç¬¦åˆ°è¯¥è¡Œè¡Œå°¾çš„æ‰€æœ‰æ•°æ®</td></tr><tr><td style="text-align:left">p, P</td><td>p ä¸ºå°†å·²å¤åˆ¶çš„æ•°æ®åœ¨å…‰æ ‡ä¸‹ä¸€è¡Œè´´ä¸Šï¼ŒP åˆ™ä¸ºè´´åœ¨æ¸¸æ ‡ä¸Šä¸€è¡Œï¼ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ç›®å‰å…‰æ ‡åœ¨ç¬¬ 20 è¡Œï¼Œä¸”å·²ç»å¤åˆ¶äº† 10 è¡Œæ•°æ®ã€‚åˆ™æŒ‰ä¸‹ p åï¼Œ é‚£ 10 è¡Œæ•°æ®ä¼šè´´åœ¨åŸæœ¬çš„ 20 è¡Œä¹‹åï¼Œäº¦å³ç”± 21 è¡Œå¼€å§‹è´´ã€‚ä½†å¦‚æœæ˜¯æŒ‰ä¸‹ P å‘¢ï¼Ÿé‚£ä¹ˆåŸæœ¬çš„ç¬¬ 20 è¡Œä¼šè¢«æ¨åˆ°å˜æˆ 30 è¡Œã€‚(å¸¸ç”¨)</td></tr><tr><td style="text-align:left">J</td><td>å°†å…‰æ ‡æ‰€åœ¨è¡Œä¸ä¸‹ä¸€è¡Œçš„æ•°æ®ç»“åˆæˆåŒä¸€è¡Œ</td></tr><tr><td style="text-align:left">c</td><td>é‡å¤åˆ é™¤å¤šä¸ªæ•°æ®ï¼Œä¾‹å¦‚å‘ä¸‹åˆ é™¤ 10 è¡Œï¼Œ[ 10cj ]</td></tr><tr><td style="text-align:left"><strong>u</strong></td><td>å¤åŸå‰ä¸€ä¸ªåŠ¨ä½œã€‚(å¸¸ç”¨)</td></tr><tr><td style="text-align:left">[Ctrl]+r</td><td>é‡åšä¸Šä¸€ä¸ªåŠ¨ä½œã€‚(å¸¸ç”¨)</td></tr></tbody></table></div><p><strong>ç¬¬äºŒéƒ¨åˆ†ï¼šä¸€èˆ¬æ¨¡å¼åˆ‡æ¢åˆ°ç¼–è¾‘æ¨¡å¼çš„å¯ç”¨çš„æŒ‰é’®è¯´æ˜</strong></p><div class="table-container"><table><thead><tr><th style="text-align:left">è¿›å…¥è¾“å…¥æˆ–å–ä»£çš„ç¼–è¾‘æ¨¡å¼</th><th></th></tr></thead><tbody><tr><td style="text-align:left"><strong>i, I</strong></td><td>è¿›å…¥è¾“å…¥æ¨¡å¼(Insert mode)ï¼ši ä¸ºã€ä»ç›®å‰å…‰æ ‡æ‰€åœ¨å¤„è¾“å…¥ã€ï¼Œ I ä¸ºã€åœ¨ç›®å‰æ‰€åœ¨è¡Œçš„ç¬¬ä¸€ä¸ªéç©ºæ ¼ç¬¦å¤„å¼€å§‹è¾“å…¥ã€ã€‚(å¸¸ç”¨)</td></tr><tr><td style="text-align:left">a, A</td><td>è¿›å…¥è¾“å…¥æ¨¡å¼(Insert mode)ï¼ša ä¸ºã€ä»ç›®å‰å…‰æ ‡æ‰€åœ¨çš„ä¸‹ä¸€ä¸ªå­—ç¬¦å¤„å¼€å§‹è¾“å…¥ã€ï¼Œ A ä¸ºã€ä»å…‰æ ‡æ‰€åœ¨è¡Œçš„æœ€åä¸€ä¸ªå­—ç¬¦å¤„å¼€å§‹è¾“å…¥ã€ã€‚(å¸¸ç”¨)</td></tr><tr><td style="text-align:left">o, O</td><td>è¿›å…¥è¾“å…¥æ¨¡å¼(Insert mode)ï¼šè¿™æ˜¯è‹±æ–‡å­—æ¯ o çš„å¤§å°å†™ã€‚o ä¸ºã€åœ¨ç›®å‰å…‰æ ‡æ‰€åœ¨çš„ä¸‹ä¸€è¡Œå¤„è¾“å…¥æ–°çš„ä¸€è¡Œã€ï¼›O ä¸ºåœ¨ç›®å‰å…‰æ ‡æ‰€åœ¨å¤„çš„ä¸Šä¸€è¡Œè¾“å…¥æ–°çš„ä¸€è¡Œï¼(å¸¸ç”¨)</td></tr><tr><td style="text-align:left">r, R</td><td>è¿›å…¥å–ä»£æ¨¡å¼(Replace mode)ï¼šr åªä¼šå–ä»£å…‰æ ‡æ‰€åœ¨çš„é‚£ä¸€ä¸ªå­—ç¬¦ä¸€æ¬¡ï¼›Rä¼šä¸€ç›´å–ä»£å…‰æ ‡æ‰€åœ¨çš„æ–‡å­—ï¼Œç›´åˆ°æŒ‰ä¸‹ ESC ä¸ºæ­¢ï¼›(å¸¸ç”¨)</td></tr><tr><td style="text-align:left"><strong>[Esc]</strong></td><td>é€€å‡ºç¼–è¾‘æ¨¡å¼ï¼Œå›åˆ°ä¸€èˆ¬æ¨¡å¼ä¸­(å¸¸ç”¨)</td></tr><tr><td style="text-align:left">Insert</td><td>åˆ‡æ¢å…‰æ ‡çš„çŠ¶æ€</td></tr></tbody></table></div><p><strong>ç¬¬ä¸‰éƒ¨åˆ†ï¼šä¸€èˆ¬æ¨¡å¼åˆ‡æ¢åˆ°æŒ‡ä»¤è¡Œæ¨¡å¼çš„å¯ç”¨çš„æŒ‰é’®è¯´æ˜</strong></p><div class="table-container"><table><thead><tr><th style="text-align:left">æŒ‡ä»¤è¡Œçš„å‚¨å­˜ã€ç¦»å¼€ç­‰æŒ‡ä»¤</th><th></th></tr></thead><tbody><tr><td style="text-align:left">:w</td><td>å°†ç¼–è¾‘çš„æ•°æ®å†™å…¥ç¡¬ç›˜æ¡£æ¡ˆä¸­(å¸¸ç”¨)</td></tr><tr><td style="text-align:left">:w!</td><td>è‹¥æ–‡ä»¶å±æ€§ä¸ºã€åªè¯»ã€æ—¶ï¼Œå¼ºåˆ¶å†™å…¥è¯¥æ¡£æ¡ˆã€‚ä¸è¿‡ï¼Œåˆ°åº•èƒ½ä¸èƒ½å†™å…¥ï¼Œ è¿˜æ˜¯è·Ÿä½ å¯¹è¯¥æ¡£æ¡ˆçš„æ¡£æ¡ˆæƒé™æœ‰å…³å•Šï¼</td></tr><tr><td style="text-align:left">:q</td><td>ç¦»å¼€ vi (å¸¸ç”¨)</td></tr><tr><td style="text-align:left">:q!</td><td>è‹¥æ›¾ä¿®æ”¹è¿‡æ¡£æ¡ˆï¼Œåˆä¸æƒ³å‚¨å­˜ï¼Œä½¿ç”¨ ! ä¸ºå¼ºåˆ¶ç¦»å¼€ä¸å‚¨å­˜æ¡£æ¡ˆã€‚</td></tr><tr><td style="text-align:left">æ³¨æ„ä¸€ä¸‹å•Šï¼Œé‚£ä¸ªæƒŠå¹å· (!) åœ¨ vi å½“ä¸­ï¼Œå¸¸å¸¸å…·æœ‰ã€å¼ºåˆ¶ã€çš„æ„æ€ï½</td><td></td></tr><tr><td style="text-align:left"><strong>:wq</strong></td><td>å‚¨å­˜åç¦»å¼€ï¼Œè‹¥ä¸º :wq! åˆ™ä¸ºå¼ºåˆ¶å‚¨å­˜åç¦»å¼€ (å¸¸ç”¨)</td></tr><tr><td style="text-align:left">ZZ</td><td>è¿™æ˜¯å¤§å†™çš„ Z å–”ï¼è‹¥æ¡£æ¡ˆæ²¡æœ‰æ›´åŠ¨ï¼Œåˆ™ä¸å‚¨å­˜ç¦»å¼€ï¼Œè‹¥æ¡£æ¡ˆå·²ç»è¢«æ›´åŠ¨è¿‡ï¼Œåˆ™å‚¨å­˜åç¦»å¼€ï¼</td></tr><tr><td style="text-align:left">:w [filename]</td><td>å°†ç¼–è¾‘çš„æ•°æ®å‚¨å­˜æˆå¦ä¸€ä¸ªæ¡£æ¡ˆï¼ˆç±»ä¼¼å¦å­˜æ–°æ¡£ï¼‰</td></tr><tr><td style="text-align:left">:r [filename]</td><td>åœ¨ç¼–è¾‘çš„æ•°æ®ä¸­ï¼Œè¯»å…¥å¦ä¸€ä¸ªæ¡£æ¡ˆçš„æ•°æ®ã€‚äº¦å³å°† ã€filenameã€ è¿™ä¸ªæ¡£æ¡ˆå†…å®¹åŠ åˆ°æ¸¸æ ‡æ‰€åœ¨è¡Œåé¢</td></tr><tr><td style="text-align:left">:n1,n2 w [filename]</td><td>å°† n1 åˆ° n2 çš„å†…å®¹å‚¨å­˜æˆ filename è¿™ä¸ªæ¡£æ¡ˆã€‚</td></tr><tr><td style="text-align:left">:! command</td><td>æš‚æ—¶ç¦»å¼€ vi åˆ°æŒ‡ä»¤è¡Œæ¨¡å¼ä¸‹æ‰§è¡Œ command çš„æ˜¾ç¤ºç»“æœï¼ä¾‹å¦‚ ã€:! ls /homeã€å³å¯åœ¨ vi å½“ä¸­çœ‹ /home åº•ä¸‹ä»¥ ls è¾“å‡ºçš„æ¡£æ¡ˆä¿¡æ¯ï¼</td></tr><tr><td style="text-align:left"><strong>:set nu</strong>     è®¾ç½®è¡Œå·ï¼Œä»£ç ä¸­ç»å¸¸ä¼šä½¿ç”¨</td><td>æ˜¾ç¤ºè¡Œå·ï¼Œè®¾å®šä¹‹åï¼Œä¼šåœ¨æ¯ä¸€è¡Œçš„å‰ç¼€æ˜¾ç¤ºè¯¥è¡Œçš„è¡Œå·</td></tr><tr><td style="text-align:left">:set nonu</td><td>ä¸ set nu ç›¸åï¼Œä¸ºå–æ¶ˆè¡Œå·ï¼</td></tr></tbody></table></div><h2 id="è´¦å·ç®¡ç†"><a href="#è´¦å·ç®¡ç†" class="headerlink" title="è´¦å·ç®¡ç†"></a>è´¦å·ç®¡ç†</h2><p>å› ä¸ºä½ ä¸€èˆ¬åœ¨å…¬å¸ï¼Œç”¨çš„éƒ½ä¸æ˜¯rootè´¦å·</p><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>Linuxç³»ç»Ÿæ˜¯ä¸€ä¸ªå¤šç”¨æˆ·å¤šä»»åŠ¡çš„åˆ†æ—¶æ“ä½œç³»ç»Ÿï¼Œä»»ä½•ä¸€ä¸ªè¦ä½¿ç”¨ç³»ç»Ÿèµ„æºçš„ç”¨æˆ·ï¼Œéƒ½å¿…é¡»é¦–å…ˆå‘ç³»ç»Ÿç®¡ç†å‘˜ç”³è¯·ä¸€ä¸ªè´¦å·ï¼Œç„¶åä»¥è¿™ä¸ªè´¦å·çš„èº«ä»½è¿›å…¥ç³»ç»Ÿã€‚</p><p>ç”¨æˆ·çš„è´¦å·ä¸€æ–¹é¢å¯ä»¥å¸®åŠ©ç³»ç»Ÿç®¡ç†å‘˜å¯¹ä½¿ç”¨ç³»ç»Ÿçš„ç”¨æˆ·è¿›è¡Œè·Ÿè¸ªï¼Œå¹¶æ§åˆ¶ä»–ä»¬å¯¹ç³»ç»Ÿèµ„æºçš„è®¿é—®ï¼›å¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥å¸®åŠ©ç”¨æˆ·ç»„ç»‡æ–‡ä»¶ï¼Œå¹¶ä¸ºç”¨æˆ·æä¾›å®‰å…¨æ€§ä¿æŠ¤ã€‚</p><p>æ¯ä¸ªç”¨æˆ·è´¦å·éƒ½æ‹¥æœ‰ä¸€ä¸ªå”¯ä¸€çš„ç”¨æˆ·åå’Œå„è‡ªçš„å£ä»¤ã€‚</p><p>ç”¨æˆ·åœ¨ç™»å½•æ—¶é”®å…¥æ­£ç¡®çš„ç”¨æˆ·åå’Œå£ä»¤åï¼Œå°±èƒ½å¤Ÿè¿›å…¥ç³»ç»Ÿå’Œè‡ªå·±çš„ä¸»ç›®å½•ã€‚</p><p>å®ç°ç”¨æˆ·è´¦å·çš„ç®¡ç†ï¼Œè¦å®Œæˆçš„å·¥ä½œä¸»è¦æœ‰å¦‚ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ul><li>ç”¨æˆ·è´¦å·çš„æ·»åŠ ã€åˆ é™¤ä¸ä¿®æ”¹ã€‚</li><li>ç”¨æˆ·å£ä»¤çš„ç®¡ç†ã€‚</li><li>ç”¨æˆ·ç»„çš„ç®¡ç†ã€‚</li></ul><h3 id="ç”¨æˆ·è´¦å·çš„ç®¡ç†"><a href="#ç”¨æˆ·è´¦å·çš„ç®¡ç†" class="headerlink" title="ç”¨æˆ·è´¦å·çš„ç®¡ç†"></a>ç”¨æˆ·è´¦å·çš„ç®¡ç†</h3><p>ç”¨æˆ·è´¦å·çš„ç®¡ç†å·¥ä½œä¸»è¦æ¶‰åŠåˆ°ç”¨æˆ·è´¦å·çš„æ·»åŠ ã€ä¿®æ”¹å’Œåˆ é™¤ã€‚</p><p>æ·»åŠ ç”¨æˆ·è´¦å·å°±æ˜¯åœ¨ç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªæ–°è´¦å·ï¼Œç„¶åä¸ºæ–°è´¦å·åˆ†é…ç”¨æˆ·å·ã€ç”¨æˆ·ç»„ã€ä¸»ç›®å½•å’Œç™»å½•Shellç­‰èµ„æºã€‚</p><p>è¦æ˜ç™½ä¸€ä¸ªå±ä¸»å’Œå±ç»„çš„åŒºåˆ«</p><h4 id="æ·»åŠ è´¦å·-useradd"><a href="#æ·»åŠ è´¦å·-useradd" class="headerlink" title="æ·»åŠ è´¦å· useradd"></a>æ·»åŠ è´¦å· useradd</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd é€‰é¡¹ ç”¨æˆ·å</span><br></pre></td></tr></table></figure><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><p>é€‰é¡¹ :</p></li><li><ul><li>-c comment æŒ‡å®šä¸€æ®µæ³¨é‡Šæ€§æè¿°ã€‚</li><li>-d ç›®å½• æŒ‡å®šç”¨æˆ·ä¸»ç›®å½•ï¼Œå¦‚æœæ­¤ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åŒæ—¶ä½¿ç”¨-mé€‰é¡¹ï¼Œå¯ä»¥åˆ›å»ºä¸»ç›®å½•ã€‚</li><li>-g ç”¨æˆ·ç»„ æŒ‡å®šç”¨æˆ·æ‰€å±çš„ç”¨æˆ·ç»„ã€‚</li><li>-G ç”¨æˆ·ç»„ï¼Œç”¨æˆ·ç»„ æŒ‡å®šç”¨æˆ·æ‰€å±çš„é™„åŠ ç»„ã€‚</li><li><strong>-mã€€ä½¿ç”¨è€…ç›®å½•å¦‚ä¸å­˜åœ¨åˆ™è‡ªåŠ¨å»ºç«‹ã€‚</strong>ï¼ˆå¸¸ç”¨ï¼‰</li><li>-s Shellæ–‡ä»¶ æŒ‡å®šç”¨æˆ·çš„ç™»å½•Shellã€‚</li><li>-u ç”¨æˆ·å· æŒ‡å®šç”¨æˆ·çš„ç”¨æˆ·å·ï¼Œå¦‚æœåŒæ—¶æœ‰-oé€‰é¡¹ï¼Œåˆ™å¯ä»¥é‡å¤ä½¿ç”¨å…¶ä»–ç”¨æˆ·çš„æ ‡è¯†å·ã€‚</li></ul></li><li><p>ç”¨æˆ·å :</p><ul><li>æŒ‡å®šæ–°è´¦å·çš„ç™»å½•åã€‚</li></ul></li></ul><p>æµ‹è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ­¤å‘½ä»¤åˆ›å»ºäº†ä¸€ä¸ªç”¨æˆ·godsï¼Œå…¶ä¸­-mé€‰é¡¹ç”¨æ¥ä¸ºç™»å½•ågodsäº§ç”Ÿä¸€ä¸ªä¸»ç›®å½• /home/gods</span></span><br><span class="line">[root@apathy home]<span class="comment"># useradd -m gods</span></span><br></pre></td></tr></table></figure><p>ç†è§£ä¸€ä¸‹æœ¬è´¨:Linuxä¸­ä¸€åˆ‡çš†æ–‡ä»¶ï¼Œè¿™é‡Œçš„æ·»åŠ ç”¨æˆ·è¯´ç™½äº†å°±æ˜¯å¾€æŸä¸€ä¸ªæ–‡ä»¶ä¸­å†™å…¥ç”¨æˆ·çš„ä¿¡æ¯äº†!/etc/passwd</p><p>å¢åŠ ç”¨æˆ·è´¦å·å°±æ˜¯åœ¨/etc/passwdæ–‡ä»¶ä¸­ä¸ºæ–°ç”¨æˆ·å¢åŠ ä¸€æ¡è®°å½•ï¼ŒåŒæ—¶æ›´æ–°å…¶ä»–ç³»ç»Ÿæ–‡ä»¶å¦‚/etc/shadow, /etc/groupç­‰ã€‚</p><h4 id="åˆ é™¤å¸å·-userdel"><a href="#åˆ é™¤å¸å·-userdel" class="headerlink" title="åˆ é™¤å¸å·  userdel"></a>åˆ é™¤å¸å·  userdel</h4><p>å¦‚æœä¸€ä¸ªç”¨æˆ·çš„è´¦å·ä¸å†ä½¿ç”¨ï¼Œå¯ä»¥ä»ç³»ç»Ÿä¸­åˆ é™¤ã€‚</p><p>åˆ é™¤ç”¨æˆ·è´¦å·å°±æ˜¯è¦å°†/etc/passwdç­‰ç³»ç»Ÿæ–‡ä»¶ä¸­çš„è¯¥ç”¨æˆ·è®°å½•åˆ é™¤ï¼Œå¿…è¦æ—¶è¿˜åˆ é™¤ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚</p><p>åˆ é™¤ä¸€ä¸ªå·²æœ‰çš„ç”¨æˆ·è´¦å·ä½¿ç”¨userdelå‘½ä»¤ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel é€‰é¡¹ ç”¨æˆ·å</span><br></pre></td></tr></table></figure><p>å¸¸ç”¨çš„é€‰é¡¹æ˜¯ <strong>-r</strong>ï¼Œå®ƒçš„ä½œç”¨æ˜¯æŠŠç”¨æˆ·çš„ä¸»ç›®å½•ä¸€èµ·åˆ é™¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@apathy home]<span class="comment"># userdel -r gods</span></span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤åˆ é™¤ç”¨æˆ·godsåœ¨ç³»ç»Ÿæ–‡ä»¶ä¸­ï¼ˆä¸»è¦æ˜¯/etc/passwd, /etc/shadow, /etc/groupç­‰ï¼‰çš„è®°å½•ï¼ŒåŒæ—¶åˆ é™¤ç”¨æˆ·çš„ä¸»ç›®å½•ã€‚</p><h4 id="ä¿®æ”¹å¸å·-usermod"><a href="#ä¿®æ”¹å¸å·-usermod" class="headerlink" title="ä¿®æ”¹å¸å·  usermod"></a>ä¿®æ”¹å¸å·  usermod</h4><p>ä¿®æ”¹ç”¨æˆ·è´¦å·å°±æ˜¯æ ¹æ®å®é™…æƒ…å†µæ›´æ”¹ç”¨æˆ·çš„æœ‰å…³å±æ€§ï¼Œå¦‚ç”¨æˆ·å·ã€ä¸»ç›®å½•ã€ç”¨æˆ·ç»„ã€ç™»å½•Shellç­‰ã€‚</p><p>ä¿®æ”¹å·²æœ‰ç”¨æˆ·çš„ä¿¡æ¯ä½¿ç”¨usermodå‘½ä»¤ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod é€‰é¡¹ ç”¨æˆ·å</span><br></pre></td></tr></table></figure><p>å¸¸ç”¨çš„é€‰é¡¹åŒ…æ‹¬-c, -d, -m, -g, -G, -s, -uä»¥åŠ-oç­‰ï¼Œè¿™äº›é€‰é¡¹çš„æ„ä¹‰ä¸useraddå‘½ä»¤ä¸­çš„é€‰é¡¹ä¸€æ ·ï¼Œå¯ä»¥ä¸ºç”¨æˆ·æŒ‡å®šæ–°çš„èµ„æºå€¼ã€‚</p><p>ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># usermod -s /bin/ksh -d /home/z â€“g developer gods</span></span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤å°†ç”¨æˆ·apathyçš„ç™»å½•Shellä¿®æ”¹ä¸ºkshï¼Œä¸»ç›®å½•æ”¹ä¸º/home/zï¼Œç”¨æˆ·ç»„æ”¹ä¸ºdeveloperã€‚</p><h4 id="Linuxä¸‹å¦‚ä½•åˆ‡æ¢ç”¨æˆ·"><a href="#Linuxä¸‹å¦‚ä½•åˆ‡æ¢ç”¨æˆ·" class="headerlink" title="Linuxä¸‹å¦‚ä½•åˆ‡æ¢ç”¨æˆ·"></a>Linuxä¸‹å¦‚ä½•åˆ‡æ¢ç”¨æˆ·</h4><p><a href="https://imgtu.com/i/jGNfK0"><img src="https://s1.ax1x.com/2022/07/04/jGNfK0.png" alt="jGNfK0.png"></a></p><p>1.åˆ‡æ¢ç”¨æˆ·çš„å‘½ä»¤ä¸ºï¼šsu username ã€usernameæ˜¯ä½ çš„ç”¨æˆ·åå“¦ã€‘</p><p>2.ä»æ™®é€šç”¨æˆ·åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼šsudo su</p><p>3.åœ¨ç»ˆç«¯è¾“å…¥exitæˆ–logoutæˆ–ä½¿ç”¨å¿«æ·æ–¹å¼ctrl+dï¼Œå¯ä»¥é€€å›åˆ°åŸæ¥ç”¨æˆ·ï¼Œå…¶å®ctrl+dä¹Ÿæ˜¯æ‰§è¡Œçš„exitå‘½ä»¤</p><p>4.åœ¨åˆ‡æ¢ç”¨æˆ·æ—¶ï¼Œå¦‚æœæƒ³åœ¨åˆ‡æ¢ç”¨æˆ·ä¹‹åä½¿ç”¨æ–°ç”¨æˆ·çš„å·¥ä½œç¯å¢ƒï¼Œå¯ä»¥åœ¨suå’Œusernameä¹‹é—´åŠ -ï¼Œä¾‹å¦‚ï¼šã€su - rootã€‘</p><p>$è¡¨ç¤ºæ™®é€šç”¨æˆ·</p><p>#è¡¨ç¤ºè¶…çº§ç”¨æˆ·ï¼Œä¹Ÿå°±æ˜¯rootç”¨æˆ·</p><p><a href="https://imgtu.com/i/jGNhrV"><img src="https://s1.ax1x.com/2022/07/04/jGNhrV.png" alt="jGNhrV.png"></a></p><p>å¦‚ä½•ä¿®æ”¹ä¸»æœºåï¼Ÿ</p><p><a href="https://imgtu.com/i/jGN4bT"><img src="https://s1.ax1x.com/2022/07/04/jGN4bT.png" alt="jGN4bT.png"></a></p><h4 id="ç”¨æˆ·å¯†ç çš„ç®¡ç†"><a href="#ç”¨æˆ·å¯†ç çš„ç®¡ç†" class="headerlink" title="ç”¨æˆ·å¯†ç çš„ç®¡ç†"></a>ç”¨æˆ·å¯†ç çš„ç®¡ç†</h4><ul><li>æˆ‘ä»¬ä¸€èˆ¬é€šè¿‡rootåˆ›å»ºç”¨æˆ·çš„æ—¶å€™!è¦é…ç½®å¯†ç !</li><li>Linuxä¸Šè¾“å…¥å¯†ç æ˜¯ä¸ä¼šæ˜¾ç¤ºçš„ï¼Œä½ æ­£å¸¸è¾“å…¥å°±å¯ä»¥äº†ï¼Œå¹¶ä¸æ˜¯ç³»ç»Ÿçš„é—®é¢˜!</li><li>åœ¨å…¬å¸ä¸­ï¼Œä½ ä»¬ä¸€èˆ¬æ‹¿ä¸åˆ°å…¬å¸æœåŠ¡å™¨çš„rootæƒé™ï¼Œéƒ½æ˜¯ä¸€äº›åˆ†é…çš„è´¦å·!</li></ul><p>ç”¨æˆ·ç®¡ç†çš„ä¸€é¡¹é‡è¦å†…å®¹æ˜¯ç”¨æˆ·å¯†ç çš„ç®¡ç†ã€‚ç”¨æˆ·è´¦å·åˆšåˆ›å»ºæ—¶æ²¡æœ‰å¯†ç ï¼Œä½†æ˜¯è¢«ç³»ç»Ÿé”å®šï¼Œæ— æ³•ä½¿ç”¨ï¼Œå¿…é¡»ä¸ºå…¶æŒ‡å®šå¯†ç åæ‰å¯ä»¥ä½¿ç”¨ï¼Œå³ä½¿æ˜¯æŒ‡å®šç©ºå¯†ç ã€‚</p><p>æŒ‡å®šå’Œä¿®æ”¹ç”¨æˆ·å¯†ç çš„Shellå‘½ä»¤æ˜¯passwdã€‚è¶…çº§ç”¨æˆ·å¯ä»¥ä¸ºè‡ªå·±å’Œå…¶ä»–ç”¨æˆ·æŒ‡å®šå¯†ç ï¼Œæ™®é€šç”¨æˆ·åªèƒ½ç”¨å®ƒä¿®æ”¹è‡ªå·±çš„å¯†ç ã€‚</p><p>å‘½ä»¤çš„æ ¼å¼ä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd é€‰é¡¹ ç”¨æˆ·å</span><br></pre></td></tr></table></figure><p>å¯ä½¿ç”¨çš„é€‰é¡¹ï¼š</p><ul><li>-l é”å®šå£ä»¤ï¼Œå³ç¦ç”¨è´¦å·ã€‚</li><li>-u å£ä»¤è§£é”ã€‚</li><li>-d ä½¿è´¦å·æ— å£ä»¤ã€‚</li><li>-f å¼ºè¿«ç”¨æˆ·ä¸‹æ¬¡ç™»å½•æ—¶ä¿®æ”¹å£ä»¤ã€‚</li></ul><p>å¦‚æœé»˜è®¤ç”¨æˆ·åï¼Œåˆ™ä¿®æ”¹å½“å‰ç”¨æˆ·çš„å£ä»¤ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾å½“å‰ç”¨æˆ·æ˜¯kuangshenï¼Œåˆ™ä¸‹é¢çš„å‘½ä»¤ä¿®æ”¹è¯¥ç”¨æˆ·è‡ªå·±çš„å£ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ passwd</span><br><span class="line">Old password:******</span><br><span class="line">New password:*******   <span class="comment">#å¯†ç ä¸èƒ½è¿‡äºç®€å•</span></span><br><span class="line">Re-enter new password:*******</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¯è¶…çº§ç”¨æˆ·ï¼Œå¯ä»¥ç”¨ä¸‹åˆ—å½¢å¼æŒ‡å®šä»»ä½•ç”¨æˆ·çš„å£ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># passwd kuangshen</span></span><br><span class="line">New password:*******</span><br><span class="line">Re-enter new password:*******</span><br></pre></td></tr></table></figure><p>æ™®é€šç”¨æˆ·ä¿®æ”¹è‡ªå·±çš„å£ä»¤æ—¶ï¼Œpasswdå‘½ä»¤ä¼šå…ˆè¯¢é—®åŸå£ä»¤ï¼ŒéªŒè¯åå†è¦æ±‚ç”¨æˆ·è¾“å…¥ä¸¤éæ–°å£ä»¤ï¼Œå¦‚æœä¸¤æ¬¡è¾“å…¥çš„å£ä»¤ä¸€è‡´ï¼Œåˆ™å°†è¿™ä¸ªå£ä»¤æŒ‡å®šç»™ç”¨æˆ·ï¼›è€Œè¶…çº§ç”¨æˆ·ä¸ºç”¨æˆ·æŒ‡å®šå£ä»¤æ—¶ï¼Œå°±ä¸éœ€è¦çŸ¥é“åŸå£ä»¤ã€‚</p><p>ä¸ºäº†ç³»ç»Ÿå®‰å…¨èµ·è§ï¼Œç”¨æˆ·åº”è¯¥é€‰æ‹©æ¯”è¾ƒå¤æ‚çš„å£ä»¤ï¼Œä¾‹å¦‚æœ€å¥½ä½¿ç”¨8ä½é•¿çš„å£ä»¤ï¼Œå£ä»¤ä¸­åŒ…å«æœ‰å¤§å†™ã€å°å†™å­—æ¯å’Œæ•°å­—ï¼Œå¹¶ä¸”åº”è¯¥ä¸å§“åã€ç”Ÿæ—¥ç­‰ä¸ç›¸åŒã€‚</p><p>ä¸ºç”¨æˆ·æŒ‡å®šç©ºå£ä»¤æ—¶ï¼Œæ‰§è¡Œä¸‹åˆ—å½¢å¼çš„å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># passwd -d kuangshen   </span></span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤å°†ç”¨æˆ· kuangshençš„å£ä»¤åˆ é™¤ï¼Œè¿™æ ·ç”¨æˆ· kuangshenä¸‹ä¸€æ¬¡ç™»å½•æ—¶ï¼Œç³»ç»Ÿå°±ä¸å†å…è®¸è¯¥ç”¨æˆ·ç™»å½•äº†ã€‚</p><p>passwd å‘½ä»¤è¿˜å¯ä»¥ç”¨ -l(lock) é€‰é¡¹é”å®šæŸä¸€ç”¨æˆ·ï¼Œä½¿å…¶ä¸èƒ½ç™»å½•ï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># passwd -l kuangshen   é”å®šä¹‹åç”¨æˆ·å°±ä¸èƒ½ç™»å½•äº†</span></span><br></pre></td></tr></table></figure><h2 id="ç”¨æˆ·ç»„ç®¡ç†"><a href="#ç”¨æˆ·ç»„ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç»„ç®¡ç†"></a>ç”¨æˆ·ç»„ç®¡ç†</h2><h3 id="ç”¨æˆ·ç»„è´¦å·ç®¡ç†"><a href="#ç”¨æˆ·ç»„è´¦å·ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç»„è´¦å·ç®¡ç†"></a>ç”¨æˆ·ç»„è´¦å·ç®¡ç†</h3><p>æ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªç”¨æˆ·ç»„ï¼Œç³»ç»Ÿå¯ä»¥å¯¹ä¸€ä¸ªç”¨æˆ·ç»„ä¸­çš„æ‰€æœ‰ç”¨æˆ·è¿›è¡Œé›†ä¸­ç®¡ç†ï¼ˆå¼€å‘ï¼Œæµ‹è¯•ï¼Œè¿ç»´ï¼Œrootï¼‰ã€‚ä¸åŒLinux ç³»ç»Ÿå¯¹ç”¨æˆ·ç»„çš„è§„å®šæœ‰æ‰€ä¸åŒï¼Œå¦‚Linuxä¸‹çš„ç”¨æˆ·å±äºä¸å®ƒåŒåçš„ç”¨æˆ·ç»„ï¼Œè¿™ä¸ªç”¨æˆ·ç»„åœ¨åˆ›å»ºç”¨æˆ·æ—¶åŒæ—¶åˆ›å»ºã€‚</p><p>ç”¨æˆ·ç»„çš„ç®¡ç†æ¶‰åŠç”¨æˆ·ç»„çš„æ·»åŠ ã€åˆ é™¤å’Œä¿®æ”¹ã€‚<strong>ç»„çš„å¢åŠ ã€åˆ é™¤å’Œä¿®æ”¹å®é™…ä¸Šå°±æ˜¯å¯¹/etc/groupæ–‡ä»¶çš„æ›´æ–°</strong>ã€‚</p><h4 id="å¢åŠ ä¸€ä¸ªæ–°çš„ç”¨æˆ·ç»„ä½¿ç”¨groupaddå‘½ä»¤"><a href="#å¢åŠ ä¸€ä¸ªæ–°çš„ç”¨æˆ·ç»„ä½¿ç”¨groupaddå‘½ä»¤" class="headerlink" title="å¢åŠ ä¸€ä¸ªæ–°çš„ç”¨æˆ·ç»„ä½¿ç”¨groupaddå‘½ä»¤"></a>å¢åŠ ä¸€ä¸ªæ–°çš„ç”¨æˆ·ç»„ä½¿ç”¨groupaddå‘½ä»¤</h4><p>åˆ›å»ºå®Œç”¨æˆ·ç»„åå¯ä»¥å¾—åˆ°ä¸€ä¸ªç»„çš„idï¼Œè¿™ä¸ªidæ˜¯å¯ä»¥æŒ‡å®šçš„!</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd é€‰é¡¹ ç”¨æˆ·ç»„</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨çš„é€‰é¡¹æœ‰ï¼š</p><ul><li>-g GID æŒ‡å®šæ–°ç”¨æˆ·ç»„çš„ç»„æ ‡è¯†å·ï¼ˆGIDï¼‰ã€‚</li><li>-o ä¸€èˆ¬ä¸-gé€‰é¡¹åŒæ—¶ä½¿ç”¨ï¼Œè¡¨ç¤ºæ–°ç”¨æˆ·ç»„çš„GIDå¯ä»¥ä¸ç³»ç»Ÿå·²æœ‰ç”¨æˆ·ç»„çš„GIDç›¸åŒã€‚</li></ul><p>å®ä¾‹1ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># groupadd group1</span></span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤å‘ç³»ç»Ÿä¸­å¢åŠ äº†ä¸€ä¸ªæ–°ç»„group1ï¼Œæ–°ç»„çš„ç»„æ ‡è¯†å·æ˜¯åœ¨å½“å‰å·²æœ‰çš„æœ€å¤§ç»„æ ‡è¯†å·çš„åŸºç¡€ä¸ŠåŠ 1ã€‚</p><p>å®ä¾‹2ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># groupadd -g 101 group2</span></span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤å‘ç³»ç»Ÿä¸­å¢åŠ äº†ä¸€ä¸ªæ–°ç»„group2ï¼ŒåŒæ—¶æŒ‡å®šæ–°ç»„çš„ç»„æ ‡è¯†å·æ˜¯101ã€‚</p><h4 id="å¦‚æœè¦åˆ é™¤ä¸€ä¸ªå·²æœ‰çš„ç”¨æˆ·ç»„ï¼Œä½¿ç”¨groupdelå‘½ä»¤"><a href="#å¦‚æœè¦åˆ é™¤ä¸€ä¸ªå·²æœ‰çš„ç”¨æˆ·ç»„ï¼Œä½¿ç”¨groupdelå‘½ä»¤" class="headerlink" title="å¦‚æœè¦åˆ é™¤ä¸€ä¸ªå·²æœ‰çš„ç”¨æˆ·ç»„ï¼Œä½¿ç”¨groupdelå‘½ä»¤"></a>å¦‚æœè¦åˆ é™¤ä¸€ä¸ªå·²æœ‰çš„ç”¨æˆ·ç»„ï¼Œä½¿ç”¨groupdelå‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupdel ç”¨æˆ·ç»„</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># groupdel group1</span></span><br></pre></td></tr></table></figure><p>æ­¤å‘½ä»¤ä»ç³»ç»Ÿä¸­åˆ é™¤ç»„group1ã€‚</p><h4 id="ä¿®æ”¹ç”¨æˆ·ç»„çš„å±æ€§ä½¿ç”¨groupmodå‘½ä»¤"><a href="#ä¿®æ”¹ç”¨æˆ·ç»„çš„å±æ€§ä½¿ç”¨groupmodå‘½ä»¤" class="headerlink" title="ä¿®æ”¹ç”¨æˆ·ç»„çš„å±æ€§ä½¿ç”¨groupmodå‘½ä»¤"></a>ä¿®æ”¹ç”¨æˆ·ç»„çš„å±æ€§ä½¿ç”¨groupmodå‘½ä»¤</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupmod é€‰é¡¹ ç”¨æˆ·ç»„</span><br></pre></td></tr></table></figure><p>å¸¸ç”¨çš„é€‰é¡¹æœ‰ï¼š</p><ul><li>-g GID ä¸ºç”¨æˆ·ç»„æŒ‡å®šæ–°çš„ç»„æ ‡è¯†å·ã€‚</li><li>-o ä¸-gé€‰é¡¹åŒæ—¶ä½¿ç”¨ï¼Œç”¨æˆ·ç»„çš„æ–°GIDå¯ä»¥ä¸ç³»ç»Ÿå·²æœ‰ç”¨æˆ·ç»„çš„GIDç›¸åŒã€‚</li><li>-næ–°ç”¨æˆ·ç»„ å°†ç”¨æˆ·ç»„çš„åå­—æ”¹ä¸ºæ–°åå­—</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ­¤å‘½ä»¤å°†ç»„group2çš„ç»„æ ‡è¯†å·ä¿®æ”¹ä¸º102ã€‚</span></span><br><span class="line">groupmod -g 102 group2</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†ç»„group2çš„æ ‡è¯†å·æ”¹ä¸º10000ï¼Œç»„åä¿®æ”¹ä¸ºgroup3ã€‚</span></span><br><span class="line">groupmod â€“g 10000 -n group3 group2</span><br></pre></td></tr></table></figure><p><a href="https://imgtu.com/i/jGNIVU"><img src="https://s1.ax1x.com/2022/07/04/jGNIVU.png" alt="jGNIVU.png"></a></p><h4 id="åˆ‡æ¢ç»„"><a href="#åˆ‡æ¢ç»„" class="headerlink" title="åˆ‡æ¢ç»„"></a>åˆ‡æ¢ç»„</h4><p>å¦‚æœä¸€ä¸ªç”¨æˆ·åŒæ—¶å±äºå¤šä¸ªç”¨æˆ·ç»„ï¼Œé‚£ä¹ˆç”¨æˆ·å¯ä»¥åœ¨ç”¨æˆ·ç»„ä¹‹é—´åˆ‡æ¢ï¼Œä»¥ä¾¿å…·æœ‰å…¶ä»–ç”¨æˆ·ç»„çš„æƒé™ã€‚</p><p>ç”¨æˆ·å¯ä»¥åœ¨ç™»å½•åï¼Œä½¿ç”¨å‘½ä»¤newgrpåˆ‡æ¢åˆ°å…¶ä»–ç”¨æˆ·ç»„ï¼Œè¿™ä¸ªå‘½ä»¤çš„å‚æ•°å°±æ˜¯ç›®çš„ç”¨æˆ·ç»„ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ newgrp root</span><br></pre></td></tr></table></figure><p>è¿™æ¡å‘½ä»¤å°†å½“å‰ç”¨æˆ·åˆ‡æ¢åˆ°rootç”¨æˆ·ç»„ï¼Œå‰ææ¡ä»¶æ˜¯rootç”¨æˆ·ç»„ç¡®å®æ˜¯è¯¥ç”¨æˆ·çš„ä¸»ç»„æˆ–é™„åŠ ç»„ã€‚</p><h2 id="æ‰©å±•ï¼šæ–‡ä»¶çš„æŸ¥çœ‹"><a href="#æ‰©å±•ï¼šæ–‡ä»¶çš„æŸ¥çœ‹" class="headerlink" title="æ‰©å±•ï¼šæ–‡ä»¶çš„æŸ¥çœ‹"></a>æ‰©å±•ï¼šæ–‡ä»¶çš„æŸ¥çœ‹</h2><h3 id="etc-passwd"><a href="#etc-passwd" class="headerlink" title="/etc/passwd"></a>/etc/passwd</h3><p>å®Œæˆç”¨æˆ·ç®¡ç†çš„å·¥ä½œæœ‰è®¸å¤šç§æ–¹æ³•ï¼Œä½†æ˜¯æ¯ä¸€ç§æ–¹æ³•å®é™…ä¸Šéƒ½æ˜¯å¯¹æœ‰å…³çš„ç³»ç»Ÿæ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚</p><p>ä¸ç”¨æˆ·å’Œç”¨æˆ·ç»„ç›¸å…³çš„ä¿¡æ¯éƒ½å­˜æ”¾åœ¨ä¸€äº›ç³»ç»Ÿæ–‡ä»¶ä¸­ï¼Œè¿™äº›æ–‡ä»¶åŒ…æ‹¬/etc/passwd, /etc/shadow, /etc/groupç­‰ã€‚</p><p>ä¸‹é¢åˆ†åˆ«ä»‹ç»è¿™äº›æ–‡ä»¶çš„å†…å®¹ã€‚</p><p><strong>/etc/passwdæ–‡ä»¶æ˜¯ç”¨æˆ·ç®¡ç†å·¥ä½œæ¶‰åŠçš„æœ€é‡è¦çš„ä¸€ä¸ªæ–‡ä»¶ã€‚</strong></p><p>Linuxç³»ç»Ÿä¸­çš„æ¯ä¸ªç”¨æˆ·éƒ½åœ¨/etc/passwdæ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªå¯¹åº”çš„è®°å½•è¡Œï¼Œå®ƒè®°å½•äº†è¿™ä¸ªç”¨æˆ·çš„ä¸€äº›åŸºæœ¬å±æ€§ã€‚</p><p>è¿™ä¸ªæ–‡ä»¶å¯¹æ‰€æœ‰ç”¨æˆ·éƒ½æ˜¯å¯è¯»çš„ã€‚å®ƒçš„å†…å®¹ç±»ä¼¼ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ï¼ƒ <span class="built_in">cat</span> /etc/passwd</span><br><span class="line"></span><br><span class="line">root:x:0:0:Superuser:/:</span><br><span class="line">daemon:x:1:1:System daemons:/etc:</span><br><span class="line">bin:x:2:2:Owner of system commands:/bin:</span><br><span class="line">sys:x:3:3:Owner of system files:/usr/sys:</span><br><span class="line">adm:x:4:4:System accounting:/usr/adm:</span><br><span class="line">uucp:x:5:5:UUCP administrator:/usr/lib/uucp:</span><br><span class="line">auth:x:7:21:Authentication administrator:/tcb/files/auth:</span><br><span class="line">cron:x:9:16:Cron daemon:/usr/spool/cron:</span><br><span class="line">listen:x:37:4:Network daemon:/usr/net/nls:</span><br><span class="line">lp:x:71:18:Printer administrator:/usr/spool/lp:</span><br></pre></td></tr></table></figure><p>ä»ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ/etc/passwdä¸­ä¸€è¡Œè®°å½•å¯¹åº”ç€ä¸€ä¸ªç”¨æˆ·ï¼Œæ¯è¡Œè®°å½•åˆè¢«å†’å·(:)åˆ†éš”ä¸º7ä¸ªå­—æ®µï¼Œå…¶æ ¼å¼å’Œå…·ä½“å«ä¹‰å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç”¨æˆ·å:å£ä»¤(ç™»å½•å¯†ç ï¼Œæˆ‘ä»¬ä¸å¯è§):ç”¨æˆ·æ ‡è¯†å·:ç»„æ ‡è¯†å·:æ³¨é‡Šæ€§æè¿°:ä¸»ç›®å½•:ç™»å½•Shell</span><br></pre></td></tr></table></figure><p>1ï¼‰â€ç”¨æˆ·åâ€æ˜¯ä»£è¡¨ç”¨æˆ·è´¦å·çš„å­—ç¬¦ä¸²ã€‚</p><p>é€šå¸¸é•¿åº¦ä¸è¶…è¿‡8ä¸ªå­—ç¬¦ï¼Œå¹¶ä¸”ç”±å¤§å°å†™å­—æ¯å’Œ/æˆ–æ•°å­—ç»„æˆã€‚ç™»å½•åä¸­ä¸èƒ½æœ‰å†’å·(:)ï¼Œå› ä¸ºå†’å·åœ¨è¿™é‡Œæ˜¯åˆ†éš”ç¬¦ã€‚</p><p>ä¸ºäº†å…¼å®¹èµ·è§ï¼Œç™»å½•åä¸­æœ€å¥½ä¸è¦åŒ…å«ç‚¹å­—ç¬¦(.)ï¼Œå¹¶ä¸”ä¸ä½¿ç”¨è¿å­—ç¬¦(-)å’ŒåŠ å·(+)æ‰“å¤´ã€‚</p><p>2ï¼‰â€œå£ä»¤â€ä¸€äº›ç³»ç»Ÿä¸­ï¼Œå­˜æ”¾ç€åŠ å¯†åçš„ç”¨æˆ·å£ä»¤å­—ã€‚</p><p>è™½ç„¶è¿™ä¸ªå­—æ®µå­˜æ”¾çš„åªæ˜¯ç”¨æˆ·å£ä»¤çš„åŠ å¯†ä¸²ï¼Œä¸æ˜¯æ˜æ–‡ï¼Œä½†æ˜¯ç”±äº/etc/passwdæ–‡ä»¶å¯¹æ‰€æœ‰ç”¨æˆ·éƒ½å¯è¯»ï¼Œæ‰€ä»¥è¿™ä»æ˜¯ä¸€ä¸ªå®‰å…¨éšæ‚£ã€‚å› æ­¤ï¼Œç°åœ¨è®¸å¤šLinux ç³»ç»Ÿï¼ˆå¦‚SVR4ï¼‰éƒ½ä½¿ç”¨äº†shadowæŠ€æœ¯ï¼ŒæŠŠçœŸæ­£çš„åŠ å¯†åçš„ç”¨æˆ·å£ä»¤å­—å­˜æ”¾åˆ°/etc/shadowæ–‡ä»¶ä¸­ï¼Œè€Œåœ¨/etc/passwdæ–‡ä»¶çš„å£ä»¤å­—æ®µä¸­åªå­˜æ”¾ä¸€ä¸ªç‰¹æ®Šçš„å­—ç¬¦ï¼Œä¾‹å¦‚â€œxâ€æˆ–è€…â€œ*â€ã€‚</p><p>3ï¼‰â€œç”¨æˆ·æ ‡è¯†å·â€æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œç³»ç»Ÿå†…éƒ¨ç”¨å®ƒæ¥æ ‡è¯†ç”¨æˆ·ã€‚</p><p>ä¸€èˆ¬æƒ…å†µä¸‹å®ƒä¸ç”¨æˆ·åæ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚å¦‚æœå‡ ä¸ªç”¨æˆ·åå¯¹åº”çš„ç”¨æˆ·æ ‡è¯†å·æ˜¯ä¸€æ ·çš„ï¼Œç³»ç»Ÿå†…éƒ¨å°†æŠŠå®ƒä»¬è§†ä¸ºåŒä¸€ä¸ªç”¨æˆ·ï¼Œä½†æ˜¯å®ƒä»¬å¯ä»¥æœ‰ä¸åŒçš„å£ä»¤ã€ä¸åŒçš„ä¸»ç›®å½•ä»¥åŠä¸åŒçš„ç™»å½•Shellç­‰ã€‚</p><p>é€šå¸¸ç”¨æˆ·æ ‡è¯†å·çš„å–å€¼èŒƒå›´æ˜¯0ï½65 535ã€‚0æ˜¯è¶…çº§ç”¨æˆ·rootçš„æ ‡è¯†å·ï¼Œ1ï½99ç”±ç³»ç»Ÿä¿ç•™ï¼Œä½œä¸ºç®¡ç†è´¦å·ï¼Œæ™®é€šç”¨æˆ·çš„æ ‡è¯†å·ä»100å¼€å§‹ã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªç•Œé™æ˜¯500ã€‚</p><p>4ï¼‰â€œç»„æ ‡è¯†å·â€å­—æ®µè®°å½•çš„æ˜¯ç”¨æˆ·æ‰€å±çš„ç”¨æˆ·ç»„ã€‚</p><p>å®ƒå¯¹åº”ç€/etc/groupæ–‡ä»¶ä¸­çš„ä¸€æ¡è®°å½•ã€‚</p><p>5)â€œæ³¨é‡Šæ€§æè¿°â€å­—æ®µè®°å½•ç€ç”¨æˆ·çš„ä¸€äº›ä¸ªäººæƒ…å†µã€‚</p><p>ä¾‹å¦‚ç”¨æˆ·çš„çœŸå®å§“åã€ç”µè¯ã€åœ°å€ç­‰ï¼Œè¿™ä¸ªå­—æ®µå¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…çš„ç”¨é€”ã€‚åœ¨ä¸åŒçš„Linux ç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªå­—æ®µçš„æ ¼å¼å¹¶æ²¡æœ‰ç»Ÿä¸€ã€‚åœ¨è®¸å¤šLinuxç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªå­—æ®µå­˜æ”¾çš„æ˜¯ä¸€æ®µä»»æ„çš„æ³¨é‡Šæ€§æè¿°æ–‡å­—ï¼Œç”¨ä½œfingerå‘½ä»¤çš„è¾“å‡ºã€‚</p><p>6)â€œä¸»ç›®å½•â€ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·çš„èµ·å§‹å·¥ä½œç›®å½•ã€‚</p><p>å®ƒæ˜¯ç”¨æˆ·åœ¨ç™»å½•åˆ°ç³»ç»Ÿä¹‹åæ‰€å¤„çš„ç›®å½•ã€‚åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸­ï¼Œå„ç”¨æˆ·çš„ä¸»ç›®å½•éƒ½è¢«ç»„ç»‡åœ¨åŒä¸€ä¸ªç‰¹å®šçš„ç›®å½•ä¸‹ï¼Œè€Œç”¨æˆ·ä¸»ç›®å½•çš„åç§°å°±æ˜¯è¯¥ç”¨æˆ·çš„ç™»å½•åã€‚å„ç”¨æˆ·å¯¹è‡ªå·±çš„ä¸»ç›®å½•æœ‰è¯»ã€å†™ã€æ‰§è¡Œï¼ˆæœç´¢ï¼‰æƒé™ï¼Œå…¶ä»–ç”¨æˆ·å¯¹æ­¤ç›®å½•çš„è®¿é—®æƒé™åˆ™æ ¹æ®å…·ä½“æƒ…å†µè®¾ç½®ã€‚</p><p>7)ç”¨æˆ·ç™»å½•åï¼Œè¦å¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ï¼Œè´Ÿè´£å°†ç”¨æˆ·çš„æ“ä½œä¼ ç»™å†…æ ¸ï¼Œè¿™ä¸ªè¿›ç¨‹æ˜¯ç”¨æˆ·ç™»å½•åˆ°ç³»ç»Ÿåè¿è¡Œçš„å‘½ä»¤è§£é‡Šå™¨æˆ–æŸä¸ªç‰¹å®šçš„ç¨‹åºï¼Œå³Shellã€‚</p><p>Shellæ˜¯ç”¨æˆ·ä¸Linuxç³»ç»Ÿä¹‹é—´çš„æ¥å£ã€‚Linuxçš„Shellæœ‰è®¸å¤šç§ï¼Œæ¯ç§éƒ½æœ‰ä¸åŒçš„ç‰¹ç‚¹ã€‚å¸¸ç”¨çš„æœ‰sh(Bourne Shell), csh(C Shell), ksh(Korn Shell), tcsh(TENEX/TOPS-20 type C Shell), bash(Bourne Again Shell)ç­‰ã€‚</p><p>ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥æ ¹æ®ç³»ç»Ÿæƒ…å†µå’Œç”¨æˆ·ä¹ æƒ¯ä¸ºç”¨æˆ·æŒ‡å®šæŸä¸ªShellã€‚å¦‚æœä¸æŒ‡å®šShellï¼Œé‚£ä¹ˆç³»ç»Ÿä½¿ç”¨shä¸ºé»˜è®¤çš„ç™»å½•Shellï¼Œå³è¿™ä¸ªå­—æ®µçš„å€¼ä¸º/bin/shã€‚</p><p>ç”¨æˆ·çš„ç™»å½•Shellä¹Ÿå¯ä»¥æŒ‡å®šä¸ºæŸä¸ªç‰¹å®šçš„ç¨‹åºï¼ˆæ­¤ç¨‹åºä¸æ˜¯ä¸€ä¸ªå‘½ä»¤è§£é‡Šå™¨ï¼‰ã€‚</p><p>åˆ©ç”¨è¿™ä¸€ç‰¹ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥é™åˆ¶ç”¨æˆ·åªèƒ½è¿è¡ŒæŒ‡å®šçš„åº”ç”¨ç¨‹åºï¼Œåœ¨è¯¥åº”ç”¨ç¨‹åºè¿è¡Œç»“æŸåï¼Œç”¨æˆ·å°±è‡ªåŠ¨é€€å‡ºäº†ç³»ç»Ÿã€‚æœ‰äº›Linux ç³»ç»Ÿè¦æ±‚åªæœ‰é‚£äº›åœ¨ç³»ç»Ÿä¸­ç™»è®°äº†çš„ç¨‹åºæ‰èƒ½å‡ºç°åœ¨è¿™ä¸ªå­—æ®µä¸­ã€‚</p><p>8)ç³»ç»Ÿä¸­æœ‰ä¸€ç±»ç”¨æˆ·ç§°ä¸ºä¼ªç”¨æˆ·ï¼ˆpseudo usersï¼‰ã€‚</p><p>è¿™äº›ç”¨æˆ·åœ¨/etc/passwdæ–‡ä»¶ä¸­ä¹Ÿå æœ‰ä¸€æ¡è®°å½•ï¼Œä½†æ˜¯ä¸èƒ½ç™»å½•ï¼Œå› ä¸ºå®ƒä»¬çš„ç™»å½•Shellä¸ºç©ºã€‚å®ƒä»¬çš„å­˜åœ¨ä¸»è¦æ˜¯æ–¹ä¾¿ç³»ç»Ÿç®¡ç†ï¼Œæ»¡è¶³ç›¸åº”çš„ç³»ç»Ÿè¿›ç¨‹å¯¹æ–‡ä»¶å±ä¸»çš„è¦æ±‚ã€‚</p><p>å¸¸è§çš„ä¼ªç”¨æˆ·å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ä¼ª ç”¨ æˆ· å« ä¹‰</span><br><span class="line">bin æ‹¥æœ‰å¯æ‰§è¡Œçš„ç”¨æˆ·å‘½ä»¤æ–‡ä»¶</span><br><span class="line">sys æ‹¥æœ‰ç³»ç»Ÿæ–‡ä»¶</span><br><span class="line">adm æ‹¥æœ‰å¸æˆ·æ–‡ä»¶</span><br><span class="line">uucp UUCPä½¿ç”¨</span><br><span class="line">lp lpæˆ–lpdå­ç³»ç»Ÿä½¿ç”¨</span><br><span class="line">nobody NFSä½¿ç”¨</span><br></pre></td></tr></table></figure><h3 id="etc-shadow"><a href="#etc-shadow" class="headerlink" title="/etc/shadow"></a>/etc/shadow</h3><p><strong>1ã€é™¤äº†ä¸Šé¢åˆ—å‡ºçš„ä¼ªç”¨æˆ·å¤–ï¼Œè¿˜æœ‰è®¸å¤šæ ‡å‡†çš„ä¼ªç”¨æˆ·ï¼Œä¾‹å¦‚ï¼šaudit, cron, mail, usenetç­‰ï¼Œå®ƒä»¬ä¹Ÿéƒ½å„è‡ªä¸ºç›¸å…³çš„è¿›ç¨‹å’Œæ–‡ä»¶æ‰€éœ€è¦ã€‚</strong></p><p>ç”±äº/etc/passwdæ–‡ä»¶æ˜¯æ‰€æœ‰ç”¨æˆ·éƒ½å¯è¯»çš„ï¼Œå¦‚æœç”¨æˆ·çš„å¯†ç å¤ªç®€å•æˆ–è§„å¾‹æ¯”è¾ƒæ˜æ˜¾çš„è¯ï¼Œä¸€å°æ™®é€šçš„è®¡ç®—æœºå°±èƒ½å¤Ÿå¾ˆå®¹æ˜“åœ°å°†å®ƒç ´è§£ï¼Œå› æ­¤å¯¹å®‰å…¨æ€§è¦æ±‚è¾ƒé«˜çš„Linuxç³»ç»Ÿéƒ½æŠŠåŠ å¯†åçš„å£ä»¤å­—åˆ†ç¦»å‡ºæ¥ï¼Œå•ç‹¬å­˜æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯/etc/shadowæ–‡ä»¶ã€‚æœ‰è¶…çº§ç”¨æˆ·æ‰æ‹¥æœ‰è¯¥æ–‡ä»¶è¯»æƒé™ï¼Œè¿™å°±ä¿è¯äº†ç”¨æˆ·å¯†ç çš„å®‰å…¨æ€§ã€‚</p><p><strong>2ã€/etc/shadowä¸­çš„è®°å½•è¡Œä¸/etc/passwdä¸­çš„ä¸€ä¸€å¯¹åº”ï¼Œå®ƒç”±pwconvå‘½ä»¤æ ¹æ®/etc/passwdä¸­çš„æ•°æ®è‡ªåŠ¨äº§ç”Ÿ</strong></p><p>å®ƒçš„æ–‡ä»¶æ ¼å¼ä¸/etc/passwdç±»ä¼¼ï¼Œç”±è‹¥å¹²ä¸ªå­—æ®µç»„æˆï¼Œå­—æ®µä¹‹é—´ç”¨â€:â€éš”å¼€ã€‚è¿™äº›å­—æ®µæ˜¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç™»å½•å:åŠ å¯†å£ä»¤:æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´:æœ€å°æ—¶é—´é—´éš”:æœ€å¤§æ—¶é—´é—´éš”:è­¦å‘Šæ—¶é—´:ä¸æ´»åŠ¨æ—¶é—´:å¤±æ•ˆæ—¶é—´:æ ‡å¿—</span><br></pre></td></tr></table></figure><ol><li>â€œç™»å½•åâ€æ˜¯ä¸/etc/passwdæ–‡ä»¶ä¸­çš„ç™»å½•åç›¸ä¸€è‡´çš„ç”¨æˆ·è´¦å·</li><li>â€œå£ä»¤â€å­—æ®µå­˜æ”¾çš„æ˜¯åŠ å¯†åçš„ç”¨æˆ·å£ä»¤å­—ï¼Œé•¿åº¦ä¸º13ä¸ªå­—ç¬¦ã€‚å¦‚æœä¸ºç©ºï¼Œåˆ™å¯¹åº”ç”¨æˆ·æ²¡æœ‰å£ä»¤ï¼Œç™»å½•æ—¶ä¸éœ€è¦å£ä»¤ï¼›å¦‚æœå«æœ‰ä¸å±äºé›†åˆ { ./0-9A-Za-z }ä¸­çš„å­—ç¬¦ï¼Œåˆ™å¯¹åº”çš„ç”¨æˆ·ä¸èƒ½ç™»å½•ã€‚</li><li>â€œæœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´â€è¡¨ç¤ºçš„æ˜¯ä»æŸä¸ªæ—¶åˆ»èµ·ï¼Œåˆ°ç”¨æˆ·æœ€åä¸€æ¬¡ä¿®æ”¹å£ä»¤æ—¶çš„å¤©æ•°ã€‚æ—¶é—´èµ·ç‚¹å¯¹ä¸åŒçš„ç³»ç»Ÿå¯èƒ½ä¸ä¸€æ ·ã€‚ä¾‹å¦‚åœ¨SCO Linux ä¸­ï¼Œè¿™ä¸ªæ—¶é—´èµ·ç‚¹æ˜¯1970å¹´1æœˆ1æ—¥ã€‚</li><li>â€œæœ€å°æ—¶é—´é—´éš”â€æŒ‡çš„æ˜¯ä¸¤æ¬¡ä¿®æ”¹å£ä»¤ä¹‹é—´æ‰€éœ€çš„æœ€å°å¤©æ•°ã€‚</li><li>â€œæœ€å¤§æ—¶é—´é—´éš”â€æŒ‡çš„æ˜¯å£ä»¤ä¿æŒæœ‰æ•ˆçš„æœ€å¤§å¤©æ•°ã€‚</li><li>â€œè­¦å‘Šæ—¶é—´â€å­—æ®µè¡¨ç¤ºçš„æ˜¯ä»ç³»ç»Ÿå¼€å§‹è­¦å‘Šç”¨æˆ·åˆ°ç”¨æˆ·å¯†ç æ­£å¼å¤±æ•ˆä¹‹é—´çš„å¤©æ•°ã€‚</li><li>â€œä¸æ´»åŠ¨æ—¶é—´â€è¡¨ç¤ºçš„æ˜¯ç”¨æˆ·æ²¡æœ‰ç™»å½•æ´»åŠ¨ä½†è´¦å·ä»èƒ½ä¿æŒæœ‰æ•ˆçš„æœ€å¤§å¤©æ•°ã€‚</li><li>â€œå¤±æ•ˆæ—¶é—´â€å­—æ®µç»™å‡ºçš„æ˜¯ä¸€ä¸ªç»å¯¹çš„å¤©æ•°ï¼Œå¦‚æœä½¿ç”¨äº†è¿™ä¸ªå­—æ®µï¼Œé‚£ä¹ˆå°±ç»™å‡ºç›¸åº”è´¦å·çš„ç”Ÿå­˜æœŸã€‚æœŸæ»¡åï¼Œè¯¥è´¦å·å°±ä¸å†æ˜¯ä¸€ä¸ªåˆæ³•çš„è´¦å·ï¼Œä¹Ÿå°±ä¸èƒ½å†ç”¨æ¥ç™»å½•äº†ã€‚</li></ol><h3 id="etc-group"><a href="#etc-group" class="headerlink" title="/etc/group"></a>/etc/group</h3><p>ç”¨æˆ·ç»„çš„æ‰€æœ‰ä¿¡æ¯éƒ½å­˜æ”¾åœ¨/etc/groupæ–‡ä»¶ä¸­ã€‚</p><p>å°†ç”¨æˆ·åˆ†ç»„æ˜¯Linux ç³»ç»Ÿä¸­å¯¹ç”¨æˆ·è¿›è¡Œç®¡ç†åŠæ§åˆ¶è®¿é—®æƒé™çš„ä¸€ç§æ‰‹æ®µã€‚</p><p>æ¯ä¸ªç”¨æˆ·éƒ½å±äºæŸä¸ªç”¨æˆ·ç»„ï¼›ä¸€ä¸ªç»„ä¸­å¯ä»¥æœ‰å¤šä¸ªç”¨æˆ·ï¼Œä¸€ä¸ªç”¨æˆ·ä¹Ÿå¯ä»¥å±äºä¸åŒçš„ç»„ã€‚</p><p>å½“ä¸€ä¸ªç”¨æˆ·åŒæ—¶æ˜¯å¤šä¸ªç»„ä¸­çš„æˆå‘˜æ—¶ï¼Œåœ¨/etc/passwdæ–‡ä»¶ä¸­è®°å½•çš„æ˜¯ç”¨æˆ·æ‰€å±çš„ä¸»ç»„ï¼Œä¹Ÿå°±æ˜¯ç™»å½•æ—¶æ‰€å±çš„é»˜è®¤ç»„ï¼Œè€Œå…¶ä»–ç»„ç§°ä¸ºé™„åŠ ç»„ã€‚</p><p>ç”¨æˆ·è¦è®¿é—®å±äºé™„åŠ ç»„çš„æ–‡ä»¶æ—¶ï¼Œå¿…é¡»é¦–å…ˆä½¿ç”¨newgrpå‘½ä»¤ä½¿è‡ªå·±æˆä¸ºæ‰€è¦è®¿é—®çš„ç»„ä¸­çš„æˆå‘˜ã€‚</p><p>ç”¨æˆ·ç»„çš„æ‰€æœ‰ä¿¡æ¯éƒ½å­˜æ”¾åœ¨/etc/groupæ–‡ä»¶ä¸­ã€‚æ­¤æ–‡ä»¶çš„æ ¼å¼ä¹Ÿç±»ä¼¼äº/etc/passwdæ–‡ä»¶ï¼Œç”±å†’å·(:)éš”å¼€è‹¥å¹²ä¸ªå­—æ®µï¼Œè¿™äº›å­—æ®µæœ‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç»„å:å£ä»¤:ç»„æ ‡è¯†å·:ç»„å†…ç”¨æˆ·åˆ—è¡¨</span><br></pre></td></tr></table></figure><ol><li><p>â€œç»„åâ€æ˜¯ç”¨æˆ·ç»„çš„åç§°ï¼Œç”±å­—æ¯æˆ–æ•°å­—æ„æˆã€‚ä¸/etc/passwdä¸­çš„ç™»å½•åä¸€æ ·ï¼Œç»„åä¸åº”é‡å¤ã€‚</p></li><li><p>â€œå£ä»¤â€å­—æ®µå­˜æ”¾çš„æ˜¯ç”¨æˆ·ç»„åŠ å¯†åçš„å£ä»¤å­—ã€‚ä¸€èˆ¬Linux ç³»ç»Ÿçš„ç”¨æˆ·ç»„éƒ½æ²¡æœ‰å£ä»¤ï¼Œå³è¿™ä¸ªå­—æ®µä¸€èˆ¬ä¸ºç©ºï¼Œæˆ–è€…æ˜¯*ã€‚</p></li><li><p>â€œç»„æ ‡è¯†å·â€ä¸ç”¨æˆ·æ ‡è¯†å·ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œè¢«ç³»ç»Ÿå†…éƒ¨ç”¨æ¥æ ‡è¯†ç»„ã€‚</p></li><li><p>â€œç»„å†…ç”¨æˆ·åˆ—è¡¨â€æ˜¯å±äºè¿™ä¸ªç»„çš„æ‰€æœ‰ç”¨æˆ·çš„åˆ—è¡¨/b]ï¼Œä¸åŒç”¨æˆ·ä¹‹é—´ç”¨é€—å·(,)åˆ†éš”ã€‚è¿™ä¸ªç”¨æˆ·ç»„å¯èƒ½æ˜¯ç”¨æˆ·çš„ä¸»ç»„ï¼Œä¹Ÿå¯èƒ½æ˜¯é™„åŠ ç»„ã€‚</p></li></ol><h2 id="ç£ç›˜ç®¡ç†"><a href="#ç£ç›˜ç®¡ç†" class="headerlink" title="ç£ç›˜ç®¡ç†"></a>ç£ç›˜ç®¡ç†</h2><h3 id="æ¦‚è¿°-1"><a href="#æ¦‚è¿°-1" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h3><p>Linuxç£ç›˜ç®¡ç†å¥½åç›´æ¥å…³ç³»åˆ°æ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½é—®é¢˜ã€‚</p><p>Linuxç£ç›˜ç®¡ç†å¸¸ç”¨å‘½ä»¤ä¸º dfã€duã€‚</p><ul><li>df ï¼šåˆ—å‡ºæ–‡ä»¶ç³»ç»Ÿçš„æ•´ä½“ç£ç›˜ä½¿ç”¨é‡</li><li>duï¼šæ£€æŸ¥ç£ç›˜ç©ºé—´ä½¿ç”¨é‡</li></ul><h3 id="df"><a href="#df" class="headerlink" title="df"></a>df</h3><p><a href="https://imgtu.com/i/jGNT54"><img src="https://s1.ax1x.com/2022/07/04/jGNT54.png" alt="jGNT54.png"></a></p><p>dfå‘½ä»¤å‚æ•°åŠŸèƒ½ï¼šæ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ç©ºé—´å ç”¨æƒ…å†µã€‚å¯ä»¥åˆ©ç”¨è¯¥å‘½ä»¤æ¥è·å–ç¡¬ç›˜è¢«å ç”¨äº†å¤šå°‘ç©ºé—´ï¼Œç›®å‰è¿˜å‰©ä¸‹å¤šå°‘ç©ºé—´ç­‰ä¿¡æ¯ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">df</span> [-ahikHTm] [ç›®å½•æˆ–æ–‡ä»¶å]</span><br></pre></td></tr></table></figure><p>é€‰é¡¹ä¸å‚æ•°ï¼š</p><ul><li>-a ï¼šåˆ—å‡ºæ‰€æœ‰çš„æ–‡ä»¶ç³»ç»Ÿï¼ŒåŒ…æ‹¬ç³»ç»Ÿç‰¹æœ‰çš„ /proc ç­‰æ–‡ä»¶ç³»ç»Ÿï¼›</li><li>-k ï¼šä»¥ KBytes çš„å®¹é‡æ˜¾ç¤ºå„æ–‡ä»¶ç³»ç»Ÿï¼›</li><li>-m ï¼šä»¥ MBytes çš„å®¹é‡æ˜¾ç¤ºå„æ–‡ä»¶ç³»ç»Ÿï¼›</li><li>-h ï¼šä»¥äººä»¬è¾ƒæ˜“é˜…è¯»çš„ GBytes, MBytes, KBytes ç­‰æ ¼å¼è‡ªè¡Œæ˜¾ç¤ºï¼›</li><li>-H ï¼šä»¥ M=1000K å–ä»£ M=1024K çš„è¿›ä½æ–¹å¼ï¼›</li><li>-T ï¼šæ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿç±»å‹, è¿åŒè¯¥ partition çš„ filesystem åç§° (ä¾‹å¦‚ ext3) ä¹Ÿåˆ—å‡ºï¼›</li><li>-i ï¼šä¸ç”¨ç¡¬ç›˜å®¹é‡ï¼Œè€Œä»¥ inode çš„æ•°é‡æ¥æ˜¾ç¤º</li></ul><p>æµ‹è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°†ç³»ç»Ÿå†…æ‰€æœ‰çš„æ–‡ä»¶ç³»ç»Ÿåˆ—å‡ºæ¥ï¼</span></span><br><span class="line"><span class="comment"># åœ¨ Linux åº•ä¸‹å¦‚æœ df æ²¡æœ‰åŠ ä»»ä½•é€‰é¡¹</span></span><br><span class="line"><span class="comment"># é‚£ä¹ˆé»˜è®¤ä¼šå°†ç³»ç»Ÿå†…æ‰€æœ‰çš„ (ä¸å«ç‰¹æ®Šå†…å­˜å†…çš„æ–‡ä»¶ç³»ç»Ÿä¸ swap) éƒ½ä»¥ 1 Kbytes çš„å®¹é‡æ¥åˆ—å‡ºæ¥ï¼</span></span><br><span class="line">[root@kuangshen /]<span class="comment"># df</span></span><br><span class="line">Filesystem     1K-blocks   Used Available Use% Mounted on</span><br><span class="line">devtmpfs          889100       0    889100   0% /dev</span><br><span class="line">tmpfs             899460     704    898756   1% /dev/shm</span><br><span class="line">tmpfs             899460     496    898964   1% /run</span><br><span class="line">tmpfs             899460       0    899460   0% /sys/fs/cgroup</span><br><span class="line">/dev/vda1       41152812 6586736  32662368  17% /</span><br><span class="line">tmpfs             179896       0    179896   0% /run/user/0</span><br><span class="line"><span class="comment"># å°†å®¹é‡ç»“æœä»¥æ˜“è¯»çš„å®¹é‡æ ¼å¼æ˜¾ç¤ºå‡ºæ¥</span></span><br><span class="line">[root@kuangshen /]<span class="comment"># df -h</span></span><br><span class="line">Filesystem     Size Used Avail Use% Mounted on</span><br><span class="line">devtmpfs       869M     0 869M   0% /dev</span><br><span class="line">tmpfs           879M 708K 878M   1% /dev/shm</span><br><span class="line">tmpfs           879M 496K 878M   1% /run</span><br><span class="line">tmpfs           879M     0 879M   0% /sys/fs/cgroup</span><br><span class="line">/dev/vda1       40G  6.3G   32G  17% /</span><br><span class="line">tmpfs           176M     0 176M   0% /run/user/0</span><br><span class="line"><span class="comment"># å°†ç³»ç»Ÿå†…çš„æ‰€æœ‰ç‰¹æ®Šæ–‡ä»¶æ ¼å¼åŠåç§°éƒ½åˆ—å‡ºæ¥</span></span><br><span class="line">[root@kuangshen /]<span class="comment"># df -aT</span></span><br><span class="line">Filesystem     Type       1K-blocks   Used Available Use% Mounted on</span><br><span class="line">sysfs         sysfs               0       0         0    - /sys</span><br><span class="line">proc           proc                0       0         0    - /proc</span><br><span class="line">devtmpfs       devtmpfs       889100       0    889100   0% /dev</span><br><span class="line">securityfs     securityfs          0       0         0    - /sys/kernel/security</span><br><span class="line">tmpfs         tmpfs          899460     708    898752   1% /dev/shm</span><br><span class="line">devpts         devpts              0       0         0    - /dev/pts</span><br><span class="line">tmpfs         tmpfs          899460     496    898964   1% /run</span><br><span class="line">tmpfs         tmpfs          899460       0    899460   0% /sys/fs/cgroup</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/systemd</span><br><span class="line">pstore         pstore              0       0         0    - /sys/fs/pstore</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/freezer</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/cpuset</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/hugetlb</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/blkio</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/net_cls,net_prio</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/memory</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/pids</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/cpu,cpuacct</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/devices</span><br><span class="line">cgroup         cgroup              0       0         0    - /sys/fs/cgroup/perf_event</span><br><span class="line">configfs       configfs            0       0         0    - /sys/kernel/config</span><br><span class="line">/dev/vda1     ext4         41152812 6586748  32662356  17% /</span><br><span class="line">systemd-1      -                   -       -         -    - /proc/sys/fs/binfmt_misc</span><br><span class="line">mqueue         mqueue              0       0         0    - /dev/mqueue</span><br><span class="line">debugfs       debugfs             0       0         0    - /sys/kernel/debug</span><br><span class="line">hugetlbfs     hugetlbfs           0       0         0    - /dev/hugepages</span><br><span class="line">tmpfs         tmpfs          179896       0    179896   0% /run/user/0</span><br><span class="line">binfmt_misc   binfmt_misc         0       0         0    - /proc/sys/fs/binfmt_misc</span><br><span class="line"><span class="comment"># å°† /etc åº•ä¸‹çš„å¯ç”¨çš„ç£ç›˜å®¹é‡ä»¥æ˜“è¯»çš„å®¹é‡æ ¼å¼æ˜¾ç¤º</span></span><br><span class="line"></span><br><span class="line">[root@kuangshen /]<span class="comment"># df -h /etc</span></span><br><span class="line">Filesystem     Size Used Avail Use% Mounted on</span><br><span class="line">/dev/vda1       40G  6.3G   32G  17% /</span><br></pre></td></tr></table></figure><h3 id="du"><a href="#du" class="headerlink" title="du"></a>du</h3><p><a href="https://imgtu.com/i/jGNoaF"><img src="https://s1.ax1x.com/2022/07/04/jGNoaF.png" alt="jGNoaF.png"></a></p><p>Linux duå‘½ä»¤ä¹Ÿæ˜¯æŸ¥çœ‹ä½¿ç”¨ç©ºé—´çš„ï¼Œä½†æ˜¯ä¸dfå‘½ä»¤ä¸åŒçš„æ˜¯Linux duå‘½ä»¤æ˜¯å¯¹æ–‡ä»¶å’Œç›®å½•ç£ç›˜ä½¿ç”¨çš„ç©ºé—´çš„æŸ¥çœ‹ï¼Œè¿˜æ˜¯å’Œdfå‘½ä»¤æœ‰ä¸€äº›åŒºåˆ«çš„ï¼Œè¿™é‡Œä»‹ç»Linux duå‘½ä»¤ã€‚</p><p>è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">du</span> [-ahskm] æ–‡ä»¶æˆ–ç›®å½•åç§°</span><br></pre></td></tr></table></figure><p>é€‰é¡¹ä¸å‚æ•°ï¼š</p><ul><li>-a ï¼šåˆ—å‡ºæ‰€æœ‰çš„æ–‡ä»¶ä¸ç›®å½•å®¹é‡ï¼Œå› ä¸ºé»˜è®¤ä»…ç»Ÿè®¡ç›®å½•åº•ä¸‹çš„æ–‡ä»¶é‡è€Œå·²ã€‚</li><li>-h ï¼šä»¥äººä»¬è¾ƒæ˜“è¯»çš„å®¹é‡æ ¼å¼ (G/M) æ˜¾ç¤ºï¼›</li><li>-s ï¼šåˆ—å‡ºæ€»é‡è€Œå·²ï¼Œè€Œä¸åˆ—å‡ºæ¯ä¸ªå„åˆ«çš„ç›®å½•å ç”¨å®¹é‡ï¼›</li><li>-S ï¼šä¸åŒ…æ‹¬å­ç›®å½•ä¸‹çš„æ€»è®¡ï¼Œä¸ -s æœ‰ç‚¹å·®åˆ«ã€‚</li><li>-k ï¼šä»¥ KBytes åˆ—å‡ºå®¹é‡æ˜¾ç¤ºï¼›</li><li>-m ï¼šä»¥ MBytes åˆ—å‡ºå®¹é‡æ˜¾ç¤ºï¼›</li></ul><p>æµ‹è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åªåˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤¹å®¹é‡ï¼ˆåŒ…æ‹¬éšè—æ–‡ä»¶å¤¹ï¼‰:</span></span><br><span class="line"><span class="comment"># ç›´æ¥è¾“å…¥ du æ²¡æœ‰åŠ ä»»ä½•é€‰é¡¹æ—¶ï¼Œåˆ™ du ä¼šåˆ†æå½“å‰æ‰€åœ¨ç›®å½•çš„æ–‡ä»¶ä¸ç›®å½•æ‰€å ç”¨çš„ç¡¬ç›˜ç©ºé—´ã€‚</span></span><br><span class="line">[root@kuangshen home]<span class="comment"># du</span></span><br><span class="line">16./redis</span><br><span class="line">8./www/.oracle_jre_usage  <span class="comment"># åŒ…æ‹¬éšè—æ–‡ä»¶çš„ç›®å½•</span></span><br><span class="line">24./www</span><br><span class="line">48.                        <span class="comment"># è¿™ä¸ªç›®å½•(.)æ‰€å ç”¨çš„æ€»é‡</span></span><br><span class="line"><span class="comment"># å°†æ–‡ä»¶çš„å®¹é‡ä¹Ÿåˆ—å‡ºæ¥</span></span><br><span class="line">[root@kuangshen home]<span class="comment"># du -a</span></span><br><span class="line">4./redis/.bash_profile</span><br><span class="line">4./redis/.bash_logout    </span><br><span class="line">....ä¸­é—´çœç•¥....</span><br><span class="line">4./kuangstudy.txt <span class="comment"># æœ‰æ–‡ä»¶çš„åˆ—è¡¨äº†</span></span><br><span class="line">48.</span><br><span class="line"><span class="comment"># æ£€æŸ¥æ ¹ç›®å½•åº•ä¸‹æ¯ä¸ªç›®å½•æ‰€å ç”¨çš„å®¹é‡</span></span><br><span class="line">[root@kuangshen home]<span class="comment"># du -sm /*</span></span><br><span class="line">0/bin</span><br><span class="line">146/boot</span><br><span class="line">.....ä¸­é—´çœç•¥....</span><br><span class="line">0/proc</span><br><span class="line">.....ä¸­é—´çœç•¥....</span><br><span class="line">1/tmp</span><br><span class="line">3026/usr  <span class="comment"># ç³»ç»ŸåˆæœŸæœ€å¤§å°±æ˜¯ä»–äº†å•¦ï¼</span></span><br><span class="line">513/var</span><br><span class="line">2666/www</span><br></pre></td></tr></table></figure><p>é€šé…ç¬¦ * æ¥ä»£è¡¨æ¯ä¸ªç›®å½•ã€‚</p><p>ä¸ df ä¸ä¸€æ ·çš„æ˜¯ï¼Œdu è¿™ä¸ªå‘½ä»¤å…¶å®ä¼šç›´æ¥åˆ°æ–‡ä»¶ç³»ç»Ÿå†…å»æœå¯»æ‰€æœ‰çš„æ–‡ä»¶æ•°æ®ã€‚</p><h3 id="ç£ç›˜æŒ‚è½½ä¸å¸é™¤"><a href="#ç£ç›˜æŒ‚è½½ä¸å¸é™¤" class="headerlink" title="ç£ç›˜æŒ‚è½½ä¸å¸é™¤"></a>ç£ç›˜æŒ‚è½½ä¸å¸é™¤</h3><p><a href="https://imgtu.com/i/jGNHPJ"><img src="https://s1.ax1x.com/2022/07/04/jGNHPJ.png" alt="jGNHPJ.png"></a></p><p>æ ¹æ–‡ä»¶ç³»ç»Ÿä¹‹å¤–çš„å…¶ä»–æ–‡ä»¶è¦æƒ³èƒ½å¤Ÿè¢«è®¿é—®ï¼Œéƒ½å¿…é¡»é€šè¿‡â€œå…³è”â€è‡³æ ¹æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æŸä¸ªç›®å½•æ¥å®ç°ï¼Œæ­¤å…³è”æ“ä½œå³ä¸ºâ€œæŒ‚è½½â€ï¼Œæ­¤ç›®å½•å³ä¸ºâ€œæŒ‚è½½ç‚¹â€,è§£é™¤æ­¤å…³è”å…³ç³»çš„è¿‡ç¨‹ç§°ä¹‹ä¸ºâ€œå¸è½½â€</p><p>Linux çš„ç£ç›˜æŒ‚è½½ä½¿ç”¨mountå‘½ä»¤ï¼Œå¸è½½ä½¿ç”¨umountå‘½ä»¤ã€‚</p><p>ç£ç›˜æŒ‚è½½è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount [-t æ–‡ä»¶ç³»ç»Ÿ] [-L Labelå] [-o é¢å¤–é€‰é¡¹] [-n] è£…ç½®æ–‡ä»¶å æŒ‚è½½ç‚¹</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°† /dev/hdc6 æŒ‚è½½åˆ° /mnt/hdc6 ä¸Šé¢ï¼</span></span><br><span class="line">[root@www ~]<span class="comment"># mkdir /mnt/hdc6</span></span><br><span class="line">[root@www ~]<span class="comment"># mount /dev/hdc6 /mnt/hdc6</span></span><br><span class="line">[root@www ~]<span class="comment"># df</span></span><br><span class="line">Filesystem           1K-blocks     Used Available Use% Mounted on</span><br><span class="line">/dev/hdc6              1976312     42072   1833836   3% /mnt/hdc6</span><br></pre></td></tr></table></figure><p>ç£ç›˜å¸è½½å‘½ä»¤ umount è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">umount [-fn] è£…ç½®æ–‡ä»¶åæˆ–æŒ‚è½½ç‚¹</span><br></pre></td></tr></table></figure><p>é€‰é¡¹ä¸å‚æ•°ï¼š</p><ul><li>-f ï¼šå¼ºåˆ¶å¸é™¤ï¼å¯ç”¨åœ¨ç±»ä¼¼ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿ (NFS) æ— æ³•è¯»å–åˆ°çš„æƒ…å†µä¸‹ï¼›</li><li>-n ï¼šä¸å‡çº§ /etc/mtab æƒ…å†µä¸‹å¸é™¤ã€‚</li></ul><p>å¸è½½/dev/hdc6</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]<span class="comment"># umount /dev/hdc6</span></span><br></pre></td></tr></table></figure><h2 id="è¿›ç¨‹ç®¡ç†"><a href="#è¿›ç¨‹ç®¡ç†" class="headerlink" title="è¿›ç¨‹ç®¡ç†"></a>è¿›ç¨‹ç®¡ç†</h2><p>å¯¹äºæˆ‘ä»¬å¼€å‘äººå‘˜æ¥è¯´ï¼Œå…¶å®Linuxæ›´å¤šåå‘äºä½¿ç”¨å³å¯</p><h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><p>1ã€åœ¨Linuxä¸­ï¼Œæ¯ä¸€ä¸ªç¨‹åºéƒ½æ˜¯æœ‰è‡ªå·±çš„ä¸€ä¸ªè¿›ç¨‹ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªidå·</p><p>2ã€æ¯ä¸€ä¸ªè¿›ç¨‹å‘¢ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªçˆ¶è¿›ç¨‹</p><p>3ã€è¿›ç¨‹å¯ä»¥æœ‰ä¸¤ç§å­˜åœ¨æ–¹å¼:å‰å°!åå°è¿è¡Œ</p><p>4ã€ä¸€èˆ¬çš„è¯æœåŠ¡éƒ½æ˜¯åå°è¿è¡Œçš„ï¼ŒåŸºæœ¬çš„ç¨‹åºéƒ½æ˜¯å‰å°è¿è¡Œçš„</p><h3 id="åŸºæœ¬å‘½ä»¤"><a href="#åŸºæœ¬å‘½ä»¤" class="headerlink" title="åŸºæœ¬å‘½ä»¤"></a>åŸºæœ¬å‘½ä»¤</h3><p><strong>psï¼ˆå¸¸ç”¨ï¼‰</strong> æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­æ­£åœ¨æ‰§è¡Œçš„å„ç§è¿›ç¨‹çš„ä¿¡æ¯</p><p>ps-xx:</p><ul><li>-a æ˜¾ç¤ºå½“å‰ç»ˆç«¯è¿è¡Œçš„æ‰€æœ‰çš„è¿›ç¨‹ä¿¡æ¯ï¼ˆå•ç‹¬ä½¿ç”¨æ—¶æ˜¯æŸ¥çœ‹å½“å‰çš„è¿›ç¨‹ï¼‰</li><li>-u ä»¥ç”¨æˆ·çš„ä¿¡æ¯æ˜¾ç¤ºè¿›ç¨‹</li><li>-x æ˜¾ç¤ºåå°è¿è¡Œè¿›ç¨‹çš„å‚æ•°</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ps -aux æŸ¥çœ‹æ‰€æœ‰çš„è¿›ç¨‹</span></span><br><span class="line">ps -aux | grep mysql</span><br><span class="line"></span><br><span class="line"><span class="comment"># |  åœ¨Linuxä¸­è¿™ä¸ª(|)å«åšç®¡é“ç¬¦     A|Bï¼šå°†Aå‘½ä»¤çš„ä¸€ä¸ªç»“æœä½œä¸ºè¾“å‡ºå»æ“ä½œBå‘½ä»¤</span></span><br><span class="line"><span class="comment"># grep æŸ¥æ‰¾æ–‡ä»¶ä¸­ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²</span></span><br></pre></td></tr></table></figure><p>å¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œè¿™é‡Œç›®å‰åªéœ€è¦è®°ä½ä¸€ä¸ªå‘½ä»¤å³å¯ï¼šps -xx|grep è¿›ç¨‹åå­—  è¿‡æ»¤è¿›ç¨‹ä¿¡æ¯</p><p><strong>ps -efï¼šå¯ä»¥æŸ¥çœ‹åˆ°çˆ¶è¿›ç¨‹çš„ä¿¡æ¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep mysql <span class="comment">#æŸ¥çœ‹çˆ¶è¿›ç¨‹æˆ‘ä»¬ä¸€èˆ¬å¯ä»¥é€šè¿‡ç›®å½•æ ‘ç»“æ„æ¥æŸ¥çœ‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿›ç¨‹æ ‘</span></span><br><span class="line">pstree -pu</span><br><span class="line">-p  æ˜¾ç¤ºçˆ¶<span class="built_in">id</span></span><br><span class="line">-u  æ˜¾ç¤ºç”¨æˆ·ç»„</span><br></pre></td></tr></table></figure><p><a href="https://imgtu.com/i/jGNq2R"><img src="https://s1.ax1x.com/2022/07/04/jGNq2R.png" alt="jGNq2R.png"></a></p><p>ç»“æŸè¿›ç¨‹:æ€æ‰è¿›ç¨‹ï¼Œç­‰ä»·äºwindowç»“æŸä»»åŠ¡</p><p>kill -9è¿›ç¨‹çš„id</p><p>æˆ‘ä»¬å¹³æ—¶å†™çš„ä¸€ä¸ªJavaä»£ç æ­»å¾ªç¯äº†ï¼Œå¯ä»¥é€‰æ‹©ç»“æŸè¿›ç¨‹ï¼Œæ€è¿›ç¨‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> -9 è¿›ç¨‹çš„<span class="built_in">id</span></span><br><span class="line"><span class="comment"># è¡¨ç¤ºå¼ºåˆ¶ç»“æŸè¯¥è¿›ç¨‹</span></span><br></pre></td></tr></table></figure><p>æ€»ç»“ï¼š</p><p>Linuxä¸­ä¸€åˆ‡çš†æ–‡ä»¶ï¼š<strong>(æ–‡ä»¶âˆ¶è¯»å†™æ‰§è¡Œ(æŸ¥çœ‹ï¼Œåˆ›å»ºï¼Œåˆ é™¤ï¼Œç§»åŠ¨ï¼Œå¤åˆ¶ï¼Œç¼–è¾‘ï¼‰ï¼Œæƒé™ï¼ˆç”¨æˆ·ã€ç”¨æˆ·ç»„)ã€‚ç³»ç»Ÿï¸°ï¼ˆç£ç›˜ï¼Œè¿›ç¨‹ï¼‰)</strong></p><h1 id="ç¯å¢ƒå®‰è£…"><a href="#ç¯å¢ƒå®‰è£…" class="headerlink" title="ç¯å¢ƒå®‰è£…"></a>ç¯å¢ƒå®‰è£…</h1><p>å®‰è£…è½¯ä»¶ä¸€èˆ¬æœ‰ä¸‰ç§æ–¹å¼:</p><ul><li>rpm ( Jdk:åœ¨çº¿å‘å¸ƒä¸€ä¸ªSringBooté¡¹ç›®)</li><li>è§£å‹ç¼©( tomcatï¼Œå¯åŠ¨å¹¶é€šè¿‡å¤–ç½‘è®¿é—®ï¼Œå‘å¸ƒç½‘ç«™)</li><li>yumåœ¨çº¿å®‰è£…(docker:ç›´æ¥å®‰è£…è¿è¡Œè·‘èµ·æ¥dockerå°±å¯ä»¥) </li></ul><h2 id="jdkå®‰è£…ï¼ˆrpmå®‰è£…ï¼‰"><a href="#jdkå®‰è£…ï¼ˆrpmå®‰è£…ï¼‰" class="headerlink" title="jdkå®‰è£…ï¼ˆrpmå®‰è£…ï¼‰"></a>jdkå®‰è£…ï¼ˆrpmå®‰è£…ï¼‰</h2><p>1ã€rpmä¸‹è½½åœ°å€<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></p><p>2ã€å¦‚æœæœ‰å®‰è£…openjdk åˆ™å¸è½½</p><p><a href="https://imgtu.com/i/jGNbG9"><img src="https://s1.ax1x.com/2022/07/04/jGNbG9.png" alt="jGNbG9.png"></a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@kuangshen ~]<span class="comment"># java -version</span></span><br><span class="line">java version <span class="string">&quot;1.8.0_121&quot;</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_121-b13)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.121-b13, mixed mode)</span><br><span class="line"><span class="comment"># æ£€æŸ¥</span></span><br><span class="line">[root@kuangshen ~]<span class="comment"># rpm -qa|grep jdk</span></span><br><span class="line">jdk1.8.0_121-1.8.0_121-fcs.x86_64</span><br><span class="line"><span class="comment"># å¸è½½ -e --nodeps å¼ºåˆ¶åˆ é™¤</span></span><br><span class="line">[root@kuangshen ~]<span class="comment"># rpm -e --nodeps jdk1.8.0_121-1.8.0_121-fcs.x86_64</span></span><br><span class="line">[root@kuangshen ~]<span class="comment"># java -version</span></span><br><span class="line">-bash: /usr/bin/java: No such file or directory  <span class="comment"># OK</span></span><br></pre></td></tr></table></figure><p>3ã€å®‰è£…JDKå¹¶é…ç½®ç¯å¢ƒå˜é‡</p><p><a href="https://imgtu.com/i/jGNLx1"><img src="https://s1.ax1x.com/2022/07/04/jGNLx1.png" alt="jGNLx1.png"></a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…java rpm</span></span><br><span class="line">[root@apathy apathy]<span class="comment"># rpm -ivh jdk-8u221-linux-x64.rpm</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…å®Œæˆåé…ç½®ç¯å¢ƒå˜é‡ æ–‡ä»¶ï¼š/etc/profile</span></span><br><span class="line">JAVA_HOME=/usr/java/jdk1.8.0_333-amd64</span><br><span class="line">CLASSPATH=$JAVA_HOME$/lib:$JAVA_HOME$/jre/lib</span><br><span class="line">PATH=<span class="variable">$PATH</span>:<span class="variable">$JAVA_HOME</span>/bin</span><br><span class="line"><span class="built_in">export</span> PATH CLASSPATH JAVA_HOME</span><br><span class="line"><span class="comment"># ä¿å­˜é€€å‡º</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®©æ–°å¢çš„ç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼</span></span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯• java -version</span></span><br><span class="line">[root@apathy java]<span class="comment"># java -version</span></span><br><span class="line">java version <span class="string">&quot;1.8.0_221&quot;</span></span><br><span class="line">Java(TM) SE Runtime Environment (build 1.8.0_221-b11)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.221-b11, mixed mode)</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„ï¼šåœ¨Linuxä¸­é…ç½®ç¯å¢ƒå˜é‡ä¸åº”è¯¥ä½¿ç”¨%ï¼Œåº”è¯¥ç”¨$,åˆ†éš”ç¬¦ä¹Ÿä¸æ˜¯åˆ†å·;,è€Œæ˜¯è‹±æ–‡çš„å†’å·:</strong></p><p><strong>é…ç½®ç¯å¢ƒå˜é‡å‰å…ˆçœ‹ä¸‹æœ‰æ²¡æœ‰ç¯å¢ƒå˜é‡ï¼Œå› ä¸ºé˜¿é‡Œäº‘ä½¿ç”¨rpmå®‰è£…jdkå¯èƒ½ä¼šè‡ªåŠ¨å¸®ä½ é…å¥½</strong></p><h2 id="Tomcatå®‰è£…ï¼ˆè§£å‹ç¼©å®‰è£…ï¼‰"><a href="#Tomcatå®‰è£…ï¼ˆè§£å‹ç¼©å®‰è£…ï¼‰" class="headerlink" title="Tomcatå®‰è£…ï¼ˆè§£å‹ç¼©å®‰è£…ï¼‰"></a>Tomcatå®‰è£…ï¼ˆè§£å‹ç¼©å®‰è£…ï¼‰</h2><p>1ã€å®‰è£…å¥½äº†Javaç¯å¢ƒåæˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸‹Tomcatï¼å‡†å¤‡å¥½Tomcatçš„å®‰è£…åŒ…ï¼</p><p>2ã€å°†æ–‡ä»¶ç§»åŠ¨åˆ°/usr/tomcat/ä¸‹ï¼Œå¹¶è§£å‹ï¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@kuangshen kuangshen]<span class="comment"># mv apache-tomcat-9.0.22.tar.gz /usr</span></span><br><span class="line">[root@kuangshen kuangshen]<span class="comment"># cd /usr</span></span><br><span class="line">[root@kuangshen usr]<span class="comment"># ls</span></span><br><span class="line">apache-tomcat-9.0.22.tar.gz</span><br><span class="line">[root@kuangshen usr]<span class="comment"># tar -zxvf apache-tomcat-9.0.22.tar.gz   # è§£å‹</span></span><br></pre></td></tr></table></figure><p>3ã€è¿è¡ŒTomcatï¼Œè¿›å…¥binç›®å½•ï¼Œå’Œæˆ‘ä»¬ä»¥å‰åœ¨Windowsä¸‹çœ‹çš„éƒ½æ˜¯ä¸€æ ·çš„</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰§è¡Œï¼šstartup.sh --&gt;å¯åŠ¨tomcat</span></span><br><span class="line"><span class="comment"># æ‰§è¡Œï¼šshutdown.sh --&gt;å…³é—­tomcat</span></span><br><span class="line">./startup.sh</span><br><span class="line">./shutdown.sh</span><br></pre></td></tr></table></figure><p>4ã€ç¡®ä¿Linuxçš„é˜²ç«å¢™ç«¯å£æ˜¯å¼€å¯çš„ï¼Œå¦‚æœæ˜¯é˜¿é‡Œäº‘ï¼Œéœ€è¦ä¿è¯é˜¿é‡Œäº‘çš„å®‰å…¨ç»„ç­–ç•¥æ˜¯å¼€æ”¾çš„ï¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹firewallæœåŠ¡çŠ¶æ€</span></span><br><span class="line">systemctl status firewalld</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å¯ã€é‡å¯ã€å…³é—­ã€firewalld.serviceæœåŠ¡</span></span><br><span class="line"><span class="comment"># å¼€å¯</span></span><br><span class="line">service firewalld start</span><br><span class="line"><span class="comment"># é‡å¯</span></span><br><span class="line">service firewalld restart</span><br><span class="line"><span class="comment"># å…³é—­</span></span><br><span class="line">service firewalld stop</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹é˜²ç«å¢™è§„åˆ™</span></span><br><span class="line">firewall-cmd --list-all    <span class="comment"># æŸ¥çœ‹å…¨éƒ¨ä¿¡æ¯</span></span><br><span class="line">firewall-cmd --list-ports  <span class="comment"># åªçœ‹ç«¯å£ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å¯ç«¯å£</span></span><br><span class="line">å¼€ç«¯å£å‘½ä»¤ï¼šfirewall-cmd --zone=public --add-port=80/tcp --permanent</span><br><span class="line">é‡å¯é˜²ç«å¢™ï¼šsystemctl restart firewalld.service</span><br><span class="line"></span><br><span class="line">å‘½ä»¤å«ä¹‰ï¼š</span><br><span class="line">--zone <span class="comment">#ä½œç”¨åŸŸ</span></span><br><span class="line">--add-port=80/tcp  <span class="comment">#æ·»åŠ ç«¯å£ï¼Œæ ¼å¼ä¸ºï¼šç«¯å£/é€šè®¯åè®®</span></span><br><span class="line">--permanent   <span class="comment">#æ°¸ä¹…ç”Ÿæ•ˆï¼Œæ²¡æœ‰æ­¤å‚æ•°é‡å¯åå¤±æ•ˆ</span></span><br></pre></td></tr></table></figure><h2 id="å®‰è£…Dockerï¼ˆyumå®‰è£…ï¼‰"><a href="#å®‰è£…Dockerï¼ˆyumå®‰è£…ï¼‰" class="headerlink" title="å®‰è£…Dockerï¼ˆyumå®‰è£…ï¼‰"></a>å®‰è£…Dockerï¼ˆyumå®‰è£…ï¼‰</h2><blockquote><p>åŸºäº CentOS 7 å®‰è£…</p></blockquote><ol><li><p>å®˜ç½‘å®‰è£…å‚è€ƒæ‰‹å†Œï¼š<a href="https://docs.docker.com/install/linux/docker-ce/centos/">https://docs.docker.com/install/linux/docker-ce/centos/</a></p></li><li><p>ç¡®å®šä½ æ˜¯CentOS7åŠä»¥ä¸Šç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@192 Desktop]<span class="comment"># cat /etc/redhat-release</span></span><br><span class="line">CentOS Linux release 7.2.1511 (Core)</span><br></pre></td></tr></table></figure></li><li><p>yumå®‰è£…gccç›¸å…³ï¼ˆéœ€è¦ç¡®ä¿ è™šæ‹Ÿæœºå¯ä»¥ä¸Šå¤–ç½‘ ï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum -y install gcc</span><br><span class="line">yum -y install gcc-c++</span><br></pre></td></tr></table></figure></li><li><p>å¸è½½æ—§ç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">yum -y remove docker docker-common docker-selinux docker-engine</span><br><span class="line"><span class="comment"># å®˜ç½‘ç‰ˆæœ¬</span></span><br><span class="line">yum remove docker \</span><br><span class="line">          docker-client \</span><br><span class="line">          docker-client-latest \</span><br><span class="line">          docker-common \</span><br><span class="line">          docker-latest \</span><br><span class="line">          docker-latest-logrotate \</span><br><span class="line">          docker-logrotate \</span><br><span class="line">          docker-engine</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…éœ€è¦çš„è½¯ä»¶åŒ…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure></li><li><p>è®¾ç½®stableé•œåƒä»“åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é”™è¯¯</span></span><br><span class="line">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line"><span class="comment">## æŠ¥é”™</span></span><br><span class="line">[Errno 14] curl<span class="comment">#35 - TCP connection reset by peer</span></span><br><span class="line">[Errno 12] curl<span class="comment">#35 - Timeout</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ­£ç¡®æ¨èä½¿ç”¨å›½å†…çš„</span></span><br><span class="line">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br></pre></td></tr></table></figure></li><li><p>æ›´æ–°yumè½¯ä»¶åŒ…ç´¢å¼•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum makecache fast</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…Docker CE</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨docker</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure></li><li><p>æµ‹è¯•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker version</span><br><span class="line"></span><br><span class="line">docker run hello-world</span><br><span class="line"></span><br><span class="line">docker images</span><br></pre></td></tr></table></figure></li></ol><h2 id="å®å¡”é¢æ¿å®‰è£…"><a href="#å®å¡”é¢æ¿å®‰è£…" class="headerlink" title="å®å¡”é¢æ¿å®‰è£…"></a>å®å¡”é¢æ¿å®‰è£…</h2><p><a href="https://www.bilibili.com/video/av91821322">https://www.bilibili.com/video/av91821322</a></p><hr><p>æœ¬æ•™ç¨‹æ˜¯æ ¹æ®Bç«™Upä¸»ç‹‚ç¥è¯´è®°å¾—ç¬”è®°ï¼Œæœ‰éœ€è¦æŸ¥çœ‹è§†é¢‘çš„å°ä¼™ä¼´å¯ä»¥å»çœ‹çœ‹ç‹‚ç¥çš„è§†é¢‘ï¼ŒçœŸçš„éå¸¸å¥½ï¼</p><p>ç‹‚ç¥è¯´Linuxè§†é¢‘åœ°å€ï¼š<a href="https://www.bilibili.com/video/BV187411y7hF?vd_source=ac95d1e4dae5cfd66da910c649ab5384">https://www.bilibili.com/video/BV187411y7hF?vd_source=ac95d1e4dae5cfd66da910c649ab5384</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•™ç¨‹ </tag>
            
            <tag> Linux </tag>
            
            <tag> è¿ç»´ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
